!(function (t) {
  var e = {}
  function r(n) {
    if (e[n]) return e[n].exports
    var i = (e[n] = { i: n, l: !1, exports: {} })
    return t[n].call(i.exports, i, i.exports, r), (i.l = !0), i.exports
  }
  ;(r.m = t),
    (r.c = e),
    (r.d = function (t, e, n) {
      r.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n })
    }),
    (r.r = function (t) {
      'undefined' != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }),
        Object.defineProperty(t, '__esModule', { value: !0 })
    }),
    (r.t = function (t, e) {
      if ((1 & e && (t = r(t)), 8 & e)) return t
      if (4 & e && 'object' == typeof t && t && t.__esModule) return t
      var n = Object.create(null)
      if (
        (r.r(n),
        Object.defineProperty(n, 'default', { enumerable: !0, value: t }),
        2 & e && 'string' != typeof t)
      )
        for (var i in t)
          r.d(
            n,
            i,
            function (e) {
              return t[e]
            }.bind(null, i)
          )
      return n
    }),
    (r.n = function (t) {
      var e =
        t && t.__esModule
          ? function () {
              return t.default
            }
          : function () {
              return t
            }
      return r.d(e, 'a', e), e
    }),
    (r.o = function (t, e) {
      return Object.prototype.hasOwnProperty.call(t, e)
    }),
    (r.p = ''),
    r((r.s = 14))
})([
  function (t, e, r) {
    'use strict'
    r.d(e, 'a', function () {
      return p
    })
    var n = r(1)
    /**
     * vue-class-component v7.2.3
     * (c) 2015-present Evan You
     * @license MIT
     */ function i(t) {
      return (i =
        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
          ? function (t) {
              return typeof t
            }
          : function (t) {
              return t &&
                'function' == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? 'symbol'
                : typeof t
            })(t)
    }
    function o(t, e, r) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: r,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = r),
        t
      )
    }
    function a(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) {
            for (var e = 0, r = new Array(t.length); e < t.length; e++)
              r[e] = t[e]
            return r
          }
        })(t) ||
        (function (t) {
          if (
            Symbol.iterator in Object(t) ||
            '[object Arguments]' === Object.prototype.toString.call(t)
          )
            return Array.from(t)
        })(t) ||
        (function () {
          throw new TypeError('Invalid attempt to spread non-iterable instance')
        })()
      )
    }
    function s() {
      return (
        'undefined' != typeof Reflect &&
        Reflect.defineMetadata &&
        Reflect.getOwnMetadataKeys
      )
    }
    function l(t, e) {
      u(t, e),
        Object.getOwnPropertyNames(e.prototype).forEach(function (r) {
          u(t.prototype, e.prototype, r)
        }),
        Object.getOwnPropertyNames(e).forEach(function (r) {
          u(t, e, r)
        })
    }
    function u(t, e, r) {
      ;(r
        ? Reflect.getOwnMetadataKeys(e, r)
        : Reflect.getOwnMetadataKeys(e)
      ).forEach(function (n) {
        var i = r
          ? Reflect.getOwnMetadata(n, e, r)
          : Reflect.getOwnMetadata(n, e)
        r ? Reflect.defineMetadata(n, i, t, r) : Reflect.defineMetadata(n, i, t)
      })
    }
    var c = { __proto__: [] } instanceof Array
    function p(t) {
      return function (e, r, n) {
        var i = 'function' == typeof e ? e : e.constructor
        i.__decorators__ || (i.__decorators__ = []),
          'number' != typeof n && (n = void 0),
          i.__decorators__.push(function (e) {
            return t(e, r, n)
          })
      }
    }
    function h(t, e) {
      var r = e.prototype._init
      e.prototype._init = function () {
        var e = this,
          r = Object.getOwnPropertyNames(t)
        if (t.$options.props)
          for (var n in t.$options.props) t.hasOwnProperty(n) || r.push(n)
        r.forEach(function (r) {
          '_' !== r.charAt(0) &&
            Object.defineProperty(e, r, {
              get: function () {
                return t[r]
              },
              set: function (e) {
                t[r] = e
              },
              configurable: !0,
            })
        })
      }
      var n = new e()
      e.prototype._init = r
      var i = {}
      return (
        Object.keys(n).forEach(function (t) {
          void 0 !== n[t] && (i[t] = n[t])
        }),
        i
      )
    }
    var f = [
      'data',
      'beforeCreate',
      'created',
      'beforeMount',
      'mounted',
      'beforeDestroy',
      'destroyed',
      'beforeUpdate',
      'updated',
      'activated',
      'deactivated',
      'render',
      'errorCaptured',
      'serverPrefetch',
    ]
    function d(t) {
      var e =
        arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
      e.name = e.name || t._componentTag || t.name
      var r = t.prototype
      Object.getOwnPropertyNames(r).forEach(function (t) {
        if ('constructor' !== t)
          if (f.indexOf(t) > -1) e[t] = r[t]
          else {
            var n = Object.getOwnPropertyDescriptor(r, t)
            void 0 !== n.value
              ? 'function' == typeof n.value
                ? ((e.methods || (e.methods = {}))[t] = n.value)
                : (e.mixins || (e.mixins = [])).push({
                    data: function () {
                      return o({}, t, n.value)
                    },
                  })
              : (n.get || n.set) &&
                ((e.computed || (e.computed = {}))[t] = {
                  get: n.get,
                  set: n.set,
                })
          }
      }),
        (e.mixins || (e.mixins = [])).push({
          data: function () {
            return h(this, t)
          },
        })
      var i = t.__decorators__
      i &&
        (i.forEach(function (t) {
          return t(e)
        }),
        delete t.__decorators__)
      var a = Object.getPrototypeOf(t.prototype),
        u = a instanceof n.a ? a.constructor : n.a,
        c = u.extend(e)
      return y(c, t, u), s() && l(c, t), c
    }
    var m = { prototype: !0, arguments: !0, callee: !0, caller: !0 }
    function y(t, e, r) {
      Object.getOwnPropertyNames(e).forEach(function (n) {
        if (!m[n]) {
          var o = Object.getOwnPropertyDescriptor(t, n)
          if (!o || o.configurable) {
            var a,
              s,
              l = Object.getOwnPropertyDescriptor(e, n)
            if (!c) {
              if ('cid' === n) return
              var u = Object.getOwnPropertyDescriptor(r, n)
              if (
                ((a = l.value),
                (s = i(a)),
                null != a &&
                  ('object' === s || 'function' === s) &&
                  u &&
                  u.value === l.value)
              )
                return
            }
            0, Object.defineProperty(t, n, l)
          }
        }
      })
    }
    function v(t) {
      return 'function' == typeof t
        ? d(t)
        : function (e) {
            return d(e, t)
          }
    }
    ;(v.registerHooks = function (t) {
      f.push.apply(f, a(t))
    }),
      (e.b = v)
  },
  function (t, e, r) {
    'use strict'
    ;(function (t, r) {
      /*!
       * Vue.js v2.6.11
       * (c) 2014-2019 Evan You
       * Released under the MIT License.
       */
      var n = Object.freeze({})
      function i(t) {
        return null == t
      }
      function o(t) {
        return null != t
      }
      function a(t) {
        return !0 === t
      }
      function s(t) {
        return (
          'string' == typeof t ||
          'number' == typeof t ||
          'symbol' == typeof t ||
          'boolean' == typeof t
        )
      }
      function l(t) {
        return null !== t && 'object' == typeof t
      }
      var u = Object.prototype.toString
      function c(t) {
        return '[object Object]' === u.call(t)
      }
      function p(t) {
        return '[object RegExp]' === u.call(t)
      }
      function h(t) {
        var e = parseFloat(String(t))
        return e >= 0 && Math.floor(e) === e && isFinite(t)
      }
      function f(t) {
        return (
          o(t) && 'function' == typeof t.then && 'function' == typeof t.catch
        )
      }
      function d(t) {
        return null == t
          ? ''
          : Array.isArray(t) || (c(t) && t.toString === u)
          ? JSON.stringify(t, null, 2)
          : String(t)
      }
      function m(t) {
        var e = parseFloat(t)
        return isNaN(e) ? t : e
      }
      function y(t, e) {
        for (
          var r = Object.create(null), n = t.split(','), i = 0;
          i < n.length;
          i++
        )
          r[n[i]] = !0
        return e
          ? function (t) {
              return r[t.toLowerCase()]
            }
          : function (t) {
              return r[t]
            }
      }
      var v = y('slot,component', !0),
        g = y('key,ref,slot,slot-scope,is')
      function _(t, e) {
        if (t.length) {
          var r = t.indexOf(e)
          if (r > -1) return t.splice(r, 1)
        }
      }
      var x = Object.prototype.hasOwnProperty
      function b(t, e) {
        return x.call(t, e)
      }
      function w(t) {
        var e = Object.create(null)
        return function (r) {
          return e[r] || (e[r] = t(r))
        }
      }
      var E = /-(\w)/g,
        S = w(function (t) {
          return t.replace(E, function (t, e) {
            return e ? e.toUpperCase() : ''
          })
        }),
        T = w(function (t) {
          return t.charAt(0).toUpperCase() + t.slice(1)
        }),
        I = /\B([A-Z])/g,
        C = w(function (t) {
          return t.replace(I, '-$1').toLowerCase()
        })
      var A = Function.prototype.bind
        ? function (t, e) {
            return t.bind(e)
          }
        : function (t, e) {
            function r(r) {
              var n = arguments.length
              return n
                ? n > 1
                  ? t.apply(e, arguments)
                  : t.call(e, r)
                : t.call(e)
            }
            return (r._length = t.length), r
          }
      function k(t, e) {
        e = e || 0
        for (var r = t.length - e, n = new Array(r); r--; ) n[r] = t[r + e]
        return n
      }
      function P(t, e) {
        for (var r in e) t[r] = e[r]
        return t
      }
      function M(t) {
        for (var e = {}, r = 0; r < t.length; r++) t[r] && P(e, t[r])
        return e
      }
      function L(t, e, r) {}
      var z = function (t, e, r) {
          return !1
        },
        O = function (t) {
          return t
        }
      function D(t, e) {
        if (t === e) return !0
        var r = l(t),
          n = l(e)
        if (!r || !n) return !r && !n && String(t) === String(e)
        try {
          var i = Array.isArray(t),
            o = Array.isArray(e)
          if (i && o)
            return (
              t.length === e.length &&
              t.every(function (t, r) {
                return D(t, e[r])
              })
            )
          if (t instanceof Date && e instanceof Date)
            return t.getTime() === e.getTime()
          if (i || o) return !1
          var a = Object.keys(t),
            s = Object.keys(e)
          return (
            a.length === s.length &&
            a.every(function (r) {
              return D(t[r], e[r])
            })
          )
        } catch (t) {
          return !1
        }
      }
      function R(t, e) {
        for (var r = 0; r < t.length; r++) if (D(t[r], e)) return r
        return -1
      }
      function F(t) {
        var e = !1
        return function () {
          e || ((e = !0), t.apply(this, arguments))
        }
      }
      var B = ['component', 'directive', 'filter'],
        N = [
          'beforeCreate',
          'created',
          'beforeMount',
          'mounted',
          'beforeUpdate',
          'updated',
          'beforeDestroy',
          'destroyed',
          'activated',
          'deactivated',
          'errorCaptured',
          'serverPrefetch',
        ],
        U = {
          optionMergeStrategies: Object.create(null),
          silent: !1,
          productionTip: !1,
          devtools: !1,
          performance: !1,
          errorHandler: null,
          warnHandler: null,
          ignoredElements: [],
          keyCodes: Object.create(null),
          isReservedTag: z,
          isReservedAttr: z,
          isUnknownElement: z,
          getTagNamespace: L,
          parsePlatformTagName: O,
          mustUseProp: z,
          async: !0,
          _lifecycleHooks: N,
        },
        j = /a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/
      function V(t) {
        var e = (t + '').charCodeAt(0)
        return 36 === e || 95 === e
      }
      function q(t, e, r, n) {
        Object.defineProperty(t, e, {
          value: r,
          enumerable: !!n,
          writable: !0,
          configurable: !0,
        })
      }
      var G = new RegExp('[^' + j.source + '.$_\\d]')
      var $,
        Z = '__proto__' in {},
        X = 'undefined' != typeof window,
        K = 'undefined' != typeof WXEnvironment && !!WXEnvironment.platform,
        W = K && WXEnvironment.platform.toLowerCase(),
        H = X && window.navigator.userAgent.toLowerCase(),
        J = H && /msie|trident/.test(H),
        Y = H && H.indexOf('msie 9.0') > 0,
        Q = H && H.indexOf('edge/') > 0,
        tt =
          (H && H.indexOf('android'),
          (H && /iphone|ipad|ipod|ios/.test(H)) || 'ios' === W),
        et =
          (H && /chrome\/\d+/.test(H),
          H && /phantomjs/.test(H),
          H && H.match(/firefox\/(\d+)/)),
        rt = {}.watch,
        nt = !1
      if (X)
        try {
          var it = {}
          Object.defineProperty(it, 'passive', {
            get: function () {
              nt = !0
            },
          }),
            window.addEventListener('test-passive', null, it)
        } catch (t) {}
      var ot = function () {
          return (
            void 0 === $ &&
              ($ =
                !X &&
                !K &&
                void 0 !== t &&
                t.process &&
                'server' === t.process.env.VUE_ENV),
            $
          )
        },
        at = X && window.__VUE_DEVTOOLS_GLOBAL_HOOK__
      function st(t) {
        return 'function' == typeof t && /native code/.test(t.toString())
      }
      var lt,
        ut =
          'undefined' != typeof Symbol &&
          st(Symbol) &&
          'undefined' != typeof Reflect &&
          st(Reflect.ownKeys)
      lt =
        'undefined' != typeof Set && st(Set)
          ? Set
          : (function () {
              function t() {
                this.set = Object.create(null)
              }
              return (
                (t.prototype.has = function (t) {
                  return !0 === this.set[t]
                }),
                (t.prototype.add = function (t) {
                  this.set[t] = !0
                }),
                (t.prototype.clear = function () {
                  this.set = Object.create(null)
                }),
                t
              )
            })()
      var ct = L,
        pt = 0,
        ht = function () {
          ;(this.id = pt++), (this.subs = [])
        }
      ;(ht.prototype.addSub = function (t) {
        this.subs.push(t)
      }),
        (ht.prototype.removeSub = function (t) {
          _(this.subs, t)
        }),
        (ht.prototype.depend = function () {
          ht.target && ht.target.addDep(this)
        }),
        (ht.prototype.notify = function () {
          var t = this.subs.slice()
          for (var e = 0, r = t.length; e < r; e++) t[e].update()
        }),
        (ht.target = null)
      var ft = []
      function dt(t) {
        ft.push(t), (ht.target = t)
      }
      function mt() {
        ft.pop(), (ht.target = ft[ft.length - 1])
      }
      var yt = function (t, e, r, n, i, o, a, s) {
          ;(this.tag = t),
            (this.data = e),
            (this.children = r),
            (this.text = n),
            (this.elm = i),
            (this.ns = void 0),
            (this.context = o),
            (this.fnContext = void 0),
            (this.fnOptions = void 0),
            (this.fnScopeId = void 0),
            (this.key = e && e.key),
            (this.componentOptions = a),
            (this.componentInstance = void 0),
            (this.parent = void 0),
            (this.raw = !1),
            (this.isStatic = !1),
            (this.isRootInsert = !0),
            (this.isComment = !1),
            (this.isCloned = !1),
            (this.isOnce = !1),
            (this.asyncFactory = s),
            (this.asyncMeta = void 0),
            (this.isAsyncPlaceholder = !1)
        },
        vt = { child: { configurable: !0 } }
      ;(vt.child.get = function () {
        return this.componentInstance
      }),
        Object.defineProperties(yt.prototype, vt)
      var gt = function (t) {
        void 0 === t && (t = '')
        var e = new yt()
        return (e.text = t), (e.isComment = !0), e
      }
      function _t(t) {
        return new yt(void 0, void 0, void 0, String(t))
      }
      function xt(t) {
        var e = new yt(
          t.tag,
          t.data,
          t.children && t.children.slice(),
          t.text,
          t.elm,
          t.context,
          t.componentOptions,
          t.asyncFactory
        )
        return (
          (e.ns = t.ns),
          (e.isStatic = t.isStatic),
          (e.key = t.key),
          (e.isComment = t.isComment),
          (e.fnContext = t.fnContext),
          (e.fnOptions = t.fnOptions),
          (e.fnScopeId = t.fnScopeId),
          (e.asyncMeta = t.asyncMeta),
          (e.isCloned = !0),
          e
        )
      }
      var bt = Array.prototype,
        wt = Object.create(bt)
      ;['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'].forEach(
        function (t) {
          var e = bt[t]
          q(wt, t, function () {
            for (var r = [], n = arguments.length; n--; ) r[n] = arguments[n]
            var i,
              o = e.apply(this, r),
              a = this.__ob__
            switch (t) {
              case 'push':
              case 'unshift':
                i = r
                break
              case 'splice':
                i = r.slice(2)
            }
            return i && a.observeArray(i), a.dep.notify(), o
          })
        }
      )
      var Et = Object.getOwnPropertyNames(wt),
        St = !0
      function Tt(t) {
        St = t
      }
      var It = function (t) {
        ;(this.value = t),
          (this.dep = new ht()),
          (this.vmCount = 0),
          q(t, '__ob__', this),
          Array.isArray(t)
            ? (Z
                ? (function (t, e) {
                    t.__proto__ = e
                  })(t, wt)
                : (function (t, e, r) {
                    for (var n = 0, i = r.length; n < i; n++) {
                      var o = r[n]
                      q(t, o, e[o])
                    }
                  })(t, wt, Et),
              this.observeArray(t))
            : this.walk(t)
      }
      function Ct(t, e) {
        var r
        if (l(t) && !(t instanceof yt))
          return (
            b(t, '__ob__') && t.__ob__ instanceof It
              ? (r = t.__ob__)
              : St &&
                !ot() &&
                (Array.isArray(t) || c(t)) &&
                Object.isExtensible(t) &&
                !t._isVue &&
                (r = new It(t)),
            e && r && r.vmCount++,
            r
          )
      }
      function At(t, e, r, n, i) {
        var o = new ht(),
          a = Object.getOwnPropertyDescriptor(t, e)
        if (!a || !1 !== a.configurable) {
          var s = a && a.get,
            l = a && a.set
          ;(s && !l) || 2 !== arguments.length || (r = t[e])
          var u = !i && Ct(r)
          Object.defineProperty(t, e, {
            enumerable: !0,
            configurable: !0,
            get: function () {
              var e = s ? s.call(t) : r
              return (
                ht.target &&
                  (o.depend(),
                  u && (u.dep.depend(), Array.isArray(e) && Mt(e))),
                e
              )
            },
            set: function (e) {
              var n = s ? s.call(t) : r
              e === n ||
                (e != e && n != n) ||
                (s && !l) ||
                (l ? l.call(t, e) : (r = e), (u = !i && Ct(e)), o.notify())
            },
          })
        }
      }
      function kt(t, e, r) {
        if (Array.isArray(t) && h(e))
          return (t.length = Math.max(t.length, e)), t.splice(e, 1, r), r
        if (e in t && !(e in Object.prototype)) return (t[e] = r), r
        var n = t.__ob__
        return t._isVue || (n && n.vmCount)
          ? r
          : n
          ? (At(n.value, e, r), n.dep.notify(), r)
          : ((t[e] = r), r)
      }
      function Pt(t, e) {
        if (Array.isArray(t) && h(e)) t.splice(e, 1)
        else {
          var r = t.__ob__
          t._isVue ||
            (r && r.vmCount) ||
            (b(t, e) && (delete t[e], r && r.dep.notify()))
        }
      }
      function Mt(t) {
        for (var e = void 0, r = 0, n = t.length; r < n; r++)
          (e = t[r]) && e.__ob__ && e.__ob__.dep.depend(),
            Array.isArray(e) && Mt(e)
      }
      ;(It.prototype.walk = function (t) {
        for (var e = Object.keys(t), r = 0; r < e.length; r++) At(t, e[r])
      }),
        (It.prototype.observeArray = function (t) {
          for (var e = 0, r = t.length; e < r; e++) Ct(t[e])
        })
      var Lt = U.optionMergeStrategies
      function zt(t, e) {
        if (!e) return t
        for (
          var r, n, i, o = ut ? Reflect.ownKeys(e) : Object.keys(e), a = 0;
          a < o.length;
          a++
        )
          '__ob__' !== (r = o[a]) &&
            ((n = t[r]),
            (i = e[r]),
            b(t, r) ? n !== i && c(n) && c(i) && zt(n, i) : kt(t, r, i))
        return t
      }
      function Ot(t, e, r) {
        return r
          ? function () {
              var n = 'function' == typeof e ? e.call(r, r) : e,
                i = 'function' == typeof t ? t.call(r, r) : t
              return n ? zt(n, i) : i
            }
          : e
          ? t
            ? function () {
                return zt(
                  'function' == typeof e ? e.call(this, this) : e,
                  'function' == typeof t ? t.call(this, this) : t
                )
              }
            : e
          : t
      }
      function Dt(t, e) {
        var r = e ? (t ? t.concat(e) : Array.isArray(e) ? e : [e]) : t
        return r
          ? (function (t) {
              for (var e = [], r = 0; r < t.length; r++)
                -1 === e.indexOf(t[r]) && e.push(t[r])
              return e
            })(r)
          : r
      }
      function Rt(t, e, r, n) {
        var i = Object.create(t || null)
        return e ? P(i, e) : i
      }
      ;(Lt.data = function (t, e, r) {
        return r ? Ot(t, e, r) : e && 'function' != typeof e ? t : Ot(t, e)
      }),
        N.forEach(function (t) {
          Lt[t] = Dt
        }),
        B.forEach(function (t) {
          Lt[t + 's'] = Rt
        }),
        (Lt.watch = function (t, e, r, n) {
          if ((t === rt && (t = void 0), e === rt && (e = void 0), !e))
            return Object.create(t || null)
          if (!t) return e
          var i = {}
          for (var o in (P(i, t), e)) {
            var a = i[o],
              s = e[o]
            a && !Array.isArray(a) && (a = [a]),
              (i[o] = a ? a.concat(s) : Array.isArray(s) ? s : [s])
          }
          return i
        }),
        (Lt.props = Lt.methods = Lt.inject = Lt.computed = function (
          t,
          e,
          r,
          n
        ) {
          if (!t) return e
          var i = Object.create(null)
          return P(i, t), e && P(i, e), i
        }),
        (Lt.provide = Ot)
      var Ft = function (t, e) {
        return void 0 === e ? t : e
      }
      function Bt(t, e, r) {
        if (
          ('function' == typeof e && (e = e.options),
          (function (t, e) {
            var r = t.props
            if (r) {
              var n,
                i,
                o = {}
              if (Array.isArray(r))
                for (n = r.length; n--; )
                  'string' == typeof (i = r[n]) && (o[S(i)] = { type: null })
              else if (c(r))
                for (var a in r) (i = r[a]), (o[S(a)] = c(i) ? i : { type: i })
              else 0
              t.props = o
            }
          })(e),
          (function (t, e) {
            var r = t.inject
            if (r) {
              var n = (t.inject = {})
              if (Array.isArray(r))
                for (var i = 0; i < r.length; i++) n[r[i]] = { from: r[i] }
              else if (c(r))
                for (var o in r) {
                  var a = r[o]
                  n[o] = c(a) ? P({ from: o }, a) : { from: a }
                }
              else 0
            }
          })(e),
          (function (t) {
            var e = t.directives
            if (e)
              for (var r in e) {
                var n = e[r]
                'function' == typeof n && (e[r] = { bind: n, update: n })
              }
          })(e),
          !e._base && (e.extends && (t = Bt(t, e.extends, r)), e.mixins))
        )
          for (var n = 0, i = e.mixins.length; n < i; n++)
            t = Bt(t, e.mixins[n], r)
        var o,
          a = {}
        for (o in t) s(o)
        for (o in e) b(t, o) || s(o)
        function s(n) {
          var i = Lt[n] || Ft
          a[n] = i(t[n], e[n], r, n)
        }
        return a
      }
      function Nt(t, e, r, n) {
        if ('string' == typeof r) {
          var i = t[e]
          if (b(i, r)) return i[r]
          var o = S(r)
          if (b(i, o)) return i[o]
          var a = T(o)
          return b(i, a) ? i[a] : i[r] || i[o] || i[a]
        }
      }
      function Ut(t, e, r, n) {
        var i = e[t],
          o = !b(r, t),
          a = r[t],
          s = qt(Boolean, i.type)
        if (s > -1)
          if (o && !b(i, 'default')) a = !1
          else if ('' === a || a === C(t)) {
            var l = qt(String, i.type)
            ;(l < 0 || s < l) && (a = !0)
          }
        if (void 0 === a) {
          a = (function (t, e, r) {
            if (!b(e, 'default')) return
            var n = e.default
            0
            if (
              t &&
              t.$options.propsData &&
              void 0 === t.$options.propsData[r] &&
              void 0 !== t._props[r]
            )
              return t._props[r]
            return 'function' == typeof n && 'Function' !== jt(e.type)
              ? n.call(t)
              : n
          })(n, i, t)
          var u = St
          Tt(!0), Ct(a), Tt(u)
        }
        return a
      }
      function jt(t) {
        var e = t && t.toString().match(/^\s*function (\w+)/)
        return e ? e[1] : ''
      }
      function Vt(t, e) {
        return jt(t) === jt(e)
      }
      function qt(t, e) {
        if (!Array.isArray(e)) return Vt(e, t) ? 0 : -1
        for (var r = 0, n = e.length; r < n; r++) if (Vt(e[r], t)) return r
        return -1
      }
      function Gt(t, e, r) {
        dt()
        try {
          if (e)
            for (var n = e; (n = n.$parent); ) {
              var i = n.$options.errorCaptured
              if (i)
                for (var o = 0; o < i.length; o++)
                  try {
                    if (!1 === i[o].call(n, t, e, r)) return
                  } catch (t) {
                    Zt(t, n, 'errorCaptured hook')
                  }
            }
          Zt(t, e, r)
        } finally {
          mt()
        }
      }
      function $t(t, e, r, n, i) {
        var o
        try {
          ;(o = r ? t.apply(e, r) : t.call(e)) &&
            !o._isVue &&
            f(o) &&
            !o._handled &&
            (o.catch(function (t) {
              return Gt(t, n, i + ' (Promise/async)')
            }),
            (o._handled = !0))
        } catch (t) {
          Gt(t, n, i)
        }
        return o
      }
      function Zt(t, e, r) {
        if (U.errorHandler)
          try {
            return U.errorHandler.call(null, t, e, r)
          } catch (e) {
            e !== t && Xt(e, null, 'config.errorHandler')
          }
        Xt(t, e, r)
      }
      function Xt(t, e, r) {
        if ((!X && !K) || 'undefined' == typeof console) throw t
        console.error(t)
      }
      var Kt,
        Wt = !1,
        Ht = [],
        Jt = !1
      function Yt() {
        Jt = !1
        var t = Ht.slice(0)
        Ht.length = 0
        for (var e = 0; e < t.length; e++) t[e]()
      }
      if ('undefined' != typeof Promise && st(Promise)) {
        var Qt = Promise.resolve()
        ;(Kt = function () {
          Qt.then(Yt), tt && setTimeout(L)
        }),
          (Wt = !0)
      } else if (
        J ||
        'undefined' == typeof MutationObserver ||
        (!st(MutationObserver) &&
          '[object MutationObserverConstructor]' !==
            MutationObserver.toString())
      )
        Kt =
          void 0 !== r && st(r)
            ? function () {
                r(Yt)
              }
            : function () {
                setTimeout(Yt, 0)
              }
      else {
        var te = 1,
          ee = new MutationObserver(Yt),
          re = document.createTextNode(String(te))
        ee.observe(re, { characterData: !0 }),
          (Kt = function () {
            ;(te = (te + 1) % 2), (re.data = String(te))
          }),
          (Wt = !0)
      }
      function ne(t, e) {
        var r
        if (
          (Ht.push(function () {
            if (t)
              try {
                t.call(e)
              } catch (t) {
                Gt(t, e, 'nextTick')
              }
            else r && r(e)
          }),
          Jt || ((Jt = !0), Kt()),
          !t && 'undefined' != typeof Promise)
        )
          return new Promise(function (t) {
            r = t
          })
      }
      var ie = new lt()
      function oe(t) {
        !(function t(e, r) {
          var n,
            i,
            o = Array.isArray(e)
          if ((!o && !l(e)) || Object.isFrozen(e) || e instanceof yt) return
          if (e.__ob__) {
            var a = e.__ob__.dep.id
            if (r.has(a)) return
            r.add(a)
          }
          if (o) for (n = e.length; n--; ) t(e[n], r)
          else for (i = Object.keys(e), n = i.length; n--; ) t(e[i[n]], r)
        })(t, ie),
          ie.clear()
      }
      var ae = w(function (t) {
        var e = '&' === t.charAt(0),
          r = '~' === (t = e ? t.slice(1) : t).charAt(0),
          n = '!' === (t = r ? t.slice(1) : t).charAt(0)
        return {
          name: (t = n ? t.slice(1) : t),
          once: r,
          capture: n,
          passive: e,
        }
      })
      function se(t, e) {
        function r() {
          var t = arguments,
            n = r.fns
          if (!Array.isArray(n))
            return $t(n, null, arguments, e, 'v-on handler')
          for (var i = n.slice(), o = 0; o < i.length; o++)
            $t(i[o], null, t, e, 'v-on handler')
        }
        return (r.fns = t), r
      }
      function le(t, e, r, n, o, s) {
        var l, u, c, p
        for (l in t)
          (u = t[l]),
            (c = e[l]),
            (p = ae(l)),
            i(u) ||
              (i(c)
                ? (i(u.fns) && (u = t[l] = se(u, s)),
                  a(p.once) && (u = t[l] = o(p.name, u, p.capture)),
                  r(p.name, u, p.capture, p.passive, p.params))
                : u !== c && ((c.fns = u), (t[l] = c)))
        for (l in e) i(t[l]) && n((p = ae(l)).name, e[l], p.capture)
      }
      function ue(t, e, r) {
        var n
        t instanceof yt && (t = t.data.hook || (t.data.hook = {}))
        var s = t[e]
        function l() {
          r.apply(this, arguments), _(n.fns, l)
        }
        i(s)
          ? (n = se([l]))
          : o(s.fns) && a(s.merged)
          ? (n = s).fns.push(l)
          : (n = se([s, l])),
          (n.merged = !0),
          (t[e] = n)
      }
      function ce(t, e, r, n, i) {
        if (o(e)) {
          if (b(e, r)) return (t[r] = e[r]), i || delete e[r], !0
          if (b(e, n)) return (t[r] = e[n]), i || delete e[n], !0
        }
        return !1
      }
      function pe(t) {
        return s(t)
          ? [_t(t)]
          : Array.isArray(t)
          ? (function t(e, r) {
              var n,
                l,
                u,
                c,
                p = []
              for (n = 0; n < e.length; n++)
                i((l = e[n])) ||
                  'boolean' == typeof l ||
                  ((u = p.length - 1),
                  (c = p[u]),
                  Array.isArray(l)
                    ? l.length > 0 &&
                      (he((l = t(l, (r || '') + '_' + n))[0]) &&
                        he(c) &&
                        ((p[u] = _t(c.text + l[0].text)), l.shift()),
                      p.push.apply(p, l))
                    : s(l)
                    ? he(c)
                      ? (p[u] = _t(c.text + l))
                      : '' !== l && p.push(_t(l))
                    : he(l) && he(c)
                    ? (p[u] = _t(c.text + l.text))
                    : (a(e._isVList) &&
                        o(l.tag) &&
                        i(l.key) &&
                        o(r) &&
                        (l.key = '__vlist' + r + '_' + n + '__'),
                      p.push(l)))
              return p
            })(t)
          : void 0
      }
      function he(t) {
        return o(t) && o(t.text) && !1 === t.isComment
      }
      function fe(t, e) {
        if (t) {
          for (
            var r = Object.create(null),
              n = ut ? Reflect.ownKeys(t) : Object.keys(t),
              i = 0;
            i < n.length;
            i++
          ) {
            var o = n[i]
            if ('__ob__' !== o) {
              for (var a = t[o].from, s = e; s; ) {
                if (s._provided && b(s._provided, a)) {
                  r[o] = s._provided[a]
                  break
                }
                s = s.$parent
              }
              if (!s)
                if ('default' in t[o]) {
                  var l = t[o].default
                  r[o] = 'function' == typeof l ? l.call(e) : l
                } else 0
            }
          }
          return r
        }
      }
      function de(t, e) {
        if (!t || !t.length) return {}
        for (var r = {}, n = 0, i = t.length; n < i; n++) {
          var o = t[n],
            a = o.data
          if (
            (a && a.attrs && a.attrs.slot && delete a.attrs.slot,
            (o.context !== e && o.fnContext !== e) || !a || null == a.slot)
          )
            (r.default || (r.default = [])).push(o)
          else {
            var s = a.slot,
              l = r[s] || (r[s] = [])
            'template' === o.tag ? l.push.apply(l, o.children || []) : l.push(o)
          }
        }
        for (var u in r) r[u].every(me) && delete r[u]
        return r
      }
      function me(t) {
        return (t.isComment && !t.asyncFactory) || ' ' === t.text
      }
      function ye(t, e, r) {
        var i,
          o = Object.keys(e).length > 0,
          a = t ? !!t.$stable : !o,
          s = t && t.$key
        if (t) {
          if (t._normalized) return t._normalized
          if (a && r && r !== n && s === r.$key && !o && !r.$hasNormal) return r
          for (var l in ((i = {}), t))
            t[l] && '$' !== l[0] && (i[l] = ve(e, l, t[l]))
        } else i = {}
        for (var u in e) u in i || (i[u] = ge(e, u))
        return (
          t && Object.isExtensible(t) && (t._normalized = i),
          q(i, '$stable', a),
          q(i, '$key', s),
          q(i, '$hasNormal', o),
          i
        )
      }
      function ve(t, e, r) {
        var n = function () {
          var t = arguments.length ? r.apply(null, arguments) : r({})
          return (t =
            t && 'object' == typeof t && !Array.isArray(t) ? [t] : pe(t)) &&
            (0 === t.length || (1 === t.length && t[0].isComment))
            ? void 0
            : t
        }
        return (
          r.proxy &&
            Object.defineProperty(t, e, {
              get: n,
              enumerable: !0,
              configurable: !0,
            }),
          n
        )
      }
      function ge(t, e) {
        return function () {
          return t[e]
        }
      }
      function _e(t, e) {
        var r, n, i, a, s
        if (Array.isArray(t) || 'string' == typeof t)
          for (r = new Array(t.length), n = 0, i = t.length; n < i; n++)
            r[n] = e(t[n], n)
        else if ('number' == typeof t)
          for (r = new Array(t), n = 0; n < t; n++) r[n] = e(n + 1, n)
        else if (l(t))
          if (ut && t[Symbol.iterator]) {
            r = []
            for (var u = t[Symbol.iterator](), c = u.next(); !c.done; )
              r.push(e(c.value, r.length)), (c = u.next())
          } else
            for (
              a = Object.keys(t), r = new Array(a.length), n = 0, i = a.length;
              n < i;
              n++
            )
              (s = a[n]), (r[n] = e(t[s], s, n))
        return o(r) || (r = []), (r._isVList = !0), r
      }
      function xe(t, e, r, n) {
        var i,
          o = this.$scopedSlots[t]
        o
          ? ((r = r || {}), n && (r = P(P({}, n), r)), (i = o(r) || e))
          : (i = this.$slots[t] || e)
        var a = r && r.slot
        return a ? this.$createElement('template', { slot: a }, i) : i
      }
      function be(t) {
        return Nt(this.$options, 'filters', t) || O
      }
      function we(t, e) {
        return Array.isArray(t) ? -1 === t.indexOf(e) : t !== e
      }
      function Ee(t, e, r, n, i) {
        var o = U.keyCodes[e] || r
        return i && n && !U.keyCodes[e]
          ? we(i, n)
          : o
          ? we(o, t)
          : n
          ? C(n) !== e
          : void 0
      }
      function Se(t, e, r, n, i) {
        if (r)
          if (l(r)) {
            var o
            Array.isArray(r) && (r = M(r))
            var a = function (a) {
              if ('class' === a || 'style' === a || g(a)) o = t
              else {
                var s = t.attrs && t.attrs.type
                o =
                  n || U.mustUseProp(e, s, a)
                    ? t.domProps || (t.domProps = {})
                    : t.attrs || (t.attrs = {})
              }
              var l = S(a),
                u = C(a)
              l in o ||
                u in o ||
                ((o[a] = r[a]),
                i &&
                  ((t.on || (t.on = {}))['update:' + a] = function (t) {
                    r[a] = t
                  }))
            }
            for (var s in r) a(s)
          } else;
        return t
      }
      function Te(t, e) {
        var r = this._staticTrees || (this._staticTrees = []),
          n = r[t]
        return (
          (n && !e) ||
            Ce(
              (n = r[t] = this.$options.staticRenderFns[t].call(
                this._renderProxy,
                null,
                this
              )),
              '__static__' + t,
              !1
            ),
          n
        )
      }
      function Ie(t, e, r) {
        return Ce(t, '__once__' + e + (r ? '_' + r : ''), !0), t
      }
      function Ce(t, e, r) {
        if (Array.isArray(t))
          for (var n = 0; n < t.length; n++)
            t[n] && 'string' != typeof t[n] && Ae(t[n], e + '_' + n, r)
        else Ae(t, e, r)
      }
      function Ae(t, e, r) {
        ;(t.isStatic = !0), (t.key = e), (t.isOnce = r)
      }
      function ke(t, e) {
        if (e)
          if (c(e)) {
            var r = (t.on = t.on ? P({}, t.on) : {})
            for (var n in e) {
              var i = r[n],
                o = e[n]
              r[n] = i ? [].concat(i, o) : o
            }
          } else;
        return t
      }
      function Pe(t, e, r, n) {
        e = e || { $stable: !r }
        for (var i = 0; i < t.length; i++) {
          var o = t[i]
          Array.isArray(o)
            ? Pe(o, e, r)
            : o && (o.proxy && (o.fn.proxy = !0), (e[o.key] = o.fn))
        }
        return n && (e.$key = n), e
      }
      function Me(t, e) {
        for (var r = 0; r < e.length; r += 2) {
          var n = e[r]
          'string' == typeof n && n && (t[e[r]] = e[r + 1])
        }
        return t
      }
      function Le(t, e) {
        return 'string' == typeof t ? e + t : t
      }
      function ze(t) {
        ;(t._o = Ie),
          (t._n = m),
          (t._s = d),
          (t._l = _e),
          (t._t = xe),
          (t._q = D),
          (t._i = R),
          (t._m = Te),
          (t._f = be),
          (t._k = Ee),
          (t._b = Se),
          (t._v = _t),
          (t._e = gt),
          (t._u = Pe),
          (t._g = ke),
          (t._d = Me),
          (t._p = Le)
      }
      function Oe(t, e, r, i, o) {
        var s,
          l = this,
          u = o.options
        b(i, '_uid')
          ? ((s = Object.create(i))._original = i)
          : ((s = i), (i = i._original))
        var c = a(u._compiled),
          p = !c
        ;(this.data = t),
          (this.props = e),
          (this.children = r),
          (this.parent = i),
          (this.listeners = t.on || n),
          (this.injections = fe(u.inject, i)),
          (this.slots = function () {
            return (
              l.$slots || ye(t.scopedSlots, (l.$slots = de(r, i))), l.$slots
            )
          }),
          Object.defineProperty(this, 'scopedSlots', {
            enumerable: !0,
            get: function () {
              return ye(t.scopedSlots, this.slots())
            },
          }),
          c &&
            ((this.$options = u),
            (this.$slots = this.slots()),
            (this.$scopedSlots = ye(t.scopedSlots, this.$slots))),
          u._scopeId
            ? (this._c = function (t, e, r, n) {
                var o = je(s, t, e, r, n, p)
                return (
                  o &&
                    !Array.isArray(o) &&
                    ((o.fnScopeId = u._scopeId), (o.fnContext = i)),
                  o
                )
              })
            : (this._c = function (t, e, r, n) {
                return je(s, t, e, r, n, p)
              })
      }
      function De(t, e, r, n, i) {
        var o = xt(t)
        return (
          (o.fnContext = r),
          (o.fnOptions = n),
          e.slot && ((o.data || (o.data = {})).slot = e.slot),
          o
        )
      }
      function Re(t, e) {
        for (var r in e) t[S(r)] = e[r]
      }
      ze(Oe.prototype)
      var Fe = {
          init: function (t, e) {
            if (
              t.componentInstance &&
              !t.componentInstance._isDestroyed &&
              t.data.keepAlive
            ) {
              var r = t
              Fe.prepatch(r, r)
            } else {
              ;(t.componentInstance = (function (t, e) {
                var r = { _isComponent: !0, _parentVnode: t, parent: e },
                  n = t.data.inlineTemplate
                o(n) &&
                  ((r.render = n.render),
                  (r.staticRenderFns = n.staticRenderFns))
                return new t.componentOptions.Ctor(r)
              })(t, Je)).$mount(e ? t.elm : void 0, e)
            }
          },
          prepatch: function (t, e) {
            var r = e.componentOptions
            !(function (t, e, r, i, o) {
              0
              var a = i.data.scopedSlots,
                s = t.$scopedSlots,
                l = !!(
                  (a && !a.$stable) ||
                  (s !== n && !s.$stable) ||
                  (a && t.$scopedSlots.$key !== a.$key)
                ),
                u = !!(o || t.$options._renderChildren || l)
              ;(t.$options._parentVnode = i),
                (t.$vnode = i),
                t._vnode && (t._vnode.parent = i)
              if (
                ((t.$options._renderChildren = o),
                (t.$attrs = i.data.attrs || n),
                (t.$listeners = r || n),
                e && t.$options.props)
              ) {
                Tt(!1)
                for (
                  var c = t._props, p = t.$options._propKeys || [], h = 0;
                  h < p.length;
                  h++
                ) {
                  var f = p[h],
                    d = t.$options.props
                  c[f] = Ut(f, d, e, t)
                }
                Tt(!0), (t.$options.propsData = e)
              }
              r = r || n
              var m = t.$options._parentListeners
              ;(t.$options._parentListeners = r),
                He(t, r, m),
                u && ((t.$slots = de(o, i.context)), t.$forceUpdate())
              0
            })(
              (e.componentInstance = t.componentInstance),
              r.propsData,
              r.listeners,
              e,
              r.children
            )
          },
          insert: function (t) {
            var e,
              r = t.context,
              n = t.componentInstance
            n._isMounted || ((n._isMounted = !0), er(n, 'mounted')),
              t.data.keepAlive &&
                (r._isMounted
                  ? (((e = n)._inactive = !1), nr.push(e))
                  : tr(n, !0))
          },
          destroy: function (t) {
            var e = t.componentInstance
            e._isDestroyed ||
              (t.data.keepAlive
                ? (function t(e, r) {
                    if (r && ((e._directInactive = !0), Qe(e))) return
                    if (!e._inactive) {
                      e._inactive = !0
                      for (var n = 0; n < e.$children.length; n++)
                        t(e.$children[n])
                      er(e, 'deactivated')
                    }
                  })(e, !0)
                : e.$destroy())
          },
        },
        Be = Object.keys(Fe)
      function Ne(t, e, r, s, u) {
        if (!i(t)) {
          var c = r.$options._base
          if ((l(t) && (t = c.extend(t)), 'function' == typeof t)) {
            var p
            if (
              i(t.cid) &&
              void 0 ===
                (t = (function (t, e) {
                  if (a(t.error) && o(t.errorComp)) return t.errorComp
                  if (o(t.resolved)) return t.resolved
                  var r = qe
                  r &&
                    o(t.owners) &&
                    -1 === t.owners.indexOf(r) &&
                    t.owners.push(r)
                  if (a(t.loading) && o(t.loadingComp)) return t.loadingComp
                  if (r && !o(t.owners)) {
                    var n = (t.owners = [r]),
                      s = !0,
                      u = null,
                      c = null
                    r.$on('hook:destroyed', function () {
                      return _(n, r)
                    })
                    var p = function (t) {
                        for (var e = 0, r = n.length; e < r; e++)
                          n[e].$forceUpdate()
                        t &&
                          ((n.length = 0),
                          null !== u && (clearTimeout(u), (u = null)),
                          null !== c && (clearTimeout(c), (c = null)))
                      },
                      h = F(function (r) {
                        ;(t.resolved = Ge(r, e)), s ? (n.length = 0) : p(!0)
                      }),
                      d = F(function (e) {
                        o(t.errorComp) && ((t.error = !0), p(!0))
                      }),
                      m = t(h, d)
                    return (
                      l(m) &&
                        (f(m)
                          ? i(t.resolved) && m.then(h, d)
                          : f(m.component) &&
                            (m.component.then(h, d),
                            o(m.error) && (t.errorComp = Ge(m.error, e)),
                            o(m.loading) &&
                              ((t.loadingComp = Ge(m.loading, e)),
                              0 === m.delay
                                ? (t.loading = !0)
                                : (u = setTimeout(function () {
                                    ;(u = null),
                                      i(t.resolved) &&
                                        i(t.error) &&
                                        ((t.loading = !0), p(!1))
                                  }, m.delay || 200))),
                            o(m.timeout) &&
                              (c = setTimeout(function () {
                                ;(c = null), i(t.resolved) && d(null)
                              }, m.timeout)))),
                      (s = !1),
                      t.loading ? t.loadingComp : t.resolved
                    )
                  }
                })((p = t), c))
            )
              return (function (t, e, r, n, i) {
                var o = gt()
                return (
                  (o.asyncFactory = t),
                  (o.asyncMeta = { data: e, context: r, children: n, tag: i }),
                  o
                )
              })(p, e, r, s, u)
            ;(e = e || {}),
              Er(t),
              o(e.model) &&
                (function (t, e) {
                  var r = (t.model && t.model.prop) || 'value',
                    n = (t.model && t.model.event) || 'input'
                  ;(e.attrs || (e.attrs = {}))[r] = e.model.value
                  var i = e.on || (e.on = {}),
                    a = i[n],
                    s = e.model.callback
                  o(a)
                    ? (Array.isArray(a) ? -1 === a.indexOf(s) : a !== s) &&
                      (i[n] = [s].concat(a))
                    : (i[n] = s)
                })(t.options, e)
            var h = (function (t, e, r) {
              var n = e.options.props
              if (!i(n)) {
                var a = {},
                  s = t.attrs,
                  l = t.props
                if (o(s) || o(l))
                  for (var u in n) {
                    var c = C(u)
                    ce(a, l, u, c, !0) || ce(a, s, u, c, !1)
                  }
                return a
              }
            })(e, t)
            if (a(t.options.functional))
              return (function (t, e, r, i, a) {
                var s = t.options,
                  l = {},
                  u = s.props
                if (o(u)) for (var c in u) l[c] = Ut(c, u, e || n)
                else o(r.attrs) && Re(l, r.attrs), o(r.props) && Re(l, r.props)
                var p = new Oe(r, l, a, i, t),
                  h = s.render.call(null, p._c, p)
                if (h instanceof yt) return De(h, r, p.parent, s, p)
                if (Array.isArray(h)) {
                  for (
                    var f = pe(h) || [], d = new Array(f.length), m = 0;
                    m < f.length;
                    m++
                  )
                    d[m] = De(f[m], r, p.parent, s, p)
                  return d
                }
              })(t, h, e, r, s)
            var d = e.on
            if (((e.on = e.nativeOn), a(t.options.abstract))) {
              var m = e.slot
              ;(e = {}), m && (e.slot = m)
            }
            !(function (t) {
              for (var e = t.hook || (t.hook = {}), r = 0; r < Be.length; r++) {
                var n = Be[r],
                  i = e[n],
                  o = Fe[n]
                i === o || (i && i._merged) || (e[n] = i ? Ue(o, i) : o)
              }
            })(e)
            var y = t.options.name || u
            return new yt(
              'vue-component-' + t.cid + (y ? '-' + y : ''),
              e,
              void 0,
              void 0,
              void 0,
              r,
              { Ctor: t, propsData: h, listeners: d, tag: u, children: s },
              p
            )
          }
        }
      }
      function Ue(t, e) {
        var r = function (r, n) {
          t(r, n), e(r, n)
        }
        return (r._merged = !0), r
      }
      function je(t, e, r, n, u, c) {
        return (
          (Array.isArray(r) || s(r)) && ((u = n), (n = r), (r = void 0)),
          a(c) && (u = 2),
          (function (t, e, r, n, s) {
            if (o(r) && o(r.__ob__)) return gt()
            o(r) && o(r.is) && (e = r.is)
            if (!e) return gt()
            0
            Array.isArray(n) &&
              'function' == typeof n[0] &&
              (((r = r || {}).scopedSlots = { default: n[0] }), (n.length = 0))
            2 === s
              ? (n = pe(n))
              : 1 === s &&
                (n = (function (t) {
                  for (var e = 0; e < t.length; e++)
                    if (Array.isArray(t[e]))
                      return Array.prototype.concat.apply([], t)
                  return t
                })(n))
            var u, c
            if ('string' == typeof e) {
              var p
              ;(c = (t.$vnode && t.$vnode.ns) || U.getTagNamespace(e)),
                (u = U.isReservedTag(e)
                  ? new yt(U.parsePlatformTagName(e), r, n, void 0, void 0, t)
                  : (r && r.pre) || !o((p = Nt(t.$options, 'components', e)))
                  ? new yt(e, r, n, void 0, void 0, t)
                  : Ne(p, r, t, n, e))
            } else u = Ne(e, r, t, n)
            return Array.isArray(u)
              ? u
              : o(u)
              ? (o(c) &&
                  (function t(e, r, n) {
                    ;(e.ns = r),
                      'foreignObject' === e.tag && ((r = void 0), (n = !0))
                    if (o(e.children))
                      for (var s = 0, l = e.children.length; s < l; s++) {
                        var u = e.children[s]
                        o(u.tag) &&
                          (i(u.ns) || (a(n) && 'svg' !== u.tag)) &&
                          t(u, r, n)
                      }
                  })(u, c),
                o(r) &&
                  (function (t) {
                    l(t.style) && oe(t.style)
                    l(t.class) && oe(t.class)
                  })(r),
                u)
              : gt()
          })(t, e, r, n, u)
        )
      }
      var Ve,
        qe = null
      function Ge(t, e) {
        return (
          (t.__esModule || (ut && 'Module' === t[Symbol.toStringTag])) &&
            (t = t.default),
          l(t) ? e.extend(t) : t
        )
      }
      function $e(t) {
        return t.isComment && t.asyncFactory
      }
      function Ze(t) {
        if (Array.isArray(t))
          for (var e = 0; e < t.length; e++) {
            var r = t[e]
            if (o(r) && (o(r.componentOptions) || $e(r))) return r
          }
      }
      function Xe(t, e) {
        Ve.$on(t, e)
      }
      function Ke(t, e) {
        Ve.$off(t, e)
      }
      function We(t, e) {
        var r = Ve
        return function n() {
          var i = e.apply(null, arguments)
          null !== i && r.$off(t, n)
        }
      }
      function He(t, e, r) {
        ;(Ve = t), le(e, r || {}, Xe, Ke, We, t), (Ve = void 0)
      }
      var Je = null
      function Ye(t) {
        var e = Je
        return (
          (Je = t),
          function () {
            Je = e
          }
        )
      }
      function Qe(t) {
        for (; t && (t = t.$parent); ) if (t._inactive) return !0
        return !1
      }
      function tr(t, e) {
        if (e) {
          if (((t._directInactive = !1), Qe(t))) return
        } else if (t._directInactive) return
        if (t._inactive || null === t._inactive) {
          t._inactive = !1
          for (var r = 0; r < t.$children.length; r++) tr(t.$children[r])
          er(t, 'activated')
        }
      }
      function er(t, e) {
        dt()
        var r = t.$options[e],
          n = e + ' hook'
        if (r) for (var i = 0, o = r.length; i < o; i++) $t(r[i], t, null, t, n)
        t._hasHookEvent && t.$emit('hook:' + e), mt()
      }
      var rr = [],
        nr = [],
        ir = {},
        or = !1,
        ar = !1,
        sr = 0
      var lr = 0,
        ur = Date.now
      if (X && !J) {
        var cr = window.performance
        cr &&
          'function' == typeof cr.now &&
          ur() > document.createEvent('Event').timeStamp &&
          (ur = function () {
            return cr.now()
          })
      }
      function pr() {
        var t, e
        for (
          lr = ur(),
            ar = !0,
            rr.sort(function (t, e) {
              return t.id - e.id
            }),
            sr = 0;
          sr < rr.length;
          sr++
        )
          (t = rr[sr]).before && t.before(), (e = t.id), (ir[e] = null), t.run()
        var r = nr.slice(),
          n = rr.slice()
        ;(sr = rr.length = nr.length = 0),
          (ir = {}),
          (or = ar = !1),
          (function (t) {
            for (var e = 0; e < t.length; e++)
              (t[e]._inactive = !0), tr(t[e], !0)
          })(r),
          (function (t) {
            var e = t.length
            for (; e--; ) {
              var r = t[e],
                n = r.vm
              n._watcher === r &&
                n._isMounted &&
                !n._isDestroyed &&
                er(n, 'updated')
            }
          })(n),
          at && U.devtools && at.emit('flush')
      }
      var hr = 0,
        fr = function (t, e, r, n, i) {
          ;(this.vm = t),
            i && (t._watcher = this),
            t._watchers.push(this),
            n
              ? ((this.deep = !!n.deep),
                (this.user = !!n.user),
                (this.lazy = !!n.lazy),
                (this.sync = !!n.sync),
                (this.before = n.before))
              : (this.deep = this.user = this.lazy = this.sync = !1),
            (this.cb = r),
            (this.id = ++hr),
            (this.active = !0),
            (this.dirty = this.lazy),
            (this.deps = []),
            (this.newDeps = []),
            (this.depIds = new lt()),
            (this.newDepIds = new lt()),
            (this.expression = ''),
            'function' == typeof e
              ? (this.getter = e)
              : ((this.getter = (function (t) {
                  if (!G.test(t)) {
                    var e = t.split('.')
                    return function (t) {
                      for (var r = 0; r < e.length; r++) {
                        if (!t) return
                        t = t[e[r]]
                      }
                      return t
                    }
                  }
                })(e)),
                this.getter || (this.getter = L)),
            (this.value = this.lazy ? void 0 : this.get())
        }
      ;(fr.prototype.get = function () {
        var t
        dt(this)
        var e = this.vm
        try {
          t = this.getter.call(e, e)
        } catch (t) {
          if (!this.user) throw t
          Gt(t, e, 'getter for watcher "' + this.expression + '"')
        } finally {
          this.deep && oe(t), mt(), this.cleanupDeps()
        }
        return t
      }),
        (fr.prototype.addDep = function (t) {
          var e = t.id
          this.newDepIds.has(e) ||
            (this.newDepIds.add(e),
            this.newDeps.push(t),
            this.depIds.has(e) || t.addSub(this))
        }),
        (fr.prototype.cleanupDeps = function () {
          for (var t = this.deps.length; t--; ) {
            var e = this.deps[t]
            this.newDepIds.has(e.id) || e.removeSub(this)
          }
          var r = this.depIds
          ;(this.depIds = this.newDepIds),
            (this.newDepIds = r),
            this.newDepIds.clear(),
            (r = this.deps),
            (this.deps = this.newDeps),
            (this.newDeps = r),
            (this.newDeps.length = 0)
        }),
        (fr.prototype.update = function () {
          this.lazy
            ? (this.dirty = !0)
            : this.sync
            ? this.run()
            : (function (t) {
                var e = t.id
                if (null == ir[e]) {
                  if (((ir[e] = !0), ar)) {
                    for (var r = rr.length - 1; r > sr && rr[r].id > t.id; ) r--
                    rr.splice(r + 1, 0, t)
                  } else rr.push(t)
                  or || ((or = !0), ne(pr))
                }
              })(this)
        }),
        (fr.prototype.run = function () {
          if (this.active) {
            var t = this.get()
            if (t !== this.value || l(t) || this.deep) {
              var e = this.value
              if (((this.value = t), this.user))
                try {
                  this.cb.call(this.vm, t, e)
                } catch (t) {
                  Gt(
                    t,
                    this.vm,
                    'callback for watcher "' + this.expression + '"'
                  )
                }
              else this.cb.call(this.vm, t, e)
            }
          }
        }),
        (fr.prototype.evaluate = function () {
          ;(this.value = this.get()), (this.dirty = !1)
        }),
        (fr.prototype.depend = function () {
          for (var t = this.deps.length; t--; ) this.deps[t].depend()
        }),
        (fr.prototype.teardown = function () {
          if (this.active) {
            this.vm._isBeingDestroyed || _(this.vm._watchers, this)
            for (var t = this.deps.length; t--; ) this.deps[t].removeSub(this)
            this.active = !1
          }
        })
      var dr = { enumerable: !0, configurable: !0, get: L, set: L }
      function mr(t, e, r) {
        ;(dr.get = function () {
          return this[e][r]
        }),
          (dr.set = function (t) {
            this[e][r] = t
          }),
          Object.defineProperty(t, r, dr)
      }
      function yr(t) {
        t._watchers = []
        var e = t.$options
        e.props &&
          (function (t, e) {
            var r = t.$options.propsData || {},
              n = (t._props = {}),
              i = (t.$options._propKeys = [])
            t.$parent && Tt(!1)
            var o = function (o) {
              i.push(o)
              var a = Ut(o, e, r, t)
              At(n, o, a), o in t || mr(t, '_props', o)
            }
            for (var a in e) o(a)
            Tt(!0)
          })(t, e.props),
          e.methods &&
            (function (t, e) {
              t.$options.props
              for (var r in e) t[r] = 'function' != typeof e[r] ? L : A(e[r], t)
            })(t, e.methods),
          e.data
            ? (function (t) {
                var e = t.$options.data
                c(
                  (e = t._data =
                    'function' == typeof e
                      ? (function (t, e) {
                          dt()
                          try {
                            return t.call(e, e)
                          } catch (t) {
                            return Gt(t, e, 'data()'), {}
                          } finally {
                            mt()
                          }
                        })(e, t)
                      : e || {})
                ) || (e = {})
                var r = Object.keys(e),
                  n = t.$options.props,
                  i = (t.$options.methods, r.length)
                for (; i--; ) {
                  var o = r[i]
                  0, (n && b(n, o)) || V(o) || mr(t, '_data', o)
                }
                Ct(e, !0)
              })(t)
            : Ct((t._data = {}), !0),
          e.computed &&
            (function (t, e) {
              var r = (t._computedWatchers = Object.create(null)),
                n = ot()
              for (var i in e) {
                var o = e[i],
                  a = 'function' == typeof o ? o : o.get
                0, n || (r[i] = new fr(t, a || L, L, vr)), i in t || gr(t, i, o)
              }
            })(t, e.computed),
          e.watch &&
            e.watch !== rt &&
            (function (t, e) {
              for (var r in e) {
                var n = e[r]
                if (Array.isArray(n))
                  for (var i = 0; i < n.length; i++) br(t, r, n[i])
                else br(t, r, n)
              }
            })(t, e.watch)
      }
      var vr = { lazy: !0 }
      function gr(t, e, r) {
        var n = !ot()
        'function' == typeof r
          ? ((dr.get = n ? _r(e) : xr(r)), (dr.set = L))
          : ((dr.get = r.get ? (n && !1 !== r.cache ? _r(e) : xr(r.get)) : L),
            (dr.set = r.set || L)),
          Object.defineProperty(t, e, dr)
      }
      function _r(t) {
        return function () {
          var e = this._computedWatchers && this._computedWatchers[t]
          if (e)
            return e.dirty && e.evaluate(), ht.target && e.depend(), e.value
        }
      }
      function xr(t) {
        return function () {
          return t.call(this, this)
        }
      }
      function br(t, e, r, n) {
        return (
          c(r) && ((n = r), (r = r.handler)),
          'string' == typeof r && (r = t[r]),
          t.$watch(e, r, n)
        )
      }
      var wr = 0
      function Er(t) {
        var e = t.options
        if (t.super) {
          var r = Er(t.super)
          if (r !== t.superOptions) {
            t.superOptions = r
            var n = (function (t) {
              var e,
                r = t.options,
                n = t.sealedOptions
              for (var i in r) r[i] !== n[i] && (e || (e = {}), (e[i] = r[i]))
              return e
            })(t)
            n && P(t.extendOptions, n),
              (e = t.options = Bt(r, t.extendOptions)).name &&
                (e.components[e.name] = t)
          }
        }
        return e
      }
      function Sr(t) {
        this._init(t)
      }
      function Tr(t) {
        t.cid = 0
        var e = 1
        t.extend = function (t) {
          t = t || {}
          var r = this,
            n = r.cid,
            i = t._Ctor || (t._Ctor = {})
          if (i[n]) return i[n]
          var o = t.name || r.options.name
          var a = function (t) {
            this._init(t)
          }
          return (
            ((a.prototype = Object.create(r.prototype)).constructor = a),
            (a.cid = e++),
            (a.options = Bt(r.options, t)),
            (a.super = r),
            a.options.props &&
              (function (t) {
                var e = t.options.props
                for (var r in e) mr(t.prototype, '_props', r)
              })(a),
            a.options.computed &&
              (function (t) {
                var e = t.options.computed
                for (var r in e) gr(t.prototype, r, e[r])
              })(a),
            (a.extend = r.extend),
            (a.mixin = r.mixin),
            (a.use = r.use),
            B.forEach(function (t) {
              a[t] = r[t]
            }),
            o && (a.options.components[o] = a),
            (a.superOptions = r.options),
            (a.extendOptions = t),
            (a.sealedOptions = P({}, a.options)),
            (i[n] = a),
            a
          )
        }
      }
      function Ir(t) {
        return t && (t.Ctor.options.name || t.tag)
      }
      function Cr(t, e) {
        return Array.isArray(t)
          ? t.indexOf(e) > -1
          : 'string' == typeof t
          ? t.split(',').indexOf(e) > -1
          : !!p(t) && t.test(e)
      }
      function Ar(t, e) {
        var r = t.cache,
          n = t.keys,
          i = t._vnode
        for (var o in r) {
          var a = r[o]
          if (a) {
            var s = Ir(a.componentOptions)
            s && !e(s) && kr(r, o, n, i)
          }
        }
      }
      function kr(t, e, r, n) {
        var i = t[e]
        !i || (n && i.tag === n.tag) || i.componentInstance.$destroy(),
          (t[e] = null),
          _(r, e)
      }
      !(function (t) {
        t.prototype._init = function (t) {
          var e = this
          ;(e._uid = wr++),
            (e._isVue = !0),
            t && t._isComponent
              ? (function (t, e) {
                  var r = (t.$options = Object.create(t.constructor.options)),
                    n = e._parentVnode
                  ;(r.parent = e.parent), (r._parentVnode = n)
                  var i = n.componentOptions
                  ;(r.propsData = i.propsData),
                    (r._parentListeners = i.listeners),
                    (r._renderChildren = i.children),
                    (r._componentTag = i.tag),
                    e.render &&
                      ((r.render = e.render),
                      (r.staticRenderFns = e.staticRenderFns))
                })(e, t)
              : (e.$options = Bt(Er(e.constructor), t || {}, e)),
            (e._renderProxy = e),
            (e._self = e),
            (function (t) {
              var e = t.$options,
                r = e.parent
              if (r && !e.abstract) {
                for (; r.$options.abstract && r.$parent; ) r = r.$parent
                r.$children.push(t)
              }
              ;(t.$parent = r),
                (t.$root = r ? r.$root : t),
                (t.$children = []),
                (t.$refs = {}),
                (t._watcher = null),
                (t._inactive = null),
                (t._directInactive = !1),
                (t._isMounted = !1),
                (t._isDestroyed = !1),
                (t._isBeingDestroyed = !1)
            })(e),
            (function (t) {
              ;(t._events = Object.create(null)), (t._hasHookEvent = !1)
              var e = t.$options._parentListeners
              e && He(t, e)
            })(e),
            (function (t) {
              ;(t._vnode = null), (t._staticTrees = null)
              var e = t.$options,
                r = (t.$vnode = e._parentVnode),
                i = r && r.context
              ;(t.$slots = de(e._renderChildren, i)),
                (t.$scopedSlots = n),
                (t._c = function (e, r, n, i) {
                  return je(t, e, r, n, i, !1)
                }),
                (t.$createElement = function (e, r, n, i) {
                  return je(t, e, r, n, i, !0)
                })
              var o = r && r.data
              At(t, '$attrs', (o && o.attrs) || n, null, !0),
                At(t, '$listeners', e._parentListeners || n, null, !0)
            })(e),
            er(e, 'beforeCreate'),
            (function (t) {
              var e = fe(t.$options.inject, t)
              e &&
                (Tt(!1),
                Object.keys(e).forEach(function (r) {
                  At(t, r, e[r])
                }),
                Tt(!0))
            })(e),
            yr(e),
            (function (t) {
              var e = t.$options.provide
              e && (t._provided = 'function' == typeof e ? e.call(t) : e)
            })(e),
            er(e, 'created'),
            e.$options.el && e.$mount(e.$options.el)
        }
      })(Sr),
        (function (t) {
          var e = {
              get: function () {
                return this._data
              },
            },
            r = {
              get: function () {
                return this._props
              },
            }
          Object.defineProperty(t.prototype, '$data', e),
            Object.defineProperty(t.prototype, '$props', r),
            (t.prototype.$set = kt),
            (t.prototype.$delete = Pt),
            (t.prototype.$watch = function (t, e, r) {
              if (c(e)) return br(this, t, e, r)
              ;(r = r || {}).user = !0
              var n = new fr(this, t, e, r)
              if (r.immediate)
                try {
                  e.call(this, n.value)
                } catch (t) {
                  Gt(
                    t,
                    this,
                    'callback for immediate watcher "' + n.expression + '"'
                  )
                }
              return function () {
                n.teardown()
              }
            })
        })(Sr),
        (function (t) {
          var e = /^hook:/
          ;(t.prototype.$on = function (t, r) {
            var n = this
            if (Array.isArray(t))
              for (var i = 0, o = t.length; i < o; i++) n.$on(t[i], r)
            else
              (n._events[t] || (n._events[t] = [])).push(r),
                e.test(t) && (n._hasHookEvent = !0)
            return n
          }),
            (t.prototype.$once = function (t, e) {
              var r = this
              function n() {
                r.$off(t, n), e.apply(r, arguments)
              }
              return (n.fn = e), r.$on(t, n), r
            }),
            (t.prototype.$off = function (t, e) {
              var r = this
              if (!arguments.length) return (r._events = Object.create(null)), r
              if (Array.isArray(t)) {
                for (var n = 0, i = t.length; n < i; n++) r.$off(t[n], e)
                return r
              }
              var o,
                a = r._events[t]
              if (!a) return r
              if (!e) return (r._events[t] = null), r
              for (var s = a.length; s--; )
                if ((o = a[s]) === e || o.fn === e) {
                  a.splice(s, 1)
                  break
                }
              return r
            }),
            (t.prototype.$emit = function (t) {
              var e = this,
                r = e._events[t]
              if (r) {
                r = r.length > 1 ? k(r) : r
                for (
                  var n = k(arguments, 1),
                    i = 'event handler for "' + t + '"',
                    o = 0,
                    a = r.length;
                  o < a;
                  o++
                )
                  $t(r[o], e, n, e, i)
              }
              return e
            })
        })(Sr),
        (function (t) {
          ;(t.prototype._update = function (t, e) {
            var r = this,
              n = r.$el,
              i = r._vnode,
              o = Ye(r)
            ;(r._vnode = t),
              (r.$el = i ? r.__patch__(i, t) : r.__patch__(r.$el, t, e, !1)),
              o(),
              n && (n.__vue__ = null),
              r.$el && (r.$el.__vue__ = r),
              r.$vnode &&
                r.$parent &&
                r.$vnode === r.$parent._vnode &&
                (r.$parent.$el = r.$el)
          }),
            (t.prototype.$forceUpdate = function () {
              this._watcher && this._watcher.update()
            }),
            (t.prototype.$destroy = function () {
              var t = this
              if (!t._isBeingDestroyed) {
                er(t, 'beforeDestroy'), (t._isBeingDestroyed = !0)
                var e = t.$parent
                !e ||
                  e._isBeingDestroyed ||
                  t.$options.abstract ||
                  _(e.$children, t),
                  t._watcher && t._watcher.teardown()
                for (var r = t._watchers.length; r--; )
                  t._watchers[r].teardown()
                t._data.__ob__ && t._data.__ob__.vmCount--,
                  (t._isDestroyed = !0),
                  t.__patch__(t._vnode, null),
                  er(t, 'destroyed'),
                  t.$off(),
                  t.$el && (t.$el.__vue__ = null),
                  t.$vnode && (t.$vnode.parent = null)
              }
            })
        })(Sr),
        (function (t) {
          ze(t.prototype),
            (t.prototype.$nextTick = function (t) {
              return ne(t, this)
            }),
            (t.prototype._render = function () {
              var t,
                e = this,
                r = e.$options,
                n = r.render,
                i = r._parentVnode
              i &&
                (e.$scopedSlots = ye(
                  i.data.scopedSlots,
                  e.$slots,
                  e.$scopedSlots
                )),
                (e.$vnode = i)
              try {
                ;(qe = e), (t = n.call(e._renderProxy, e.$createElement))
              } catch (r) {
                Gt(r, e, 'render'), (t = e._vnode)
              } finally {
                qe = null
              }
              return (
                Array.isArray(t) && 1 === t.length && (t = t[0]),
                t instanceof yt || (t = gt()),
                (t.parent = i),
                t
              )
            })
        })(Sr)
      var Pr = [String, RegExp, Array],
        Mr = {
          KeepAlive: {
            name: 'keep-alive',
            abstract: !0,
            props: { include: Pr, exclude: Pr, max: [String, Number] },
            created: function () {
              ;(this.cache = Object.create(null)), (this.keys = [])
            },
            destroyed: function () {
              for (var t in this.cache) kr(this.cache, t, this.keys)
            },
            mounted: function () {
              var t = this
              this.$watch('include', function (e) {
                Ar(t, function (t) {
                  return Cr(e, t)
                })
              }),
                this.$watch('exclude', function (e) {
                  Ar(t, function (t) {
                    return !Cr(e, t)
                  })
                })
            },
            render: function () {
              var t = this.$slots.default,
                e = Ze(t),
                r = e && e.componentOptions
              if (r) {
                var n = Ir(r),
                  i = this.include,
                  o = this.exclude
                if ((i && (!n || !Cr(i, n))) || (o && n && Cr(o, n))) return e
                var a = this.cache,
                  s = this.keys,
                  l =
                    null == e.key
                      ? r.Ctor.cid + (r.tag ? '::' + r.tag : '')
                      : e.key
                a[l]
                  ? ((e.componentInstance = a[l].componentInstance),
                    _(s, l),
                    s.push(l))
                  : ((a[l] = e),
                    s.push(l),
                    this.max &&
                      s.length > parseInt(this.max) &&
                      kr(a, s[0], s, this._vnode)),
                  (e.data.keepAlive = !0)
              }
              return e || (t && t[0])
            },
          },
        }
      !(function (t) {
        var e = {
          get: function () {
            return U
          },
        }
        Object.defineProperty(t, 'config', e),
          (t.util = {
            warn: ct,
            extend: P,
            mergeOptions: Bt,
            defineReactive: At,
          }),
          (t.set = kt),
          (t.delete = Pt),
          (t.nextTick = ne),
          (t.observable = function (t) {
            return Ct(t), t
          }),
          (t.options = Object.create(null)),
          B.forEach(function (e) {
            t.options[e + 's'] = Object.create(null)
          }),
          (t.options._base = t),
          P(t.options.components, Mr),
          (function (t) {
            t.use = function (t) {
              var e = this._installedPlugins || (this._installedPlugins = [])
              if (e.indexOf(t) > -1) return this
              var r = k(arguments, 1)
              return (
                r.unshift(this),
                'function' == typeof t.install
                  ? t.install.apply(t, r)
                  : 'function' == typeof t && t.apply(null, r),
                e.push(t),
                this
              )
            }
          })(t),
          (function (t) {
            t.mixin = function (t) {
              return (this.options = Bt(this.options, t)), this
            }
          })(t),
          Tr(t),
          (function (t) {
            B.forEach(function (e) {
              t[e] = function (t, r) {
                return r
                  ? ('component' === e &&
                      c(r) &&
                      ((r.name = r.name || t),
                      (r = this.options._base.extend(r))),
                    'directive' === e &&
                      'function' == typeof r &&
                      (r = { bind: r, update: r }),
                    (this.options[e + 's'][t] = r),
                    r)
                  : this.options[e + 's'][t]
              }
            })
          })(t)
      })(Sr),
        Object.defineProperty(Sr.prototype, '$isServer', { get: ot }),
        Object.defineProperty(Sr.prototype, '$ssrContext', {
          get: function () {
            return this.$vnode && this.$vnode.ssrContext
          },
        }),
        Object.defineProperty(Sr, 'FunctionalRenderContext', { value: Oe }),
        (Sr.version = '2.6.11')
      var Lr = y('style,class'),
        zr = y('input,textarea,option,select,progress'),
        Or = function (t, e, r) {
          return (
            ('value' === r && zr(t) && 'button' !== e) ||
            ('selected' === r && 'option' === t) ||
            ('checked' === r && 'input' === t) ||
            ('muted' === r && 'video' === t)
          )
        },
        Dr = y('contenteditable,draggable,spellcheck'),
        Rr = y('events,caret,typing,plaintext-only'),
        Fr = y(
          'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible'
        ),
        Br = 'http://www.w3.org/1999/xlink',
        Nr = function (t) {
          return ':' === t.charAt(5) && 'xlink' === t.slice(0, 5)
        },
        Ur = function (t) {
          return Nr(t) ? t.slice(6, t.length) : ''
        },
        jr = function (t) {
          return null == t || !1 === t
        }
      function Vr(t) {
        for (var e = t.data, r = t, n = t; o(n.componentInstance); )
          (n = n.componentInstance._vnode) && n.data && (e = qr(n.data, e))
        for (; o((r = r.parent)); ) r && r.data && (e = qr(e, r.data))
        return (function (t, e) {
          if (o(t) || o(e)) return Gr(t, $r(e))
          return ''
        })(e.staticClass, e.class)
      }
      function qr(t, e) {
        return {
          staticClass: Gr(t.staticClass, e.staticClass),
          class: o(t.class) ? [t.class, e.class] : e.class,
        }
      }
      function Gr(t, e) {
        return t ? (e ? t + ' ' + e : t) : e || ''
      }
      function $r(t) {
        return Array.isArray(t)
          ? (function (t) {
              for (var e, r = '', n = 0, i = t.length; n < i; n++)
                o((e = $r(t[n]))) && '' !== e && (r && (r += ' '), (r += e))
              return r
            })(t)
          : l(t)
          ? (function (t) {
              var e = ''
              for (var r in t) t[r] && (e && (e += ' '), (e += r))
              return e
            })(t)
          : 'string' == typeof t
          ? t
          : ''
      }
      var Zr = {
          svg: 'http://www.w3.org/2000/svg',
          math: 'http://www.w3.org/1998/Math/MathML',
        },
        Xr = y(
          'html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot'
        ),
        Kr = y(
          'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',
          !0
        ),
        Wr = function (t) {
          return Xr(t) || Kr(t)
        }
      function Hr(t) {
        return Kr(t) ? 'svg' : 'math' === t ? 'math' : void 0
      }
      var Jr = Object.create(null)
      var Yr = y('text,number,password,search,email,tel,url')
      function Qr(t) {
        if ('string' == typeof t) {
          var e = document.querySelector(t)
          return e || document.createElement('div')
        }
        return t
      }
      var tn = Object.freeze({
          createElement: function (t, e) {
            var r = document.createElement(t)
            return (
              'select' !== t ||
                (e.data &&
                  e.data.attrs &&
                  void 0 !== e.data.attrs.multiple &&
                  r.setAttribute('multiple', 'multiple')),
              r
            )
          },
          createElementNS: function (t, e) {
            return document.createElementNS(Zr[t], e)
          },
          createTextNode: function (t) {
            return document.createTextNode(t)
          },
          createComment: function (t) {
            return document.createComment(t)
          },
          insertBefore: function (t, e, r) {
            t.insertBefore(e, r)
          },
          removeChild: function (t, e) {
            t.removeChild(e)
          },
          appendChild: function (t, e) {
            t.appendChild(e)
          },
          parentNode: function (t) {
            return t.parentNode
          },
          nextSibling: function (t) {
            return t.nextSibling
          },
          tagName: function (t) {
            return t.tagName
          },
          setTextContent: function (t, e) {
            t.textContent = e
          },
          setStyleScope: function (t, e) {
            t.setAttribute(e, '')
          },
        }),
        en = {
          create: function (t, e) {
            rn(e)
          },
          update: function (t, e) {
            t.data.ref !== e.data.ref && (rn(t, !0), rn(e))
          },
          destroy: function (t) {
            rn(t, !0)
          },
        }
      function rn(t, e) {
        var r = t.data.ref
        if (o(r)) {
          var n = t.context,
            i = t.componentInstance || t.elm,
            a = n.$refs
          e
            ? Array.isArray(a[r])
              ? _(a[r], i)
              : a[r] === i && (a[r] = void 0)
            : t.data.refInFor
            ? Array.isArray(a[r])
              ? a[r].indexOf(i) < 0 && a[r].push(i)
              : (a[r] = [i])
            : (a[r] = i)
        }
      }
      var nn = new yt('', {}, []),
        on = ['create', 'activate', 'update', 'remove', 'destroy']
      function an(t, e) {
        return (
          t.key === e.key &&
          ((t.tag === e.tag &&
            t.isComment === e.isComment &&
            o(t.data) === o(e.data) &&
            (function (t, e) {
              if ('input' !== t.tag) return !0
              var r,
                n = o((r = t.data)) && o((r = r.attrs)) && r.type,
                i = o((r = e.data)) && o((r = r.attrs)) && r.type
              return n === i || (Yr(n) && Yr(i))
            })(t, e)) ||
            (a(t.isAsyncPlaceholder) &&
              t.asyncFactory === e.asyncFactory &&
              i(e.asyncFactory.error)))
        )
      }
      function sn(t, e, r) {
        var n,
          i,
          a = {}
        for (n = e; n <= r; ++n) o((i = t[n].key)) && (a[i] = n)
        return a
      }
      var ln = {
        create: un,
        update: un,
        destroy: function (t) {
          un(t, nn)
        },
      }
      function un(t, e) {
        ;(t.data.directives || e.data.directives) &&
          (function (t, e) {
            var r,
              n,
              i,
              o = t === nn,
              a = e === nn,
              s = pn(t.data.directives, t.context),
              l = pn(e.data.directives, e.context),
              u = [],
              c = []
            for (r in l)
              (n = s[r]),
                (i = l[r]),
                n
                  ? ((i.oldValue = n.value),
                    (i.oldArg = n.arg),
                    fn(i, 'update', e, t),
                    i.def && i.def.componentUpdated && c.push(i))
                  : (fn(i, 'bind', e, t), i.def && i.def.inserted && u.push(i))
            if (u.length) {
              var p = function () {
                for (var r = 0; r < u.length; r++) fn(u[r], 'inserted', e, t)
              }
              o ? ue(e, 'insert', p) : p()
            }
            c.length &&
              ue(e, 'postpatch', function () {
                for (var r = 0; r < c.length; r++)
                  fn(c[r], 'componentUpdated', e, t)
              })
            if (!o) for (r in s) l[r] || fn(s[r], 'unbind', t, t, a)
          })(t, e)
      }
      var cn = Object.create(null)
      function pn(t, e) {
        var r,
          n,
          i = Object.create(null)
        if (!t) return i
        for (r = 0; r < t.length; r++)
          (n = t[r]).modifiers || (n.modifiers = cn),
            (i[hn(n)] = n),
            (n.def = Nt(e.$options, 'directives', n.name))
        return i
      }
      function hn(t) {
        return (
          t.rawName || t.name + '.' + Object.keys(t.modifiers || {}).join('.')
        )
      }
      function fn(t, e, r, n, i) {
        var o = t.def && t.def[e]
        if (o)
          try {
            o(r.elm, t, r, n, i)
          } catch (n) {
            Gt(n, r.context, 'directive ' + t.name + ' ' + e + ' hook')
          }
      }
      var dn = [en, ln]
      function mn(t, e) {
        var r = e.componentOptions
        if (
          !(
            (o(r) && !1 === r.Ctor.options.inheritAttrs) ||
            (i(t.data.attrs) && i(e.data.attrs))
          )
        ) {
          var n,
            a,
            s = e.elm,
            l = t.data.attrs || {},
            u = e.data.attrs || {}
          for (n in (o(u.__ob__) && (u = e.data.attrs = P({}, u)), u))
            (a = u[n]), l[n] !== a && yn(s, n, a)
          for (n in ((J || Q) && u.value !== l.value && yn(s, 'value', u.value),
          l))
            i(u[n]) &&
              (Nr(n)
                ? s.removeAttributeNS(Br, Ur(n))
                : Dr(n) || s.removeAttribute(n))
        }
      }
      function yn(t, e, r) {
        t.tagName.indexOf('-') > -1
          ? vn(t, e, r)
          : Fr(e)
          ? jr(r)
            ? t.removeAttribute(e)
            : ((r =
                'allowfullscreen' === e && 'EMBED' === t.tagName ? 'true' : e),
              t.setAttribute(e, r))
          : Dr(e)
          ? t.setAttribute(
              e,
              (function (t, e) {
                return jr(e) || 'false' === e
                  ? 'false'
                  : 'contenteditable' === t && Rr(e)
                  ? e
                  : 'true'
              })(e, r)
            )
          : Nr(e)
          ? jr(r)
            ? t.removeAttributeNS(Br, Ur(e))
            : t.setAttributeNS(Br, e, r)
          : vn(t, e, r)
      }
      function vn(t, e, r) {
        if (jr(r)) t.removeAttribute(e)
        else {
          if (
            J &&
            !Y &&
            'TEXTAREA' === t.tagName &&
            'placeholder' === e &&
            '' !== r &&
            !t.__ieph
          ) {
            var n = function (e) {
              e.stopImmediatePropagation(), t.removeEventListener('input', n)
            }
            t.addEventListener('input', n), (t.__ieph = !0)
          }
          t.setAttribute(e, r)
        }
      }
      var gn = { create: mn, update: mn }
      function _n(t, e) {
        var r = e.elm,
          n = e.data,
          a = t.data
        if (
          !(
            i(n.staticClass) &&
            i(n.class) &&
            (i(a) || (i(a.staticClass) && i(a.class)))
          )
        ) {
          var s = Vr(e),
            l = r._transitionClasses
          o(l) && (s = Gr(s, $r(l))),
            s !== r._prevClass &&
              (r.setAttribute('class', s), (r._prevClass = s))
        }
      }
      var xn,
        bn,
        wn,
        En,
        Sn,
        Tn,
        In = { create: _n, update: _n },
        Cn = /[\w).+\-_$\]]/
      function An(t) {
        var e,
          r,
          n,
          i,
          o,
          a = !1,
          s = !1,
          l = !1,
          u = !1,
          c = 0,
          p = 0,
          h = 0,
          f = 0
        for (n = 0; n < t.length; n++)
          if (((r = e), (e = t.charCodeAt(n)), a))
            39 === e && 92 !== r && (a = !1)
          else if (s) 34 === e && 92 !== r && (s = !1)
          else if (l) 96 === e && 92 !== r && (l = !1)
          else if (u) 47 === e && 92 !== r && (u = !1)
          else if (
            124 !== e ||
            124 === t.charCodeAt(n + 1) ||
            124 === t.charCodeAt(n - 1) ||
            c ||
            p ||
            h
          ) {
            switch (e) {
              case 34:
                s = !0
                break
              case 39:
                a = !0
                break
              case 96:
                l = !0
                break
              case 40:
                h++
                break
              case 41:
                h--
                break
              case 91:
                p++
                break
              case 93:
                p--
                break
              case 123:
                c++
                break
              case 125:
                c--
            }
            if (47 === e) {
              for (
                var d = n - 1, m = void 0;
                d >= 0 && ' ' === (m = t.charAt(d));
                d--
              );
              ;(m && Cn.test(m)) || (u = !0)
            }
          } else void 0 === i ? ((f = n + 1), (i = t.slice(0, n).trim())) : y()
        function y() {
          ;(o || (o = [])).push(t.slice(f, n).trim()), (f = n + 1)
        }
        if ((void 0 === i ? (i = t.slice(0, n).trim()) : 0 !== f && y(), o))
          for (n = 0; n < o.length; n++) i = kn(i, o[n])
        return i
      }
      function kn(t, e) {
        var r = e.indexOf('(')
        if (r < 0) return '_f("' + e + '")(' + t + ')'
        var n = e.slice(0, r),
          i = e.slice(r + 1)
        return '_f("' + n + '")(' + t + (')' !== i ? ',' + i : i)
      }
      function Pn(t, e) {
        console.error('[Vue compiler]: ' + t)
      }
      function Mn(t, e) {
        return t
          ? t
              .map(function (t) {
                return t[e]
              })
              .filter(function (t) {
                return t
              })
          : []
      }
      function Ln(t, e, r, n, i) {
        ;(t.props || (t.props = [])).push(
          jn({ name: e, value: r, dynamic: i }, n)
        ),
          (t.plain = !1)
      }
      function zn(t, e, r, n, i) {
        ;(i
          ? t.dynamicAttrs || (t.dynamicAttrs = [])
          : t.attrs || (t.attrs = [])
        ).push(jn({ name: e, value: r, dynamic: i }, n)),
          (t.plain = !1)
      }
      function On(t, e, r, n) {
        ;(t.attrsMap[e] = r), t.attrsList.push(jn({ name: e, value: r }, n))
      }
      function Dn(t, e, r, n, i, o, a, s) {
        ;(t.directives || (t.directives = [])).push(
          jn(
            {
              name: e,
              rawName: r,
              value: n,
              arg: i,
              isDynamicArg: o,
              modifiers: a,
            },
            s
          )
        ),
          (t.plain = !1)
      }
      function Rn(t, e, r) {
        return r ? '_p(' + e + ',"' + t + '")' : t + e
      }
      function Fn(t, e, r, i, o, a, s, l) {
        var u
        ;(i = i || n).right
          ? l
            ? (e = '(' + e + ")==='click'?'contextmenu':(" + e + ')')
            : 'click' === e && ((e = 'contextmenu'), delete i.right)
          : i.middle &&
            (l
              ? (e = '(' + e + ")==='click'?'mouseup':(" + e + ')')
              : 'click' === e && (e = 'mouseup')),
          i.capture && (delete i.capture, (e = Rn('!', e, l))),
          i.once && (delete i.once, (e = Rn('~', e, l))),
          i.passive && (delete i.passive, (e = Rn('&', e, l))),
          i.native
            ? (delete i.native, (u = t.nativeEvents || (t.nativeEvents = {})))
            : (u = t.events || (t.events = {}))
        var c = jn({ value: r.trim(), dynamic: l }, s)
        i !== n && (c.modifiers = i)
        var p = u[e]
        Array.isArray(p)
          ? o
            ? p.unshift(c)
            : p.push(c)
          : (u[e] = p ? (o ? [c, p] : [p, c]) : c),
          (t.plain = !1)
      }
      function Bn(t, e, r) {
        var n = Nn(t, ':' + e) || Nn(t, 'v-bind:' + e)
        if (null != n) return An(n)
        if (!1 !== r) {
          var i = Nn(t, e)
          if (null != i) return JSON.stringify(i)
        }
      }
      function Nn(t, e, r) {
        var n
        if (null != (n = t.attrsMap[e]))
          for (var i = t.attrsList, o = 0, a = i.length; o < a; o++)
            if (i[o].name === e) {
              i.splice(o, 1)
              break
            }
        return r && delete t.attrsMap[e], n
      }
      function Un(t, e) {
        for (var r = t.attrsList, n = 0, i = r.length; n < i; n++) {
          var o = r[n]
          if (e.test(o.name)) return r.splice(n, 1), o
        }
      }
      function jn(t, e) {
        return (
          e &&
            (null != e.start && (t.start = e.start),
            null != e.end && (t.end = e.end)),
          t
        )
      }
      function Vn(t, e, r) {
        var n = r || {},
          i = n.number,
          o = '$$v'
        n.trim && (o = "(typeof $$v === 'string'? $$v.trim(): $$v)"),
          i && (o = '_n(' + o + ')')
        var a = qn(e, o)
        t.model = {
          value: '(' + e + ')',
          expression: JSON.stringify(e),
          callback: 'function ($$v) {' + a + '}',
        }
      }
      function qn(t, e) {
        var r = (function (t) {
          if (
            ((t = t.trim()),
            (xn = t.length),
            t.indexOf('[') < 0 || t.lastIndexOf(']') < xn - 1)
          )
            return (En = t.lastIndexOf('.')) > -1
              ? { exp: t.slice(0, En), key: '"' + t.slice(En + 1) + '"' }
              : { exp: t, key: null }
          ;(bn = t), (En = Sn = Tn = 0)
          for (; !$n(); ) Zn((wn = Gn())) ? Kn(wn) : 91 === wn && Xn(wn)
          return { exp: t.slice(0, Sn), key: t.slice(Sn + 1, Tn) }
        })(t)
        return null === r.key
          ? t + '=' + e
          : '$set(' + r.exp + ', ' + r.key + ', ' + e + ')'
      }
      function Gn() {
        return bn.charCodeAt(++En)
      }
      function $n() {
        return En >= xn
      }
      function Zn(t) {
        return 34 === t || 39 === t
      }
      function Xn(t) {
        var e = 1
        for (Sn = En; !$n(); )
          if (Zn((t = Gn()))) Kn(t)
          else if ((91 === t && e++, 93 === t && e--, 0 === e)) {
            Tn = En
            break
          }
      }
      function Kn(t) {
        for (var e = t; !$n() && (t = Gn()) !== e; );
      }
      var Wn
      function Hn(t, e, r) {
        var n = Wn
        return function i() {
          var o = e.apply(null, arguments)
          null !== o && Qn(t, i, r, n)
        }
      }
      var Jn = Wt && !(et && Number(et[1]) <= 53)
      function Yn(t, e, r, n) {
        if (Jn) {
          var i = lr,
            o = e
          e = o._wrapper = function (t) {
            if (
              t.target === t.currentTarget ||
              t.timeStamp >= i ||
              t.timeStamp <= 0 ||
              t.target.ownerDocument !== document
            )
              return o.apply(this, arguments)
          }
        }
        Wn.addEventListener(t, e, nt ? { capture: r, passive: n } : r)
      }
      function Qn(t, e, r, n) {
        ;(n || Wn).removeEventListener(t, e._wrapper || e, r)
      }
      function ti(t, e) {
        if (!i(t.data.on) || !i(e.data.on)) {
          var r = e.data.on || {},
            n = t.data.on || {}
          ;(Wn = e.elm),
            (function (t) {
              if (o(t.__r)) {
                var e = J ? 'change' : 'input'
                ;(t[e] = [].concat(t.__r, t[e] || [])), delete t.__r
              }
              o(t.__c) &&
                ((t.change = [].concat(t.__c, t.change || [])), delete t.__c)
            })(r),
            le(r, n, Yn, Qn, Hn, e.context),
            (Wn = void 0)
        }
      }
      var ei,
        ri = { create: ti, update: ti }
      function ni(t, e) {
        if (!i(t.data.domProps) || !i(e.data.domProps)) {
          var r,
            n,
            a = e.elm,
            s = t.data.domProps || {},
            l = e.data.domProps || {}
          for (r in (o(l.__ob__) && (l = e.data.domProps = P({}, l)), s))
            r in l || (a[r] = '')
          for (r in l) {
            if (((n = l[r]), 'textContent' === r || 'innerHTML' === r)) {
              if ((e.children && (e.children.length = 0), n === s[r])) continue
              1 === a.childNodes.length && a.removeChild(a.childNodes[0])
            }
            if ('value' === r && 'PROGRESS' !== a.tagName) {
              a._value = n
              var u = i(n) ? '' : String(n)
              ii(a, u) && (a.value = u)
            } else if ('innerHTML' === r && Kr(a.tagName) && i(a.innerHTML)) {
              ;(ei = ei || document.createElement('div')).innerHTML =
                '<svg>' + n + '</svg>'
              for (var c = ei.firstChild; a.firstChild; )
                a.removeChild(a.firstChild)
              for (; c.firstChild; ) a.appendChild(c.firstChild)
            } else if (n !== s[r])
              try {
                a[r] = n
              } catch (t) {}
          }
        }
      }
      function ii(t, e) {
        return (
          !t.composing &&
          ('OPTION' === t.tagName ||
            (function (t, e) {
              var r = !0
              try {
                r = document.activeElement !== t
              } catch (t) {}
              return r && t.value !== e
            })(t, e) ||
            (function (t, e) {
              var r = t.value,
                n = t._vModifiers
              if (o(n)) {
                if (n.number) return m(r) !== m(e)
                if (n.trim) return r.trim() !== e.trim()
              }
              return r !== e
            })(t, e))
        )
      }
      var oi = { create: ni, update: ni },
        ai = w(function (t) {
          var e = {},
            r = /:(.+)/
          return (
            t.split(/;(?![^(]*\))/g).forEach(function (t) {
              if (t) {
                var n = t.split(r)
                n.length > 1 && (e[n[0].trim()] = n[1].trim())
              }
            }),
            e
          )
        })
      function si(t) {
        var e = li(t.style)
        return t.staticStyle ? P(t.staticStyle, e) : e
      }
      function li(t) {
        return Array.isArray(t) ? M(t) : 'string' == typeof t ? ai(t) : t
      }
      var ui,
        ci = /^--/,
        pi = /\s*!important$/,
        hi = function (t, e, r) {
          if (ci.test(e)) t.style.setProperty(e, r)
          else if (pi.test(r))
            t.style.setProperty(C(e), r.replace(pi, ''), 'important')
          else {
            var n = di(e)
            if (Array.isArray(r))
              for (var i = 0, o = r.length; i < o; i++) t.style[n] = r[i]
            else t.style[n] = r
          }
        },
        fi = ['Webkit', 'Moz', 'ms'],
        di = w(function (t) {
          if (
            ((ui = ui || document.createElement('div').style),
            'filter' !== (t = S(t)) && t in ui)
          )
            return t
          for (
            var e = t.charAt(0).toUpperCase() + t.slice(1), r = 0;
            r < fi.length;
            r++
          ) {
            var n = fi[r] + e
            if (n in ui) return n
          }
        })
      function mi(t, e) {
        var r = e.data,
          n = t.data
        if (
          !(i(r.staticStyle) && i(r.style) && i(n.staticStyle) && i(n.style))
        ) {
          var a,
            s,
            l = e.elm,
            u = n.staticStyle,
            c = n.normalizedStyle || n.style || {},
            p = u || c,
            h = li(e.data.style) || {}
          e.data.normalizedStyle = o(h.__ob__) ? P({}, h) : h
          var f = (function (t, e) {
            var r,
              n = {}
            if (e)
              for (var i = t; i.componentInstance; )
                (i = i.componentInstance._vnode) &&
                  i.data &&
                  (r = si(i.data)) &&
                  P(n, r)
            ;(r = si(t.data)) && P(n, r)
            for (var o = t; (o = o.parent); )
              o.data && (r = si(o.data)) && P(n, r)
            return n
          })(e, !0)
          for (s in p) i(f[s]) && hi(l, s, '')
          for (s in f) (a = f[s]) !== p[s] && hi(l, s, null == a ? '' : a)
        }
      }
      var yi = { create: mi, update: mi },
        vi = /\s+/
      function gi(t, e) {
        if (e && (e = e.trim()))
          if (t.classList)
            e.indexOf(' ') > -1
              ? e.split(vi).forEach(function (e) {
                  return t.classList.add(e)
                })
              : t.classList.add(e)
          else {
            var r = ' ' + (t.getAttribute('class') || '') + ' '
            r.indexOf(' ' + e + ' ') < 0 &&
              t.setAttribute('class', (r + e).trim())
          }
      }
      function _i(t, e) {
        if (e && (e = e.trim()))
          if (t.classList)
            e.indexOf(' ') > -1
              ? e.split(vi).forEach(function (e) {
                  return t.classList.remove(e)
                })
              : t.classList.remove(e),
              t.classList.length || t.removeAttribute('class')
          else {
            for (
              var r = ' ' + (t.getAttribute('class') || '') + ' ',
                n = ' ' + e + ' ';
              r.indexOf(n) >= 0;

            )
              r = r.replace(n, ' ')
            ;(r = r.trim())
              ? t.setAttribute('class', r)
              : t.removeAttribute('class')
          }
      }
      function xi(t) {
        if (t) {
          if ('object' == typeof t) {
            var e = {}
            return !1 !== t.css && P(e, bi(t.name || 'v')), P(e, t), e
          }
          return 'string' == typeof t ? bi(t) : void 0
        }
      }
      var bi = w(function (t) {
          return {
            enterClass: t + '-enter',
            enterToClass: t + '-enter-to',
            enterActiveClass: t + '-enter-active',
            leaveClass: t + '-leave',
            leaveToClass: t + '-leave-to',
            leaveActiveClass: t + '-leave-active',
          }
        }),
        wi = X && !Y,
        Ei = 'transition',
        Si = 'transitionend',
        Ti = 'animation',
        Ii = 'animationend'
      wi &&
        (void 0 === window.ontransitionend &&
          void 0 !== window.onwebkittransitionend &&
          ((Ei = 'WebkitTransition'), (Si = 'webkitTransitionEnd')),
        void 0 === window.onanimationend &&
          void 0 !== window.onwebkitanimationend &&
          ((Ti = 'WebkitAnimation'), (Ii = 'webkitAnimationEnd')))
      var Ci = X
        ? window.requestAnimationFrame
          ? window.requestAnimationFrame.bind(window)
          : setTimeout
        : function (t) {
            return t()
          }
      function Ai(t) {
        Ci(function () {
          Ci(t)
        })
      }
      function ki(t, e) {
        var r = t._transitionClasses || (t._transitionClasses = [])
        r.indexOf(e) < 0 && (r.push(e), gi(t, e))
      }
      function Pi(t, e) {
        t._transitionClasses && _(t._transitionClasses, e), _i(t, e)
      }
      function Mi(t, e, r) {
        var n = zi(t, e),
          i = n.type,
          o = n.timeout,
          a = n.propCount
        if (!i) return r()
        var s = 'transition' === i ? Si : Ii,
          l = 0,
          u = function () {
            t.removeEventListener(s, c), r()
          },
          c = function (e) {
            e.target === t && ++l >= a && u()
          }
        setTimeout(function () {
          l < a && u()
        }, o + 1),
          t.addEventListener(s, c)
      }
      var Li = /\b(transform|all)(,|$)/
      function zi(t, e) {
        var r,
          n = window.getComputedStyle(t),
          i = (n[Ei + 'Delay'] || '').split(', '),
          o = (n[Ei + 'Duration'] || '').split(', '),
          a = Oi(i, o),
          s = (n[Ti + 'Delay'] || '').split(', '),
          l = (n[Ti + 'Duration'] || '').split(', '),
          u = Oi(s, l),
          c = 0,
          p = 0
        return (
          'transition' === e
            ? a > 0 && ((r = 'transition'), (c = a), (p = o.length))
            : 'animation' === e
            ? u > 0 && ((r = 'animation'), (c = u), (p = l.length))
            : (p = (r =
                (c = Math.max(a, u)) > 0
                  ? a > u
                    ? 'transition'
                    : 'animation'
                  : null)
                ? 'transition' === r
                  ? o.length
                  : l.length
                : 0),
          {
            type: r,
            timeout: c,
            propCount: p,
            hasTransform: 'transition' === r && Li.test(n[Ei + 'Property']),
          }
        )
      }
      function Oi(t, e) {
        for (; t.length < e.length; ) t = t.concat(t)
        return Math.max.apply(
          null,
          e.map(function (e, r) {
            return Di(e) + Di(t[r])
          })
        )
      }
      function Di(t) {
        return 1e3 * Number(t.slice(0, -1).replace(',', '.'))
      }
      function Ri(t, e) {
        var r = t.elm
        o(r._leaveCb) && ((r._leaveCb.cancelled = !0), r._leaveCb())
        var n = xi(t.data.transition)
        if (!i(n) && !o(r._enterCb) && 1 === r.nodeType) {
          for (
            var a = n.css,
              s = n.type,
              u = n.enterClass,
              c = n.enterToClass,
              p = n.enterActiveClass,
              h = n.appearClass,
              f = n.appearToClass,
              d = n.appearActiveClass,
              y = n.beforeEnter,
              v = n.enter,
              g = n.afterEnter,
              _ = n.enterCancelled,
              x = n.beforeAppear,
              b = n.appear,
              w = n.afterAppear,
              E = n.appearCancelled,
              S = n.duration,
              T = Je,
              I = Je.$vnode;
            I && I.parent;

          )
            (T = I.context), (I = I.parent)
          var C = !T._isMounted || !t.isRootInsert
          if (!C || b || '' === b) {
            var A = C && h ? h : u,
              k = C && d ? d : p,
              P = C && f ? f : c,
              M = (C && x) || y,
              L = C && 'function' == typeof b ? b : v,
              z = (C && w) || g,
              O = (C && E) || _,
              D = m(l(S) ? S.enter : S)
            0
            var R = !1 !== a && !Y,
              B = Ni(L),
              N = (r._enterCb = F(function () {
                R && (Pi(r, P), Pi(r, k)),
                  N.cancelled ? (R && Pi(r, A), O && O(r)) : z && z(r),
                  (r._enterCb = null)
              }))
            t.data.show ||
              ue(t, 'insert', function () {
                var e = r.parentNode,
                  n = e && e._pending && e._pending[t.key]
                n && n.tag === t.tag && n.elm._leaveCb && n.elm._leaveCb(),
                  L && L(r, N)
              }),
              M && M(r),
              R &&
                (ki(r, A),
                ki(r, k),
                Ai(function () {
                  Pi(r, A),
                    N.cancelled ||
                      (ki(r, P), B || (Bi(D) ? setTimeout(N, D) : Mi(r, s, N)))
                })),
              t.data.show && (e && e(), L && L(r, N)),
              R || B || N()
          }
        }
      }
      function Fi(t, e) {
        var r = t.elm
        o(r._enterCb) && ((r._enterCb.cancelled = !0), r._enterCb())
        var n = xi(t.data.transition)
        if (i(n) || 1 !== r.nodeType) return e()
        if (!o(r._leaveCb)) {
          var a = n.css,
            s = n.type,
            u = n.leaveClass,
            c = n.leaveToClass,
            p = n.leaveActiveClass,
            h = n.beforeLeave,
            f = n.leave,
            d = n.afterLeave,
            y = n.leaveCancelled,
            v = n.delayLeave,
            g = n.duration,
            _ = !1 !== a && !Y,
            x = Ni(f),
            b = m(l(g) ? g.leave : g)
          0
          var w = (r._leaveCb = F(function () {
            r.parentNode &&
              r.parentNode._pending &&
              (r.parentNode._pending[t.key] = null),
              _ && (Pi(r, c), Pi(r, p)),
              w.cancelled ? (_ && Pi(r, u), y && y(r)) : (e(), d && d(r)),
              (r._leaveCb = null)
          }))
          v ? v(E) : E()
        }
        function E() {
          w.cancelled ||
            (!t.data.show &&
              r.parentNode &&
              ((r.parentNode._pending || (r.parentNode._pending = {}))[
                t.key
              ] = t),
            h && h(r),
            _ &&
              (ki(r, u),
              ki(r, p),
              Ai(function () {
                Pi(r, u),
                  w.cancelled ||
                    (ki(r, c), x || (Bi(b) ? setTimeout(w, b) : Mi(r, s, w)))
              })),
            f && f(r, w),
            _ || x || w())
        }
      }
      function Bi(t) {
        return 'number' == typeof t && !isNaN(t)
      }
      function Ni(t) {
        if (i(t)) return !1
        var e = t.fns
        return o(e)
          ? Ni(Array.isArray(e) ? e[0] : e)
          : (t._length || t.length) > 1
      }
      function Ui(t, e) {
        !0 !== e.data.show && Ri(e)
      }
      var ji = (function (t) {
        var e,
          r,
          n = {},
          l = t.modules,
          u = t.nodeOps
        for (e = 0; e < on.length; ++e)
          for (n[on[e]] = [], r = 0; r < l.length; ++r)
            o(l[r][on[e]]) && n[on[e]].push(l[r][on[e]])
        function c(t) {
          var e = u.parentNode(t)
          o(e) && u.removeChild(e, t)
        }
        function p(t, e, r, i, s, l, c) {
          if (
            (o(t.elm) && o(l) && (t = l[c] = xt(t)),
            (t.isRootInsert = !s),
            !(function (t, e, r, i) {
              var s = t.data
              if (o(s)) {
                var l = o(t.componentInstance) && s.keepAlive
                if (
                  (o((s = s.hook)) && o((s = s.init)) && s(t, !1),
                  o(t.componentInstance))
                )
                  return (
                    h(t, e),
                    f(r, t.elm, i),
                    a(l) &&
                      (function (t, e, r, i) {
                        var a,
                          s = t
                        for (; s.componentInstance; )
                          if (
                            ((s = s.componentInstance._vnode),
                            o((a = s.data)) && o((a = a.transition)))
                          ) {
                            for (a = 0; a < n.activate.length; ++a)
                              n.activate[a](nn, s)
                            e.push(s)
                            break
                          }
                        f(r, t.elm, i)
                      })(t, e, r, i),
                    !0
                  )
              }
            })(t, e, r, i))
          ) {
            var p = t.data,
              m = t.children,
              y = t.tag
            o(y)
              ? ((t.elm = t.ns
                  ? u.createElementNS(t.ns, y)
                  : u.createElement(y, t)),
                g(t),
                d(t, m, e),
                o(p) && v(t, e),
                f(r, t.elm, i))
              : a(t.isComment)
              ? ((t.elm = u.createComment(t.text)), f(r, t.elm, i))
              : ((t.elm = u.createTextNode(t.text)), f(r, t.elm, i))
          }
        }
        function h(t, e) {
          o(t.data.pendingInsert) &&
            (e.push.apply(e, t.data.pendingInsert),
            (t.data.pendingInsert = null)),
            (t.elm = t.componentInstance.$el),
            m(t) ? (v(t, e), g(t)) : (rn(t), e.push(t))
        }
        function f(t, e, r) {
          o(t) &&
            (o(r)
              ? u.parentNode(r) === t && u.insertBefore(t, e, r)
              : u.appendChild(t, e))
        }
        function d(t, e, r) {
          if (Array.isArray(e)) {
            0
            for (var n = 0; n < e.length; ++n) p(e[n], r, t.elm, null, !0, e, n)
          } else
            s(t.text) && u.appendChild(t.elm, u.createTextNode(String(t.text)))
        }
        function m(t) {
          for (; t.componentInstance; ) t = t.componentInstance._vnode
          return o(t.tag)
        }
        function v(t, r) {
          for (var i = 0; i < n.create.length; ++i) n.create[i](nn, t)
          o((e = t.data.hook)) &&
            (o(e.create) && e.create(nn, t), o(e.insert) && r.push(t))
        }
        function g(t) {
          var e
          if (o((e = t.fnScopeId))) u.setStyleScope(t.elm, e)
          else
            for (var r = t; r; )
              o((e = r.context)) &&
                o((e = e.$options._scopeId)) &&
                u.setStyleScope(t.elm, e),
                (r = r.parent)
          o((e = Je)) &&
            e !== t.context &&
            e !== t.fnContext &&
            o((e = e.$options._scopeId)) &&
            u.setStyleScope(t.elm, e)
        }
        function _(t, e, r, n, i, o) {
          for (; n <= i; ++n) p(r[n], o, t, e, !1, r, n)
        }
        function x(t) {
          var e,
            r,
            i = t.data
          if (o(i))
            for (
              o((e = i.hook)) && o((e = e.destroy)) && e(t), e = 0;
              e < n.destroy.length;
              ++e
            )
              n.destroy[e](t)
          if (o((e = t.children)))
            for (r = 0; r < t.children.length; ++r) x(t.children[r])
        }
        function b(t, e, r) {
          for (; e <= r; ++e) {
            var n = t[e]
            o(n) && (o(n.tag) ? (w(n), x(n)) : c(n.elm))
          }
        }
        function w(t, e) {
          if (o(e) || o(t.data)) {
            var r,
              i = n.remove.length + 1
            for (
              o(e)
                ? (e.listeners += i)
                : (e = (function (t, e) {
                    function r() {
                      0 == --r.listeners && c(t)
                    }
                    return (r.listeners = e), r
                  })(t.elm, i)),
                o((r = t.componentInstance)) &&
                  o((r = r._vnode)) &&
                  o(r.data) &&
                  w(r, e),
                r = 0;
              r < n.remove.length;
              ++r
            )
              n.remove[r](t, e)
            o((r = t.data.hook)) && o((r = r.remove)) ? r(t, e) : e()
          } else c(t.elm)
        }
        function E(t, e, r, n) {
          for (var i = r; i < n; i++) {
            var a = e[i]
            if (o(a) && an(t, a)) return i
          }
        }
        function S(t, e, r, s, l, c) {
          if (t !== e) {
            o(e.elm) && o(s) && (e = s[l] = xt(e))
            var h = (e.elm = t.elm)
            if (a(t.isAsyncPlaceholder))
              o(e.asyncFactory.resolved)
                ? C(t.elm, e, r)
                : (e.isAsyncPlaceholder = !0)
            else if (
              a(e.isStatic) &&
              a(t.isStatic) &&
              e.key === t.key &&
              (a(e.isCloned) || a(e.isOnce))
            )
              e.componentInstance = t.componentInstance
            else {
              var f,
                d = e.data
              o(d) && o((f = d.hook)) && o((f = f.prepatch)) && f(t, e)
              var y = t.children,
                v = e.children
              if (o(d) && m(e)) {
                for (f = 0; f < n.update.length; ++f) n.update[f](t, e)
                o((f = d.hook)) && o((f = f.update)) && f(t, e)
              }
              i(e.text)
                ? o(y) && o(v)
                  ? y !== v &&
                    (function (t, e, r, n, a) {
                      var s,
                        l,
                        c,
                        h = 0,
                        f = 0,
                        d = e.length - 1,
                        m = e[0],
                        y = e[d],
                        v = r.length - 1,
                        g = r[0],
                        x = r[v],
                        w = !a
                      for (0; h <= d && f <= v; )
                        i(m)
                          ? (m = e[++h])
                          : i(y)
                          ? (y = e[--d])
                          : an(m, g)
                          ? (S(m, g, n, r, f), (m = e[++h]), (g = r[++f]))
                          : an(y, x)
                          ? (S(y, x, n, r, v), (y = e[--d]), (x = r[--v]))
                          : an(m, x)
                          ? (S(m, x, n, r, v),
                            w && u.insertBefore(t, m.elm, u.nextSibling(y.elm)),
                            (m = e[++h]),
                            (x = r[--v]))
                          : an(y, g)
                          ? (S(y, g, n, r, f),
                            w && u.insertBefore(t, y.elm, m.elm),
                            (y = e[--d]),
                            (g = r[++f]))
                          : (i(s) && (s = sn(e, h, d)),
                            i((l = o(g.key) ? s[g.key] : E(g, e, h, d)))
                              ? p(g, n, t, m.elm, !1, r, f)
                              : an((c = e[l]), g)
                              ? (S(c, g, n, r, f),
                                (e[l] = void 0),
                                w && u.insertBefore(t, c.elm, m.elm))
                              : p(g, n, t, m.elm, !1, r, f),
                            (g = r[++f]))
                      h > d
                        ? _(t, i(r[v + 1]) ? null : r[v + 1].elm, r, f, v, n)
                        : f > v && b(e, h, d)
                    })(h, y, v, r, c)
                  : o(v)
                  ? (o(t.text) && u.setTextContent(h, ''),
                    _(h, null, v, 0, v.length - 1, r))
                  : o(y)
                  ? b(y, 0, y.length - 1)
                  : o(t.text) && u.setTextContent(h, '')
                : t.text !== e.text && u.setTextContent(h, e.text),
                o(d) && o((f = d.hook)) && o((f = f.postpatch)) && f(t, e)
            }
          }
        }
        function T(t, e, r) {
          if (a(r) && o(t.parent)) t.parent.data.pendingInsert = e
          else for (var n = 0; n < e.length; ++n) e[n].data.hook.insert(e[n])
        }
        var I = y('attrs,class,staticClass,staticStyle,key')
        function C(t, e, r, n) {
          var i,
            s = e.tag,
            l = e.data,
            u = e.children
          if (
            ((n = n || (l && l.pre)),
            (e.elm = t),
            a(e.isComment) && o(e.asyncFactory))
          )
            return (e.isAsyncPlaceholder = !0), !0
          if (
            o(l) &&
            (o((i = l.hook)) && o((i = i.init)) && i(e, !0),
            o((i = e.componentInstance)))
          )
            return h(e, r), !0
          if (o(s)) {
            if (o(u))
              if (t.hasChildNodes())
                if (o((i = l)) && o((i = i.domProps)) && o((i = i.innerHTML))) {
                  if (i !== t.innerHTML) return !1
                } else {
                  for (var c = !0, p = t.firstChild, f = 0; f < u.length; f++) {
                    if (!p || !C(p, u[f], r, n)) {
                      c = !1
                      break
                    }
                    p = p.nextSibling
                  }
                  if (!c || p) return !1
                }
              else d(e, u, r)
            if (o(l)) {
              var m = !1
              for (var y in l)
                if (!I(y)) {
                  ;(m = !0), v(e, r)
                  break
                }
              !m && l.class && oe(l.class)
            }
          } else t.data !== e.text && (t.data = e.text)
          return !0
        }
        return function (t, e, r, s) {
          if (!i(e)) {
            var l,
              c = !1,
              h = []
            if (i(t)) (c = !0), p(e, h)
            else {
              var f = o(t.nodeType)
              if (!f && an(t, e)) S(t, e, h, null, null, s)
              else {
                if (f) {
                  if (
                    (1 === t.nodeType &&
                      t.hasAttribute('data-server-rendered') &&
                      (t.removeAttribute('data-server-rendered'), (r = !0)),
                    a(r) && C(t, e, h))
                  )
                    return T(e, h, !0), t
                  ;(l = t),
                    (t = new yt(u.tagName(l).toLowerCase(), {}, [], void 0, l))
                }
                var d = t.elm,
                  y = u.parentNode(d)
                if (
                  (p(e, h, d._leaveCb ? null : y, u.nextSibling(d)),
                  o(e.parent))
                )
                  for (var v = e.parent, g = m(e); v; ) {
                    for (var _ = 0; _ < n.destroy.length; ++_) n.destroy[_](v)
                    if (((v.elm = e.elm), g)) {
                      for (var w = 0; w < n.create.length; ++w)
                        n.create[w](nn, v)
                      var E = v.data.hook.insert
                      if (E.merged)
                        for (var I = 1; I < E.fns.length; I++) E.fns[I]()
                    } else rn(v)
                    v = v.parent
                  }
                o(y) ? b([t], 0, 0) : o(t.tag) && x(t)
              }
            }
            return T(e, h, c), e.elm
          }
          o(t) && x(t)
        }
      })({
        nodeOps: tn,
        modules: [
          gn,
          In,
          ri,
          oi,
          yi,
          X
            ? {
                create: Ui,
                activate: Ui,
                remove: function (t, e) {
                  !0 !== t.data.show ? Fi(t, e) : e()
                },
              }
            : {},
        ].concat(dn),
      })
      Y &&
        document.addEventListener('selectionchange', function () {
          var t = document.activeElement
          t && t.vmodel && Wi(t, 'input')
        })
      var Vi = {
        inserted: function (t, e, r, n) {
          'select' === r.tag
            ? (n.elm && !n.elm._vOptions
                ? ue(r, 'postpatch', function () {
                    Vi.componentUpdated(t, e, r)
                  })
                : qi(t, e, r.context),
              (t._vOptions = [].map.call(t.options, Zi)))
            : ('textarea' === r.tag || Yr(t.type)) &&
              ((t._vModifiers = e.modifiers),
              e.modifiers.lazy ||
                (t.addEventListener('compositionstart', Xi),
                t.addEventListener('compositionend', Ki),
                t.addEventListener('change', Ki),
                Y && (t.vmodel = !0)))
        },
        componentUpdated: function (t, e, r) {
          if ('select' === r.tag) {
            qi(t, e, r.context)
            var n = t._vOptions,
              i = (t._vOptions = [].map.call(t.options, Zi))
            if (
              i.some(function (t, e) {
                return !D(t, n[e])
              })
            )
              (t.multiple
                ? e.value.some(function (t) {
                    return $i(t, i)
                  })
                : e.value !== e.oldValue && $i(e.value, i)) && Wi(t, 'change')
          }
        },
      }
      function qi(t, e, r) {
        Gi(t, e, r),
          (J || Q) &&
            setTimeout(function () {
              Gi(t, e, r)
            }, 0)
      }
      function Gi(t, e, r) {
        var n = e.value,
          i = t.multiple
        if (!i || Array.isArray(n)) {
          for (var o, a, s = 0, l = t.options.length; s < l; s++)
            if (((a = t.options[s]), i))
              (o = R(n, Zi(a)) > -1), a.selected !== o && (a.selected = o)
            else if (D(Zi(a), n))
              return void (t.selectedIndex !== s && (t.selectedIndex = s))
          i || (t.selectedIndex = -1)
        }
      }
      function $i(t, e) {
        return e.every(function (e) {
          return !D(e, t)
        })
      }
      function Zi(t) {
        return '_value' in t ? t._value : t.value
      }
      function Xi(t) {
        t.target.composing = !0
      }
      function Ki(t) {
        t.target.composing && ((t.target.composing = !1), Wi(t.target, 'input'))
      }
      function Wi(t, e) {
        var r = document.createEvent('HTMLEvents')
        r.initEvent(e, !0, !0), t.dispatchEvent(r)
      }
      function Hi(t) {
        return !t.componentInstance || (t.data && t.data.transition)
          ? t
          : Hi(t.componentInstance._vnode)
      }
      var Ji = {
          model: Vi,
          show: {
            bind: function (t, e, r) {
              var n = e.value,
                i = (r = Hi(r)).data && r.data.transition,
                o = (t.__vOriginalDisplay =
                  'none' === t.style.display ? '' : t.style.display)
              n && i
                ? ((r.data.show = !0),
                  Ri(r, function () {
                    t.style.display = o
                  }))
                : (t.style.display = n ? o : 'none')
            },
            update: function (t, e, r) {
              var n = e.value
              !n != !e.oldValue &&
                ((r = Hi(r)).data && r.data.transition
                  ? ((r.data.show = !0),
                    n
                      ? Ri(r, function () {
                          t.style.display = t.__vOriginalDisplay
                        })
                      : Fi(r, function () {
                          t.style.display = 'none'
                        }))
                  : (t.style.display = n ? t.__vOriginalDisplay : 'none'))
            },
            unbind: function (t, e, r, n, i) {
              i || (t.style.display = t.__vOriginalDisplay)
            },
          },
        },
        Yi = {
          name: String,
          appear: Boolean,
          css: Boolean,
          mode: String,
          type: String,
          enterClass: String,
          leaveClass: String,
          enterToClass: String,
          leaveToClass: String,
          enterActiveClass: String,
          leaveActiveClass: String,
          appearClass: String,
          appearActiveClass: String,
          appearToClass: String,
          duration: [Number, String, Object],
        }
      function Qi(t) {
        var e = t && t.componentOptions
        return e && e.Ctor.options.abstract ? Qi(Ze(e.children)) : t
      }
      function to(t) {
        var e = {},
          r = t.$options
        for (var n in r.propsData) e[n] = t[n]
        var i = r._parentListeners
        for (var o in i) e[S(o)] = i[o]
        return e
      }
      function eo(t, e) {
        if (/\d-keep-alive$/.test(e.tag))
          return t('keep-alive', { props: e.componentOptions.propsData })
      }
      var ro = function (t) {
          return t.tag || $e(t)
        },
        no = function (t) {
          return 'show' === t.name
        },
        io = {
          name: 'transition',
          props: Yi,
          abstract: !0,
          render: function (t) {
            var e = this,
              r = this.$slots.default
            if (r && (r = r.filter(ro)).length) {
              0
              var n = this.mode
              0
              var i = r[0]
              if (
                (function (t) {
                  for (; (t = t.parent); ) if (t.data.transition) return !0
                })(this.$vnode)
              )
                return i
              var o = Qi(i)
              if (!o) return i
              if (this._leaving) return eo(t, i)
              var a = '__transition-' + this._uid + '-'
              o.key =
                null == o.key
                  ? o.isComment
                    ? a + 'comment'
                    : a + o.tag
                  : s(o.key)
                  ? 0 === String(o.key).indexOf(a)
                    ? o.key
                    : a + o.key
                  : o.key
              var l = ((o.data || (o.data = {})).transition = to(this)),
                u = this._vnode,
                c = Qi(u)
              if (
                (o.data.directives &&
                  o.data.directives.some(no) &&
                  (o.data.show = !0),
                c &&
                  c.data &&
                  !(function (t, e) {
                    return e.key === t.key && e.tag === t.tag
                  })(o, c) &&
                  !$e(c) &&
                  (!c.componentInstance ||
                    !c.componentInstance._vnode.isComment))
              ) {
                var p = (c.data.transition = P({}, l))
                if ('out-in' === n)
                  return (
                    (this._leaving = !0),
                    ue(p, 'afterLeave', function () {
                      ;(e._leaving = !1), e.$forceUpdate()
                    }),
                    eo(t, i)
                  )
                if ('in-out' === n) {
                  if ($e(o)) return u
                  var h,
                    f = function () {
                      h()
                    }
                  ue(l, 'afterEnter', f),
                    ue(l, 'enterCancelled', f),
                    ue(p, 'delayLeave', function (t) {
                      h = t
                    })
                }
              }
              return i
            }
          },
        },
        oo = P({ tag: String, moveClass: String }, Yi)
      function ao(t) {
        t.elm._moveCb && t.elm._moveCb(), t.elm._enterCb && t.elm._enterCb()
      }
      function so(t) {
        t.data.newPos = t.elm.getBoundingClientRect()
      }
      function lo(t) {
        var e = t.data.pos,
          r = t.data.newPos,
          n = e.left - r.left,
          i = e.top - r.top
        if (n || i) {
          t.data.moved = !0
          var o = t.elm.style
          ;(o.transform = o.WebkitTransform =
            'translate(' + n + 'px,' + i + 'px)'),
            (o.transitionDuration = '0s')
        }
      }
      delete oo.mode
      var uo = {
        Transition: io,
        TransitionGroup: {
          props: oo,
          beforeMount: function () {
            var t = this,
              e = this._update
            this._update = function (r, n) {
              var i = Ye(t)
              t.__patch__(t._vnode, t.kept, !1, !0),
                (t._vnode = t.kept),
                i(),
                e.call(t, r, n)
            }
          },
          render: function (t) {
            for (
              var e = this.tag || this.$vnode.data.tag || 'span',
                r = Object.create(null),
                n = (this.prevChildren = this.children),
                i = this.$slots.default || [],
                o = (this.children = []),
                a = to(this),
                s = 0;
              s < i.length;
              s++
            ) {
              var l = i[s]
              if (l.tag)
                if (null != l.key && 0 !== String(l.key).indexOf('__vlist'))
                  o.push(l),
                    (r[l.key] = l),
                    ((l.data || (l.data = {})).transition = a)
                else;
            }
            if (n) {
              for (var u = [], c = [], p = 0; p < n.length; p++) {
                var h = n[p]
                ;(h.data.transition = a),
                  (h.data.pos = h.elm.getBoundingClientRect()),
                  r[h.key] ? u.push(h) : c.push(h)
              }
              ;(this.kept = t(e, null, u)), (this.removed = c)
            }
            return t(e, null, o)
          },
          updated: function () {
            var t = this.prevChildren,
              e = this.moveClass || (this.name || 'v') + '-move'
            t.length &&
              this.hasMove(t[0].elm, e) &&
              (t.forEach(ao),
              t.forEach(so),
              t.forEach(lo),
              (this._reflow = document.body.offsetHeight),
              t.forEach(function (t) {
                if (t.data.moved) {
                  var r = t.elm,
                    n = r.style
                  ki(r, e),
                    (n.transform = n.WebkitTransform = n.transitionDuration =
                      ''),
                    r.addEventListener(
                      Si,
                      (r._moveCb = function t(n) {
                        ;(n && n.target !== r) ||
                          (n && !/transform$/.test(n.propertyName)) ||
                          (r.removeEventListener(Si, t),
                          (r._moveCb = null),
                          Pi(r, e))
                      })
                    )
                }
              }))
          },
          methods: {
            hasMove: function (t, e) {
              if (!wi) return !1
              if (this._hasMove) return this._hasMove
              var r = t.cloneNode()
              t._transitionClasses &&
                t._transitionClasses.forEach(function (t) {
                  _i(r, t)
                }),
                gi(r, e),
                (r.style.display = 'none'),
                this.$el.appendChild(r)
              var n = zi(r)
              return this.$el.removeChild(r), (this._hasMove = n.hasTransform)
            },
          },
        },
      }
      ;(Sr.config.mustUseProp = Or),
        (Sr.config.isReservedTag = Wr),
        (Sr.config.isReservedAttr = Lr),
        (Sr.config.getTagNamespace = Hr),
        (Sr.config.isUnknownElement = function (t) {
          if (!X) return !0
          if (Wr(t)) return !1
          if (((t = t.toLowerCase()), null != Jr[t])) return Jr[t]
          var e = document.createElement(t)
          return t.indexOf('-') > -1
            ? (Jr[t] =
                e.constructor === window.HTMLUnknownElement ||
                e.constructor === window.HTMLElement)
            : (Jr[t] = /HTMLUnknownElement/.test(e.toString()))
        }),
        P(Sr.options.directives, Ji),
        P(Sr.options.components, uo),
        (Sr.prototype.__patch__ = X ? ji : L),
        (Sr.prototype.$mount = function (t, e) {
          return (function (t, e, r) {
            var n
            return (
              (t.$el = e),
              t.$options.render || (t.$options.render = gt),
              er(t, 'beforeMount'),
              (n = function () {
                t._update(t._render(), r)
              }),
              new fr(
                t,
                n,
                L,
                {
                  before: function () {
                    t._isMounted && !t._isDestroyed && er(t, 'beforeUpdate')
                  },
                },
                !0
              ),
              (r = !1),
              null == t.$vnode && ((t._isMounted = !0), er(t, 'mounted')),
              t
            )
          })(this, (t = t && X ? Qr(t) : void 0), e)
        }),
        X &&
          setTimeout(function () {
            U.devtools && at && at.emit('init', Sr)
          }, 0)
      var co = /\{\{((?:.|\r?\n)+?)\}\}/g,
        po = /[-.*+?^${}()|[\]\/\\]/g,
        ho = w(function (t) {
          var e = t[0].replace(po, '\\$&'),
            r = t[1].replace(po, '\\$&')
          return new RegExp(e + '((?:.|\\n)+?)' + r, 'g')
        })
      var fo = {
        staticKeys: ['staticClass'],
        transformNode: function (t, e) {
          e.warn
          var r = Nn(t, 'class')
          r && (t.staticClass = JSON.stringify(r))
          var n = Bn(t, 'class', !1)
          n && (t.classBinding = n)
        },
        genData: function (t) {
          var e = ''
          return (
            t.staticClass && (e += 'staticClass:' + t.staticClass + ','),
            t.classBinding && (e += 'class:' + t.classBinding + ','),
            e
          )
        },
      }
      var mo,
        yo = {
          staticKeys: ['staticStyle'],
          transformNode: function (t, e) {
            e.warn
            var r = Nn(t, 'style')
            r && (t.staticStyle = JSON.stringify(ai(r)))
            var n = Bn(t, 'style', !1)
            n && (t.styleBinding = n)
          },
          genData: function (t) {
            var e = ''
            return (
              t.staticStyle && (e += 'staticStyle:' + t.staticStyle + ','),
              t.styleBinding && (e += 'style:(' + t.styleBinding + '),'),
              e
            )
          },
        },
        vo = function (t) {
          return (
            ((mo = mo || document.createElement('div')).innerHTML = t),
            mo.textContent
          )
        },
        go = y(
          'area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr'
        ),
        _o = y('colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source'),
        xo = y(
          'address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track'
        ),
        bo = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,
        wo = /^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,
        Eo = '[a-zA-Z_][\\-\\.0-9_a-zA-Z' + j.source + ']*',
        So = '((?:' + Eo + '\\:)?' + Eo + ')',
        To = new RegExp('^<' + So),
        Io = /^\s*(\/?)>/,
        Co = new RegExp('^<\\/' + So + '[^>]*>'),
        Ao = /^<!DOCTYPE [^>]+>/i,
        ko = /^<!\--/,
        Po = /^<!\[/,
        Mo = y('script,style,textarea', !0),
        Lo = {},
        zo = {
          '&lt;': '<',
          '&gt;': '>',
          '&quot;': '"',
          '&amp;': '&',
          '&#10;': '\n',
          '&#9;': '\t',
          '&#39;': "'",
        },
        Oo = /&(?:lt|gt|quot|amp|#39);/g,
        Do = /&(?:lt|gt|quot|amp|#39|#10|#9);/g,
        Ro = y('pre,textarea', !0),
        Fo = function (t, e) {
          return t && Ro(t) && '\n' === e[0]
        }
      function Bo(t, e) {
        var r = e ? Do : Oo
        return t.replace(r, function (t) {
          return zo[t]
        })
      }
      var No,
        Uo,
        jo,
        Vo,
        qo,
        Go,
        $o,
        Zo,
        Xo = /^@|^v-on:/,
        Ko = /^v-|^@|^:|^#/,
        Wo = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,
        Ho = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/,
        Jo = /^\(|\)$/g,
        Yo = /^\[.*\]$/,
        Qo = /:(.*)$/,
        ta = /^:|^\.|^v-bind:/,
        ea = /\.[^.\]]+(?=[^\]]*$)/g,
        ra = /^v-slot(:|$)|^#/,
        na = /[\r\n]/,
        ia = /\s+/g,
        oa = w(vo)
      function aa(t, e, r) {
        return {
          type: 1,
          tag: t,
          attrsList: e,
          attrsMap: fa(e),
          rawAttrsMap: {},
          parent: r,
          children: [],
        }
      }
      function sa(t, e) {
        ;(No = e.warn || Pn),
          (Go = e.isPreTag || z),
          ($o = e.mustUseProp || z),
          (Zo = e.getTagNamespace || z)
        var r = e.isReservedTag || z
        ;(function (t) {
          return !!t.component || !r(t.tag)
        },
          (jo = Mn(e.modules, 'transformNode')),
          (Vo = Mn(e.modules, 'preTransformNode')),
          (qo = Mn(e.modules, 'postTransformNode')),
          (Uo = e.delimiters))
        var n,
          i,
          o = [],
          a = !1 !== e.preserveWhitespace,
          s = e.whitespace,
          l = !1,
          u = !1
        function c(t) {
          if (
            (p(t),
            l || t.processed || (t = la(t, e)),
            o.length ||
              t === n ||
              (n.if &&
                (t.elseif || t.else) &&
                ca(n, { exp: t.elseif, block: t })),
            i && !t.forbidden)
          )
            if (t.elseif || t.else)
              (a = t),
                (s = (function (t) {
                  for (var e = t.length; e--; ) {
                    if (1 === t[e].type) return t[e]
                    t.pop()
                  }
                })(i.children)) &&
                  s.if &&
                  ca(s, { exp: a.elseif, block: a })
            else {
              if (t.slotScope) {
                var r = t.slotTarget || '"default"'
                ;(i.scopedSlots || (i.scopedSlots = {}))[r] = t
              }
              i.children.push(t), (t.parent = i)
            }
          var a, s
          ;(t.children = t.children.filter(function (t) {
            return !t.slotScope
          })),
            p(t),
            t.pre && (l = !1),
            Go(t.tag) && (u = !1)
          for (var c = 0; c < qo.length; c++) qo[c](t, e)
        }
        function p(t) {
          if (!u)
            for (
              var e;
              (e = t.children[t.children.length - 1]) &&
              3 === e.type &&
              ' ' === e.text;

            )
              t.children.pop()
        }
        return (
          (function (t, e) {
            for (
              var r,
                n,
                i = [],
                o = e.expectHTML,
                a = e.isUnaryTag || z,
                s = e.canBeLeftOpenTag || z,
                l = 0;
              t;

            ) {
              if (((r = t), n && Mo(n))) {
                var u = 0,
                  c = n.toLowerCase(),
                  p =
                    Lo[c] ||
                    (Lo[c] = new RegExp(
                      '([\\s\\S]*?)(</' + c + '[^>]*>)',
                      'i'
                    )),
                  h = t.replace(p, function (t, r, n) {
                    return (
                      (u = n.length),
                      Mo(c) ||
                        'noscript' === c ||
                        (r = r
                          .replace(/<!\--([\s\S]*?)-->/g, '$1')
                          .replace(/<!\[CDATA\[([\s\S]*?)]]>/g, '$1')),
                      Fo(c, r) && (r = r.slice(1)),
                      e.chars && e.chars(r),
                      ''
                    )
                  })
                ;(l += t.length - h.length), (t = h), I(c, l - u, l)
              } else {
                var f = t.indexOf('<')
                if (0 === f) {
                  if (ko.test(t)) {
                    var d = t.indexOf('--\x3e')
                    if (d >= 0) {
                      e.shouldKeepComment &&
                        e.comment(t.substring(4, d), l, l + d + 3),
                        E(d + 3)
                      continue
                    }
                  }
                  if (Po.test(t)) {
                    var m = t.indexOf(']>')
                    if (m >= 0) {
                      E(m + 2)
                      continue
                    }
                  }
                  var y = t.match(Ao)
                  if (y) {
                    E(y[0].length)
                    continue
                  }
                  var v = t.match(Co)
                  if (v) {
                    var g = l
                    E(v[0].length), I(v[1], g, l)
                    continue
                  }
                  var _ = S()
                  if (_) {
                    T(_), Fo(_.tagName, t) && E(1)
                    continue
                  }
                }
                var x = void 0,
                  b = void 0,
                  w = void 0
                if (f >= 0) {
                  for (
                    b = t.slice(f);
                    !(
                      Co.test(b) ||
                      To.test(b) ||
                      ko.test(b) ||
                      Po.test(b) ||
                      (w = b.indexOf('<', 1)) < 0
                    );

                  )
                    (f += w), (b = t.slice(f))
                  x = t.substring(0, f)
                }
                f < 0 && (x = t),
                  x && E(x.length),
                  e.chars && x && e.chars(x, l - x.length, l)
              }
              if (t === r) {
                e.chars && e.chars(t)
                break
              }
            }
            function E(e) {
              ;(l += e), (t = t.substring(e))
            }
            function S() {
              var e = t.match(To)
              if (e) {
                var r,
                  n,
                  i = { tagName: e[1], attrs: [], start: l }
                for (
                  E(e[0].length);
                  !(r = t.match(Io)) && (n = t.match(wo) || t.match(bo));

                )
                  (n.start = l), E(n[0].length), (n.end = l), i.attrs.push(n)
                if (r)
                  return (i.unarySlash = r[1]), E(r[0].length), (i.end = l), i
              }
            }
            function T(t) {
              var r = t.tagName,
                l = t.unarySlash
              o && ('p' === n && xo(r) && I(n), s(r) && n === r && I(r))
              for (
                var u = a(r) || !!l,
                  c = t.attrs.length,
                  p = new Array(c),
                  h = 0;
                h < c;
                h++
              ) {
                var f = t.attrs[h],
                  d = f[3] || f[4] || f[5] || '',
                  m =
                    'a' === r && 'href' === f[1]
                      ? e.shouldDecodeNewlinesForHref
                      : e.shouldDecodeNewlines
                p[h] = { name: f[1], value: Bo(d, m) }
              }
              u ||
                (i.push({
                  tag: r,
                  lowerCasedTag: r.toLowerCase(),
                  attrs: p,
                  start: t.start,
                  end: t.end,
                }),
                (n = r)),
                e.start && e.start(r, p, u, t.start, t.end)
            }
            function I(t, r, o) {
              var a, s
              if ((null == r && (r = l), null == o && (o = l), t))
                for (
                  s = t.toLowerCase(), a = i.length - 1;
                  a >= 0 && i[a].lowerCasedTag !== s;
                  a--
                );
              else a = 0
              if (a >= 0) {
                for (var u = i.length - 1; u >= a; u--)
                  e.end && e.end(i[u].tag, r, o)
                ;(i.length = a), (n = a && i[a - 1].tag)
              } else
                'br' === s
                  ? e.start && e.start(t, [], !0, r, o)
                  : 'p' === s &&
                    (e.start && e.start(t, [], !1, r, o),
                    e.end && e.end(t, r, o))
            }
            I()
          })(t, {
            warn: No,
            expectHTML: e.expectHTML,
            isUnaryTag: e.isUnaryTag,
            canBeLeftOpenTag: e.canBeLeftOpenTag,
            shouldDecodeNewlines: e.shouldDecodeNewlines,
            shouldDecodeNewlinesForHref: e.shouldDecodeNewlinesForHref,
            shouldKeepComment: e.comments,
            outputSourceRange: e.outputSourceRange,
            start: function (t, r, a, s, p) {
              var h = (i && i.ns) || Zo(t)
              J &&
                'svg' === h &&
                (r = (function (t) {
                  for (var e = [], r = 0; r < t.length; r++) {
                    var n = t[r]
                    da.test(n.name) ||
                      ((n.name = n.name.replace(ma, '')), e.push(n))
                  }
                  return e
                })(r))
              var f,
                d = aa(t, r, i)
              h && (d.ns = h),
                ('style' !== (f = d).tag &&
                  ('script' !== f.tag ||
                    (f.attrsMap.type &&
                      'text/javascript' !== f.attrsMap.type))) ||
                  ot() ||
                  (d.forbidden = !0)
              for (var m = 0; m < Vo.length; m++) d = Vo[m](d, e) || d
              l ||
                (!(function (t) {
                  null != Nn(t, 'v-pre') && (t.pre = !0)
                })(d),
                d.pre && (l = !0)),
                Go(d.tag) && (u = !0),
                l
                  ? (function (t) {
                      var e = t.attrsList,
                        r = e.length
                      if (r)
                        for (
                          var n = (t.attrs = new Array(r)), i = 0;
                          i < r;
                          i++
                        )
                          (n[i] = {
                            name: e[i].name,
                            value: JSON.stringify(e[i].value),
                          }),
                            null != e[i].start &&
                              ((n[i].start = e[i].start), (n[i].end = e[i].end))
                      else t.pre || (t.plain = !0)
                    })(d)
                  : d.processed ||
                    (ua(d),
                    (function (t) {
                      var e = Nn(t, 'v-if')
                      if (e) (t.if = e), ca(t, { exp: e, block: t })
                      else {
                        null != Nn(t, 'v-else') && (t.else = !0)
                        var r = Nn(t, 'v-else-if')
                        r && (t.elseif = r)
                      }
                    })(d),
                    (function (t) {
                      null != Nn(t, 'v-once') && (t.once = !0)
                    })(d)),
                n || (n = d),
                a ? c(d) : ((i = d), o.push(d))
            },
            end: function (t, e, r) {
              var n = o[o.length - 1]
              ;(o.length -= 1), (i = o[o.length - 1]), c(n)
            },
            chars: function (t, e, r) {
              if (
                i &&
                (!J || 'textarea' !== i.tag || i.attrsMap.placeholder !== t)
              ) {
                var n,
                  o,
                  c,
                  p = i.children
                if (
                  (t =
                    u || t.trim()
                      ? 'script' === (n = i).tag || 'style' === n.tag
                        ? t
                        : oa(t)
                      : p.length
                      ? s
                        ? 'condense' === s && na.test(t)
                          ? ''
                          : ' '
                        : a
                        ? ' '
                        : ''
                      : '')
                )
                  u || 'condense' !== s || (t = t.replace(ia, ' ')),
                    !l &&
                    ' ' !== t &&
                    (o = (function (t, e) {
                      var r = e ? ho(e) : co
                      if (r.test(t)) {
                        for (
                          var n, i, o, a = [], s = [], l = (r.lastIndex = 0);
                          (n = r.exec(t));

                        ) {
                          ;(i = n.index) > l &&
                            (s.push((o = t.slice(l, i))),
                            a.push(JSON.stringify(o)))
                          var u = An(n[1].trim())
                          a.push('_s(' + u + ')'),
                            s.push({ '@binding': u }),
                            (l = i + n[0].length)
                        }
                        return (
                          l < t.length &&
                            (s.push((o = t.slice(l))),
                            a.push(JSON.stringify(o))),
                          { expression: a.join('+'), tokens: s }
                        )
                      }
                    })(t, Uo))
                      ? (c = {
                          type: 2,
                          expression: o.expression,
                          tokens: o.tokens,
                          text: t,
                        })
                      : (' ' === t &&
                          p.length &&
                          ' ' === p[p.length - 1].text) ||
                        (c = { type: 3, text: t }),
                    c && p.push(c)
              }
            },
            comment: function (t, e, r) {
              if (i) {
                var n = { type: 3, text: t, isComment: !0 }
                0, i.children.push(n)
              }
            },
          }),
          n
        )
      }
      function la(t, e) {
        var r
        !(function (t) {
          var e = Bn(t, 'key')
          if (e) {
            t.key = e
          }
        })(t),
          (t.plain = !t.key && !t.scopedSlots && !t.attrsList.length),
          (function (t) {
            var e = Bn(t, 'ref')
            e &&
              ((t.ref = e),
              (t.refInFor = (function (t) {
                var e = t
                for (; e; ) {
                  if (void 0 !== e.for) return !0
                  e = e.parent
                }
                return !1
              })(t)))
          })(t),
          (function (t) {
            var e
            'template' === t.tag
              ? ((e = Nn(t, 'scope')), (t.slotScope = e || Nn(t, 'slot-scope')))
              : (e = Nn(t, 'slot-scope')) && (t.slotScope = e)
            var r = Bn(t, 'slot')
            r &&
              ((t.slotTarget = '""' === r ? '"default"' : r),
              (t.slotTargetDynamic = !(
                !t.attrsMap[':slot'] && !t.attrsMap['v-bind:slot']
              )),
              'template' === t.tag ||
                t.slotScope ||
                zn(
                  t,
                  'slot',
                  r,
                  (function (t, e) {
                    return (
                      t.rawAttrsMap[':' + e] ||
                      t.rawAttrsMap['v-bind:' + e] ||
                      t.rawAttrsMap[e]
                    )
                  })(t, 'slot')
                ))
            if ('template' === t.tag) {
              var n = Un(t, ra)
              if (n) {
                0
                var i = pa(n),
                  o = i.name,
                  a = i.dynamic
                ;(t.slotTarget = o),
                  (t.slotTargetDynamic = a),
                  (t.slotScope = n.value || '_empty_')
              }
            } else {
              var s = Un(t, ra)
              if (s) {
                0
                var l = t.scopedSlots || (t.scopedSlots = {}),
                  u = pa(s),
                  c = u.name,
                  p = u.dynamic,
                  h = (l[c] = aa('template', [], t))
                ;(h.slotTarget = c),
                  (h.slotTargetDynamic = p),
                  (h.children = t.children.filter(function (t) {
                    if (!t.slotScope) return (t.parent = h), !0
                  })),
                  (h.slotScope = s.value || '_empty_'),
                  (t.children = []),
                  (t.plain = !1)
              }
            }
          })(t),
          'slot' === (r = t).tag && (r.slotName = Bn(r, 'name')),
          (function (t) {
            var e
            ;(e = Bn(t, 'is')) && (t.component = e)
            null != Nn(t, 'inline-template') && (t.inlineTemplate = !0)
          })(t)
        for (var n = 0; n < jo.length; n++) t = jo[n](t, e) || t
        return (
          (function (t) {
            var e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u = t.attrsList
            for (e = 0, r = u.length; e < r; e++) {
              if (((n = i = u[e].name), (o = u[e].value), Ko.test(n)))
                if (
                  ((t.hasBindings = !0),
                  (a = ha(n.replace(Ko, ''))) && (n = n.replace(ea, '')),
                  ta.test(n))
                )
                  (n = n.replace(ta, '')),
                    (o = An(o)),
                    (l = Yo.test(n)) && (n = n.slice(1, -1)),
                    a &&
                      (a.prop &&
                        !l &&
                        'innerHtml' === (n = S(n)) &&
                        (n = 'innerHTML'),
                      a.camel && !l && (n = S(n)),
                      a.sync &&
                        ((s = qn(o, '$event')),
                        l
                          ? Fn(
                              t,
                              '"update:"+(' + n + ')',
                              s,
                              null,
                              !1,
                              0,
                              u[e],
                              !0
                            )
                          : (Fn(t, 'update:' + S(n), s, null, !1, 0, u[e]),
                            C(n) !== S(n) &&
                              Fn(t, 'update:' + C(n), s, null, !1, 0, u[e])))),
                    (a && a.prop) ||
                    (!t.component && $o(t.tag, t.attrsMap.type, n))
                      ? Ln(t, n, o, u[e], l)
                      : zn(t, n, o, u[e], l)
                else if (Xo.test(n))
                  (n = n.replace(Xo, '')),
                    (l = Yo.test(n)) && (n = n.slice(1, -1)),
                    Fn(t, n, o, a, !1, 0, u[e], l)
                else {
                  var c = (n = n.replace(Ko, '')).match(Qo),
                    p = c && c[1]
                  ;(l = !1),
                    p &&
                      ((n = n.slice(0, -(p.length + 1))),
                      Yo.test(p) && ((p = p.slice(1, -1)), (l = !0))),
                    Dn(t, n, i, o, p, l, a, u[e])
                }
              else
                zn(t, n, JSON.stringify(o), u[e]),
                  !t.component &&
                    'muted' === n &&
                    $o(t.tag, t.attrsMap.type, n) &&
                    Ln(t, n, 'true', u[e])
            }
          })(t),
          t
        )
      }
      function ua(t) {
        var e
        if ((e = Nn(t, 'v-for'))) {
          var r = (function (t) {
            var e = t.match(Wo)
            if (!e) return
            var r = {}
            r.for = e[2].trim()
            var n = e[1].trim().replace(Jo, ''),
              i = n.match(Ho)
            i
              ? ((r.alias = n.replace(Ho, '').trim()),
                (r.iterator1 = i[1].trim()),
                i[2] && (r.iterator2 = i[2].trim()))
              : (r.alias = n)
            return r
          })(e)
          r && P(t, r)
        }
      }
      function ca(t, e) {
        t.ifConditions || (t.ifConditions = []), t.ifConditions.push(e)
      }
      function pa(t) {
        var e = t.name.replace(ra, '')
        return (
          e || ('#' !== t.name[0] && (e = 'default')),
          Yo.test(e)
            ? { name: e.slice(1, -1), dynamic: !0 }
            : { name: '"' + e + '"', dynamic: !1 }
        )
      }
      function ha(t) {
        var e = t.match(ea)
        if (e) {
          var r = {}
          return (
            e.forEach(function (t) {
              r[t.slice(1)] = !0
            }),
            r
          )
        }
      }
      function fa(t) {
        for (var e = {}, r = 0, n = t.length; r < n; r++)
          e[t[r].name] = t[r].value
        return e
      }
      var da = /^xmlns:NS\d+/,
        ma = /^NS\d+:/
      function ya(t) {
        return aa(t.tag, t.attrsList.slice(), t.parent)
      }
      var va = [
        fo,
        yo,
        {
          preTransformNode: function (t, e) {
            if ('input' === t.tag) {
              var r,
                n = t.attrsMap
              if (!n['v-model']) return
              if (
                ((n[':type'] || n['v-bind:type']) && (r = Bn(t, 'type')),
                n.type ||
                  r ||
                  !n['v-bind'] ||
                  (r = '(' + n['v-bind'] + ').type'),
                r)
              ) {
                var i = Nn(t, 'v-if', !0),
                  o = i ? '&&(' + i + ')' : '',
                  a = null != Nn(t, 'v-else', !0),
                  s = Nn(t, 'v-else-if', !0),
                  l = ya(t)
                ua(l),
                  On(l, 'type', 'checkbox'),
                  la(l, e),
                  (l.processed = !0),
                  (l.if = '(' + r + ")==='checkbox'" + o),
                  ca(l, { exp: l.if, block: l })
                var u = ya(t)
                Nn(u, 'v-for', !0),
                  On(u, 'type', 'radio'),
                  la(u, e),
                  ca(l, { exp: '(' + r + ")==='radio'" + o, block: u })
                var c = ya(t)
                return (
                  Nn(c, 'v-for', !0),
                  On(c, ':type', r),
                  la(c, e),
                  ca(l, { exp: i, block: c }),
                  a ? (l.else = !0) : s && (l.elseif = s),
                  l
                )
              }
            }
          },
        },
      ]
      var ga,
        _a,
        xa = {
          expectHTML: !0,
          modules: va,
          directives: {
            model: function (t, e, r) {
              r
              var n = e.value,
                i = e.modifiers,
                o = t.tag,
                a = t.attrsMap.type
              if (t.component) return Vn(t, n, i), !1
              if ('select' === o)
                !(function (t, e, r) {
                  var n =
                    'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' +
                    (r && r.number ? '_n(val)' : 'val') +
                    '});'
                  ;(n =
                    n +
                    ' ' +
                    qn(
                      e,
                      '$event.target.multiple ? $$selectedVal : $$selectedVal[0]'
                    )),
                    Fn(t, 'change', n, null, !0)
                })(t, n, i)
              else if ('input' === o && 'checkbox' === a)
                !(function (t, e, r) {
                  var n = r && r.number,
                    i = Bn(t, 'value') || 'null',
                    o = Bn(t, 'true-value') || 'true',
                    a = Bn(t, 'false-value') || 'false'
                  Ln(
                    t,
                    'checked',
                    'Array.isArray(' +
                      e +
                      ')?_i(' +
                      e +
                      ',' +
                      i +
                      ')>-1' +
                      ('true' === o
                        ? ':(' + e + ')'
                        : ':_q(' + e + ',' + o + ')')
                  ),
                    Fn(
                      t,
                      'change',
                      'var $$a=' +
                        e +
                        ',$$el=$event.target,$$c=$$el.checked?(' +
                        o +
                        '):(' +
                        a +
                        ');if(Array.isArray($$a)){var $$v=' +
                        (n ? '_n(' + i + ')' : i) +
                        ',$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(' +
                        qn(e, '$$a.concat([$$v])') +
                        ')}else{$$i>-1&&(' +
                        qn(e, '$$a.slice(0,$$i).concat($$a.slice($$i+1))') +
                        ')}}else{' +
                        qn(e, '$$c') +
                        '}',
                      null,
                      !0
                    )
                })(t, n, i)
              else if ('input' === o && 'radio' === a)
                !(function (t, e, r) {
                  var n = r && r.number,
                    i = Bn(t, 'value') || 'null'
                  Ln(
                    t,
                    'checked',
                    '_q(' + e + ',' + (i = n ? '_n(' + i + ')' : i) + ')'
                  ),
                    Fn(t, 'change', qn(e, i), null, !0)
                })(t, n, i)
              else if ('input' === o || 'textarea' === o)
                !(function (t, e, r) {
                  var n = t.attrsMap.type
                  0
                  var i = r || {},
                    o = i.lazy,
                    a = i.number,
                    s = i.trim,
                    l = !o && 'range' !== n,
                    u = o ? 'change' : 'range' === n ? '__r' : 'input',
                    c = '$event.target.value'
                  s && (c = '$event.target.value.trim()')
                  a && (c = '_n(' + c + ')')
                  var p = qn(e, c)
                  l && (p = 'if($event.target.composing)return;' + p)
                  Ln(t, 'value', '(' + e + ')'),
                    Fn(t, u, p, null, !0),
                    (s || a) && Fn(t, 'blur', '$forceUpdate()')
                })(t, n, i)
              else {
                if (!U.isReservedTag(o)) return Vn(t, n, i), !1
              }
              return !0
            },
            text: function (t, e) {
              e.value && Ln(t, 'textContent', '_s(' + e.value + ')', e)
            },
            html: function (t, e) {
              e.value && Ln(t, 'innerHTML', '_s(' + e.value + ')', e)
            },
          },
          isPreTag: function (t) {
            return 'pre' === t
          },
          isUnaryTag: go,
          mustUseProp: Or,
          canBeLeftOpenTag: _o,
          isReservedTag: Wr,
          getTagNamespace: Hr,
          staticKeys: (function (t) {
            return t
              .reduce(function (t, e) {
                return t.concat(e.staticKeys || [])
              }, [])
              .join(',')
          })(va),
        },
        ba = w(function (t) {
          return y(
            'type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap' +
              (t ? ',' + t : '')
          )
        })
      function wa(t, e) {
        t &&
          ((ga = ba(e.staticKeys || '')),
          (_a = e.isReservedTag || z),
          (function t(e) {
            if (
              ((e.static = (function (t) {
                if (2 === t.type) return !1
                if (3 === t.type) return !0
                return !(
                  !t.pre &&
                  (t.hasBindings ||
                    t.if ||
                    t.for ||
                    v(t.tag) ||
                    !_a(t.tag) ||
                    (function (t) {
                      for (; t.parent; ) {
                        if ('template' !== (t = t.parent).tag) return !1
                        if (t.for) return !0
                      }
                      return !1
                    })(t) ||
                    !Object.keys(t).every(ga))
                )
              })(e)),
              1 === e.type)
            ) {
              if (
                !_a(e.tag) &&
                'slot' !== e.tag &&
                null == e.attrsMap['inline-template']
              )
                return
              for (var r = 0, n = e.children.length; r < n; r++) {
                var i = e.children[r]
                t(i), i.static || (e.static = !1)
              }
              if (e.ifConditions)
                for (var o = 1, a = e.ifConditions.length; o < a; o++) {
                  var s = e.ifConditions[o].block
                  t(s), s.static || (e.static = !1)
                }
            }
          })(t),
          (function t(e, r) {
            if (1 === e.type) {
              if (
                ((e.static || e.once) && (e.staticInFor = r),
                e.static &&
                  e.children.length &&
                  (1 !== e.children.length || 3 !== e.children[0].type))
              )
                return void (e.staticRoot = !0)
              if (((e.staticRoot = !1), e.children))
                for (var n = 0, i = e.children.length; n < i; n++)
                  t(e.children[n], r || !!e.for)
              if (e.ifConditions)
                for (var o = 1, a = e.ifConditions.length; o < a; o++)
                  t(e.ifConditions[o].block, r)
            }
          })(t, !1))
      }
      var Ea = /^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,
        Sa = /\([^)]*?\);*$/,
        Ta = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,
        Ia = {
          esc: 27,
          tab: 9,
          enter: 13,
          space: 32,
          up: 38,
          left: 37,
          right: 39,
          down: 40,
          delete: [8, 46],
        },
        Ca = {
          esc: ['Esc', 'Escape'],
          tab: 'Tab',
          enter: 'Enter',
          space: [' ', 'Spacebar'],
          up: ['Up', 'ArrowUp'],
          left: ['Left', 'ArrowLeft'],
          right: ['Right', 'ArrowRight'],
          down: ['Down', 'ArrowDown'],
          delete: ['Backspace', 'Delete', 'Del'],
        },
        Aa = function (t) {
          return 'if(' + t + ')return null;'
        },
        ka = {
          stop: '$event.stopPropagation();',
          prevent: '$event.preventDefault();',
          self: Aa('$event.target !== $event.currentTarget'),
          ctrl: Aa('!$event.ctrlKey'),
          shift: Aa('!$event.shiftKey'),
          alt: Aa('!$event.altKey'),
          meta: Aa('!$event.metaKey'),
          left: Aa("'button' in $event && $event.button !== 0"),
          middle: Aa("'button' in $event && $event.button !== 1"),
          right: Aa("'button' in $event && $event.button !== 2"),
        }
      function Pa(t, e) {
        var r = e ? 'nativeOn:' : 'on:',
          n = '',
          i = ''
        for (var o in t) {
          var a = Ma(t[o])
          t[o] && t[o].dynamic
            ? (i += o + ',' + a + ',')
            : (n += '"' + o + '":' + a + ',')
        }
        return (
          (n = '{' + n.slice(0, -1) + '}'),
          i ? r + '_d(' + n + ',[' + i.slice(0, -1) + '])' : r + n
        )
      }
      function Ma(t) {
        if (!t) return 'function(){}'
        if (Array.isArray(t))
          return (
            '[' +
            t
              .map(function (t) {
                return Ma(t)
              })
              .join(',') +
            ']'
          )
        var e = Ta.test(t.value),
          r = Ea.test(t.value),
          n = Ta.test(t.value.replace(Sa, ''))
        if (t.modifiers) {
          var i = '',
            o = '',
            a = []
          for (var s in t.modifiers)
            if (ka[s]) (o += ka[s]), Ia[s] && a.push(s)
            else if ('exact' === s) {
              var l = t.modifiers
              o += Aa(
                ['ctrl', 'shift', 'alt', 'meta']
                  .filter(function (t) {
                    return !l[t]
                  })
                  .map(function (t) {
                    return '$event.' + t + 'Key'
                  })
                  .join('||')
              )
            } else a.push(s)
          return (
            a.length &&
              (i += (function (t) {
                return (
                  "if(!$event.type.indexOf('key')&&" +
                  t.map(La).join('&&') +
                  ')return null;'
                )
              })(a)),
            o && (i += o),
            'function($event){' +
              i +
              (e
                ? 'return ' + t.value + '($event)'
                : r
                ? 'return (' + t.value + ')($event)'
                : n
                ? 'return ' + t.value
                : t.value) +
              '}'
          )
        }
        return e || r
          ? t.value
          : 'function($event){' + (n ? 'return ' + t.value : t.value) + '}'
      }
      function La(t) {
        var e = parseInt(t, 10)
        if (e) return '$event.keyCode!==' + e
        var r = Ia[t],
          n = Ca[t]
        return (
          '_k($event.keyCode,' +
          JSON.stringify(t) +
          ',' +
          JSON.stringify(r) +
          ',$event.key,' +
          JSON.stringify(n) +
          ')'
        )
      }
      var za = {
          on: function (t, e) {
            t.wrapListeners = function (t) {
              return '_g(' + t + ',' + e.value + ')'
            }
          },
          bind: function (t, e) {
            t.wrapData = function (r) {
              return (
                '_b(' +
                r +
                ",'" +
                t.tag +
                "'," +
                e.value +
                ',' +
                (e.modifiers && e.modifiers.prop ? 'true' : 'false') +
                (e.modifiers && e.modifiers.sync ? ',true' : '') +
                ')'
              )
            }
          },
          cloak: L,
        },
        Oa = function (t) {
          ;(this.options = t),
            (this.warn = t.warn || Pn),
            (this.transforms = Mn(t.modules, 'transformCode')),
            (this.dataGenFns = Mn(t.modules, 'genData')),
            (this.directives = P(P({}, za), t.directives))
          var e = t.isReservedTag || z
          ;(this.maybeComponent = function (t) {
            return !!t.component || !e(t.tag)
          }),
            (this.onceId = 0),
            (this.staticRenderFns = []),
            (this.pre = !1)
        }
      function Da(t, e) {
        var r = new Oa(e)
        return {
          render: 'with(this){return ' + (t ? Ra(t, r) : '_c("div")') + '}',
          staticRenderFns: r.staticRenderFns,
        }
      }
      function Ra(t, e) {
        if (
          (t.parent && (t.pre = t.pre || t.parent.pre),
          t.staticRoot && !t.staticProcessed)
        )
          return Fa(t, e)
        if (t.once && !t.onceProcessed) return Ba(t, e)
        if (t.for && !t.forProcessed) return Ua(t, e)
        if (t.if && !t.ifProcessed) return Na(t, e)
        if ('template' !== t.tag || t.slotTarget || e.pre) {
          if ('slot' === t.tag)
            return (function (t, e) {
              var r = t.slotName || '"default"',
                n = Ga(t, e),
                i = '_t(' + r + (n ? ',' + n : ''),
                o =
                  t.attrs || t.dynamicAttrs
                    ? Xa(
                        (t.attrs || [])
                          .concat(t.dynamicAttrs || [])
                          .map(function (t) {
                            return {
                              name: S(t.name),
                              value: t.value,
                              dynamic: t.dynamic,
                            }
                          })
                      )
                    : null,
                a = t.attrsMap['v-bind']
              ;(!o && !a) || n || (i += ',null')
              o && (i += ',' + o)
              a && (i += (o ? '' : ',null') + ',' + a)
              return i + ')'
            })(t, e)
          var r
          if (t.component)
            r = (function (t, e, r) {
              var n = e.inlineTemplate ? null : Ga(e, r, !0)
              return '_c(' + t + ',' + ja(e, r) + (n ? ',' + n : '') + ')'
            })(t.component, t, e)
          else {
            var n
            ;(!t.plain || (t.pre && e.maybeComponent(t))) && (n = ja(t, e))
            var i = t.inlineTemplate ? null : Ga(t, e, !0)
            r =
              "_c('" +
              t.tag +
              "'" +
              (n ? ',' + n : '') +
              (i ? ',' + i : '') +
              ')'
          }
          for (var o = 0; o < e.transforms.length; o++)
            r = e.transforms[o](t, r)
          return r
        }
        return Ga(t, e) || 'void 0'
      }
      function Fa(t, e) {
        t.staticProcessed = !0
        var r = e.pre
        return (
          t.pre && (e.pre = t.pre),
          e.staticRenderFns.push('with(this){return ' + Ra(t, e) + '}'),
          (e.pre = r),
          '_m(' +
            (e.staticRenderFns.length - 1) +
            (t.staticInFor ? ',true' : '') +
            ')'
        )
      }
      function Ba(t, e) {
        if (((t.onceProcessed = !0), t.if && !t.ifProcessed)) return Na(t, e)
        if (t.staticInFor) {
          for (var r = '', n = t.parent; n; ) {
            if (n.for) {
              r = n.key
              break
            }
            n = n.parent
          }
          return r
            ? '_o(' + Ra(t, e) + ',' + e.onceId++ + ',' + r + ')'
            : Ra(t, e)
        }
        return Fa(t, e)
      }
      function Na(t, e, r, n) {
        return (
          (t.ifProcessed = !0),
          (function t(e, r, n, i) {
            if (!e.length) return i || '_e()'
            var o = e.shift()
            return o.exp
              ? '(' + o.exp + ')?' + a(o.block) + ':' + t(e, r, n, i)
              : '' + a(o.block)
            function a(t) {
              return n ? n(t, r) : t.once ? Ba(t, r) : Ra(t, r)
            }
          })(t.ifConditions.slice(), e, r, n)
        )
      }
      function Ua(t, e, r, n) {
        var i = t.for,
          o = t.alias,
          a = t.iterator1 ? ',' + t.iterator1 : '',
          s = t.iterator2 ? ',' + t.iterator2 : ''
        return (
          (t.forProcessed = !0),
          (n || '_l') +
            '((' +
            i +
            '),function(' +
            o +
            a +
            s +
            '){return ' +
            (r || Ra)(t, e) +
            '})'
        )
      }
      function ja(t, e) {
        var r = '{',
          n = (function (t, e) {
            var r = t.directives
            if (!r) return
            var n,
              i,
              o,
              a,
              s = 'directives:[',
              l = !1
            for (n = 0, i = r.length; n < i; n++) {
              ;(o = r[n]), (a = !0)
              var u = e.directives[o.name]
              u && (a = !!u(t, o, e.warn)),
                a &&
                  ((l = !0),
                  (s +=
                    '{name:"' +
                    o.name +
                    '",rawName:"' +
                    o.rawName +
                    '"' +
                    (o.value
                      ? ',value:(' +
                        o.value +
                        '),expression:' +
                        JSON.stringify(o.value)
                      : '') +
                    (o.arg
                      ? ',arg:' + (o.isDynamicArg ? o.arg : '"' + o.arg + '"')
                      : '') +
                    (o.modifiers
                      ? ',modifiers:' + JSON.stringify(o.modifiers)
                      : '') +
                    '},'))
            }
            if (l) return s.slice(0, -1) + ']'
          })(t, e)
        n && (r += n + ','),
          t.key && (r += 'key:' + t.key + ','),
          t.ref && (r += 'ref:' + t.ref + ','),
          t.refInFor && (r += 'refInFor:true,'),
          t.pre && (r += 'pre:true,'),
          t.component && (r += 'tag:"' + t.tag + '",')
        for (var i = 0; i < e.dataGenFns.length; i++) r += e.dataGenFns[i](t)
        if (
          (t.attrs && (r += 'attrs:' + Xa(t.attrs) + ','),
          t.props && (r += 'domProps:' + Xa(t.props) + ','),
          t.events && (r += Pa(t.events, !1) + ','),
          t.nativeEvents && (r += Pa(t.nativeEvents, !0) + ','),
          t.slotTarget && !t.slotScope && (r += 'slot:' + t.slotTarget + ','),
          t.scopedSlots &&
            (r +=
              (function (t, e, r) {
                var n =
                    t.for ||
                    Object.keys(e).some(function (t) {
                      var r = e[t]
                      return r.slotTargetDynamic || r.if || r.for || Va(r)
                    }),
                  i = !!t.if
                if (!n)
                  for (var o = t.parent; o; ) {
                    if ((o.slotScope && '_empty_' !== o.slotScope) || o.for) {
                      n = !0
                      break
                    }
                    o.if && (i = !0), (o = o.parent)
                  }
                var a = Object.keys(e)
                  .map(function (t) {
                    return qa(e[t], r)
                  })
                  .join(',')
                return (
                  'scopedSlots:_u([' +
                  a +
                  ']' +
                  (n ? ',null,true' : '') +
                  (!n && i
                    ? ',null,false,' +
                      (function (t) {
                        var e = 5381,
                          r = t.length
                        for (; r; ) e = (33 * e) ^ t.charCodeAt(--r)
                        return e >>> 0
                      })(a)
                    : '') +
                  ')'
                )
              })(t, t.scopedSlots, e) + ','),
          t.model &&
            (r +=
              'model:{value:' +
              t.model.value +
              ',callback:' +
              t.model.callback +
              ',expression:' +
              t.model.expression +
              '},'),
          t.inlineTemplate)
        ) {
          var o = (function (t, e) {
            var r = t.children[0]
            0
            if (r && 1 === r.type) {
              var n = Da(r, e.options)
              return (
                'inlineTemplate:{render:function(){' +
                n.render +
                '},staticRenderFns:[' +
                n.staticRenderFns
                  .map(function (t) {
                    return 'function(){' + t + '}'
                  })
                  .join(',') +
                ']}'
              )
            }
          })(t, e)
          o && (r += o + ',')
        }
        return (
          (r = r.replace(/,$/, '') + '}'),
          t.dynamicAttrs &&
            (r = '_b(' + r + ',"' + t.tag + '",' + Xa(t.dynamicAttrs) + ')'),
          t.wrapData && (r = t.wrapData(r)),
          t.wrapListeners && (r = t.wrapListeners(r)),
          r
        )
      }
      function Va(t) {
        return 1 === t.type && ('slot' === t.tag || t.children.some(Va))
      }
      function qa(t, e) {
        var r = t.attrsMap['slot-scope']
        if (t.if && !t.ifProcessed && !r) return Na(t, e, qa, 'null')
        if (t.for && !t.forProcessed) return Ua(t, e, qa)
        var n = '_empty_' === t.slotScope ? '' : String(t.slotScope),
          i =
            'function(' +
            n +
            '){return ' +
            ('template' === t.tag
              ? t.if && r
                ? '(' + t.if + ')?' + (Ga(t, e) || 'undefined') + ':undefined'
                : Ga(t, e) || 'undefined'
              : Ra(t, e)) +
            '}',
          o = n ? '' : ',proxy:true'
        return '{key:' + (t.slotTarget || '"default"') + ',fn:' + i + o + '}'
      }
      function Ga(t, e, r, n, i) {
        var o = t.children
        if (o.length) {
          var a = o[0]
          if (
            1 === o.length &&
            a.for &&
            'template' !== a.tag &&
            'slot' !== a.tag
          ) {
            var s = r ? (e.maybeComponent(a) ? ',1' : ',0') : ''
            return '' + (n || Ra)(a, e) + s
          }
          var l = r
              ? (function (t, e) {
                  for (var r = 0, n = 0; n < t.length; n++) {
                    var i = t[n]
                    if (1 === i.type) {
                      if (
                        $a(i) ||
                        (i.ifConditions &&
                          i.ifConditions.some(function (t) {
                            return $a(t.block)
                          }))
                      ) {
                        r = 2
                        break
                      }
                      ;(e(i) ||
                        (i.ifConditions &&
                          i.ifConditions.some(function (t) {
                            return e(t.block)
                          }))) &&
                        (r = 1)
                    }
                  }
                  return r
                })(o, e.maybeComponent)
              : 0,
            u = i || Za
          return (
            '[' +
            o
              .map(function (t) {
                return u(t, e)
              })
              .join(',') +
            ']' +
            (l ? ',' + l : '')
          )
        }
      }
      function $a(t) {
        return void 0 !== t.for || 'template' === t.tag || 'slot' === t.tag
      }
      function Za(t, e) {
        return 1 === t.type
          ? Ra(t, e)
          : 3 === t.type && t.isComment
          ? (function (t) {
              return '_e(' + JSON.stringify(t.text) + ')'
            })(t)
          : (function (t) {
              return (
                '_v(' +
                (2 === t.type ? t.expression : Ka(JSON.stringify(t.text))) +
                ')'
              )
            })(t)
      }
      function Xa(t) {
        for (var e = '', r = '', n = 0; n < t.length; n++) {
          var i = t[n],
            o = Ka(i.value)
          i.dynamic
            ? (r += i.name + ',' + o + ',')
            : (e += '"' + i.name + '":' + o + ',')
        }
        return (
          (e = '{' + e.slice(0, -1) + '}'),
          r ? '_d(' + e + ',[' + r.slice(0, -1) + '])' : e
        )
      }
      function Ka(t) {
        return t.replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')
      }
      new RegExp(
        '\\b' +
          'do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments'
            .split(',')
            .join('\\b|\\b') +
          '\\b'
      ),
        new RegExp(
          '\\b' +
            'delete,typeof,void'.split(',').join('\\s*\\([^\\)]*\\)|\\b') +
            '\\s*\\([^\\)]*\\)'
        )
      function Wa(t, e) {
        try {
          return new Function(t)
        } catch (r) {
          return e.push({ err: r, code: t }), L
        }
      }
      function Ha(t) {
        var e = Object.create(null)
        return function (r, n, i) {
          ;(n = P({}, n)).warn
          delete n.warn
          var o = n.delimiters ? String(n.delimiters) + r : r
          if (e[o]) return e[o]
          var a = t(r, n)
          var s = {},
            l = []
          return (
            (s.render = Wa(a.render, l)),
            (s.staticRenderFns = a.staticRenderFns.map(function (t) {
              return Wa(t, l)
            })),
            (e[o] = s)
          )
        }
      }
      var Ja,
        Ya,
        Qa = ((Ja = function (t, e) {
          var r = sa(t.trim(), e)
          !1 !== e.optimize && wa(r, e)
          var n = Da(r, e)
          return {
            ast: r,
            render: n.render,
            staticRenderFns: n.staticRenderFns,
          }
        }),
        function (t) {
          function e(e, r) {
            var n = Object.create(t),
              i = [],
              o = []
            if (r)
              for (var a in (r.modules &&
                (n.modules = (t.modules || []).concat(r.modules)),
              r.directives &&
                (n.directives = P(
                  Object.create(t.directives || null),
                  r.directives
                )),
              r))
                'modules' !== a && 'directives' !== a && (n[a] = r[a])
            n.warn = function (t, e, r) {
              ;(r ? o : i).push(t)
            }
            var s = Ja(e.trim(), n)
            return (s.errors = i), (s.tips = o), s
          }
          return { compile: e, compileToFunctions: Ha(e) }
        })(xa),
        ts = (Qa.compile, Qa.compileToFunctions)
      function es(t) {
        return (
          ((Ya = Ya || document.createElement('div')).innerHTML = t
            ? '<a href="\n"/>'
            : '<div a="\n"/>'),
          Ya.innerHTML.indexOf('&#10;') > 0
        )
      }
      var rs = !!X && es(!1),
        ns = !!X && es(!0),
        is = w(function (t) {
          var e = Qr(t)
          return e && e.innerHTML
        }),
        os = Sr.prototype.$mount
      ;(Sr.prototype.$mount = function (t, e) {
        if (
          (t = t && Qr(t)) === document.body ||
          t === document.documentElement
        )
          return this
        var r = this.$options
        if (!r.render) {
          var n = r.template
          if (n)
            if ('string' == typeof n) '#' === n.charAt(0) && (n = is(n))
            else {
              if (!n.nodeType) return this
              n = n.innerHTML
            }
          else
            t &&
              (n = (function (t) {
                if (t.outerHTML) return t.outerHTML
                var e = document.createElement('div')
                return e.appendChild(t.cloneNode(!0)), e.innerHTML
              })(t))
          if (n) {
            0
            var i = ts(
                n,
                {
                  outputSourceRange: !1,
                  shouldDecodeNewlines: rs,
                  shouldDecodeNewlinesForHref: ns,
                  delimiters: r.delimiters,
                  comments: r.comments,
                },
                this
              ),
              o = i.render,
              a = i.staticRenderFns
            ;(r.render = o), (r.staticRenderFns = a)
          }
        }
        return os.call(this, t, e)
      }),
        (Sr.compile = ts),
        (e.a = Sr)
    }.call(this, r(3), r(8).setImmediate))
  },
  function (t, e, r) {
    'use strict'
    r.d(e, 'b', function () {
      return a
    }),
      r.d(e, 'a', function () {
        return l
      })
    var n = r(0)
    var i = 'undefined' != typeof Reflect && void 0 !== Reflect.getMetadata
    function o(t, e, r) {
      if (
        i &&
        !Array.isArray(t) &&
        'function' != typeof t &&
        void 0 === t.type
      ) {
        var n = Reflect.getMetadata('design:type', e, r)
        n !== Object && (t.type = n)
      }
    }
    function a(t) {
      return (
        void 0 === t && (t = {}),
        function (e, r) {
          o(t, e, r),
            Object(n.a)(function (e, r) {
              ;(e.props || (e.props = {}))[r] = t
            })(e, r)
        }
      )
    }
    var s = /\B([A-Z])/g
    function l(t) {
      return function (e, r, n) {
        var i = r.replace(s, '-$1').toLowerCase(),
          o = n.value
        n.value = function () {
          for (var e = this, r = [], n = 0; n < arguments.length; n++)
            r[n] = arguments[n]
          var a = function (n) {
              var o = t || i
              void 0 === n
                ? 0 === r.length
                  ? e.$emit(o)
                  : 1 === r.length
                  ? e.$emit(o, r[0])
                  : e.$emit(o, r)
                : e.$emit(o, n)
            },
            s = o.apply(this, r)
          return (
            u(s)
              ? s.then(function (t) {
                  a(t)
                })
              : a(s),
            s
          )
        }
      }
    }
    function u(t) {
      return t instanceof Promise || (t && 'function' == typeof t.then)
    }
  },
  function (t, e) {
    var r
    r = (function () {
      return this
    })()
    try {
      r = r || new Function('return this')()
    } catch (t) {
      'object' == typeof window && (r = window)
    }
    t.exports = r
  },
  function (t, e, r) {
    'use strict'
    ;(function (t) {
      var n,
        i = r(1),
        o = r(0),
        a = r(2),
        s =
          ((n = function (t, e) {
            return (n =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e
                }) ||
              function (t, e) {
                for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r])
              })(t, e)
          }),
          function (t, e) {
            function r() {
              this.constructor = t
            }
            n(t, e),
              (t.prototype =
                null === e
                  ? Object.create(e)
                  : ((r.prototype = e.prototype), new r()))
          }),
        l = function (t, e, r, n) {
          var i,
            o = arguments.length,
            a =
              o < 3
                ? e
                : null === n
                ? (n = Object.getOwnPropertyDescriptor(e, r))
                : n
          if (
            'object' == typeof Reflect &&
            'function' == typeof Reflect.decorate
          )
            a = Reflect.decorate(t, e, r, n)
          else
            for (var s = t.length - 1; s >= 0; s--)
              (i = t[s]) &&
                (a = (o < 3 ? i(a) : o > 3 ? i(e, r, a) : i(e, r)) || a)
          return o > 3 && a && Object.defineProperty(e, r, a), a
        },
        u = (function (e) {
          function r() {
            return (null !== e && e.apply(this, arguments)) || this
          }
          return (
            s(r, e),
            (r.prototype.mounted = function () {
              ;(this.map = this.mapInit()),
                this.addControls(this.map),
                this.registerMapEvents(this.map)
            }),
            (r.prototype.beforeDestroy = function () {
              this.map.remove()
            }),
            (r.prototype.mapInit = function () {
              return (
                (t.accessToken = this.accessToken),
                Object.prototype.hasOwnProperty.call(
                  this.mapOptions,
                  'container'
                ) || (this.mapOptions.container = 'map'),
                new t.Map(this.mapOptions)
              )
            }),
            (r.prototype.registerMapEvents = function (t) {
              var e = this,
                r = [
                  'error',
                  'load',
                  'remove',
                  'render',
                  'resize',
                  'webglcontextlost',
                  'webglcontextrestored',
                  'dataloading',
                  'data',
                  'tiledataloading',
                  'sourcedataloading',
                  'styledataloading',
                  'sourcedata',
                  'styledata',
                  'boxzoomcancel',
                  'boxzoomstart',
                  'boxzoomend',
                  'touchcancel',
                  'touchmove',
                  'touchend',
                  'touchstart',
                  'click',
                  'contextmenu',
                  'dblclick',
                  'mousemove',
                  'mouseup',
                  'mousedown',
                  'mouseout',
                  'mouseover',
                  'mouseenter',
                  'mouseleave',
                  'movestart',
                  'move',
                  'moveend',
                  'zoomstart',
                  'zoom',
                  'zoomend',
                  'rotatestart',
                  'rotate',
                  'rotateend',
                  'dragstart',
                  'drag',
                  'dragend',
                  'pitchstart',
                  'pitch',
                  'pitchend',
                  'wheel',
                ],
                n = [
                  'touchcancel',
                  'touchend',
                  'touchstart',
                  'click',
                  'contextmenu',
                  'dblclick',
                  'mousemove',
                  'mouseup',
                  'mousedown',
                  'mouseout',
                  'mouseover',
                  'mouseenter',
                  'mouseleave',
                ]
              if (Object.keys(this.$listeners).length) {
                var i = function (i) {
                  var o = i.replace(/^map-/, '').split(':'),
                    a = o[0],
                    s = o[1]
                  r.indexOf(a) > -1 &&
                    (s && n.indexOf(a) > -1
                      ? t.on(a, s, function (r) {
                          e.$emit(i, t, r)
                        })
                      : t.on(a, function (r) {
                          e.$emit(i, t, r)
                        }))
                }
                for (var o in this.$listeners) i(o)
              }
            }),
            (r.prototype.addControls = function (e) {
              var r = this
              if (this.navControl.show) {
                var n = new t.NavigationControl(this.navControl.options)
                e.addControl(n, this.navControl.position)
              }
              if (this.geolocateControl.show) {
                var i = new t.GeolocateControl(this.geolocateControl.options)
                e.addControl(i, this.geolocateControl.position)
                var o = [
                  'error',
                  'trackuserlocationstart',
                  'trackuserlocationend',
                  'geolocate',
                ]
                if (Object.keys(this.$listeners).length) {
                  var a = function (t) {
                    var e = t.replace(/^geolocate-/, '')
                    o.indexOf(e) > -1 &&
                      i.on(e, function (e) {
                        e ? r.$emit(t, i, e) : r.$emit(t, i)
                      })
                  }
                  for (var s in this.$listeners) a(s)
                }
              }
              if (this.scaleControl.show) {
                var l = new t.ScaleControl(this.scaleControl.options)
                e.addControl(l, this.scaleControl.position)
              }
              if (this.fullscreenControl.show) {
                var u = new t.FullscreenControl()
                e.addControl(u, this.fullscreenControl.position)
              }
            }),
            l(
              [Object(a.b)({ required: !0 })],
              r.prototype,
              'accessToken',
              void 0
            ),
            l(
              [Object(a.b)({ required: !0 })],
              r.prototype,
              'mapOptions',
              void 0
            ),
            l(
              [
                Object(a.b)({
                  default: function () {
                    return { show: !0, position: 'top-right', options: {} }
                  },
                }),
              ],
              r.prototype,
              'navControl',
              void 0
            ),
            l(
              [
                Object(a.b)({
                  default: function () {
                    return { show: !1, position: 'top-left', options: {} }
                  },
                }),
              ],
              r.prototype,
              'geolocateControl',
              void 0
            ),
            l(
              [
                Object(a.b)({
                  default: function () {
                    return { show: !1, position: 'top-left', options: {} }
                  },
                }),
              ],
              r.prototype,
              'scaleControl',
              void 0
            ),
            l(
              [
                Object(a.b)({
                  default: function () {
                    return { show: !1, position: 'top-right', options: {} }
                  },
                }),
              ],
              r.prototype,
              'fullscreenControl',
              void 0
            ),
            l(
              [
                Object(a.b)({
                  default: function () {
                    return { show: !1, position: 'top-right', options: {} }
                  },
                }),
              ],
              r.prototype,
              'attributionControl',
              void 0
            ),
            l([Object(a.a)()], r.prototype, 'mapInit', null),
            (r = l([o.b], r))
          )
        })(i.a)
      e.a = u
    }.call(this, r(6)))
  },
  function (t, e, r) {
    var n = r(12)
    'string' == typeof n && (n = [[t.i, n, '']]),
      n.locals && (t.exports = n.locals)
    ;(0, r(15).default)('6e05d0db', n, !1, {})
  },
  function (t, e, r) {
    t.exports = (function () {
      'use strict'
      var t, e, r
      function n(n, i) {
        if (t)
          if (e) {
            var o =
                'var sharedChunk = {}; (' +
                t +
                ')(sharedChunk); (' +
                e +
                ')(sharedChunk);',
              a = {}
            t(a),
              ((r = i(a)).workerUrl = window.URL.createObjectURL(
                new Blob([o], { type: 'text/javascript' })
              ))
          } else e = i
        else t = i
      }
      return (
        n(0, function (t) {
          function e(t, e) {
            return t((e = { exports: {} }), e.exports), e.exports
          }
          var r = n
          function n(t, e, r, n) {
            ;(this.cx = 3 * t),
              (this.bx = 3 * (r - t) - this.cx),
              (this.ax = 1 - this.cx - this.bx),
              (this.cy = 3 * e),
              (this.by = 3 * (n - e) - this.cy),
              (this.ay = 1 - this.cy - this.by),
              (this.p1x = t),
              (this.p1y = n),
              (this.p2x = r),
              (this.p2y = n)
          }
          ;(n.prototype.sampleCurveX = function (t) {
            return ((this.ax * t + this.bx) * t + this.cx) * t
          }),
            (n.prototype.sampleCurveY = function (t) {
              return ((this.ay * t + this.by) * t + this.cy) * t
            }),
            (n.prototype.sampleCurveDerivativeX = function (t) {
              return (3 * this.ax * t + 2 * this.bx) * t + this.cx
            }),
            (n.prototype.solveCurveX = function (t, e) {
              var r, n, i, o, a
              for (void 0 === e && (e = 1e-6), i = t, a = 0; a < 8; a++) {
                if (((o = this.sampleCurveX(i) - t), Math.abs(o) < e)) return i
                var s = this.sampleCurveDerivativeX(i)
                if (Math.abs(s) < 1e-6) break
                i -= o / s
              }
              if ((i = t) < (r = 0)) return r
              if (i > (n = 1)) return n
              for (; r < n; ) {
                if (((o = this.sampleCurveX(i)), Math.abs(o - t) < e)) return i
                t > o ? (r = i) : (n = i), (i = 0.5 * (n - r) + r)
              }
              return i
            }),
            (n.prototype.solve = function (t, e) {
              return this.sampleCurveY(this.solveCurveX(t, e))
            })
          var i = o
          function o(t, e) {
            ;(this.x = t), (this.y = e)
          }
          function a(t, e, n, i) {
            var o = new r(t, e, n, i)
            return function (t) {
              return o.solve(t)
            }
          }
          ;(o.prototype = {
            clone: function () {
              return new o(this.x, this.y)
            },
            add: function (t) {
              return this.clone()._add(t)
            },
            sub: function (t) {
              return this.clone()._sub(t)
            },
            multByPoint: function (t) {
              return this.clone()._multByPoint(t)
            },
            divByPoint: function (t) {
              return this.clone()._divByPoint(t)
            },
            mult: function (t) {
              return this.clone()._mult(t)
            },
            div: function (t) {
              return this.clone()._div(t)
            },
            rotate: function (t) {
              return this.clone()._rotate(t)
            },
            rotateAround: function (t, e) {
              return this.clone()._rotateAround(t, e)
            },
            matMult: function (t) {
              return this.clone()._matMult(t)
            },
            unit: function () {
              return this.clone()._unit()
            },
            perp: function () {
              return this.clone()._perp()
            },
            round: function () {
              return this.clone()._round()
            },
            mag: function () {
              return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            equals: function (t) {
              return this.x === t.x && this.y === t.y
            },
            dist: function (t) {
              return Math.sqrt(this.distSqr(t))
            },
            distSqr: function (t) {
              var e = t.x - this.x,
                r = t.y - this.y
              return e * e + r * r
            },
            angle: function () {
              return Math.atan2(this.y, this.x)
            },
            angleTo: function (t) {
              return Math.atan2(this.y - t.y, this.x - t.x)
            },
            angleWith: function (t) {
              return this.angleWithSep(t.x, t.y)
            },
            angleWithSep: function (t, e) {
              return Math.atan2(
                this.x * e - this.y * t,
                this.x * t + this.y * e
              )
            },
            _matMult: function (t) {
              var e = t[2] * this.x + t[3] * this.y
              return (
                (this.x = t[0] * this.x + t[1] * this.y), (this.y = e), this
              )
            },
            _add: function (t) {
              return (this.x += t.x), (this.y += t.y), this
            },
            _sub: function (t) {
              return (this.x -= t.x), (this.y -= t.y), this
            },
            _mult: function (t) {
              return (this.x *= t), (this.y *= t), this
            },
            _div: function (t) {
              return (this.x /= t), (this.y /= t), this
            },
            _multByPoint: function (t) {
              return (this.x *= t.x), (this.y *= t.y), this
            },
            _divByPoint: function (t) {
              return (this.x /= t.x), (this.y /= t.y), this
            },
            _unit: function () {
              return this._div(this.mag()), this
            },
            _perp: function () {
              var t = this.y
              return (this.y = this.x), (this.x = -t), this
            },
            _rotate: function (t) {
              var e = Math.cos(t),
                r = Math.sin(t),
                n = r * this.x + e * this.y
              return (this.x = e * this.x - r * this.y), (this.y = n), this
            },
            _rotateAround: function (t, e) {
              var r = Math.cos(t),
                n = Math.sin(t),
                i = e.y + n * (this.x - e.x) + r * (this.y - e.y)
              return (
                (this.x = e.x + r * (this.x - e.x) - n * (this.y - e.y)),
                (this.y = i),
                this
              )
            },
            _round: function () {
              return (
                (this.x = Math.round(this.x)),
                (this.y = Math.round(this.y)),
                this
              )
            },
          }),
            (o.convert = function (t) {
              return t instanceof o
                ? t
                : Array.isArray(t)
                ? new o(t[0], t[1])
                : t
            })
          var s = a(0.25, 0.1, 0.25, 1)
          function l(t, e, r) {
            return Math.min(r, Math.max(e, t))
          }
          function u(t, e, r) {
            var n = r - e,
              i = ((((t - e) % n) + n) % n) + e
            return i === e ? r : i
          }
          function c(t) {
            for (var e = [], r = arguments.length - 1; r-- > 0; )
              e[r] = arguments[r + 1]
            for (var n = 0, i = e; n < i.length; n += 1) {
              var o = i[n]
              for (var a in o) t[a] = o[a]
            }
            return t
          }
          var p = 1
          function h() {
            return p++
          }
          function f() {
            return (function t(e) {
              return e
                ? (e ^ ((16 * Math.random()) >> (e / 4))).toString(16)
                : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t)
            })()
          }
          function d(t) {
            return (
              !!t &&
              /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(
                t
              )
            )
          }
          function m(t, e) {
            t.forEach(function (t) {
              e[t] && (e[t] = e[t].bind(e))
            })
          }
          function y(t, e) {
            return -1 !== t.indexOf(e, t.length - e.length)
          }
          function v(t, e, r) {
            var n = {}
            for (var i in t) n[i] = e.call(r || this, t[i], i, t)
            return n
          }
          function g(t, e, r) {
            var n = {}
            for (var i in t) e.call(r || this, t[i], i, t) && (n[i] = t[i])
            return n
          }
          function _(t) {
            return Array.isArray(t)
              ? t.map(_)
              : 'object' == typeof t && t
              ? v(t, _)
              : t
          }
          var x = {}
          function b(t) {
            x[t] ||
              ('undefined' != typeof console && console.warn(t), (x[t] = !0))
          }
          function w(t, e, r) {
            return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x)
          }
          function E(t) {
            for (
              var e = 0, r = 0, n = t.length, i = n - 1, o = void 0, a = void 0;
              r < n;
              i = r++
            )
              e += ((a = t[i]).x - (o = t[r]).x) * (o.y + a.y)
            return e
          }
          function S() {
            return (
              'undefined' != typeof WorkerGlobalScope &&
              'undefined' != typeof self &&
              self instanceof WorkerGlobalScope
            )
          }
          function T(t) {
            var e = {}
            if (
              (t.replace(
                /(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,
                function (t, r, n, i) {
                  var o = n || i
                  return (e[r] = !o || o.toLowerCase()), ''
                }
              ),
              e['max-age'])
            ) {
              var r = parseInt(e['max-age'], 10)
              isNaN(r) ? delete e['max-age'] : (e['max-age'] = r)
            }
            return e
          }
          var I = null
          function C(t) {
            if (null == I) {
              var e = t.navigator ? t.navigator.userAgent : null
              I =
                !!t.safari ||
                !(
                  !e ||
                  !(
                    /\b(iPad|iPhone|iPod)\b/.test(e) ||
                    (e.match('Safari') && !e.match('Chrome'))
                  )
                )
            }
            return I
          }
          function A(t) {
            try {
              var e = self[t]
              return (
                e.setItem('_mapbox_test_', 1), e.removeItem('_mapbox_test_'), !0
              )
            } catch (t) {
              return !1
            }
          }
          var k,
            P,
            M,
            L,
            z =
              self.performance && self.performance.now
                ? self.performance.now.bind(self.performance)
                : Date.now.bind(Date),
            O =
              self.requestAnimationFrame ||
              self.mozRequestAnimationFrame ||
              self.webkitRequestAnimationFrame ||
              self.msRequestAnimationFrame,
            D =
              self.cancelAnimationFrame ||
              self.mozCancelAnimationFrame ||
              self.webkitCancelAnimationFrame ||
              self.msCancelAnimationFrame,
            R = {
              now: z,
              frame: function (t) {
                var e = O(t)
                return {
                  cancel: function () {
                    return D(e)
                  },
                }
              },
              getImageData: function (t, e) {
                void 0 === e && (e = 0)
                var r = self.document.createElement('canvas'),
                  n = r.getContext('2d')
                if (!n) throw new Error('failed to create canvas 2d context')
                return (
                  (r.width = t.width),
                  (r.height = t.height),
                  n.drawImage(t, 0, 0, t.width, t.height),
                  n.getImageData(-e, -e, t.width + 2 * e, t.height + 2 * e)
                )
              },
              resolveURL: function (t) {
                return (
                  k || (k = self.document.createElement('a')),
                  (k.href = t),
                  k.href
                )
              },
              hardwareConcurrency: self.navigator.hardwareConcurrency || 4,
              get devicePixelRatio() {
                return self.devicePixelRatio
              },
              get prefersReducedMotion() {
                return (
                  !!self.matchMedia &&
                  (null == P &&
                    (P = self.matchMedia('(prefers-reduced-motion: reduce)')),
                  P.matches)
                )
              },
            },
            F = {
              API_URL: 'https://api.mapbox.com',
              get EVENTS_URL() {
                return this.API_URL
                  ? 0 === this.API_URL.indexOf('https://api.mapbox.cn')
                    ? 'https://events.mapbox.cn/events/v2'
                    : 0 === this.API_URL.indexOf('https://api.mapbox.com')
                    ? 'https://events.mapbox.com/events/v2'
                    : null
                  : null
              },
              FEEDBACK_URL: 'https://apps.mapbox.com/feedback',
              REQUIRE_ACCESS_TOKEN: !0,
              ACCESS_TOKEN: null,
              MAX_PARALLEL_IMAGE_REQUESTS: 16,
            },
            B = {
              supported: !1,
              testSupport: function (t) {
                !N && L && (U ? j(t) : (M = t))
              },
            },
            N = !1,
            U = !1
          function j(t) {
            var e = t.createTexture()
            t.bindTexture(t.TEXTURE_2D, e)
            try {
              if (
                (t.texImage2D(
                  t.TEXTURE_2D,
                  0,
                  t.RGBA,
                  t.RGBA,
                  t.UNSIGNED_BYTE,
                  L
                ),
                t.isContextLost())
              )
                return
              B.supported = !0
            } catch (t) {}
            t.deleteTexture(e), (N = !0)
          }
          self.document &&
            (((L = self.document.createElement('img')).onload = function () {
              M && j(M), (M = null), (U = !0)
            }),
            (L.onerror = function () {
              ;(N = !0), (M = null)
            }),
            (L.src =
              'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA='))
          var V = '01',
            q = function (t, e) {
              ;(this._transformRequestFn = t),
                (this._customAccessToken = e),
                this._createSkuToken()
            }
          function G(t) {
            return 0 === t.indexOf('mapbox:')
          }
          ;(q.prototype._createSkuToken = function () {
            var t = (function () {
              for (var t = '', e = 0; e < 10; e++)
                t += '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'[
                  Math.floor(62 * Math.random())
                ]
              return {
                token: ['1', V, t].join(''),
                tokenExpiresAt: Date.now() + 432e5,
              }
            })()
            ;(this._skuToken = t.token),
              (this._skuTokenExpiresAt = t.tokenExpiresAt)
          }),
            (q.prototype._isSkuTokenExpired = function () {
              return Date.now() > this._skuTokenExpiresAt
            }),
            (q.prototype.transformRequest = function (t, e) {
              return (
                (this._transformRequestFn &&
                  this._transformRequestFn(t, e)) || { url: t }
              )
            }),
            (q.prototype.normalizeStyleURL = function (t, e) {
              if (!G(t)) return t
              var r = K(t)
              return (
                (r.path = '/styles/v1' + r.path),
                this._makeAPIURL(r, this._customAccessToken || e)
              )
            }),
            (q.prototype.normalizeGlyphsURL = function (t, e) {
              if (!G(t)) return t
              var r = K(t)
              return (
                (r.path = '/fonts/v1' + r.path),
                this._makeAPIURL(r, this._customAccessToken || e)
              )
            }),
            (q.prototype.normalizeSourceURL = function (t, e) {
              if (!G(t)) return t
              var r = K(t)
              return (
                (r.path = '/v4/' + r.authority + '.json'),
                r.params.push('secure'),
                this._makeAPIURL(r, this._customAccessToken || e)
              )
            }),
            (q.prototype.normalizeSpriteURL = function (t, e, r, n) {
              var i = K(t)
              return G(t)
                ? ((i.path = '/styles/v1' + i.path + '/sprite' + e + r),
                  this._makeAPIURL(i, this._customAccessToken || n))
                : ((i.path += '' + e + r), W(i))
            }),
            (q.prototype.normalizeTileURL = function (t, e) {
              if (
                (this._isSkuTokenExpired() && this._createSkuToken(),
                t && !G(t))
              )
                return t
              var r = K(t)
              ;(r.path = r.path.replace(
                /(\.(png|jpg)\d*)(?=$)/,
                (R.devicePixelRatio >= 2 || 512 === e ? '@2x' : '') +
                  (B.supported ? '.webp' : '$1')
              )),
                (r.path = r.path.replace(/^.+\/v4\//, '/')),
                (r.path = '/v4' + r.path)
              var n =
                this._customAccessToken ||
                (function (t) {
                  for (var e = 0, r = t; e < r.length; e += 1) {
                    var n = r[e].match(/^access_token=(.*)$/)
                    if (n) return n[1]
                  }
                  return null
                })(r.params) ||
                F.ACCESS_TOKEN
              return (
                F.REQUIRE_ACCESS_TOKEN &&
                  n &&
                  this._skuToken &&
                  r.params.push('sku=' + this._skuToken),
                this._makeAPIURL(r, n)
              )
            }),
            (q.prototype.canonicalizeTileURL = function (t, e) {
              var r = K(t)
              if (!r.path.match(/(^\/v4\/)/) || !r.path.match(/\.[\w]+$/))
                return t
              var n = 'mapbox://tiles/'
              n += r.path.replace('/v4/', '')
              var i = r.params
              return (
                e &&
                  (i = i.filter(function (t) {
                    return !t.match(/^access_token=/)
                  })),
                i.length && (n += '?' + i.join('&')),
                n
              )
            }),
            (q.prototype.canonicalizeTileset = function (t, e) {
              for (
                var r = !!e && G(e), n = [], i = 0, o = t.tiles || [];
                i < o.length;
                i += 1
              ) {
                var a = o[i]
                Z(a) ? n.push(this.canonicalizeTileURL(a, r)) : n.push(a)
              }
              return n
            }),
            (q.prototype._makeAPIURL = function (t, e) {
              var r =
                  'See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes',
                n = K(F.API_URL)
              if (
                ((t.protocol = n.protocol),
                (t.authority = n.authority),
                '/' !== n.path && (t.path = '' + n.path + t.path),
                !F.REQUIRE_ACCESS_TOKEN)
              )
                return W(t)
              if (!(e = e || F.ACCESS_TOKEN))
                throw new Error(
                  'An API access token is required to use Mapbox GL. ' + r
                )
              if ('s' === e[0])
                throw new Error(
                  'Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ' +
                    r
                )
              return (
                (t.params = t.params.filter(function (t) {
                  return -1 === t.indexOf('access_token')
                })),
                t.params.push('access_token=' + e),
                W(t)
              )
            })
          var $ = /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i
          function Z(t) {
            return $.test(t)
          }
          var X = /^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/
          function K(t) {
            var e = t.match(X)
            if (!e) throw new Error('Unable to parse URL object')
            return {
              protocol: e[1],
              authority: e[2],
              path: e[3] || '/',
              params: e[4] ? e[4].split('&') : [],
            }
          }
          function W(t) {
            var e = t.params.length ? '?' + t.params.join('&') : ''
            return t.protocol + '://' + t.authority + t.path + e
          }
          function H(t) {
            if (!t) return null
            var e = t.split('.')
            if (!e || 3 !== e.length) return null
            try {
              return JSON.parse(
                decodeURIComponent(
                  self
                    .atob(e[1])
                    .split('')
                    .map(function (t) {
                      return (
                        '%' + ('00' + t.charCodeAt(0).toString(16)).slice(-2)
                      )
                    })
                    .join('')
                )
              )
            } catch (t) {
              return null
            }
          }
          var J = function (t) {
            ;(this.type = t),
              (this.anonId = null),
              (this.eventData = {}),
              (this.queue = []),
              (this.pendingRequest = null)
          }
          ;(J.prototype.getStorageKey = function (t) {
            var e,
              r = H(F.ACCESS_TOKEN)
            return (
              (e =
                r && r.u
                  ? self.btoa(
                      encodeURIComponent(r.u).replace(
                        /%([0-9A-F]{2})/g,
                        function (t, e) {
                          return String.fromCharCode(Number('0x' + e))
                        }
                      )
                    )
                  : F.ACCESS_TOKEN || ''),
              t ? 'mapbox.eventData.' + t + ':' + e : 'mapbox.eventData:' + e
            )
          }),
            (J.prototype.fetchEventData = function () {
              var t = A('localStorage'),
                e = this.getStorageKey(),
                r = this.getStorageKey('uuid')
              if (t)
                try {
                  var n = self.localStorage.getItem(e)
                  n && (this.eventData = JSON.parse(n))
                  var i = self.localStorage.getItem(r)
                  i && (this.anonId = i)
                } catch (t) {
                  b('Unable to read from LocalStorage')
                }
            }),
            (J.prototype.saveEventData = function () {
              var t = A('localStorage'),
                e = this.getStorageKey(),
                r = this.getStorageKey('uuid')
              if (t)
                try {
                  self.localStorage.setItem(r, this.anonId),
                    Object.keys(this.eventData).length >= 1 &&
                      self.localStorage.setItem(
                        e,
                        JSON.stringify(this.eventData)
                      )
                } catch (t) {
                  b('Unable to write to LocalStorage')
                }
            }),
            (J.prototype.processRequests = function (t) {}),
            (J.prototype.postEvent = function (t, e, r, n) {
              var i = this
              if (F.EVENTS_URL) {
                var o = K(F.EVENTS_URL)
                o.params.push('access_token=' + (n || F.ACCESS_TOKEN || ''))
                var a = {
                    event: this.type,
                    created: new Date(t).toISOString(),
                    sdkIdentifier: 'mapbox-gl-js',
                    sdkVersion: '1.9.1',
                    skuId: V,
                    userId: this.anonId,
                  },
                  s = e ? c(a, e) : a,
                  l = {
                    url: W(o),
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify([s]),
                  }
                this.pendingRequest = xt(l, function (t) {
                  ;(i.pendingRequest = null),
                    r(t),
                    i.saveEventData(),
                    i.processRequests(n)
                })
              }
            }),
            (J.prototype.queueRequest = function (t, e) {
              this.queue.push(t), this.processRequests(e)
            })
          var Y,
            Q,
            tt = (function (t) {
              function e() {
                t.call(this, 'map.load'),
                  (this.success = {}),
                  (this.skuToken = '')
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.postMapLoadEvent = function (t, e, r, n) {
                  ;(this.skuToken = r),
                    ((F.EVENTS_URL && n) ||
                      (F.ACCESS_TOKEN &&
                        Array.isArray(t) &&
                        t.some(function (t) {
                          return G(t) || Z(t)
                        }))) &&
                      this.queueRequest({ id: e, timestamp: Date.now() }, n)
                }),
                (e.prototype.processRequests = function (t) {
                  var e = this
                  if (!this.pendingRequest && 0 !== this.queue.length) {
                    var r = this.queue.shift(),
                      n = r.id,
                      i = r.timestamp
                    ;(n && this.success[n]) ||
                      (this.anonId || this.fetchEventData(),
                      d(this.anonId) || (this.anonId = f()),
                      this.postEvent(
                        i,
                        { skuToken: this.skuToken },
                        function (t) {
                          t || (n && (e.success[n] = !0))
                        },
                        t
                      ))
                  }
                }),
                e
              )
            })(J),
            et = new ((function (t) {
              function e(e) {
                t.call(this, 'appUserTurnstile'), (this._customAccessToken = e)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.postTurnstileEvent = function (t, e) {
                  F.EVENTS_URL &&
                    F.ACCESS_TOKEN &&
                    Array.isArray(t) &&
                    t.some(function (t) {
                      return G(t) || Z(t)
                    }) &&
                    this.queueRequest(Date.now(), e)
                }),
                (e.prototype.processRequests = function (t) {
                  var e = this
                  if (!this.pendingRequest && 0 !== this.queue.length) {
                    ;(this.anonId &&
                      this.eventData.lastSuccess &&
                      this.eventData.tokenU) ||
                      this.fetchEventData()
                    var r = H(F.ACCESS_TOKEN),
                      n = r ? r.u : F.ACCESS_TOKEN,
                      i = n !== this.eventData.tokenU
                    d(this.anonId) || ((this.anonId = f()), (i = !0))
                    var o = this.queue.shift()
                    if (this.eventData.lastSuccess) {
                      var a = new Date(this.eventData.lastSuccess),
                        s = new Date(o),
                        l = (o - this.eventData.lastSuccess) / 864e5
                      i = i || l >= 1 || l < -1 || a.getDate() !== s.getDate()
                    } else i = !0
                    if (!i) return this.processRequests()
                    this.postEvent(
                      o,
                      { 'enabled.telemetry': !1 },
                      function (t) {
                        t ||
                          ((e.eventData.lastSuccess = o),
                          (e.eventData.tokenU = n))
                      },
                      t
                    )
                  }
                }),
                e
              )
            })(J))(),
            rt = et.postTurnstileEvent.bind(et),
            nt = new tt(),
            it = nt.postMapLoadEvent.bind(nt),
            ot = 'mapbox-tiles',
            at = 500,
            st = 50
          function lt() {
            self.caches && !Y && (Y = self.caches.open(ot))
          }
          function ut(t) {
            var e = t.indexOf('?')
            return e < 0 ? t : t.slice(0, e)
          }
          var ct,
            pt = 1 / 0
          function ht() {
            return (
              null == ct &&
                (ct =
                  self.OffscreenCanvas &&
                  new self.OffscreenCanvas(1, 1).getContext('2d') &&
                  'function' == typeof self.createImageBitmap),
              ct
            )
          }
          var ft = {
            Unknown: 'Unknown',
            Style: 'Style',
            Source: 'Source',
            Tile: 'Tile',
            Glyphs: 'Glyphs',
            SpriteImage: 'SpriteImage',
            SpriteJSON: 'SpriteJSON',
            Image: 'Image',
          }
          'function' == typeof Object.freeze && Object.freeze(ft)
          var dt,
            mt,
            yt = (function (t) {
              function e(e, r, n) {
                401 === r &&
                  Z(n) &&
                  (e +=
                    ': you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes'),
                  t.call(this, e),
                  (this.status = r),
                  (this.url = n),
                  (this.name = this.constructor.name),
                  (this.message = e)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.toString = function () {
                  return (
                    this.name +
                    ': ' +
                    this.message +
                    ' (' +
                    this.status +
                    '): ' +
                    this.url
                  )
                }),
                e
              )
            })(Error),
            vt = S()
              ? function () {
                  return self.worker && self.worker.referrer
                }
              : function () {
                  return ('blob:' === self.location.protocol
                    ? self.parent
                    : self
                  ).location.href
                },
            gt = function (t, e) {
              if (
                !(
                  /^file:/.test((r = t.url)) ||
                  (/^file:/.test(vt()) && !/^\w+:/.test(r))
                )
              ) {
                if (
                  self.fetch &&
                  self.Request &&
                  self.AbortController &&
                  self.Request.prototype.hasOwnProperty('signal')
                )
                  return (function (t, e) {
                    var r,
                      n = new self.AbortController(),
                      i = new self.Request(t.url, {
                        method: t.method || 'GET',
                        body: t.body,
                        credentials: t.credentials,
                        headers: t.headers,
                        referrer: vt(),
                        signal: n.signal,
                      }),
                      o = !1,
                      a = !1,
                      s = (r = i.url).indexOf('sku=') > 0 && Z(r)
                    'json' === t.type &&
                      i.headers.set('Accept', 'application/json')
                    var l = function (r, n, o) {
                        if (!a) {
                          if (
                            (r && 'SecurityError' !== r.message && b(r), n && o)
                          )
                            return u(n)
                          var l = Date.now()
                          self
                            .fetch(i)
                            .then(function (r) {
                              if (r.ok) {
                                var n = s ? r.clone() : null
                                return u(r, n, l)
                              }
                              return e(new yt(r.statusText, r.status, t.url))
                            })
                            .catch(function (t) {
                              20 !== t.code && e(new Error(t.message))
                            })
                        }
                      },
                      u = function (r, n, s) {
                        ;('arrayBuffer' === t.type
                          ? r.arrayBuffer()
                          : 'json' === t.type
                          ? r.json()
                          : r.text()
                        )
                          .then(function (t) {
                            a ||
                              (n &&
                                s &&
                                (function (t, e, r) {
                                  if ((lt(), Y)) {
                                    var n = {
                                      status: e.status,
                                      statusText: e.statusText,
                                      headers: new self.Headers(),
                                    }
                                    e.headers.forEach(function (t, e) {
                                      return n.headers.set(e, t)
                                    })
                                    var i = T(
                                      e.headers.get('Cache-Control') || ''
                                    )
                                    i['no-store'] ||
                                      (i['max-age'] &&
                                        n.headers.set(
                                          'Expires',
                                          new Date(
                                            r + 1e3 * i['max-age']
                                          ).toUTCString()
                                        ),
                                      new Date(
                                        n.headers.get('Expires')
                                      ).getTime() -
                                        r <
                                        42e4 ||
                                        (function (t, e) {
                                          if (void 0 === Q)
                                            try {
                                              new Response(
                                                new ReadableStream()
                                              ),
                                                (Q = !0)
                                            } catch (t) {
                                              Q = !1
                                            }
                                          Q ? e(t.body) : t.blob().then(e)
                                        })(e, function (e) {
                                          var r = new self.Response(e, n)
                                          lt(),
                                            Y &&
                                              Y.then(function (e) {
                                                return e.put(ut(t.url), r)
                                              }).catch(function (t) {
                                                return b(t.message)
                                              })
                                        }))
                                  }
                                })(i, n, s),
                              (o = !0),
                              e(
                                null,
                                t,
                                r.headers.get('Cache-Control'),
                                r.headers.get('Expires')
                              ))
                          })
                          .catch(function (t) {
                            a || e(new Error(t.message))
                          })
                      }
                    return (
                      s
                        ? (function (t, e) {
                            if ((lt(), !Y)) return e(null)
                            var r = ut(t.url)
                            Y.then(function (t) {
                              t.match(r)
                                .then(function (n) {
                                  var i = (function (t) {
                                    if (!t) return !1
                                    var e = new Date(
                                        t.headers.get('Expires') || 0
                                      ),
                                      r = T(
                                        t.headers.get('Cache-Control') || ''
                                      )
                                    return e > Date.now() && !r['no-cache']
                                  })(n)
                                  t.delete(r),
                                    i && t.put(r, n.clone()),
                                    e(null, n, i)
                                })
                                .catch(e)
                            }).catch(e)
                          })(i, l)
                        : l(null, null),
                      {
                        cancel: function () {
                          ;(a = !0), o || n.abort()
                        },
                      }
                    )
                  })(t, e)
                if (S() && self.worker && self.worker.actor)
                  return self.worker.actor.send('getResource', t, e, void 0, !0)
              }
              var r
              return (function (t, e) {
                var r = new self.XMLHttpRequest()
                for (var n in (r.open(t.method || 'GET', t.url, !0),
                'arrayBuffer' === t.type && (r.responseType = 'arraybuffer'),
                t.headers))
                  r.setRequestHeader(n, t.headers[n])
                return (
                  'json' === t.type &&
                    ((r.responseType = 'text'),
                    r.setRequestHeader('Accept', 'application/json')),
                  (r.withCredentials = 'include' === t.credentials),
                  (r.onerror = function () {
                    e(new Error(r.statusText))
                  }),
                  (r.onload = function () {
                    if (
                      ((r.status >= 200 && r.status < 300) || 0 === r.status) &&
                      null !== r.response
                    ) {
                      var n = r.response
                      if ('json' === t.type)
                        try {
                          n = JSON.parse(r.response)
                        } catch (t) {
                          return e(t)
                        }
                      e(
                        null,
                        n,
                        r.getResponseHeader('Cache-Control'),
                        r.getResponseHeader('Expires')
                      )
                    } else e(new yt(r.statusText, r.status, t.url))
                  }),
                  r.send(t.body),
                  {
                    cancel: function () {
                      return r.abort()
                    },
                  }
                )
              })(t, e)
            },
            _t = function (t, e) {
              return gt(c(t, { type: 'arrayBuffer' }), e)
            },
            xt = function (t, e) {
              return gt(c(t, { method: 'POST' }), e)
            }
          ;(dt = []), (mt = 0)
          var bt = function (t, e) {
            if (
              (B.supported &&
                (t.headers || (t.headers = {}),
                (t.headers.accept = 'image/webp,*/*')),
              mt >= F.MAX_PARALLEL_IMAGE_REQUESTS)
            ) {
              var r = {
                requestParameters: t,
                callback: e,
                cancelled: !1,
                cancel: function () {
                  this.cancelled = !0
                },
              }
              return dt.push(r), r
            }
            mt++
            var n = !1,
              i = function () {
                if (!n)
                  for (
                    n = !0, mt--;
                    dt.length && mt < F.MAX_PARALLEL_IMAGE_REQUESTS;

                  ) {
                    var t = dt.shift()
                    t.cancelled ||
                      (t.cancel = bt(t.requestParameters, t.callback).cancel)
                  }
              },
              o = _t(t, function (t, r, n, o) {
                i(),
                  t
                    ? e(t)
                    : r &&
                      (ht()
                        ? (function (t, e) {
                            var r = new self.Blob([new Uint8Array(t)], {
                              type: 'image/png',
                            })
                            self
                              .createImageBitmap(r)
                              .then(function (t) {
                                e(null, t)
                              })
                              .catch(function (t) {
                                e(
                                  new Error(
                                    'Could not load image because of ' +
                                      t.message +
                                      '. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'
                                  )
                                )
                              })
                          })(r, e)
                        : (function (t, e, r, n) {
                            var i = new self.Image(),
                              o = self.URL
                            ;(i.onload = function () {
                              e(null, i), o.revokeObjectURL(i.src)
                            }),
                              (i.onerror = function () {
                                return e(
                                  new Error(
                                    'Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'
                                  )
                                )
                              })
                            var a = new self.Blob([new Uint8Array(t)], {
                              type: 'image/png',
                            })
                            ;(i.cacheControl = r),
                              (i.expires = n),
                              (i.src = t.byteLength
                                ? o.createObjectURL(a)
                                : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=')
                          })(r, e, n, o))
              })
            return {
              cancel: function () {
                o.cancel(), i()
              },
            }
          }
          function wt(t, e, r) {
            ;(r[t] && -1 !== r[t].indexOf(e)) ||
              ((r[t] = r[t] || []), r[t].push(e))
          }
          function Et(t, e, r) {
            if (r && r[t]) {
              var n = r[t].indexOf(e)
              ;-1 !== n && r[t].splice(n, 1)
            }
          }
          var St = function (t, e) {
              void 0 === e && (e = {}), c(this, e), (this.type = t)
            },
            Tt = (function (t) {
              function e(e, r) {
                void 0 === r && (r = {}),
                  t.call(this, 'error', c({ error: e }, r))
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                e
              )
            })(St),
            It = function () {}
          ;(It.prototype.on = function (t, e) {
            return (
              (this._listeners = this._listeners || {}),
              wt(t, e, this._listeners),
              this
            )
          }),
            (It.prototype.off = function (t, e) {
              return (
                Et(t, e, this._listeners),
                Et(t, e, this._oneTimeListeners),
                this
              )
            }),
            (It.prototype.once = function (t, e) {
              return (
                (this._oneTimeListeners = this._oneTimeListeners || {}),
                wt(t, e, this._oneTimeListeners),
                this
              )
            }),
            (It.prototype.fire = function (t, e) {
              'string' == typeof t && (t = new St(t, e || {}))
              var r = t.type
              if (this.listens(r)) {
                t.target = this
                for (
                  var n = 0,
                    i =
                      this._listeners && this._listeners[r]
                        ? this._listeners[r].slice()
                        : [];
                  n < i.length;
                  n += 1
                )
                  i[n].call(this, t)
                for (
                  var o = 0,
                    a =
                      this._oneTimeListeners && this._oneTimeListeners[r]
                        ? this._oneTimeListeners[r].slice()
                        : [];
                  o < a.length;
                  o += 1
                ) {
                  var s = a[o]
                  Et(r, s, this._oneTimeListeners), s.call(this, t)
                }
                var l = this._eventedParent
                l &&
                  (c(
                    t,
                    'function' == typeof this._eventedParentData
                      ? this._eventedParentData()
                      : this._eventedParentData
                  ),
                  l.fire(t))
              } else t instanceof Tt && console.error(t.error)
              return this
            }),
            (It.prototype.listens = function (t) {
              return (
                (this._listeners &&
                  this._listeners[t] &&
                  this._listeners[t].length > 0) ||
                (this._oneTimeListeners &&
                  this._oneTimeListeners[t] &&
                  this._oneTimeListeners[t].length > 0) ||
                (this._eventedParent && this._eventedParent.listens(t))
              )
            }),
            (It.prototype.setEventedParent = function (t, e) {
              return (
                (this._eventedParent = t), (this._eventedParentData = e), this
              )
            })
          var Ct = {
              $version: 8,
              $root: {
                version: { required: !0, type: 'enum', values: [8] },
                name: { type: 'string' },
                metadata: { type: '*' },
                center: { type: 'array', value: 'number' },
                zoom: { type: 'number' },
                bearing: {
                  type: 'number',
                  default: 0,
                  period: 360,
                  units: 'degrees',
                },
                pitch: { type: 'number', default: 0, units: 'degrees' },
                light: { type: 'light' },
                sources: { required: !0, type: 'sources' },
                sprite: { type: 'string' },
                glyphs: { type: 'string' },
                transition: { type: 'transition' },
                layers: { required: !0, type: 'array', value: 'layer' },
              },
              sources: { '*': { type: 'source' } },
              source: [
                'source_vector',
                'source_raster',
                'source_raster_dem',
                'source_geojson',
                'source_video',
                'source_image',
              ],
              source_vector: {
                type: { required: !0, type: 'enum', values: { vector: {} } },
                url: { type: 'string' },
                tiles: { type: 'array', value: 'string' },
                bounds: {
                  type: 'array',
                  value: 'number',
                  length: 4,
                  default: [-180, -85.051129, 180, 85.051129],
                },
                scheme: {
                  type: 'enum',
                  values: { xyz: {}, tms: {} },
                  default: 'xyz',
                },
                minzoom: { type: 'number', default: 0 },
                maxzoom: { type: 'number', default: 22 },
                attribution: { type: 'string' },
                promoteId: { type: 'promoteId' },
                '*': { type: '*' },
              },
              source_raster: {
                type: { required: !0, type: 'enum', values: { raster: {} } },
                url: { type: 'string' },
                tiles: { type: 'array', value: 'string' },
                bounds: {
                  type: 'array',
                  value: 'number',
                  length: 4,
                  default: [-180, -85.051129, 180, 85.051129],
                },
                minzoom: { type: 'number', default: 0 },
                maxzoom: { type: 'number', default: 22 },
                tileSize: { type: 'number', default: 512, units: 'pixels' },
                scheme: {
                  type: 'enum',
                  values: { xyz: {}, tms: {} },
                  default: 'xyz',
                },
                attribution: { type: 'string' },
                '*': { type: '*' },
              },
              source_raster_dem: {
                type: {
                  required: !0,
                  type: 'enum',
                  values: { 'raster-dem': {} },
                },
                url: { type: 'string' },
                tiles: { type: 'array', value: 'string' },
                bounds: {
                  type: 'array',
                  value: 'number',
                  length: 4,
                  default: [-180, -85.051129, 180, 85.051129],
                },
                minzoom: { type: 'number', default: 0 },
                maxzoom: { type: 'number', default: 22 },
                tileSize: { type: 'number', default: 512, units: 'pixels' },
                attribution: { type: 'string' },
                encoding: {
                  type: 'enum',
                  values: { terrarium: {}, mapbox: {} },
                  default: 'mapbox',
                },
                '*': { type: '*' },
              },
              source_geojson: {
                type: { required: !0, type: 'enum', values: { geojson: {} } },
                data: { type: '*' },
                maxzoom: { type: 'number', default: 18 },
                attribution: { type: 'string' },
                buffer: {
                  type: 'number',
                  default: 128,
                  maximum: 512,
                  minimum: 0,
                },
                tolerance: { type: 'number', default: 0.375 },
                cluster: { type: 'boolean', default: !1 },
                clusterRadius: { type: 'number', default: 50, minimum: 0 },
                clusterMaxZoom: { type: 'number' },
                clusterProperties: { type: '*' },
                lineMetrics: { type: 'boolean', default: !1 },
                generateId: { type: 'boolean', default: !1 },
                promoteId: { type: 'promoteId' },
              },
              source_video: {
                type: { required: !0, type: 'enum', values: { video: {} } },
                urls: { required: !0, type: 'array', value: 'string' },
                coordinates: {
                  required: !0,
                  type: 'array',
                  length: 4,
                  value: { type: 'array', length: 2, value: 'number' },
                },
              },
              source_image: {
                type: { required: !0, type: 'enum', values: { image: {} } },
                url: { required: !0, type: 'string' },
                coordinates: {
                  required: !0,
                  type: 'array',
                  length: 4,
                  value: { type: 'array', length: 2, value: 'number' },
                },
              },
              layer: {
                id: { type: 'string', required: !0 },
                type: {
                  type: 'enum',
                  values: {
                    fill: {},
                    line: {},
                    symbol: {},
                    circle: {},
                    heatmap: {},
                    'fill-extrusion': {},
                    raster: {},
                    hillshade: {},
                    background: {},
                  },
                  required: !0,
                },
                metadata: { type: '*' },
                source: { type: 'string' },
                'source-layer': { type: 'string' },
                minzoom: { type: 'number', minimum: 0, maximum: 24 },
                maxzoom: { type: 'number', minimum: 0, maximum: 24 },
                filter: { type: 'filter' },
                layout: { type: 'layout' },
                paint: { type: 'paint' },
              },
              layout: [
                'layout_fill',
                'layout_line',
                'layout_circle',
                'layout_heatmap',
                'layout_fill-extrusion',
                'layout_symbol',
                'layout_raster',
                'layout_hillshade',
                'layout_background',
              ],
              layout_background: {
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_fill: {
                'fill-sort-key': {
                  type: 'number',
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_circle: {
                'circle-sort-key': {
                  type: 'number',
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_heatmap: {
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              'layout_fill-extrusion': {
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_line: {
                'line-cap': {
                  type: 'enum',
                  values: { butt: {}, round: {}, square: {} },
                  default: 'butt',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'line-join': {
                  type: 'enum',
                  values: { bevel: {}, round: {}, miter: {} },
                  default: 'miter',
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'line-miter-limit': {
                  type: 'number',
                  default: 2,
                  requires: [{ 'line-join': 'miter' }],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'line-round-limit': {
                  type: 'number',
                  default: 1.05,
                  requires: [{ 'line-join': 'round' }],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'line-sort-key': {
                  type: 'number',
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_symbol: {
                'symbol-placement': {
                  type: 'enum',
                  values: { point: {}, line: {}, 'line-center': {} },
                  default: 'point',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'symbol-spacing': {
                  type: 'number',
                  default: 250,
                  minimum: 1,
                  units: 'pixels',
                  requires: [{ 'symbol-placement': 'line' }],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'symbol-avoid-edges': {
                  type: 'boolean',
                  default: !1,
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'symbol-sort-key': {
                  type: 'number',
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'symbol-z-order': {
                  type: 'enum',
                  values: { auto: {}, 'viewport-y': {}, source: {} },
                  default: 'auto',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-allow-overlap': {
                  type: 'boolean',
                  default: !1,
                  requires: ['icon-image'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-ignore-placement': {
                  type: 'boolean',
                  default: !1,
                  requires: ['icon-image'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-optional': {
                  type: 'boolean',
                  default: !1,
                  requires: ['icon-image', 'text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-rotation-alignment': {
                  type: 'enum',
                  values: { map: {}, viewport: {}, auto: {} },
                  default: 'auto',
                  requires: ['icon-image'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-size': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  units: 'factor of the original icon size',
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-text-fit': {
                  type: 'enum',
                  values: { none: {}, width: {}, height: {}, both: {} },
                  default: 'none',
                  requires: ['icon-image', 'text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-text-fit-padding': {
                  type: 'array',
                  value: 'number',
                  length: 4,
                  default: [0, 0, 0, 0],
                  units: 'pixels',
                  requires: [
                    'icon-image',
                    'text-field',
                    { 'icon-text-fit': ['both', 'width', 'height'] },
                  ],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-image': {
                  type: 'resolvedImage',
                  tokens: !0,
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-rotate': {
                  type: 'number',
                  default: 0,
                  period: 360,
                  units: 'degrees',
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-padding': {
                  type: 'number',
                  default: 2,
                  minimum: 0,
                  units: 'pixels',
                  requires: ['icon-image'],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-keep-upright': {
                  type: 'boolean',
                  default: !1,
                  requires: [
                    'icon-image',
                    { 'icon-rotation-alignment': 'map' },
                    { 'symbol-placement': ['line', 'line-center'] },
                  ],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-offset': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-anchor': {
                  type: 'enum',
                  values: {
                    center: {},
                    left: {},
                    right: {},
                    top: {},
                    bottom: {},
                    'top-left': {},
                    'top-right': {},
                    'bottom-left': {},
                    'bottom-right': {},
                  },
                  default: 'center',
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-pitch-alignment': {
                  type: 'enum',
                  values: { map: {}, viewport: {}, auto: {} },
                  default: 'auto',
                  requires: ['icon-image'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-pitch-alignment': {
                  type: 'enum',
                  values: { map: {}, viewport: {}, auto: {} },
                  default: 'auto',
                  requires: ['text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-rotation-alignment': {
                  type: 'enum',
                  values: { map: {}, viewport: {}, auto: {} },
                  default: 'auto',
                  requires: ['text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-field': {
                  type: 'formatted',
                  default: '',
                  tokens: !0,
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-font': {
                  type: 'array',
                  value: 'string',
                  default: ['Open Sans Regular', 'Arial Unicode MS Regular'],
                  requires: ['text-field'],
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-size': {
                  type: 'number',
                  default: 16,
                  minimum: 0,
                  units: 'pixels',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-max-width': {
                  type: 'number',
                  default: 10,
                  minimum: 0,
                  units: 'ems',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-line-height': {
                  type: 'number',
                  default: 1.2,
                  units: 'ems',
                  requires: ['text-field'],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-letter-spacing': {
                  type: 'number',
                  default: 0,
                  units: 'ems',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-justify': {
                  type: 'enum',
                  values: { auto: {}, left: {}, center: {}, right: {} },
                  default: 'center',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-radial-offset': {
                  type: 'number',
                  units: 'ems',
                  default: 0,
                  requires: ['text-field'],
                  'property-type': 'data-driven',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                },
                'text-variable-anchor': {
                  type: 'array',
                  value: 'enum',
                  values: {
                    center: {},
                    left: {},
                    right: {},
                    top: {},
                    bottom: {},
                    'top-left': {},
                    'top-right': {},
                    'bottom-left': {},
                    'bottom-right': {},
                  },
                  requires: ['text-field', { 'symbol-placement': ['point'] }],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-anchor': {
                  type: 'enum',
                  values: {
                    center: {},
                    left: {},
                    right: {},
                    top: {},
                    bottom: {},
                    'top-left': {},
                    'top-right': {},
                    'bottom-left': {},
                    'bottom-right': {},
                  },
                  default: 'center',
                  requires: ['text-field', { '!': 'text-variable-anchor' }],
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-max-angle': {
                  type: 'number',
                  default: 45,
                  units: 'degrees',
                  requires: [
                    'text-field',
                    { 'symbol-placement': ['line', 'line-center'] },
                  ],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-writing-mode': {
                  type: 'array',
                  value: 'enum',
                  values: { horizontal: {}, vertical: {} },
                  requires: ['text-field', { 'symbol-placement': ['point'] }],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-rotate': {
                  type: 'number',
                  default: 0,
                  period: 360,
                  units: 'degrees',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-padding': {
                  type: 'number',
                  default: 2,
                  minimum: 0,
                  units: 'pixels',
                  requires: ['text-field'],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-keep-upright': {
                  type: 'boolean',
                  default: !0,
                  requires: [
                    'text-field',
                    { 'text-rotation-alignment': 'map' },
                    { 'symbol-placement': ['line', 'line-center'] },
                  ],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-transform': {
                  type: 'enum',
                  values: { none: {}, uppercase: {}, lowercase: {} },
                  default: 'none',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-offset': {
                  type: 'array',
                  value: 'number',
                  units: 'ems',
                  length: 2,
                  default: [0, 0],
                  requires: ['text-field', { '!': 'text-radial-offset' }],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'data-driven',
                },
                'text-allow-overlap': {
                  type: 'boolean',
                  default: !1,
                  requires: ['text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-ignore-placement': {
                  type: 'boolean',
                  default: !1,
                  requires: ['text-field'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-optional': {
                  type: 'boolean',
                  default: !1,
                  requires: ['text-field', 'icon-image'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_raster: {
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              layout_hillshade: {
                visibility: {
                  type: 'enum',
                  values: { visible: {}, none: {} },
                  default: 'visible',
                  'property-type': 'constant',
                },
              },
              filter: { type: 'array', value: '*' },
              filter_operator: {
                type: 'enum',
                values: {
                  '==': {},
                  '!=': {},
                  '>': {},
                  '>=': {},
                  '<': {},
                  '<=': {},
                  in: {},
                  '!in': {},
                  all: {},
                  any: {},
                  none: {},
                  has: {},
                  '!has': {},
                },
              },
              geometry_type: {
                type: 'enum',
                values: { Point: {}, LineString: {}, Polygon: {} },
              },
              function: {
                expression: { type: 'expression' },
                stops: { type: 'array', value: 'function_stop' },
                base: { type: 'number', default: 1, minimum: 0 },
                property: { type: 'string', default: '$zoom' },
                type: {
                  type: 'enum',
                  values: {
                    identity: {},
                    exponential: {},
                    interval: {},
                    categorical: {},
                  },
                  default: 'exponential',
                },
                colorSpace: {
                  type: 'enum',
                  values: { rgb: {}, lab: {}, hcl: {} },
                  default: 'rgb',
                },
                default: { type: '*', required: !1 },
              },
              function_stop: {
                type: 'array',
                minimum: 0,
                maximum: 24,
                value: ['number', 'color'],
                length: 2,
              },
              expression: { type: 'array', value: '*', minimum: 1 },
              expression_name: {
                type: 'enum',
                values: {
                  let: { group: 'Variable binding' },
                  var: { group: 'Variable binding' },
                  literal: { group: 'Types' },
                  array: { group: 'Types' },
                  at: { group: 'Lookup' },
                  in: { group: 'Lookup' },
                  case: { group: 'Decision' },
                  match: { group: 'Decision' },
                  coalesce: { group: 'Decision' },
                  step: { group: 'Ramps, scales, curves' },
                  interpolate: { group: 'Ramps, scales, curves' },
                  'interpolate-hcl': { group: 'Ramps, scales, curves' },
                  'interpolate-lab': { group: 'Ramps, scales, curves' },
                  ln2: { group: 'Math' },
                  pi: { group: 'Math' },
                  e: { group: 'Math' },
                  typeof: { group: 'Types' },
                  string: { group: 'Types' },
                  number: { group: 'Types' },
                  boolean: { group: 'Types' },
                  object: { group: 'Types' },
                  collator: { group: 'Types' },
                  format: { group: 'Types' },
                  image: { group: 'Types' },
                  'number-format': { group: 'Types' },
                  'to-string': { group: 'Types' },
                  'to-number': { group: 'Types' },
                  'to-boolean': { group: 'Types' },
                  'to-rgba': { group: 'Color' },
                  'to-color': { group: 'Types' },
                  rgb: { group: 'Color' },
                  rgba: { group: 'Color' },
                  get: { group: 'Lookup' },
                  has: { group: 'Lookup' },
                  length: { group: 'Lookup' },
                  properties: { group: 'Feature data' },
                  'feature-state': { group: 'Feature data' },
                  'geometry-type': { group: 'Feature data' },
                  id: { group: 'Feature data' },
                  zoom: { group: 'Zoom' },
                  'heatmap-density': { group: 'Heatmap' },
                  'line-progress': { group: 'Feature data' },
                  accumulated: { group: 'Feature data' },
                  '+': { group: 'Math' },
                  '*': { group: 'Math' },
                  '-': { group: 'Math' },
                  '/': { group: 'Math' },
                  '%': { group: 'Math' },
                  '^': { group: 'Math' },
                  sqrt: { group: 'Math' },
                  log10: { group: 'Math' },
                  ln: { group: 'Math' },
                  log2: { group: 'Math' },
                  sin: { group: 'Math' },
                  cos: { group: 'Math' },
                  tan: { group: 'Math' },
                  asin: { group: 'Math' },
                  acos: { group: 'Math' },
                  atan: { group: 'Math' },
                  min: { group: 'Math' },
                  max: { group: 'Math' },
                  round: { group: 'Math' },
                  abs: { group: 'Math' },
                  ceil: { group: 'Math' },
                  floor: { group: 'Math' },
                  '==': { group: 'Decision' },
                  '!=': { group: 'Decision' },
                  '>': { group: 'Decision' },
                  '<': { group: 'Decision' },
                  '>=': { group: 'Decision' },
                  '<=': { group: 'Decision' },
                  all: { group: 'Decision' },
                  any: { group: 'Decision' },
                  '!': { group: 'Decision' },
                  within: { group: 'Decision' },
                  'is-supported-script': { group: 'String' },
                  upcase: { group: 'String' },
                  downcase: { group: 'String' },
                  concat: { group: 'String' },
                  'resolved-locale': { group: 'String' },
                },
              },
              light: {
                anchor: {
                  type: 'enum',
                  default: 'viewport',
                  values: { map: {}, viewport: {} },
                  'property-type': 'data-constant',
                  transition: !1,
                  expression: { interpolated: !1, parameters: ['zoom'] },
                },
                position: {
                  type: 'array',
                  default: [1.15, 210, 30],
                  length: 3,
                  value: 'number',
                  'property-type': 'data-constant',
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                },
                color: {
                  type: 'color',
                  'property-type': 'data-constant',
                  default: '#ffffff',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  transition: !0,
                },
                intensity: {
                  type: 'number',
                  'property-type': 'data-constant',
                  default: 0.5,
                  minimum: 0,
                  maximum: 1,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  transition: !0,
                },
              },
              paint: [
                'paint_fill',
                'paint_line',
                'paint_circle',
                'paint_heatmap',
                'paint_fill-extrusion',
                'paint_symbol',
                'paint_raster',
                'paint_hillshade',
                'paint_background',
              ],
              paint_fill: {
                'fill-antialias': {
                  type: 'boolean',
                  default: !0,
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  requires: [{ '!': 'fill-pattern' }],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-outline-color': {
                  type: 'color',
                  transition: !0,
                  requires: [{ '!': 'fill-pattern' }, { 'fill-antialias': !0 }],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['fill-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-pattern': {
                  type: 'resolvedImage',
                  transition: !0,
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'cross-faded-data-driven',
                },
              },
              'paint_fill-extrusion': {
                'fill-extrusion-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-extrusion-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  requires: [{ '!': 'fill-extrusion-pattern' }],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-extrusion-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-extrusion-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['fill-extrusion-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'fill-extrusion-pattern': {
                  type: 'resolvedImage',
                  transition: !0,
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'cross-faded-data-driven',
                },
                'fill-extrusion-height': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  units: 'meters',
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-extrusion-base': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  units: 'meters',
                  transition: !0,
                  requires: ['fill-extrusion-height'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'fill-extrusion-vertical-gradient': {
                  type: 'boolean',
                  default: !0,
                  transition: !1,
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              paint_line: {
                'line-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  requires: [{ '!': 'line-pattern' }],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'line-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['line-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'line-width': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-gap-width': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-offset': {
                  type: 'number',
                  default: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-blur': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'line-dasharray': {
                  type: 'array',
                  value: 'number',
                  minimum: 0,
                  transition: !0,
                  units: 'line widths',
                  requires: [{ '!': 'line-pattern' }],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'cross-faded',
                },
                'line-pattern': {
                  type: 'resolvedImage',
                  transition: !0,
                  expression: {
                    interpolated: !1,
                    parameters: ['zoom', 'feature'],
                  },
                  'property-type': 'cross-faded-data-driven',
                },
                'line-gradient': {
                  type: 'color',
                  transition: !1,
                  requires: [
                    { '!': 'line-dasharray' },
                    { '!': 'line-pattern' },
                    { source: 'geojson', has: { lineMetrics: !0 } },
                  ],
                  expression: {
                    interpolated: !0,
                    parameters: ['line-progress'],
                  },
                  'property-type': 'color-ramp',
                },
              },
              paint_circle: {
                'circle-radius': {
                  type: 'number',
                  default: 5,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-blur': {
                  type: 'number',
                  default: 0,
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'circle-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['circle-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'circle-pitch-scale': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'circle-pitch-alignment': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'viewport',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'circle-stroke-width': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-stroke-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'circle-stroke-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
              },
              paint_heatmap: {
                'heatmap-radius': {
                  type: 'number',
                  default: 30,
                  minimum: 1,
                  transition: !0,
                  units: 'pixels',
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'heatmap-weight': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  transition: !1,
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'heatmap-intensity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'heatmap-color': {
                  type: 'color',
                  default: [
                    'interpolate',
                    ['linear'],
                    ['heatmap-density'],
                    0,
                    'rgba(0, 0, 255, 0)',
                    0.1,
                    'royalblue',
                    0.3,
                    'cyan',
                    0.5,
                    'lime',
                    0.7,
                    'yellow',
                    1,
                    'red',
                  ],
                  transition: !1,
                  expression: {
                    interpolated: !0,
                    parameters: ['heatmap-density'],
                  },
                  'property-type': 'color-ramp',
                },
                'heatmap-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              paint_symbol: {
                'icon-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-halo-color': {
                  type: 'color',
                  default: 'rgba(0, 0, 0, 0)',
                  transition: !0,
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-halo-width': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-halo-blur': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  requires: ['icon-image'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'icon-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  requires: ['icon-image'],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'icon-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['icon-image', 'icon-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'text-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  overridable: !0,
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'text-halo-color': {
                  type: 'color',
                  default: 'rgba(0, 0, 0, 0)',
                  transition: !0,
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'text-halo-width': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'text-halo-blur': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  transition: !0,
                  units: 'pixels',
                  requires: ['text-field'],
                  expression: {
                    interpolated: !0,
                    parameters: ['zoom', 'feature', 'feature-state'],
                  },
                  'property-type': 'data-driven',
                },
                'text-translate': {
                  type: 'array',
                  value: 'number',
                  length: 2,
                  default: [0, 0],
                  transition: !0,
                  units: 'pixels',
                  requires: ['text-field'],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'text-translate-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'map',
                  requires: ['text-field', 'text-translate'],
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              paint_raster: {
                'raster-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-hue-rotate': {
                  type: 'number',
                  default: 0,
                  period: 360,
                  transition: !0,
                  units: 'degrees',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-brightness-min': {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-brightness-max': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-saturation': {
                  type: 'number',
                  default: 0,
                  minimum: -1,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-contrast': {
                  type: 'number',
                  default: 0,
                  minimum: -1,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-resampling': {
                  type: 'enum',
                  values: { linear: {}, nearest: {} },
                  default: 'linear',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'raster-fade-duration': {
                  type: 'number',
                  default: 300,
                  minimum: 0,
                  transition: !1,
                  units: 'milliseconds',
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              paint_hillshade: {
                'hillshade-illumination-direction': {
                  type: 'number',
                  default: 335,
                  minimum: 0,
                  maximum: 359,
                  transition: !1,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'hillshade-illumination-anchor': {
                  type: 'enum',
                  values: { map: {}, viewport: {} },
                  default: 'viewport',
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'hillshade-exaggeration': {
                  type: 'number',
                  default: 0.5,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'hillshade-shadow-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'hillshade-highlight-color': {
                  type: 'color',
                  default: '#FFFFFF',
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'hillshade-accent-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              paint_background: {
                'background-color': {
                  type: 'color',
                  default: '#000000',
                  transition: !0,
                  requires: [{ '!': 'background-pattern' }],
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
                'background-pattern': {
                  type: 'resolvedImage',
                  transition: !0,
                  expression: { interpolated: !1, parameters: ['zoom'] },
                  'property-type': 'cross-faded',
                },
                'background-opacity': {
                  type: 'number',
                  default: 1,
                  minimum: 0,
                  maximum: 1,
                  transition: !0,
                  expression: { interpolated: !0, parameters: ['zoom'] },
                  'property-type': 'data-constant',
                },
              },
              transition: {
                duration: {
                  type: 'number',
                  default: 300,
                  minimum: 0,
                  units: 'milliseconds',
                },
                delay: {
                  type: 'number',
                  default: 0,
                  minimum: 0,
                  units: 'milliseconds',
                },
              },
              'property-type': {
                'data-driven': { type: 'property-type' },
                'cross-faded': { type: 'property-type' },
                'cross-faded-data-driven': { type: 'property-type' },
                'color-ramp': { type: 'property-type' },
                'data-constant': { type: 'property-type' },
                constant: { type: 'property-type' },
              },
              promoteId: { '*': { type: 'string' } },
            },
            At = function (t, e, r, n) {
              ;(this.message = (t ? t + ': ' : '') + r),
                n && (this.identifier = n),
                null != e && e.__line__ && (this.line = e.__line__)
            }
          function kt(t) {
            var e = t.value
            return e
              ? [new At(t.key, e, 'constants have been deprecated as of v8')]
              : []
          }
          function Pt(t) {
            for (var e = [], r = arguments.length - 1; r-- > 0; )
              e[r] = arguments[r + 1]
            for (var n = 0, i = e; n < i.length; n += 1) {
              var o = i[n]
              for (var a in o) t[a] = o[a]
            }
            return t
          }
          function Mt(t) {
            return t instanceof Number ||
              t instanceof String ||
              t instanceof Boolean
              ? t.valueOf()
              : t
          }
          function Lt(t) {
            if (Array.isArray(t)) return t.map(Lt)
            if (
              t instanceof Object &&
              !(
                t instanceof Number ||
                t instanceof String ||
                t instanceof Boolean
              )
            ) {
              var e = {}
              for (var r in t) e[r] = Lt(t[r])
              return e
            }
            return Mt(t)
          }
          var zt = (function (t) {
              function e(e, r) {
                t.call(this, r), (this.message = r), (this.key = e)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                e
              )
            })(Error),
            Ot = function (t, e) {
              void 0 === e && (e = []), (this.parent = t), (this.bindings = {})
              for (var r = 0, n = e; r < n.length; r += 1) {
                var i = n[r]
                this.bindings[i[0]] = i[1]
              }
            }
          ;(Ot.prototype.concat = function (t) {
            return new Ot(this, t)
          }),
            (Ot.prototype.get = function (t) {
              if (this.bindings[t]) return this.bindings[t]
              if (this.parent) return this.parent.get(t)
              throw new Error(t + ' not found in scope.')
            }),
            (Ot.prototype.has = function (t) {
              return !!this.bindings[t] || (!!this.parent && this.parent.has(t))
            })
          var Dt = { kind: 'null' },
            Rt = { kind: 'number' },
            Ft = { kind: 'string' },
            Bt = { kind: 'boolean' },
            Nt = { kind: 'color' },
            Ut = { kind: 'object' },
            jt = { kind: 'value' },
            Vt = { kind: 'collator' },
            qt = { kind: 'formatted' },
            Gt = { kind: 'resolvedImage' }
          function $t(t, e) {
            return { kind: 'array', itemType: t, N: e }
          }
          function Zt(t) {
            if ('array' === t.kind) {
              var e = Zt(t.itemType)
              return 'number' == typeof t.N
                ? 'array<' + e + ', ' + t.N + '>'
                : 'value' === t.itemType.kind
                ? 'array'
                : 'array<' + e + '>'
            }
            return t.kind
          }
          var Xt = [Dt, Rt, Ft, Bt, Nt, qt, Ut, $t(jt), Gt]
          function Kt(t, e) {
            if ('error' === e.kind) return null
            if ('array' === t.kind) {
              if (
                'array' === e.kind &&
                ((0 === e.N && 'value' === e.itemType.kind) ||
                  !Kt(t.itemType, e.itemType)) &&
                ('number' != typeof t.N || t.N === e.N)
              )
                return null
            } else {
              if (t.kind === e.kind) return null
              if ('value' === t.kind)
                for (var r = 0, n = Xt; r < n.length; r += 1)
                  if (!Kt(n[r], e)) return null
            }
            return 'Expected ' + Zt(t) + ' but found ' + Zt(e) + ' instead.'
          }
          var Wt = e(function (t, e) {
              var r = {
                transparent: [0, 0, 0, 0],
                aliceblue: [240, 248, 255, 1],
                antiquewhite: [250, 235, 215, 1],
                aqua: [0, 255, 255, 1],
                aquamarine: [127, 255, 212, 1],
                azure: [240, 255, 255, 1],
                beige: [245, 245, 220, 1],
                bisque: [255, 228, 196, 1],
                black: [0, 0, 0, 1],
                blanchedalmond: [255, 235, 205, 1],
                blue: [0, 0, 255, 1],
                blueviolet: [138, 43, 226, 1],
                brown: [165, 42, 42, 1],
                burlywood: [222, 184, 135, 1],
                cadetblue: [95, 158, 160, 1],
                chartreuse: [127, 255, 0, 1],
                chocolate: [210, 105, 30, 1],
                coral: [255, 127, 80, 1],
                cornflowerblue: [100, 149, 237, 1],
                cornsilk: [255, 248, 220, 1],
                crimson: [220, 20, 60, 1],
                cyan: [0, 255, 255, 1],
                darkblue: [0, 0, 139, 1],
                darkcyan: [0, 139, 139, 1],
                darkgoldenrod: [184, 134, 11, 1],
                darkgray: [169, 169, 169, 1],
                darkgreen: [0, 100, 0, 1],
                darkgrey: [169, 169, 169, 1],
                darkkhaki: [189, 183, 107, 1],
                darkmagenta: [139, 0, 139, 1],
                darkolivegreen: [85, 107, 47, 1],
                darkorange: [255, 140, 0, 1],
                darkorchid: [153, 50, 204, 1],
                darkred: [139, 0, 0, 1],
                darksalmon: [233, 150, 122, 1],
                darkseagreen: [143, 188, 143, 1],
                darkslateblue: [72, 61, 139, 1],
                darkslategray: [47, 79, 79, 1],
                darkslategrey: [47, 79, 79, 1],
                darkturquoise: [0, 206, 209, 1],
                darkviolet: [148, 0, 211, 1],
                deeppink: [255, 20, 147, 1],
                deepskyblue: [0, 191, 255, 1],
                dimgray: [105, 105, 105, 1],
                dimgrey: [105, 105, 105, 1],
                dodgerblue: [30, 144, 255, 1],
                firebrick: [178, 34, 34, 1],
                floralwhite: [255, 250, 240, 1],
                forestgreen: [34, 139, 34, 1],
                fuchsia: [255, 0, 255, 1],
                gainsboro: [220, 220, 220, 1],
                ghostwhite: [248, 248, 255, 1],
                gold: [255, 215, 0, 1],
                goldenrod: [218, 165, 32, 1],
                gray: [128, 128, 128, 1],
                green: [0, 128, 0, 1],
                greenyellow: [173, 255, 47, 1],
                grey: [128, 128, 128, 1],
                honeydew: [240, 255, 240, 1],
                hotpink: [255, 105, 180, 1],
                indianred: [205, 92, 92, 1],
                indigo: [75, 0, 130, 1],
                ivory: [255, 255, 240, 1],
                khaki: [240, 230, 140, 1],
                lavender: [230, 230, 250, 1],
                lavenderblush: [255, 240, 245, 1],
                lawngreen: [124, 252, 0, 1],
                lemonchiffon: [255, 250, 205, 1],
                lightblue: [173, 216, 230, 1],
                lightcoral: [240, 128, 128, 1],
                lightcyan: [224, 255, 255, 1],
                lightgoldenrodyellow: [250, 250, 210, 1],
                lightgray: [211, 211, 211, 1],
                lightgreen: [144, 238, 144, 1],
                lightgrey: [211, 211, 211, 1],
                lightpink: [255, 182, 193, 1],
                lightsalmon: [255, 160, 122, 1],
                lightseagreen: [32, 178, 170, 1],
                lightskyblue: [135, 206, 250, 1],
                lightslategray: [119, 136, 153, 1],
                lightslategrey: [119, 136, 153, 1],
                lightsteelblue: [176, 196, 222, 1],
                lightyellow: [255, 255, 224, 1],
                lime: [0, 255, 0, 1],
                limegreen: [50, 205, 50, 1],
                linen: [250, 240, 230, 1],
                magenta: [255, 0, 255, 1],
                maroon: [128, 0, 0, 1],
                mediumaquamarine: [102, 205, 170, 1],
                mediumblue: [0, 0, 205, 1],
                mediumorchid: [186, 85, 211, 1],
                mediumpurple: [147, 112, 219, 1],
                mediumseagreen: [60, 179, 113, 1],
                mediumslateblue: [123, 104, 238, 1],
                mediumspringgreen: [0, 250, 154, 1],
                mediumturquoise: [72, 209, 204, 1],
                mediumvioletred: [199, 21, 133, 1],
                midnightblue: [25, 25, 112, 1],
                mintcream: [245, 255, 250, 1],
                mistyrose: [255, 228, 225, 1],
                moccasin: [255, 228, 181, 1],
                navajowhite: [255, 222, 173, 1],
                navy: [0, 0, 128, 1],
                oldlace: [253, 245, 230, 1],
                olive: [128, 128, 0, 1],
                olivedrab: [107, 142, 35, 1],
                orange: [255, 165, 0, 1],
                orangered: [255, 69, 0, 1],
                orchid: [218, 112, 214, 1],
                palegoldenrod: [238, 232, 170, 1],
                palegreen: [152, 251, 152, 1],
                paleturquoise: [175, 238, 238, 1],
                palevioletred: [219, 112, 147, 1],
                papayawhip: [255, 239, 213, 1],
                peachpuff: [255, 218, 185, 1],
                peru: [205, 133, 63, 1],
                pink: [255, 192, 203, 1],
                plum: [221, 160, 221, 1],
                powderblue: [176, 224, 230, 1],
                purple: [128, 0, 128, 1],
                rebeccapurple: [102, 51, 153, 1],
                red: [255, 0, 0, 1],
                rosybrown: [188, 143, 143, 1],
                royalblue: [65, 105, 225, 1],
                saddlebrown: [139, 69, 19, 1],
                salmon: [250, 128, 114, 1],
                sandybrown: [244, 164, 96, 1],
                seagreen: [46, 139, 87, 1],
                seashell: [255, 245, 238, 1],
                sienna: [160, 82, 45, 1],
                silver: [192, 192, 192, 1],
                skyblue: [135, 206, 235, 1],
                slateblue: [106, 90, 205, 1],
                slategray: [112, 128, 144, 1],
                slategrey: [112, 128, 144, 1],
                snow: [255, 250, 250, 1],
                springgreen: [0, 255, 127, 1],
                steelblue: [70, 130, 180, 1],
                tan: [210, 180, 140, 1],
                teal: [0, 128, 128, 1],
                thistle: [216, 191, 216, 1],
                tomato: [255, 99, 71, 1],
                turquoise: [64, 224, 208, 1],
                violet: [238, 130, 238, 1],
                wheat: [245, 222, 179, 1],
                white: [255, 255, 255, 1],
                whitesmoke: [245, 245, 245, 1],
                yellow: [255, 255, 0, 1],
                yellowgreen: [154, 205, 50, 1],
              }
              function n(t) {
                return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t
              }
              function i(t) {
                return n(
                  '%' === t[t.length - 1]
                    ? (parseFloat(t) / 100) * 255
                    : parseInt(t)
                )
              }
              function o(t) {
                return (e =
                  '%' === t[t.length - 1]
                    ? parseFloat(t) / 100
                    : parseFloat(t)) < 0
                  ? 0
                  : e > 1
                  ? 1
                  : e
                var e
              }
              function a(t, e, r) {
                return (
                  r < 0 ? (r += 1) : r > 1 && (r -= 1),
                  6 * r < 1
                    ? t + (e - t) * r * 6
                    : 2 * r < 1
                    ? e
                    : 3 * r < 2
                    ? t + (e - t) * (2 / 3 - r) * 6
                    : t
                )
              }
              try {
                e.parseCSSColor = function (t) {
                  var e,
                    s = t.replace(/ /g, '').toLowerCase()
                  if (s in r) return r[s].slice()
                  if ('#' === s[0])
                    return 4 === s.length
                      ? (e = parseInt(s.substr(1), 16)) >= 0 && e <= 4095
                        ? [
                            ((3840 & e) >> 4) | ((3840 & e) >> 8),
                            (240 & e) | ((240 & e) >> 4),
                            (15 & e) | ((15 & e) << 4),
                            1,
                          ]
                        : null
                      : 7 === s.length &&
                        (e = parseInt(s.substr(1), 16)) >= 0 &&
                        e <= 16777215
                      ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1]
                      : null
                  var l = s.indexOf('('),
                    u = s.indexOf(')')
                  if (-1 !== l && u + 1 === s.length) {
                    var c = s.substr(0, l),
                      p = s.substr(l + 1, u - (l + 1)).split(','),
                      h = 1
                    switch (c) {
                      case 'rgba':
                        if (4 !== p.length) return null
                        h = o(p.pop())
                      case 'rgb':
                        return 3 !== p.length
                          ? null
                          : [i(p[0]), i(p[1]), i(p[2]), h]
                      case 'hsla':
                        if (4 !== p.length) return null
                        h = o(p.pop())
                      case 'hsl':
                        if (3 !== p.length) return null
                        var f = (((parseFloat(p[0]) % 360) + 360) % 360) / 360,
                          d = o(p[1]),
                          m = o(p[2]),
                          y = m <= 0.5 ? m * (d + 1) : m + d - m * d,
                          v = 2 * m - y
                        return [
                          n(255 * a(v, y, f + 1 / 3)),
                          n(255 * a(v, y, f)),
                          n(255 * a(v, y, f - 1 / 3)),
                          h,
                        ]
                      default:
                        return null
                    }
                  }
                  return null
                }
              } catch (t) {}
            }).parseCSSColor,
            Ht = function (t, e, r, n) {
              void 0 === n && (n = 1),
                (this.r = t),
                (this.g = e),
                (this.b = r),
                (this.a = n)
            }
          ;(Ht.parse = function (t) {
            if (t) {
              if (t instanceof Ht) return t
              if ('string' == typeof t) {
                var e = Wt(t)
                if (e)
                  return new Ht(
                    (e[0] / 255) * e[3],
                    (e[1] / 255) * e[3],
                    (e[2] / 255) * e[3],
                    e[3]
                  )
              }
            }
          }),
            (Ht.prototype.toString = function () {
              var t = this.toArray(),
                e = t[1],
                r = t[2],
                n = t[3]
              return (
                'rgba(' +
                Math.round(t[0]) +
                ',' +
                Math.round(e) +
                ',' +
                Math.round(r) +
                ',' +
                n +
                ')'
              )
            }),
            (Ht.prototype.toArray = function () {
              var t = this.a
              return 0 === t
                ? [0, 0, 0, 0]
                : [
                    (255 * this.r) / t,
                    (255 * this.g) / t,
                    (255 * this.b) / t,
                    t,
                  ]
            }),
            (Ht.black = new Ht(0, 0, 0, 1)),
            (Ht.white = new Ht(1, 1, 1, 1)),
            (Ht.transparent = new Ht(0, 0, 0, 0)),
            (Ht.red = new Ht(1, 0, 0, 1))
          var Jt = function (t, e, r) {
            ;(this.sensitivity = t
              ? e
                ? 'variant'
                : 'case'
              : e
              ? 'accent'
              : 'base'),
              (this.locale = r),
              (this.collator = new Intl.Collator(
                this.locale ? this.locale : [],
                { sensitivity: this.sensitivity, usage: 'search' }
              ))
          }
          ;(Jt.prototype.compare = function (t, e) {
            return this.collator.compare(t, e)
          }),
            (Jt.prototype.resolvedLocale = function () {
              return new Intl.Collator(
                this.locale ? this.locale : []
              ).resolvedOptions().locale
            })
          var Yt = function (t, e, r, n, i) {
              ;(this.text = t),
                (this.image = e),
                (this.scale = r),
                (this.fontStack = n),
                (this.textColor = i)
            },
            Qt = function (t) {
              this.sections = t
            }
          ;(Qt.fromString = function (t) {
            return new Qt([new Yt(t, null, null, null, null)])
          }),
            (Qt.prototype.isEmpty = function () {
              return (
                0 === this.sections.length ||
                !this.sections.some(function (t) {
                  return (
                    0 !== t.text.length ||
                    (t.image && 0 !== t.image.name.length)
                  )
                })
              )
            }),
            (Qt.factory = function (t) {
              return t instanceof Qt ? t : Qt.fromString(t)
            }),
            (Qt.prototype.toString = function () {
              return 0 === this.sections.length
                ? ''
                : this.sections
                    .map(function (t) {
                      return t.text
                    })
                    .join('')
            }),
            (Qt.prototype.serialize = function () {
              for (
                var t = ['format'], e = 0, r = this.sections;
                e < r.length;
                e += 1
              ) {
                var n = r[e]
                if (n.image) t.push(['image', n.image.name])
                else {
                  t.push(n.text)
                  var i = {}
                  n.fontStack &&
                    (i['text-font'] = ['literal', n.fontStack.split(',')]),
                    n.scale && (i['font-scale'] = n.scale),
                    n.textColor &&
                      (i['text-color'] = ['rgba'].concat(
                        n.textColor.toArray()
                      )),
                    t.push(i)
                }
              }
              return t
            })
          var te = function (t) {
            ;(this.name = t.name), (this.available = t.available)
          }
          function ee(t, e, r, n) {
            return 'number' == typeof t &&
              t >= 0 &&
              t <= 255 &&
              'number' == typeof e &&
              e >= 0 &&
              e <= 255 &&
              'number' == typeof r &&
              r >= 0 &&
              r <= 255
              ? void 0 === n || ('number' == typeof n && n >= 0 && n <= 1)
                ? null
                : 'Invalid rgba value [' +
                  [t, e, r, n].join(', ') +
                  "]: 'a' must be between 0 and 1."
              : 'Invalid rgba value [' +
                  ('number' == typeof n ? [t, e, r, n] : [t, e, r]).join(', ') +
                  "]: 'r', 'g', and 'b' must be between 0 and 255."
          }
          function re(t) {
            if (null === t) return !0
            if ('string' == typeof t) return !0
            if ('boolean' == typeof t) return !0
            if ('number' == typeof t) return !0
            if (t instanceof Ht) return !0
            if (t instanceof Jt) return !0
            if (t instanceof Qt) return !0
            if (t instanceof te) return !0
            if (Array.isArray(t)) {
              for (var e = 0, r = t; e < r.length; e += 1)
                if (!re(r[e])) return !1
              return !0
            }
            if ('object' == typeof t) {
              for (var n in t) if (!re(t[n])) return !1
              return !0
            }
            return !1
          }
          function ne(t) {
            if (null === t) return Dt
            if ('string' == typeof t) return Ft
            if ('boolean' == typeof t) return Bt
            if ('number' == typeof t) return Rt
            if (t instanceof Ht) return Nt
            if (t instanceof Jt) return Vt
            if (t instanceof Qt) return qt
            if (t instanceof te) return Gt
            if (Array.isArray(t)) {
              for (var e, r = t.length, n = 0, i = t; n < i.length; n += 1) {
                var o = ne(i[n])
                if (e) {
                  if (e === o) continue
                  e = jt
                  break
                }
                e = o
              }
              return $t(e || jt, r)
            }
            return Ut
          }
          function ie(t) {
            var e = typeof t
            return null === t
              ? ''
              : 'string' === e || 'number' === e || 'boolean' === e
              ? String(t)
              : t instanceof Ht || t instanceof Qt || t instanceof te
              ? t.toString()
              : JSON.stringify(t)
          }
          ;(te.prototype.toString = function () {
            return this.name
          }),
            (te.fromString = function (t) {
              return t ? new te({ name: t, available: !1 }) : null
            }),
            (te.prototype.serialize = function () {
              return ['image', this.name]
            })
          var oe = function (t, e) {
            ;(this.type = t), (this.value = e)
          }
          ;(oe.parse = function (t, e) {
            if (2 !== t.length)
              return e.error(
                "'literal' expression requires exactly one argument, but found " +
                  (t.length - 1) +
                  ' instead.'
              )
            if (!re(t[1])) return e.error('invalid value')
            var r = t[1],
              n = ne(r),
              i = e.expectedType
            return (
              'array' !== n.kind ||
                0 !== n.N ||
                !i ||
                'array' !== i.kind ||
                ('number' == typeof i.N && 0 !== i.N) ||
                (n = i),
              new oe(n, r)
            )
          }),
            (oe.prototype.evaluate = function () {
              return this.value
            }),
            (oe.prototype.eachChild = function () {}),
            (oe.prototype.outputDefined = function () {
              return !0
            }),
            (oe.prototype.serialize = function () {
              return 'array' === this.type.kind || 'object' === this.type.kind
                ? ['literal', this.value]
                : this.value instanceof Ht
                ? ['rgba'].concat(this.value.toArray())
                : this.value instanceof Qt
                ? this.value.serialize()
                : this.value
            })
          var ae = function (t) {
            ;(this.name = 'ExpressionEvaluationError'), (this.message = t)
          }
          ae.prototype.toJSON = function () {
            return this.message
          }
          var se = { string: Ft, number: Rt, boolean: Bt, object: Ut },
            le = function (t, e) {
              ;(this.type = t), (this.args = e)
            }
          ;(le.parse = function (t, e) {
            if (t.length < 2) return e.error('Expected at least one argument.')
            var r,
              n = 1,
              i = t[0]
            if ('array' === i) {
              var o, a
              if (t.length > 2) {
                var s = t[1]
                if ('string' != typeof s || !(s in se) || 'object' === s)
                  return e.error(
                    'The item type argument of "array" must be one of string, number, boolean',
                    1
                  )
                ;(o = se[s]), n++
              } else o = jt
              if (t.length > 3) {
                if (
                  null !== t[2] &&
                  ('number' != typeof t[2] ||
                    t[2] < 0 ||
                    t[2] !== Math.floor(t[2]))
                )
                  return e.error(
                    'The length argument to "array" must be a positive integer literal',
                    2
                  )
                ;(a = t[2]), n++
              }
              r = $t(o, a)
            } else r = se[i]
            for (var l = []; n < t.length; n++) {
              var u = e.parse(t[n], n, jt)
              if (!u) return null
              l.push(u)
            }
            return new le(r, l)
          }),
            (le.prototype.evaluate = function (t) {
              for (var e = 0; e < this.args.length; e++) {
                var r = this.args[e].evaluate(t)
                if (!Kt(this.type, ne(r))) return r
                if (e === this.args.length - 1)
                  throw new ae(
                    'Expected value to be of type ' +
                      Zt(this.type) +
                      ', but found ' +
                      Zt(ne(r)) +
                      ' instead.'
                  )
              }
              return null
            }),
            (le.prototype.eachChild = function (t) {
              this.args.forEach(t)
            }),
            (le.prototype.outputDefined = function () {
              return this.args.every(function (t) {
                return t.outputDefined()
              })
            }),
            (le.prototype.serialize = function () {
              var t = this.type,
                e = [t.kind]
              if ('array' === t.kind) {
                var r = t.itemType
                if (
                  'string' === r.kind ||
                  'number' === r.kind ||
                  'boolean' === r.kind
                ) {
                  e.push(r.kind)
                  var n = t.N
                  ;('number' == typeof n || this.args.length > 1) && e.push(n)
                }
              }
              return e.concat(
                this.args.map(function (t) {
                  return t.serialize()
                })
              )
            })
          var ue = function (t) {
            ;(this.type = qt), (this.sections = t)
          }
          ;(ue.parse = function (t, e) {
            if (t.length < 2) return e.error('Expected at least one argument.')
            var r = t[1]
            if (!Array.isArray(r) && 'object' == typeof r)
              return e.error('First argument must be an image or text section.')
            for (var n = [], i = !1, o = 1; o <= t.length - 1; ++o) {
              var a = t[o]
              if (i && 'object' == typeof a && !Array.isArray(a)) {
                i = !1
                var s = null
                if (a['font-scale'] && !(s = e.parse(a['font-scale'], 1, Rt)))
                  return null
                var l = null
                if (a['text-font'] && !(l = e.parse(a['text-font'], 1, $t(Ft))))
                  return null
                var u = null
                if (a['text-color'] && !(u = e.parse(a['text-color'], 1, Nt)))
                  return null
                var c = n[n.length - 1]
                ;(c.scale = s), (c.font = l), (c.textColor = u)
              } else {
                var p = e.parse(t[o], 1, jt)
                if (!p) return null
                var h = p.type.kind
                if (
                  'string' !== h &&
                  'value' !== h &&
                  'null' !== h &&
                  'resolvedImage' !== h
                )
                  return e.error(
                    "Formatted text type must be 'string', 'value', 'image' or 'null'."
                  )
                ;(i = !0),
                  n.push({
                    content: p,
                    scale: null,
                    font: null,
                    textColor: null,
                  })
              }
            }
            return new ue(n)
          }),
            (ue.prototype.evaluate = function (t) {
              return new Qt(
                this.sections.map(function (e) {
                  var r = e.content.evaluate(t)
                  return ne(r) === Gt
                    ? new Yt('', r, null, null, null)
                    : new Yt(
                        ie(r),
                        null,
                        e.scale ? e.scale.evaluate(t) : null,
                        e.font ? e.font.evaluate(t).join(',') : null,
                        e.textColor ? e.textColor.evaluate(t) : null
                      )
                })
              )
            }),
            (ue.prototype.eachChild = function (t) {
              for (var e = 0, r = this.sections; e < r.length; e += 1) {
                var n = r[e]
                t(n.content),
                  n.scale && t(n.scale),
                  n.font && t(n.font),
                  n.textColor && t(n.textColor)
              }
            }),
            (ue.prototype.outputDefined = function () {
              return !1
            }),
            (ue.prototype.serialize = function () {
              for (
                var t = ['format'], e = 0, r = this.sections;
                e < r.length;
                e += 1
              ) {
                var n = r[e]
                t.push(n.content.serialize())
                var i = {}
                n.scale && (i['font-scale'] = n.scale.serialize()),
                  n.font && (i['text-font'] = n.font.serialize()),
                  n.textColor && (i['text-color'] = n.textColor.serialize()),
                  t.push(i)
              }
              return t
            })
          var ce = function (t) {
            ;(this.type = Gt), (this.input = t)
          }
          ;(ce.parse = function (t, e) {
            if (2 !== t.length) return e.error('Expected two arguments.')
            var r = e.parse(t[1], 1, Ft)
            return r ? new ce(r) : e.error('No image name provided.')
          }),
            (ce.prototype.evaluate = function (t) {
              var e = this.input.evaluate(t),
                r = te.fromString(e)
              return (
                r &&
                  t.availableImages &&
                  (r.available = t.availableImages.indexOf(e) > -1),
                r
              )
            }),
            (ce.prototype.eachChild = function (t) {
              t(this.input)
            }),
            (ce.prototype.outputDefined = function () {
              return !1
            }),
            (ce.prototype.serialize = function () {
              return ['image', this.input.serialize()]
            })
          var pe = {
              'to-boolean': Bt,
              'to-color': Nt,
              'to-number': Rt,
              'to-string': Ft,
            },
            he = function (t, e) {
              ;(this.type = t), (this.args = e)
            }
          ;(he.parse = function (t, e) {
            if (t.length < 2) return e.error('Expected at least one argument.')
            var r = t[0]
            if (('to-boolean' === r || 'to-string' === r) && 2 !== t.length)
              return e.error('Expected one argument.')
            for (var n = pe[r], i = [], o = 1; o < t.length; o++) {
              var a = e.parse(t[o], o, jt)
              if (!a) return null
              i.push(a)
            }
            return new he(n, i)
          }),
            (he.prototype.evaluate = function (t) {
              if ('boolean' === this.type.kind)
                return Boolean(this.args[0].evaluate(t))
              if ('color' === this.type.kind) {
                for (var e, r, n = 0, i = this.args; n < i.length; n += 1) {
                  if (((r = null), (e = i[n].evaluate(t)) instanceof Ht))
                    return e
                  if ('string' == typeof e) {
                    var o = t.parseColor(e)
                    if (o) return o
                  } else if (
                    Array.isArray(e) &&
                    !(r =
                      e.length < 3 || e.length > 4
                        ? 'Invalid rbga value ' +
                          JSON.stringify(e) +
                          ': expected an array containing either three or four numeric values.'
                        : ee(e[0], e[1], e[2], e[3]))
                  )
                    return new Ht(e[0] / 255, e[1] / 255, e[2] / 255, e[3])
                }
                throw new ae(
                  r ||
                    "Could not parse color from value '" +
                      ('string' == typeof e ? e : String(JSON.stringify(e))) +
                      "'"
                )
              }
              if ('number' === this.type.kind) {
                for (var a = null, s = 0, l = this.args; s < l.length; s += 1) {
                  if (null === (a = l[s].evaluate(t))) return 0
                  var u = Number(a)
                  if (!isNaN(u)) return u
                }
                throw new ae(
                  'Could not convert ' + JSON.stringify(a) + ' to number.'
                )
              }
              return 'formatted' === this.type.kind
                ? Qt.fromString(ie(this.args[0].evaluate(t)))
                : 'resolvedImage' === this.type.kind
                ? te.fromString(ie(this.args[0].evaluate(t)))
                : ie(this.args[0].evaluate(t))
            }),
            (he.prototype.eachChild = function (t) {
              this.args.forEach(t)
            }),
            (he.prototype.outputDefined = function () {
              return this.args.every(function (t) {
                return t.outputDefined()
              })
            }),
            (he.prototype.serialize = function () {
              if ('formatted' === this.type.kind)
                return new ue([
                  {
                    content: this.args[0],
                    scale: null,
                    font: null,
                    textColor: null,
                  },
                ]).serialize()
              if ('resolvedImage' === this.type.kind)
                return new ce(this.args[0]).serialize()
              var t = ['to-' + this.type.kind]
              return (
                this.eachChild(function (e) {
                  t.push(e.serialize())
                }),
                t
              )
            })
          var fe = ['Unknown', 'Point', 'LineString', 'Polygon'],
            de = function () {
              ;(this.globals = null),
                (this.feature = null),
                (this.featureState = null),
                (this.formattedSection = null),
                (this._parseColorCache = {}),
                (this.availableImages = null),
                (this.canonical = null)
            }
          ;(de.prototype.id = function () {
            return this.feature && 'id' in this.feature ? this.feature.id : null
          }),
            (de.prototype.geometryType = function () {
              return this.feature
                ? 'number' == typeof this.feature.type
                  ? fe[this.feature.type]
                  : this.feature.type
                : null
            }),
            (de.prototype.geometry = function () {
              return this.feature && 'geometry' in this.feature
                ? this.feature.geometry
                : null
            }),
            (de.prototype.canonicalID = function () {
              return this.canonical
            }),
            (de.prototype.properties = function () {
              return (this.feature && this.feature.properties) || {}
            }),
            (de.prototype.parseColor = function (t) {
              var e = this._parseColorCache[t]
              return e || (e = this._parseColorCache[t] = Ht.parse(t)), e
            })
          var me = function (t, e, r, n) {
            ;(this.name = t),
              (this.type = e),
              (this._evaluate = r),
              (this.args = n)
          }
          ;(me.prototype.evaluate = function (t) {
            return this._evaluate(t, this.args)
          }),
            (me.prototype.eachChild = function (t) {
              this.args.forEach(t)
            }),
            (me.prototype.outputDefined = function () {
              return !1
            }),
            (me.prototype.serialize = function () {
              return [this.name].concat(
                this.args.map(function (t) {
                  return t.serialize()
                })
              )
            }),
            (me.parse = function (t, e) {
              var r,
                n = t[0],
                i = me.definitions[n]
              if (!i)
                return e.error(
                  'Unknown expression "' +
                    n +
                    '". If you wanted a literal array, use ["literal", [...]].',
                  0
                )
              for (
                var o = Array.isArray(i) ? i[0] : i.type,
                  a = Array.isArray(i) ? [[i[1], i[2]]] : i.overloads,
                  s = a.filter(function (e) {
                    var r = e[0]
                    return !Array.isArray(r) || r.length === t.length - 1
                  }),
                  l = null,
                  u = 0,
                  c = s;
                u < c.length;
                u += 1
              ) {
                var p = c[u],
                  h = p[0],
                  f = p[1]
                l = new Ge(e.registry, e.path, null, e.scope)
                for (var d = [], m = !1, y = 1; y < t.length; y++) {
                  var v = t[y],
                    g = Array.isArray(h) ? h[y - 1] : h.type,
                    _ = l.parse(v, 1 + d.length, g)
                  if (!_) {
                    m = !0
                    break
                  }
                  d.push(_)
                }
                if (!m)
                  if (Array.isArray(h) && h.length !== d.length)
                    l.error(
                      'Expected ' +
                        h.length +
                        ' arguments, but found ' +
                        d.length +
                        ' instead.'
                    )
                  else {
                    for (var x = 0; x < d.length; x++) {
                      var b = Array.isArray(h) ? h[x] : h.type,
                        w = d[x]
                      l.concat(x + 1).checkSubtype(b, w.type)
                    }
                    if (0 === l.errors.length) return new me(n, o, f, d)
                  }
              }
              if (1 === s.length) (r = e.errors).push.apply(r, l.errors)
              else {
                for (
                  var E = (s.length ? s : a)
                      .map(function (t) {
                        var e
                        return (
                          (e = t[0]),
                          Array.isArray(e)
                            ? '(' + e.map(Zt).join(', ') + ')'
                            : '(' + Zt(e.type) + '...)'
                        )
                      })
                      .join(' | '),
                    S = [],
                    T = 1;
                  T < t.length;
                  T++
                ) {
                  var I = e.parse(t[T], 1 + S.length)
                  if (!I) return null
                  S.push(Zt(I.type))
                }
                e.error(
                  'Expected arguments of type ' +
                    E +
                    ', but found (' +
                    S.join(', ') +
                    ') instead.'
                )
              }
              return null
            }),
            (me.register = function (t, e) {
              for (var r in ((me.definitions = e), e)) t[r] = me
            })
          var ye = function (t, e, r) {
            ;(this.type = Vt),
              (this.locale = r),
              (this.caseSensitive = t),
              (this.diacriticSensitive = e)
          }
          ;(ye.parse = function (t, e) {
            if (2 !== t.length) return e.error('Expected one argument.')
            var r = t[1]
            if ('object' != typeof r || Array.isArray(r))
              return e.error('Collator options argument must be an object.')
            var n = e.parse(
              void 0 !== r['case-sensitive'] && r['case-sensitive'],
              1,
              Bt
            )
            if (!n) return null
            var i = e.parse(
              void 0 !== r['diacritic-sensitive'] && r['diacritic-sensitive'],
              1,
              Bt
            )
            if (!i) return null
            var o = null
            return r.locale && !(o = e.parse(r.locale, 1, Ft))
              ? null
              : new ye(n, i, o)
          }),
            (ye.prototype.evaluate = function (t) {
              return new Jt(
                this.caseSensitive.evaluate(t),
                this.diacriticSensitive.evaluate(t),
                this.locale ? this.locale.evaluate(t) : null
              )
            }),
            (ye.prototype.eachChild = function (t) {
              t(this.caseSensitive),
                t(this.diacriticSensitive),
                this.locale && t(this.locale)
            }),
            (ye.prototype.outputDefined = function () {
              return !1
            }),
            (ye.prototype.serialize = function () {
              var t = {}
              return (
                (t['case-sensitive'] = this.caseSensitive.serialize()),
                (t[
                  'diacritic-sensitive'
                ] = this.diacriticSensitive.serialize()),
                this.locale && (t.locale = this.locale.serialize()),
                ['collator', t]
              )
            })
          var ve = function (t, e) {
            t &&
              (e
                ? this.setSouthWest(t).setNorthEast(e)
                : 4 === t.length
                ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]])
                : this.setSouthWest(t[0]).setNorthEast(t[1]))
          }
          ;(ve.prototype.setNorthEast = function (t) {
            return (
              (this._ne =
                t instanceof ge ? new ge(t.lng, t.lat) : ge.convert(t)),
              this
            )
          }),
            (ve.prototype.setSouthWest = function (t) {
              return (
                (this._sw =
                  t instanceof ge ? new ge(t.lng, t.lat) : ge.convert(t)),
                this
              )
            }),
            (ve.prototype.extend = function (t) {
              var e,
                r,
                n = this._sw,
                i = this._ne
              if (t instanceof ge) (e = t), (r = t)
              else {
                if (!(t instanceof ve))
                  return Array.isArray(t)
                    ? 4 === t.length || t.every(Array.isArray)
                      ? this.extend(ve.convert(t))
                      : this.extend(ge.convert(t))
                    : this
                if (((r = t._ne), !(e = t._sw) || !r)) return this
              }
              return (
                n || i
                  ? ((n.lng = Math.min(e.lng, n.lng)),
                    (n.lat = Math.min(e.lat, n.lat)),
                    (i.lng = Math.max(r.lng, i.lng)),
                    (i.lat = Math.max(r.lat, i.lat)))
                  : ((this._sw = new ge(e.lng, e.lat)),
                    (this._ne = new ge(r.lng, r.lat))),
                this
              )
            }),
            (ve.prototype.getCenter = function () {
              return new ge(
                (this._sw.lng + this._ne.lng) / 2,
                (this._sw.lat + this._ne.lat) / 2
              )
            }),
            (ve.prototype.getSouthWest = function () {
              return this._sw
            }),
            (ve.prototype.getNorthEast = function () {
              return this._ne
            }),
            (ve.prototype.getNorthWest = function () {
              return new ge(this.getWest(), this.getNorth())
            }),
            (ve.prototype.getSouthEast = function () {
              return new ge(this.getEast(), this.getSouth())
            }),
            (ve.prototype.getWest = function () {
              return this._sw.lng
            }),
            (ve.prototype.getSouth = function () {
              return this._sw.lat
            }),
            (ve.prototype.getEast = function () {
              return this._ne.lng
            }),
            (ve.prototype.getNorth = function () {
              return this._ne.lat
            }),
            (ve.prototype.toArray = function () {
              return [this._sw.toArray(), this._ne.toArray()]
            }),
            (ve.prototype.toString = function () {
              return (
                'LngLatBounds(' +
                this._sw.toString() +
                ', ' +
                this._ne.toString() +
                ')'
              )
            }),
            (ve.prototype.isEmpty = function () {
              return !(this._sw && this._ne)
            }),
            (ve.prototype.contains = function (t) {
              var e = ge.convert(t),
                r = e.lng,
                n = e.lat,
                i = this._sw.lng <= r && r <= this._ne.lng
              return (
                this._sw.lng > this._ne.lng &&
                  (i = this._sw.lng >= r && r >= this._ne.lng),
                this._sw.lat <= n && n <= this._ne.lat && i
              )
            }),
            (ve.convert = function (t) {
              return !t || t instanceof ve ? t : new ve(t)
            })
          var ge = function (t, e) {
            if (isNaN(t) || isNaN(e))
              throw new Error('Invalid LngLat object: (' + t + ', ' + e + ')')
            if (
              ((this.lng = +t),
              (this.lat = +e),
              this.lat > 90 || this.lat < -90)
            )
              throw new Error(
                'Invalid LngLat latitude value: must be between -90 and 90'
              )
          }
          ;(ge.prototype.wrap = function () {
            return new ge(u(this.lng, -180, 180), this.lat)
          }),
            (ge.prototype.toArray = function () {
              return [this.lng, this.lat]
            }),
            (ge.prototype.toString = function () {
              return 'LngLat(' + this.lng + ', ' + this.lat + ')'
            }),
            (ge.prototype.distanceTo = function (t) {
              var e = Math.PI / 180,
                r = this.lat * e,
                n = t.lat * e,
                i =
                  Math.sin(r) * Math.sin(n) +
                  Math.cos(r) * Math.cos(n) * Math.cos((t.lng - this.lng) * e)
              return 6371008.8 * Math.acos(Math.min(i, 1))
            }),
            (ge.prototype.toBounds = function (t) {
              void 0 === t && (t = 0)
              var e = (360 * t) / 40075017,
                r = e / Math.cos((Math.PI / 180) * this.lat)
              return new ve(
                new ge(this.lng - r, this.lat - e),
                new ge(this.lng + r, this.lat + e)
              )
            }),
            (ge.convert = function (t) {
              if (t instanceof ge) return t
              if (Array.isArray(t) && (2 === t.length || 3 === t.length))
                return new ge(Number(t[0]), Number(t[1]))
              if (!Array.isArray(t) && 'object' == typeof t && null !== t)
                return new ge(Number('lng' in t ? t.lng : t.lon), Number(t.lat))
              throw new Error(
                '`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]'
              )
            })
          var _e = 2 * Math.PI * 6371008.8
          function xe(t) {
            return _e * Math.cos((t * Math.PI) / 180)
          }
          function be(t) {
            return (180 + t) / 360
          }
          function we(t) {
            return (
              (180 -
                (180 / Math.PI) *
                  Math.log(Math.tan(Math.PI / 4 + (t * Math.PI) / 360))) /
              360
            )
          }
          function Ee(t, e) {
            return t / xe(e)
          }
          function Se(t) {
            return (
              (360 / Math.PI) *
                Math.atan(Math.exp(((180 - 360 * t) * Math.PI) / 180)) -
              90
            )
          }
          var Te = function (t, e, r) {
            void 0 === r && (r = 0), (this.x = +t), (this.y = +e), (this.z = +r)
          }
          ;(Te.fromLngLat = function (t, e) {
            void 0 === e && (e = 0)
            var r = ge.convert(t)
            return new Te(be(r.lng), we(r.lat), Ee(e, r.lat))
          }),
            (Te.prototype.toLngLat = function () {
              return new ge(360 * this.x - 180, Se(this.y))
            }),
            (Te.prototype.toAltitude = function () {
              return this.z * xe(Se(this.y))
            }),
            (Te.prototype.meterInMercatorCoordinateUnits = function () {
              return (
                (1 / _e) * ((t = Se(this.y)), 1 / Math.cos((t * Math.PI) / 180))
              )
              var t
            })
          var Ie = 8192
          function Ce(t, e) {
            ;(t[0] = Math.min(t[0], e[0])),
              (t[1] = Math.min(t[1], e[1])),
              (t[2] = Math.max(t[2], e[0])),
              (t[3] = Math.max(t[3], e[1]))
          }
          function Ae(t, e) {
            return !(
              t[0] <= e[0] ||
              t[2] >= e[2] ||
              t[1] <= e[1] ||
              t[3] >= e[3]
            )
          }
          function ke(t, e) {
            var r = Te.fromLngLat({ lng: t[0], lat: t[1] }, 0),
              n = Math.pow(2, e.z)
            return [Math.round(r.x * n * Ie), Math.round(r.y * n * Ie)]
          }
          function Pe(t, e, r) {
            return (
              e[1] > t[1] != r[1] > t[1] &&
              t[0] < ((r[0] - e[0]) * (t[1] - e[1])) / (r[1] - e[1]) + e[0]
            )
          }
          function Me(t, e) {
            for (
              var r, n, i, o, a, s, l, u = !1, c = 0, p = e.length;
              c < p;
              c++
            )
              for (var h = e[c], f = 0, d = h.length; f < d - 1; f++) {
                if (
                  (o = (r = t)[0] - (n = h[f])[0]) *
                    (l = r[1] - (i = h[f + 1])[1]) -
                    (s = r[0] - i[0]) * (a = r[1] - n[1]) ==
                    0 &&
                  o * s <= 0 &&
                  a * l <= 0
                )
                  return !1
                Pe(t, h[f], h[f + 1]) && (u = !u)
              }
            return u
          }
          function Le(t, e) {
            for (var r = 0; r < e.length; r++) if (Me(t, e[r])) return !0
            return !1
          }
          function ze(t, e, r, n) {
            var i = n[0] - r[0],
              o = n[1] - r[1]
            return (
              ((t[0] - r[0]) * o - i * (t[1] - r[1])) *
                ((e[0] - r[0]) * o - i * (e[1] - r[1])) <
              0
            )
          }
          function Oe(t, e, r) {
            for (var n = 0, i = r; n < i.length; n += 1)
              for (var o = i[n], a = 0; a < o.length - 1; ++a)
                if (
                  0 !=
                    (p = [(c = o[a + 1])[0] - (u = o[a])[0], c[1] - u[1]])[0] *
                      (h = [(l = e)[0] - (s = t)[0], l[1] - s[1]])[1] -
                      p[1] * h[0] &&
                  ze(s, l, u, c) &&
                  ze(u, c, s, l)
                )
                  return !0
            var s, l, u, c, p, h
            return !1
          }
          function De(t, e) {
            for (var r = 0; r < t.length; ++r) if (!Me(t[r], e)) return !1
            for (var n = 0; n < t.length - 1; ++n)
              if (Oe(t[n], t[n + 1], e)) return !1
            return !0
          }
          function Re(t, e) {
            for (var r = 0; r < e.length; r++) if (De(t, e[r])) return !0
            return !1
          }
          function Fe(t, e, r) {
            for (var n = [], i = 0; i < t.length; i++) {
              for (var o = [], a = 0; a < t[i].length; a++) {
                var s = ke(t[i][a], r)
                Ce(e, s), o.push(s)
              }
              n.push(o)
            }
            return n
          }
          function Be(t, e, r) {
            for (var n = [], i = 0; i < t.length; i++) {
              var o = Fe(t[i], e, r)
              n.push(o)
            }
            return n
          }
          var Ne = function (t, e) {
            ;(this.type = Bt), (this.geojson = t), (this.geometries = e)
          }
          function Ue(t) {
            if (t instanceof me) {
              if ('get' === t.name && 1 === t.args.length) return !1
              if ('feature-state' === t.name) return !1
              if ('has' === t.name && 1 === t.args.length) return !1
              if (
                'properties' === t.name ||
                'geometry-type' === t.name ||
                'id' === t.name
              )
                return !1
              if (/^filter-/.test(t.name)) return !1
            }
            if (t instanceof Ne) return !1
            var e = !0
            return (
              t.eachChild(function (t) {
                e && !Ue(t) && (e = !1)
              }),
              e
            )
          }
          function je(t) {
            if (t instanceof me && 'feature-state' === t.name) return !1
            var e = !0
            return (
              t.eachChild(function (t) {
                e && !je(t) && (e = !1)
              }),
              e
            )
          }
          function Ve(t, e) {
            if (t instanceof me && e.indexOf(t.name) >= 0) return !1
            var r = !0
            return (
              t.eachChild(function (t) {
                r && !Ve(t, e) && (r = !1)
              }),
              r
            )
          }
          ;(Ne.parse = function (t, e) {
            if (2 !== t.length)
              return e.error(
                "'within' expression requires exactly one argument, but found " +
                  (t.length - 1) +
                  ' instead.'
              )
            if (re(t[1])) {
              var r = t[1]
              if ('FeatureCollection' === r.type)
                for (var n = 0; n < r.features.length; ++n) {
                  var i = r.features[n].geometry.type
                  if ('Polygon' === i || 'MultiPolygon' === i)
                    return new Ne(r, r.features[n].geometry)
                }
              else if ('Feature' === r.type) {
                var o = r.geometry.type
                if ('Polygon' === o || 'MultiPolygon' === o)
                  return new Ne(r, r.geometry)
              } else if ('Polygon' === r.type || 'MultiPolygon' === r.type)
                return new Ne(r, r)
            }
            return e.error(
              "'within' expression requires valid geojson object that contains polygon geometry type."
            )
          }),
            (Ne.prototype.evaluate = function (t) {
              if (null != t.geometry() && null != t.canonicalID()) {
                if ('Point' === t.geometryType())
                  return (function (t, e) {
                    for (
                      var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                        n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                        i = t.canonicalID(),
                        o = [i.x * Ie, i.y * Ie],
                        a = [],
                        s = 0,
                        l = t.geometry();
                      s < l.length;
                      s += 1
                    )
                      for (var u = 0, c = l[s]; u < c.length; u += 1) {
                        var p = c[u],
                          h = [p.x + o[0], p.y + o[1]]
                        Ce(r, h), a.push(h)
                      }
                    if ('Polygon' === e.type) {
                      var f = Fe(e.coordinates, n, i)
                      if (!Ae(r, n)) return !1
                      for (var d = 0, m = a; d < m.length; d += 1)
                        if (!Me(m[d], f)) return !1
                    }
                    if ('MultiPolygon' === e.type) {
                      var y = Be(e.coordinates, n, i)
                      if (!Ae(r, n)) return !1
                      for (var v = 0, g = a; v < g.length; v += 1)
                        if (!Le(g[v], y)) return !1
                    }
                    return !0
                  })(t, this.geometries)
                if ('LineString' === t.geometryType())
                  return (function (t, e) {
                    for (
                      var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                        n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                        i = t.canonicalID(),
                        o = [i.x * Ie, i.y * Ie],
                        a = [],
                        s = 0,
                        l = t.geometry();
                      s < l.length;
                      s += 1
                    ) {
                      for (var u = [], c = 0, p = l[s]; c < p.length; c += 1) {
                        var h = p[c],
                          f = [h.x + o[0], h.y + o[1]]
                        Ce(r, f), u.push(f)
                      }
                      a.push(u)
                    }
                    if ('Polygon' === e.type) {
                      var d = Fe(e.coordinates, n, i)
                      if (!Ae(r, n)) return !1
                      for (var m = 0, y = a; m < y.length; m += 1)
                        if (!De(y[m], d)) return !1
                    }
                    if ('MultiPolygon' === e.type) {
                      var v = Be(e.coordinates, n, i)
                      if (!Ae(r, n)) return !1
                      for (var g = 0, _ = a; g < _.length; g += 1)
                        if (!Re(_[g], v)) return !1
                    }
                    return !0
                  })(t, this.geometries)
              }
              return !1
            }),
            (Ne.prototype.eachChild = function () {}),
            (Ne.prototype.outputDefined = function () {
              return !0
            }),
            (Ne.prototype.serialize = function () {
              return ['within', this.geojson]
            })
          var qe = function (t, e) {
            ;(this.type = e.type), (this.name = t), (this.boundExpression = e)
          }
          ;(qe.parse = function (t, e) {
            if (2 !== t.length || 'string' != typeof t[1])
              return e.error(
                "'var' expression requires exactly one string literal argument."
              )
            var r = t[1]
            return e.scope.has(r)
              ? new qe(r, e.scope.get(r))
              : e.error(
                  'Unknown variable "' +
                    r +
                    '". Make sure "' +
                    r +
                    '" has been bound in an enclosing "let" expression before using it.',
                  1
                )
          }),
            (qe.prototype.evaluate = function (t) {
              return this.boundExpression.evaluate(t)
            }),
            (qe.prototype.eachChild = function () {}),
            (qe.prototype.outputDefined = function () {
              return !1
            }),
            (qe.prototype.serialize = function () {
              return ['var', this.name]
            })
          var Ge = function (t, e, r, n, i) {
            void 0 === e && (e = []),
              void 0 === n && (n = new Ot()),
              void 0 === i && (i = []),
              (this.registry = t),
              (this.path = e),
              (this.key = e
                .map(function (t) {
                  return '[' + t + ']'
                })
                .join('')),
              (this.scope = n),
              (this.errors = i),
              (this.expectedType = r)
          }
          function $e(t, e) {
            for (var r, n = t.length - 1, i = 0, o = n, a = 0; i <= o; )
              if ((r = t[(a = Math.floor((i + o) / 2))]) <= e) {
                if (a === n || e < t[a + 1]) return a
                i = a + 1
              } else {
                if (!(r > e)) throw new ae('Input is not a number.')
                o = a - 1
              }
            return 0
          }
          ;(Ge.prototype.parse = function (t, e, r, n, i) {
            return (
              void 0 === i && (i = {}),
              e ? this.concat(e, r, n)._parse(t, i) : this._parse(t, i)
            )
          }),
            (Ge.prototype._parse = function (t, e) {
              function r(t, e, r) {
                return 'assert' === r
                  ? new le(e, [t])
                  : 'coerce' === r
                  ? new he(e, [t])
                  : t
              }
              if (
                ((null !== t &&
                  'string' != typeof t &&
                  'boolean' != typeof t &&
                  'number' != typeof t) ||
                  (t = ['literal', t]),
                Array.isArray(t))
              ) {
                if (0 === t.length)
                  return this.error(
                    'Expected an array with at least one element. If you wanted a literal array, use ["literal", []].'
                  )
                var n = t[0]
                if ('string' != typeof n)
                  return (
                    this.error(
                      'Expression name must be a string, but found ' +
                        typeof n +
                        ' instead. If you wanted a literal array, use ["literal", [...]].',
                      0
                    ),
                    null
                  )
                var i = this.registry[n]
                if (i) {
                  var o = i.parse(t, this)
                  if (!o) return null
                  if (this.expectedType) {
                    var a = this.expectedType,
                      s = o.type
                    if (
                      ('string' !== a.kind &&
                        'number' !== a.kind &&
                        'boolean' !== a.kind &&
                        'object' !== a.kind &&
                        'array' !== a.kind) ||
                      'value' !== s.kind
                    )
                      if (
                        ('color' !== a.kind &&
                          'formatted' !== a.kind &&
                          'resolvedImage' !== a.kind) ||
                        ('value' !== s.kind && 'string' !== s.kind)
                      ) {
                        if (this.checkSubtype(a, s)) return null
                      } else o = r(o, a, e.typeAnnotation || 'coerce')
                    else o = r(o, a, e.typeAnnotation || 'assert')
                  }
                  if (
                    !(o instanceof oe) &&
                    'resolvedImage' !== o.type.kind &&
                    (function t(e) {
                      if (e instanceof qe) return t(e.boundExpression)
                      if (e instanceof me && 'error' === e.name) return !1
                      if (e instanceof ye) return !1
                      if (e instanceof Ne) return !1
                      var r = e instanceof he || e instanceof le,
                        n = !0
                      return (
                        e.eachChild(function (e) {
                          n = r ? n && t(e) : n && e instanceof oe
                        }),
                        !!n &&
                          Ue(e) &&
                          Ve(e, [
                            'zoom',
                            'heatmap-density',
                            'line-progress',
                            'accumulated',
                            'is-supported-script',
                          ])
                      )
                    })(o)
                  ) {
                    var l = new de()
                    try {
                      o = new oe(o.type, o.evaluate(l))
                    } catch (t) {
                      return this.error(t.message), null
                    }
                  }
                  return o
                }
                return this.error(
                  'Unknown expression "' +
                    n +
                    '". If you wanted a literal array, use ["literal", [...]].',
                  0
                )
              }
              return this.error(
                void 0 === t
                  ? "'undefined' value invalid. Use null instead."
                  : 'object' == typeof t
                  ? 'Bare objects invalid. Use ["literal", {...}] instead.'
                  : 'Expected an array, but found ' + typeof t + ' instead.'
              )
            }),
            (Ge.prototype.concat = function (t, e, r) {
              var n = 'number' == typeof t ? this.path.concat(t) : this.path,
                i = r ? this.scope.concat(r) : this.scope
              return new Ge(this.registry, n, e || null, i, this.errors)
            }),
            (Ge.prototype.error = function (t) {
              for (var e = [], r = arguments.length - 1; r-- > 0; )
                e[r] = arguments[r + 1]
              var n =
                '' +
                this.key +
                e
                  .map(function (t) {
                    return '[' + t + ']'
                  })
                  .join('')
              this.errors.push(new zt(n, t))
            }),
            (Ge.prototype.checkSubtype = function (t, e) {
              var r = Kt(t, e)
              return r && this.error(r), r
            })
          var Ze = function (t, e, r) {
            ;(this.type = t),
              (this.input = e),
              (this.labels = []),
              (this.outputs = [])
            for (var n = 0, i = r; n < i.length; n += 1) {
              var o = i[n],
                a = o[1]
              this.labels.push(o[0]), this.outputs.push(a)
            }
          }
          ;(Ze.parse = function (t, e) {
            if (t.length - 1 < 4)
              return e.error(
                'Expected at least 4 arguments, but found only ' +
                  (t.length - 1) +
                  '.'
              )
            if ((t.length - 1) % 2 != 0)
              return e.error('Expected an even number of arguments.')
            var r = e.parse(t[1], 1, Rt)
            if (!r) return null
            var n = [],
              i = null
            e.expectedType &&
              'value' !== e.expectedType.kind &&
              (i = e.expectedType)
            for (var o = 1; o < t.length; o += 2) {
              var a = 1 === o ? -1 / 0 : t[o],
                s = t[o + 1],
                l = o,
                u = o + 1
              if ('number' != typeof a)
                return e.error(
                  'Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                  l
                )
              if (n.length && n[n.length - 1][0] >= a)
                return e.error(
                  'Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
                  l
                )
              var c = e.parse(s, u, i)
              if (!c) return null
              ;(i = i || c.type), n.push([a, c])
            }
            return new Ze(i, r, n)
          }),
            (Ze.prototype.evaluate = function (t) {
              var e = this.labels,
                r = this.outputs
              if (1 === e.length) return r[0].evaluate(t)
              var n = this.input.evaluate(t)
              if (n <= e[0]) return r[0].evaluate(t)
              var i = e.length
              return n >= e[i - 1]
                ? r[i - 1].evaluate(t)
                : r[$e(e, n)].evaluate(t)
            }),
            (Ze.prototype.eachChild = function (t) {
              t(this.input)
              for (var e = 0, r = this.outputs; e < r.length; e += 1) t(r[e])
            }),
            (Ze.prototype.outputDefined = function () {
              return this.outputs.every(function (t) {
                return t.outputDefined()
              })
            }),
            (Ze.prototype.serialize = function () {
              for (
                var t = ['step', this.input.serialize()], e = 0;
                e < this.labels.length;
                e++
              )
                e > 0 && t.push(this.labels[e]),
                  t.push(this.outputs[e].serialize())
              return t
            })
          var Xe = Ke
          function Ke(t, e, r, n) {
            ;(this.cx = 3 * t),
              (this.bx = 3 * (r - t) - this.cx),
              (this.ax = 1 - this.cx - this.bx),
              (this.cy = 3 * e),
              (this.by = 3 * (n - e) - this.cy),
              (this.ay = 1 - this.cy - this.by),
              (this.p1x = t),
              (this.p1y = n),
              (this.p2x = r),
              (this.p2y = n)
          }
          function We(t, e, r) {
            return t * (1 - r) + e * r
          }
          ;(Ke.prototype.sampleCurveX = function (t) {
            return ((this.ax * t + this.bx) * t + this.cx) * t
          }),
            (Ke.prototype.sampleCurveY = function (t) {
              return ((this.ay * t + this.by) * t + this.cy) * t
            }),
            (Ke.prototype.sampleCurveDerivativeX = function (t) {
              return (3 * this.ax * t + 2 * this.bx) * t + this.cx
            }),
            (Ke.prototype.solveCurveX = function (t, e) {
              var r, n, i, o, a
              for (void 0 === e && (e = 1e-6), i = t, a = 0; a < 8; a++) {
                if (((o = this.sampleCurveX(i) - t), Math.abs(o) < e)) return i
                var s = this.sampleCurveDerivativeX(i)
                if (Math.abs(s) < 1e-6) break
                i -= o / s
              }
              if ((i = t) < (r = 0)) return r
              if (i > (n = 1)) return n
              for (; r < n; ) {
                if (((o = this.sampleCurveX(i)), Math.abs(o - t) < e)) return i
                t > o ? (r = i) : (n = i), (i = 0.5 * (n - r) + r)
              }
              return i
            }),
            (Ke.prototype.solve = function (t, e) {
              return this.sampleCurveY(this.solveCurveX(t, e))
            })
          var He = Object.freeze({
              __proto__: null,
              number: We,
              color: function (t, e, r) {
                return new Ht(
                  We(t.r, e.r, r),
                  We(t.g, e.g, r),
                  We(t.b, e.b, r),
                  We(t.a, e.a, r)
                )
              },
              array: function (t, e, r) {
                return t.map(function (t, n) {
                  return We(t, e[n], r)
                })
              },
            }),
            Je = 6 / 29,
            Ye = 3 * Je * Je,
            Qe = Math.PI / 180,
            tr = 180 / Math.PI
          function er(t) {
            return t > 0.008856451679035631
              ? Math.pow(t, 1 / 3)
              : t / Ye + 4 / 29
          }
          function rr(t) {
            return t > Je ? t * t * t : Ye * (t - 4 / 29)
          }
          function nr(t) {
            return (
              255 *
              (t <= 0.0031308
                ? 12.92 * t
                : 1.055 * Math.pow(t, 1 / 2.4) - 0.055)
            )
          }
          function ir(t) {
            return (t /= 255) <= 0.04045
              ? t / 12.92
              : Math.pow((t + 0.055) / 1.055, 2.4)
          }
          function or(t) {
            var e = ir(t.r),
              r = ir(t.g),
              n = ir(t.b),
              i = er((0.4124564 * e + 0.3575761 * r + 0.1804375 * n) / 0.95047),
              o = er((0.2126729 * e + 0.7151522 * r + 0.072175 * n) / 1)
            return {
              l: 116 * o - 16,
              a: 500 * (i - o),
              b:
                200 *
                (o -
                  er((0.0193339 * e + 0.119192 * r + 0.9503041 * n) / 1.08883)),
              alpha: t.a,
            }
          }
          function ar(t) {
            var e = (t.l + 16) / 116,
              r = isNaN(t.a) ? e : e + t.a / 500,
              n = isNaN(t.b) ? e : e - t.b / 200
            return (
              (e = 1 * rr(e)),
              (r = 0.95047 * rr(r)),
              (n = 1.08883 * rr(n)),
              new Ht(
                nr(3.2404542 * r - 1.5371385 * e - 0.4985314 * n),
                nr(-0.969266 * r + 1.8760108 * e + 0.041556 * n),
                nr(0.0556434 * r - 0.2040259 * e + 1.0572252 * n),
                t.alpha
              )
            )
          }
          function sr(t, e, r) {
            var n = e - t
            return (
              t + r * (n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n)
            )
          }
          var lr = {
              forward: or,
              reverse: ar,
              interpolate: function (t, e, r) {
                return {
                  l: We(t.l, e.l, r),
                  a: We(t.a, e.a, r),
                  b: We(t.b, e.b, r),
                  alpha: We(t.alpha, e.alpha, r),
                }
              },
            },
            ur = {
              forward: function (t) {
                var e = or(t),
                  r = e.l,
                  n = e.a,
                  i = e.b,
                  o = Math.atan2(i, n) * tr
                return {
                  h: o < 0 ? o + 360 : o,
                  c: Math.sqrt(n * n + i * i),
                  l: r,
                  alpha: t.a,
                }
              },
              reverse: function (t) {
                var e = t.h * Qe,
                  r = t.c
                return ar({
                  l: t.l,
                  a: Math.cos(e) * r,
                  b: Math.sin(e) * r,
                  alpha: t.alpha,
                })
              },
              interpolate: function (t, e, r) {
                return {
                  h: sr(t.h, e.h, r),
                  c: We(t.c, e.c, r),
                  l: We(t.l, e.l, r),
                  alpha: We(t.alpha, e.alpha, r),
                }
              },
            },
            cr = Object.freeze({ __proto__: null, lab: lr, hcl: ur }),
            pr = function (t, e, r, n, i) {
              ;(this.type = t),
                (this.operator = e),
                (this.interpolation = r),
                (this.input = n),
                (this.labels = []),
                (this.outputs = [])
              for (var o = 0, a = i; o < a.length; o += 1) {
                var s = a[o],
                  l = s[1]
                this.labels.push(s[0]), this.outputs.push(l)
              }
            }
          function hr(t, e, r, n) {
            var i = n - r,
              o = t - r
            return 0 === i
              ? 0
              : 1 === e
              ? o / i
              : (Math.pow(e, o) - 1) / (Math.pow(e, i) - 1)
          }
          ;(pr.interpolationFactor = function (t, e, r, n) {
            var i = 0
            if ('exponential' === t.name) i = hr(e, t.base, r, n)
            else if ('linear' === t.name) i = hr(e, 1, r, n)
            else if ('cubic-bezier' === t.name) {
              var o = t.controlPoints
              i = new Xe(o[0], o[1], o[2], o[3]).solve(hr(e, 1, r, n))
            }
            return i
          }),
            (pr.parse = function (t, e) {
              var r = t[0],
                n = t[1],
                i = t[2],
                o = t.slice(3)
              if (!Array.isArray(n) || 0 === n.length)
                return e.error('Expected an interpolation type expression.', 1)
              if ('linear' === n[0]) n = { name: 'linear' }
              else if ('exponential' === n[0]) {
                var a = n[1]
                if ('number' != typeof a)
                  return e.error(
                    'Exponential interpolation requires a numeric base.',
                    1,
                    1
                  )
                n = { name: 'exponential', base: a }
              } else {
                if ('cubic-bezier' !== n[0])
                  return e.error(
                    'Unknown interpolation type ' + String(n[0]),
                    1,
                    0
                  )
                var s = n.slice(1)
                if (
                  4 !== s.length ||
                  s.some(function (t) {
                    return 'number' != typeof t || t < 0 || t > 1
                  })
                )
                  return e.error(
                    'Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.',
                    1
                  )
                n = { name: 'cubic-bezier', controlPoints: s }
              }
              if (t.length - 1 < 4)
                return e.error(
                  'Expected at least 4 arguments, but found only ' +
                    (t.length - 1) +
                    '.'
                )
              if ((t.length - 1) % 2 != 0)
                return e.error('Expected an even number of arguments.')
              if (!(i = e.parse(i, 2, Rt))) return null
              var l = [],
                u = null
              'interpolate-hcl' === r || 'interpolate-lab' === r
                ? (u = Nt)
                : e.expectedType &&
                  'value' !== e.expectedType.kind &&
                  (u = e.expectedType)
              for (var c = 0; c < o.length; c += 2) {
                var p = o[c],
                  h = o[c + 1],
                  f = c + 3,
                  d = c + 4
                if ('number' != typeof p)
                  return e.error(
                    'Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                    f
                  )
                if (l.length && l[l.length - 1][0] >= p)
                  return e.error(
                    'Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
                    f
                  )
                var m = e.parse(h, d, u)
                if (!m) return null
                ;(u = u || m.type), l.push([p, m])
              }
              return 'number' === u.kind ||
                'color' === u.kind ||
                ('array' === u.kind &&
                  'number' === u.itemType.kind &&
                  'number' == typeof u.N)
                ? new pr(u, r, n, i, l)
                : e.error('Type ' + Zt(u) + ' is not interpolatable.')
            }),
            (pr.prototype.evaluate = function (t) {
              var e = this.labels,
                r = this.outputs
              if (1 === e.length) return r[0].evaluate(t)
              var n = this.input.evaluate(t)
              if (n <= e[0]) return r[0].evaluate(t)
              var i = e.length
              if (n >= e[i - 1]) return r[i - 1].evaluate(t)
              var o = $e(e, n),
                a = pr.interpolationFactor(
                  this.interpolation,
                  n,
                  e[o],
                  e[o + 1]
                ),
                s = r[o].evaluate(t),
                l = r[o + 1].evaluate(t)
              return 'interpolate' === this.operator
                ? He[this.type.kind.toLowerCase()](s, l, a)
                : 'interpolate-hcl' === this.operator
                ? ur.reverse(ur.interpolate(ur.forward(s), ur.forward(l), a))
                : lr.reverse(lr.interpolate(lr.forward(s), lr.forward(l), a))
            }),
            (pr.prototype.eachChild = function (t) {
              t(this.input)
              for (var e = 0, r = this.outputs; e < r.length; e += 1) t(r[e])
            }),
            (pr.prototype.outputDefined = function () {
              return this.outputs.every(function (t) {
                return t.outputDefined()
              })
            }),
            (pr.prototype.serialize = function () {
              var t
              t =
                'linear' === this.interpolation.name
                  ? ['linear']
                  : 'exponential' === this.interpolation.name
                  ? 1 === this.interpolation.base
                    ? ['linear']
                    : ['exponential', this.interpolation.base]
                  : ['cubic-bezier'].concat(this.interpolation.controlPoints)
              for (
                var e = [this.operator, t, this.input.serialize()], r = 0;
                r < this.labels.length;
                r++
              )
                e.push(this.labels[r], this.outputs[r].serialize())
              return e
            })
          var fr = function (t, e) {
            ;(this.type = t), (this.args = e)
          }
          ;(fr.parse = function (t, e) {
            if (t.length < 2)
              return e.error('Expectected at least one argument.')
            var r = null,
              n = e.expectedType
            n && 'value' !== n.kind && (r = n)
            for (var i = [], o = 0, a = t.slice(1); o < a.length; o += 1) {
              var s = e.parse(a[o], 1 + i.length, r, void 0, {
                typeAnnotation: 'omit',
              })
              if (!s) return null
              ;(r = r || s.type), i.push(s)
            }
            var l =
              n &&
              i.some(function (t) {
                return Kt(n, t.type)
              })
            return new fr(l ? jt : r, i)
          }),
            (fr.prototype.evaluate = function (t) {
              for (
                var e, r = null, n = 0, i = 0, o = this.args;
                i < o.length &&
                (n++,
                (r = o[i].evaluate(t)) &&
                  r instanceof te &&
                  !r.available &&
                  (e || (e = r.name),
                  (r = null),
                  n === this.args.length && (r = e)),
                null === r);
                i += 1
              );
              return r
            }),
            (fr.prototype.eachChild = function (t) {
              this.args.forEach(t)
            }),
            (fr.prototype.outputDefined = function () {
              return this.args.every(function (t) {
                return t.outputDefined()
              })
            }),
            (fr.prototype.serialize = function () {
              var t = ['coalesce']
              return (
                this.eachChild(function (e) {
                  t.push(e.serialize())
                }),
                t
              )
            })
          var dr = function (t, e) {
            ;(this.type = e.type),
              (this.bindings = [].concat(t)),
              (this.result = e)
          }
          ;(dr.prototype.evaluate = function (t) {
            return this.result.evaluate(t)
          }),
            (dr.prototype.eachChild = function (t) {
              for (var e = 0, r = this.bindings; e < r.length; e += 1)
                t(r[e][1])
              t(this.result)
            }),
            (dr.parse = function (t, e) {
              if (t.length < 4)
                return e.error(
                  'Expected at least 3 arguments, but found ' +
                    (t.length - 1) +
                    ' instead.'
                )
              for (var r = [], n = 1; n < t.length - 1; n += 2) {
                var i = t[n]
                if ('string' != typeof i)
                  return e.error(
                    'Expected string, but found ' + typeof i + ' instead.',
                    n
                  )
                if (/[^a-zA-Z0-9_]/.test(i))
                  return e.error(
                    "Variable names must contain only alphanumeric characters or '_'.",
                    n
                  )
                var o = e.parse(t[n + 1], n + 1)
                if (!o) return null
                r.push([i, o])
              }
              var a = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r)
              return a ? new dr(r, a) : null
            }),
            (dr.prototype.outputDefined = function () {
              return this.result.outputDefined()
            }),
            (dr.prototype.serialize = function () {
              for (
                var t = ['let'], e = 0, r = this.bindings;
                e < r.length;
                e += 1
              ) {
                var n = r[e]
                t.push(n[0], n[1].serialize())
              }
              return t.push(this.result.serialize()), t
            })
          var mr = function (t, e, r) {
            ;(this.type = t), (this.index = e), (this.input = r)
          }
          ;(mr.parse = function (t, e) {
            if (3 !== t.length)
              return e.error(
                'Expected 2 arguments, but found ' +
                  (t.length - 1) +
                  ' instead.'
              )
            var r = e.parse(t[1], 1, Rt),
              n = e.parse(t[2], 2, $t(e.expectedType || jt))
            return r && n ? new mr(n.type.itemType, r, n) : null
          }),
            (mr.prototype.evaluate = function (t) {
              var e = this.index.evaluate(t),
                r = this.input.evaluate(t)
              if (e < 0)
                throw new ae('Array index out of bounds: ' + e + ' < 0.')
              if (e >= r.length)
                throw new ae(
                  'Array index out of bounds: ' +
                    e +
                    ' > ' +
                    (r.length - 1) +
                    '.'
                )
              if (e !== Math.floor(e))
                throw new ae(
                  'Array index must be an integer, but found ' + e + ' instead.'
                )
              return r[e]
            }),
            (mr.prototype.eachChild = function (t) {
              t(this.index), t(this.input)
            }),
            (mr.prototype.outputDefined = function () {
              return !1
            }),
            (mr.prototype.serialize = function () {
              return ['at', this.index.serialize(), this.input.serialize()]
            })
          var yr = function (t, e) {
            ;(this.type = Bt), (this.needle = t), (this.haystack = e)
          }
          ;(yr.parse = function (t, e) {
            if (3 !== t.length)
              return e.error(
                'Expected 2 arguments, but found ' +
                  (t.length - 1) +
                  ' instead.'
              )
            var r,
              n = e.parse(t[1], 1, jt),
              i = e.parse(t[2], 2, jt)
            return n && i
              ? 'boolean' !== (r = n.type).kind &&
                'string' !== r.kind &&
                'number' !== r.kind &&
                'null' !== r.kind &&
                'value' !== r.kind
                ? e.error(
                    'Expected first argument to be of type boolean, string, number or null, but found ' +
                      Zt(n.type) +
                      ' instead'
                  )
                : new yr(n, i)
              : null
          }),
            (yr.prototype.evaluate = function (t) {
              var e = this.needle.evaluate(t),
                r = this.haystack.evaluate(t)
              if (null == e || !r) return !1
              if (
                !(function (t) {
                  return (
                    'boolean' == typeof t ||
                    'string' == typeof t ||
                    'number' == typeof t
                  )
                })(e)
              )
                throw new ae(
                  'Expected first argument to be of type boolean, string or number, but found ' +
                    Zt(ne(e)) +
                    ' instead.'
                )
              if (
                !(function (t) {
                  return Array.isArray(t) || 'string' == typeof t
                })(r)
              )
                throw new ae(
                  'Expected second argument to be of type array or string, but found ' +
                    Zt(ne(r)) +
                    ' instead.'
                )
              return r.indexOf(e) >= 0
            }),
            (yr.prototype.eachChild = function (t) {
              t(this.needle), t(this.haystack)
            }),
            (yr.prototype.outputDefined = function () {
              return !0
            }),
            (yr.prototype.serialize = function () {
              return ['in', this.needle.serialize(), this.haystack.serialize()]
            })
          var vr = function (t, e, r, n, i, o) {
            ;(this.inputType = t),
              (this.type = e),
              (this.input = r),
              (this.cases = n),
              (this.outputs = i),
              (this.otherwise = o)
          }
          ;(vr.parse = function (t, e) {
            if (t.length < 5)
              return e.error(
                'Expected at least 4 arguments, but found only ' +
                  (t.length - 1) +
                  '.'
              )
            if (t.length % 2 != 1)
              return e.error('Expected an even number of arguments.')
            var r, n
            e.expectedType &&
              'value' !== e.expectedType.kind &&
              (n = e.expectedType)
            for (var i = {}, o = [], a = 2; a < t.length - 1; a += 2) {
              var s = t[a],
                l = t[a + 1]
              Array.isArray(s) || (s = [s])
              var u = e.concat(a)
              if (0 === s.length)
                return u.error('Expected at least one branch label.')
              for (var c = 0, p = s; c < p.length; c += 1) {
                var h = p[c]
                if ('number' != typeof h && 'string' != typeof h)
                  return u.error('Branch labels must be numbers or strings.')
                if (
                  'number' == typeof h &&
                  Math.abs(h) > Number.MAX_SAFE_INTEGER
                )
                  return u.error(
                    'Branch labels must be integers no larger than ' +
                      Number.MAX_SAFE_INTEGER +
                      '.'
                  )
                if ('number' == typeof h && Math.floor(h) !== h)
                  return u.error(
                    'Numeric branch labels must be integer values.'
                  )
                if (r) {
                  if (u.checkSubtype(r, ne(h))) return null
                } else r = ne(h)
                if (void 0 !== i[String(h)])
                  return u.error('Branch labels must be unique.')
                i[String(h)] = o.length
              }
              var f = e.parse(l, a, n)
              if (!f) return null
              ;(n = n || f.type), o.push(f)
            }
            var d = e.parse(t[1], 1, jt)
            if (!d) return null
            var m = e.parse(t[t.length - 1], t.length - 1, n)
            return m
              ? 'value' !== d.type.kind && e.concat(1).checkSubtype(r, d.type)
                ? null
                : new vr(r, n, d, i, o, m)
              : null
          }),
            (vr.prototype.evaluate = function (t) {
              var e = this.input.evaluate(t)
              return (
                (ne(e) === this.inputType && this.outputs[this.cases[e]]) ||
                this.otherwise
              ).evaluate(t)
            }),
            (vr.prototype.eachChild = function (t) {
              t(this.input), this.outputs.forEach(t), t(this.otherwise)
            }),
            (vr.prototype.outputDefined = function () {
              return (
                this.outputs.every(function (t) {
                  return t.outputDefined()
                }) && this.otherwise.outputDefined()
              )
            }),
            (vr.prototype.serialize = function () {
              for (
                var t = this,
                  e = ['match', this.input.serialize()],
                  r = [],
                  n = {},
                  i = 0,
                  o = Object.keys(this.cases).sort();
                i < o.length;
                i += 1
              ) {
                var a = o[i]
                void 0 === (p = n[this.cases[a]])
                  ? ((n[this.cases[a]] = r.length),
                    r.push([this.cases[a], [a]]))
                  : r[p][1].push(a)
              }
              for (
                var s = function (e) {
                    return 'number' === t.inputType.kind ? Number(e) : e
                  },
                  l = 0,
                  u = r;
                l < u.length;
                l += 1
              ) {
                var c = u[l],
                  p = c[0],
                  h = c[1]
                e.push(1 === h.length ? s(h[0]) : h.map(s)),
                  e.push(this.outputs[outputIndex$1].serialize())
              }
              return e.push(this.otherwise.serialize()), e
            })
          var gr = function (t, e, r) {
            ;(this.type = t), (this.branches = e), (this.otherwise = r)
          }
          function _r(t, e) {
            return '==' === t || '!=' === t
              ? 'boolean' === e.kind ||
                  'string' === e.kind ||
                  'number' === e.kind ||
                  'null' === e.kind ||
                  'value' === e.kind
              : 'string' === e.kind || 'number' === e.kind || 'value' === e.kind
          }
          function xr(t, e, r, n) {
            return 0 === n.compare(e, r)
          }
          function br(t, e, r) {
            var n = '==' !== t && '!=' !== t
            return (function () {
              function i(t, e, r) {
                ;(this.type = Bt),
                  (this.lhs = t),
                  (this.rhs = e),
                  (this.collator = r),
                  (this.hasUntypedArgument =
                    'value' === t.type.kind || 'value' === e.type.kind)
              }
              return (
                (i.parse = function (t, e) {
                  if (3 !== t.length && 4 !== t.length)
                    return e.error('Expected two or three arguments.')
                  var r = t[0],
                    o = e.parse(t[1], 1, jt)
                  if (!o) return null
                  if (!_r(r, o.type))
                    return e
                      .concat(1)
                      .error(
                        '"' +
                          r +
                          '" comparisons are not supported for type \'' +
                          Zt(o.type) +
                          "'."
                      )
                  var a = e.parse(t[2], 2, jt)
                  if (!a) return null
                  if (!_r(r, a.type))
                    return e
                      .concat(2)
                      .error(
                        '"' +
                          r +
                          '" comparisons are not supported for type \'' +
                          Zt(a.type) +
                          "'."
                      )
                  if (
                    o.type.kind !== a.type.kind &&
                    'value' !== o.type.kind &&
                    'value' !== a.type.kind
                  )
                    return e.error(
                      "Cannot compare types '" +
                        Zt(o.type) +
                        "' and '" +
                        Zt(a.type) +
                        "'."
                    )
                  n &&
                    ('value' === o.type.kind && 'value' !== a.type.kind
                      ? (o = new le(a.type, [o]))
                      : 'value' !== o.type.kind &&
                        'value' === a.type.kind &&
                        (a = new le(o.type, [a])))
                  var s = null
                  if (4 === t.length) {
                    if (
                      'string' !== o.type.kind &&
                      'string' !== a.type.kind &&
                      'value' !== o.type.kind &&
                      'value' !== a.type.kind
                    )
                      return e.error(
                        'Cannot use collator to compare non-string types.'
                      )
                    if (!(s = e.parse(t[3], 3, Vt))) return null
                  }
                  return new i(o, a, s)
                }),
                (i.prototype.evaluate = function (i) {
                  var o = this.lhs.evaluate(i),
                    a = this.rhs.evaluate(i)
                  if (n && this.hasUntypedArgument) {
                    var s = ne(o),
                      l = ne(a)
                    if (
                      s.kind !== l.kind ||
                      ('string' !== s.kind && 'number' !== s.kind)
                    )
                      throw new ae(
                        'Expected arguments for "' +
                          t +
                          '" to be (string, string) or (number, number), but found (' +
                          s.kind +
                          ', ' +
                          l.kind +
                          ') instead.'
                      )
                  }
                  if (this.collator && !n && this.hasUntypedArgument) {
                    var u = ne(o),
                      c = ne(a)
                    if ('string' !== u.kind || 'string' !== c.kind)
                      return e(i, o, a)
                  }
                  return this.collator
                    ? r(i, o, a, this.collator.evaluate(i))
                    : e(i, o, a)
                }),
                (i.prototype.eachChild = function (t) {
                  t(this.lhs), t(this.rhs), this.collator && t(this.collator)
                }),
                (i.prototype.outputDefined = function () {
                  return !0
                }),
                (i.prototype.serialize = function () {
                  var e = [t]
                  return (
                    this.eachChild(function (t) {
                      e.push(t.serialize())
                    }),
                    e
                  )
                }),
                i
              )
            })()
          }
          ;(gr.parse = function (t, e) {
            if (t.length < 4)
              return e.error(
                'Expected at least 3 arguments, but found only ' +
                  (t.length - 1) +
                  '.'
              )
            if (t.length % 2 != 0)
              return e.error('Expected an odd number of arguments.')
            var r
            e.expectedType &&
              'value' !== e.expectedType.kind &&
              (r = e.expectedType)
            for (var n = [], i = 1; i < t.length - 1; i += 2) {
              var o = e.parse(t[i], i, Bt)
              if (!o) return null
              var a = e.parse(t[i + 1], i + 1, r)
              if (!a) return null
              n.push([o, a]), (r = r || a.type)
            }
            var s = e.parse(t[t.length - 1], t.length - 1, r)
            return s ? new gr(r, n, s) : null
          }),
            (gr.prototype.evaluate = function (t) {
              for (var e = 0, r = this.branches; e < r.length; e += 1) {
                var n = r[e],
                  i = n[1]
                if (n[0].evaluate(t)) return i.evaluate(t)
              }
              return this.otherwise.evaluate(t)
            }),
            (gr.prototype.eachChild = function (t) {
              for (var e = 0, r = this.branches; e < r.length; e += 1) {
                var n = r[e],
                  i = n[1]
                t(n[0]), t(i)
              }
              t(this.otherwise)
            }),
            (gr.prototype.outputDefined = function () {
              return (
                this.branches.every(function (t) {
                  return t[1].outputDefined()
                }) && this.otherwise.outputDefined()
              )
            }),
            (gr.prototype.serialize = function () {
              var t = ['case']
              return (
                this.eachChild(function (e) {
                  t.push(e.serialize())
                }),
                t
              )
            })
          var wr = br(
              '==',
              function (t, e, r) {
                return e === r
              },
              xr
            ),
            Er = br(
              '!=',
              function (t, e, r) {
                return e !== r
              },
              function (t, e, r, n) {
                return !xr(0, e, r, n)
              }
            ),
            Sr = br(
              '<',
              function (t, e, r) {
                return e < r
              },
              function (t, e, r, n) {
                return n.compare(e, r) < 0
              }
            ),
            Tr = br(
              '>',
              function (t, e, r) {
                return e > r
              },
              function (t, e, r, n) {
                return n.compare(e, r) > 0
              }
            ),
            Ir = br(
              '<=',
              function (t, e, r) {
                return e <= r
              },
              function (t, e, r, n) {
                return n.compare(e, r) <= 0
              }
            ),
            Cr = br(
              '>=',
              function (t, e, r) {
                return e >= r
              },
              function (t, e, r, n) {
                return n.compare(e, r) >= 0
              }
            ),
            Ar = function (t, e, r, n, i) {
              ;(this.type = Ft),
                (this.number = t),
                (this.locale = e),
                (this.currency = r),
                (this.minFractionDigits = n),
                (this.maxFractionDigits = i)
            }
          ;(Ar.parse = function (t, e) {
            if (3 !== t.length) return e.error('Expected two arguments.')
            var r = e.parse(t[1], 1, Rt)
            if (!r) return null
            var n = t[2]
            if ('object' != typeof n || Array.isArray(n))
              return e.error('NumberFormat options argument must be an object.')
            var i = null
            if (n.locale && !(i = e.parse(n.locale, 1, Ft))) return null
            var o = null
            if (n.currency && !(o = e.parse(n.currency, 1, Ft))) return null
            var a = null
            if (
              n['min-fraction-digits'] &&
              !(a = e.parse(n['min-fraction-digits'], 1, Rt))
            )
              return null
            var s = null
            return n['max-fraction-digits'] &&
              !(s = e.parse(n['max-fraction-digits'], 1, Rt))
              ? null
              : new Ar(r, i, o, a, s)
          }),
            (Ar.prototype.evaluate = function (t) {
              return new Intl.NumberFormat(
                this.locale ? this.locale.evaluate(t) : [],
                {
                  style: this.currency ? 'currency' : 'decimal',
                  currency: this.currency ? this.currency.evaluate(t) : void 0,
                  minimumFractionDigits: this.minFractionDigits
                    ? this.minFractionDigits.evaluate(t)
                    : void 0,
                  maximumFractionDigits: this.maxFractionDigits
                    ? this.maxFractionDigits.evaluate(t)
                    : void 0,
                }
              ).format(this.number.evaluate(t))
            }),
            (Ar.prototype.eachChild = function (t) {
              t(this.number),
                this.locale && t(this.locale),
                this.currency && t(this.currency),
                this.minFractionDigits && t(this.minFractionDigits),
                this.maxFractionDigits && t(this.maxFractionDigits)
            }),
            (Ar.prototype.outputDefined = function () {
              return !1
            }),
            (Ar.prototype.serialize = function () {
              var t = {}
              return (
                this.locale && (t.locale = this.locale.serialize()),
                this.currency && (t.currency = this.currency.serialize()),
                this.minFractionDigits &&
                  (t[
                    'min-fraction-digits'
                  ] = this.minFractionDigits.serialize()),
                this.maxFractionDigits &&
                  (t[
                    'max-fraction-digits'
                  ] = this.maxFractionDigits.serialize()),
                ['number-format', this.number.serialize(), t]
              )
            })
          var kr = function (t) {
            ;(this.type = Rt), (this.input = t)
          }
          ;(kr.parse = function (t, e) {
            if (2 !== t.length)
              return e.error(
                'Expected 1 argument, but found ' + (t.length - 1) + ' instead.'
              )
            var r = e.parse(t[1], 1)
            return r
              ? 'array' !== r.type.kind &&
                'string' !== r.type.kind &&
                'value' !== r.type.kind
                ? e.error(
                    'Expected argument of type string or array, but found ' +
                      Zt(r.type) +
                      ' instead.'
                  )
                : new kr(r)
              : null
          }),
            (kr.prototype.evaluate = function (t) {
              var e = this.input.evaluate(t)
              if ('string' == typeof e) return e.length
              if (Array.isArray(e)) return e.length
              throw new ae(
                'Expected value to be of type string or array, but found ' +
                  Zt(ne(e)) +
                  ' instead.'
              )
            }),
            (kr.prototype.eachChild = function (t) {
              t(this.input)
            }),
            (kr.prototype.outputDefined = function () {
              return !1
            }),
            (kr.prototype.serialize = function () {
              var t = ['length']
              return (
                this.eachChild(function (e) {
                  t.push(e.serialize())
                }),
                t
              )
            })
          var Pr = {
            '==': wr,
            '!=': Er,
            '>': Tr,
            '<': Sr,
            '>=': Cr,
            '<=': Ir,
            array: le,
            at: mr,
            boolean: le,
            case: gr,
            coalesce: fr,
            collator: ye,
            format: ue,
            image: ce,
            in: yr,
            interpolate: pr,
            'interpolate-hcl': pr,
            'interpolate-lab': pr,
            length: kr,
            let: dr,
            literal: oe,
            match: vr,
            number: le,
            'number-format': Ar,
            object: le,
            step: Ze,
            string: le,
            'to-boolean': he,
            'to-color': he,
            'to-number': he,
            'to-string': he,
            var: qe,
            within: Ne,
          }
          function Mr(t, e) {
            var r = e[0],
              n = e[1],
              i = e[2],
              o = e[3]
            ;(r = r.evaluate(t)), (n = n.evaluate(t)), (i = i.evaluate(t))
            var a = o ? o.evaluate(t) : 1,
              s = ee(r, n, i, a)
            if (s) throw new ae(s)
            return new Ht((r / 255) * a, (n / 255) * a, (i / 255) * a, a)
          }
          function Lr(t, e) {
            return t in e
          }
          function zr(t, e) {
            var r = e[t]
            return void 0 === r ? null : r
          }
          function Or(t) {
            return { type: t }
          }
          function Dr(t) {
            return { result: 'success', value: t }
          }
          function Rr(t) {
            return { result: 'error', value: t }
          }
          function Fr(t) {
            return (
              'data-driven' === t['property-type'] ||
              'cross-faded-data-driven' === t['property-type']
            )
          }
          function Br(t) {
            return (
              !!t.expression && t.expression.parameters.indexOf('zoom') > -1
            )
          }
          function Nr(t) {
            return !!t.expression && t.expression.interpolated
          }
          function Ur(t) {
            return t instanceof Number
              ? 'number'
              : t instanceof String
              ? 'string'
              : t instanceof Boolean
              ? 'boolean'
              : Array.isArray(t)
              ? 'array'
              : null === t
              ? 'null'
              : typeof t
          }
          function jr(t) {
            return 'object' == typeof t && null !== t && !Array.isArray(t)
          }
          function Vr(t) {
            return t
          }
          function qr(t, e, r) {
            return void 0 !== t
              ? t
              : void 0 !== e
              ? e
              : void 0 !== r
              ? r
              : void 0
          }
          function Gr(t, e, r, n, i) {
            return qr(typeof r === i ? n[r] : void 0, t.default, e.default)
          }
          function $r(t, e, r) {
            if ('number' !== Ur(r)) return qr(t.default, e.default)
            var n = t.stops.length
            if (1 === n) return t.stops[0][1]
            if (r <= t.stops[0][0]) return t.stops[0][1]
            if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1]
            var i = $e(
              t.stops.map(function (t) {
                return t[0]
              }),
              r
            )
            return t.stops[i][1]
          }
          function Zr(t, e, r) {
            var n = void 0 !== t.base ? t.base : 1
            if ('number' !== Ur(r)) return qr(t.default, e.default)
            var i = t.stops.length
            if (1 === i) return t.stops[0][1]
            if (r <= t.stops[0][0]) return t.stops[0][1]
            if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1]
            var o = $e(
                t.stops.map(function (t) {
                  return t[0]
                }),
                r
              ),
              a = (function (t, e, r, n) {
                var i = n - r,
                  o = t - r
                return 0 === i
                  ? 0
                  : 1 === e
                  ? o / i
                  : (Math.pow(e, o) - 1) / (Math.pow(e, i) - 1)
              })(r, n, t.stops[o][0], t.stops[o + 1][0]),
              s = t.stops[o][1],
              l = t.stops[o + 1][1],
              u = He[e.type] || Vr
            if (t.colorSpace && 'rgb' !== t.colorSpace) {
              var c = cr[t.colorSpace]
              u = function (t, e) {
                return c.reverse(c.interpolate(c.forward(t), c.forward(e), a))
              }
            }
            return 'function' == typeof s.evaluate
              ? {
                  evaluate: function () {
                    for (var t = [], e = arguments.length; e--; )
                      t[e] = arguments[e]
                    var r = s.evaluate.apply(void 0, t),
                      n = l.evaluate.apply(void 0, t)
                    if (void 0 !== r && void 0 !== n) return u(r, n, a)
                  },
                }
              : u(s, l, a)
          }
          function Xr(t, e, r) {
            return (
              'color' === e.type
                ? (r = Ht.parse(r))
                : 'formatted' === e.type
                ? (r = Qt.fromString(r.toString()))
                : 'resolvedImage' === e.type
                ? (r = te.fromString(r.toString()))
                : Ur(r) === e.type ||
                  ('enum' === e.type && e.values[r]) ||
                  (r = void 0),
              qr(r, t.default, e.default)
            )
          }
          me.register(Pr, {
            error: [
              { kind: 'error' },
              [Ft],
              function (t, e) {
                throw new ae(e[0].evaluate(t))
              },
            ],
            typeof: [
              Ft,
              [jt],
              function (t, e) {
                return Zt(ne(e[0].evaluate(t)))
              },
            ],
            'to-rgba': [
              $t(Rt, 4),
              [Nt],
              function (t, e) {
                return e[0].evaluate(t).toArray()
              },
            ],
            rgb: [Nt, [Rt, Rt, Rt], Mr],
            rgba: [Nt, [Rt, Rt, Rt, Rt], Mr],
            has: {
              type: Bt,
              overloads: [
                [
                  [Ft],
                  function (t, e) {
                    return Lr(e[0].evaluate(t), t.properties())
                  },
                ],
                [
                  [Ft, Ut],
                  function (t, e) {
                    var r = e[1]
                    return Lr(e[0].evaluate(t), r.evaluate(t))
                  },
                ],
              ],
            },
            get: {
              type: jt,
              overloads: [
                [
                  [Ft],
                  function (t, e) {
                    return zr(e[0].evaluate(t), t.properties())
                  },
                ],
                [
                  [Ft, Ut],
                  function (t, e) {
                    var r = e[1]
                    return zr(e[0].evaluate(t), r.evaluate(t))
                  },
                ],
              ],
            },
            'feature-state': [
              jt,
              [Ft],
              function (t, e) {
                return zr(e[0].evaluate(t), t.featureState || {})
              },
            ],
            properties: [
              Ut,
              [],
              function (t) {
                return t.properties()
              },
            ],
            'geometry-type': [
              Ft,
              [],
              function (t) {
                return t.geometryType()
              },
            ],
            id: [
              jt,
              [],
              function (t) {
                return t.id()
              },
            ],
            zoom: [
              Rt,
              [],
              function (t) {
                return t.globals.zoom
              },
            ],
            'heatmap-density': [
              Rt,
              [],
              function (t) {
                return t.globals.heatmapDensity || 0
              },
            ],
            'line-progress': [
              Rt,
              [],
              function (t) {
                return t.globals.lineProgress || 0
              },
            ],
            accumulated: [
              jt,
              [],
              function (t) {
                return void 0 === t.globals.accumulated
                  ? null
                  : t.globals.accumulated
              },
            ],
            '+': [
              Rt,
              Or(Rt),
              function (t, e) {
                for (var r = 0, n = 0, i = e; n < i.length; n += 1)
                  r += i[n].evaluate(t)
                return r
              },
            ],
            '*': [
              Rt,
              Or(Rt),
              function (t, e) {
                for (var r = 1, n = 0, i = e; n < i.length; n += 1)
                  r *= i[n].evaluate(t)
                return r
              },
            ],
            '-': {
              type: Rt,
              overloads: [
                [
                  [Rt, Rt],
                  function (t, e) {
                    var r = e[1]
                    return e[0].evaluate(t) - r.evaluate(t)
                  },
                ],
                [
                  [Rt],
                  function (t, e) {
                    return -e[0].evaluate(t)
                  },
                ],
              ],
            },
            '/': [
              Rt,
              [Rt, Rt],
              function (t, e) {
                var r = e[1]
                return e[0].evaluate(t) / r.evaluate(t)
              },
            ],
            '%': [
              Rt,
              [Rt, Rt],
              function (t, e) {
                var r = e[1]
                return e[0].evaluate(t) % r.evaluate(t)
              },
            ],
            ln2: [
              Rt,
              [],
              function () {
                return Math.LN2
              },
            ],
            pi: [
              Rt,
              [],
              function () {
                return Math.PI
              },
            ],
            e: [
              Rt,
              [],
              function () {
                return Math.E
              },
            ],
            '^': [
              Rt,
              [Rt, Rt],
              function (t, e) {
                var r = e[1]
                return Math.pow(e[0].evaluate(t), r.evaluate(t))
              },
            ],
            sqrt: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.sqrt(e[0].evaluate(t))
              },
            ],
            log10: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.log(e[0].evaluate(t)) / Math.LN10
              },
            ],
            ln: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.log(e[0].evaluate(t))
              },
            ],
            log2: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.log(e[0].evaluate(t)) / Math.LN2
              },
            ],
            sin: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.sin(e[0].evaluate(t))
              },
            ],
            cos: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.cos(e[0].evaluate(t))
              },
            ],
            tan: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.tan(e[0].evaluate(t))
              },
            ],
            asin: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.asin(e[0].evaluate(t))
              },
            ],
            acos: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.acos(e[0].evaluate(t))
              },
            ],
            atan: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.atan(e[0].evaluate(t))
              },
            ],
            min: [
              Rt,
              Or(Rt),
              function (t, e) {
                return Math.min.apply(
                  Math,
                  e.map(function (e) {
                    return e.evaluate(t)
                  })
                )
              },
            ],
            max: [
              Rt,
              Or(Rt),
              function (t, e) {
                return Math.max.apply(
                  Math,
                  e.map(function (e) {
                    return e.evaluate(t)
                  })
                )
              },
            ],
            abs: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.abs(e[0].evaluate(t))
              },
            ],
            round: [
              Rt,
              [Rt],
              function (t, e) {
                var r = e[0].evaluate(t)
                return r < 0 ? -Math.round(-r) : Math.round(r)
              },
            ],
            floor: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.floor(e[0].evaluate(t))
              },
            ],
            ceil: [
              Rt,
              [Rt],
              function (t, e) {
                return Math.ceil(e[0].evaluate(t))
              },
            ],
            'filter-==': [
              Bt,
              [Ft, jt],
              function (t, e) {
                var r = e[0],
                  n = e[1]
                return t.properties()[r.value] === n.value
              },
            ],
            'filter-id-==': [
              Bt,
              [jt],
              function (t, e) {
                var r = e[0]
                return t.id() === r.value
              },
            ],
            'filter-type-==': [
              Bt,
              [Ft],
              function (t, e) {
                var r = e[0]
                return t.geometryType() === r.value
              },
            ],
            'filter-<': [
              Bt,
              [Ft, jt],
              function (t, e) {
                var r = e[0],
                  n = e[1],
                  i = t.properties()[r.value],
                  o = n.value
                return typeof i == typeof o && i < o
              },
            ],
            'filter-id-<': [
              Bt,
              [jt],
              function (t, e) {
                var r = e[0],
                  n = t.id(),
                  i = r.value
                return typeof n == typeof i && n < i
              },
            ],
            'filter->': [
              Bt,
              [Ft, jt],
              function (t, e) {
                var r = e[0],
                  n = e[1],
                  i = t.properties()[r.value],
                  o = n.value
                return typeof i == typeof o && i > o
              },
            ],
            'filter-id->': [
              Bt,
              [jt],
              function (t, e) {
                var r = e[0],
                  n = t.id(),
                  i = r.value
                return typeof n == typeof i && n > i
              },
            ],
            'filter-<=': [
              Bt,
              [Ft, jt],
              function (t, e) {
                var r = e[0],
                  n = e[1],
                  i = t.properties()[r.value],
                  o = n.value
                return typeof i == typeof o && i <= o
              },
            ],
            'filter-id-<=': [
              Bt,
              [jt],
              function (t, e) {
                var r = e[0],
                  n = t.id(),
                  i = r.value
                return typeof n == typeof i && n <= i
              },
            ],
            'filter->=': [
              Bt,
              [Ft, jt],
              function (t, e) {
                var r = e[0],
                  n = e[1],
                  i = t.properties()[r.value],
                  o = n.value
                return typeof i == typeof o && i >= o
              },
            ],
            'filter-id->=': [
              Bt,
              [jt],
              function (t, e) {
                var r = e[0],
                  n = t.id(),
                  i = r.value
                return typeof n == typeof i && n >= i
              },
            ],
            'filter-has': [
              Bt,
              [jt],
              function (t, e) {
                return e[0].value in t.properties()
              },
            ],
            'filter-has-id': [
              Bt,
              [],
              function (t) {
                return null !== t.id() && void 0 !== t.id()
              },
            ],
            'filter-type-in': [
              Bt,
              [$t(Ft)],
              function (t, e) {
                return e[0].value.indexOf(t.geometryType()) >= 0
              },
            ],
            'filter-id-in': [
              Bt,
              [$t(jt)],
              function (t, e) {
                return e[0].value.indexOf(t.id()) >= 0
              },
            ],
            'filter-in-small': [
              Bt,
              [Ft, $t(jt)],
              function (t, e) {
                var r = e[0]
                return e[1].value.indexOf(t.properties()[r.value]) >= 0
              },
            ],
            'filter-in-large': [
              Bt,
              [Ft, $t(jt)],
              function (t, e) {
                var r = e[0],
                  n = e[1]
                return (function (t, e, r, n) {
                  for (; r <= n; ) {
                    var i = (r + n) >> 1
                    if (e[i] === t) return !0
                    e[i] > t ? (n = i - 1) : (r = i + 1)
                  }
                  return !1
                })(t.properties()[r.value], n.value, 0, n.value.length - 1)
              },
            ],
            all: {
              type: Bt,
              overloads: [
                [
                  [Bt, Bt],
                  function (t, e) {
                    var r = e[1]
                    return e[0].evaluate(t) && r.evaluate(t)
                  },
                ],
                [
                  Or(Bt),
                  function (t, e) {
                    for (var r = 0, n = e; r < n.length; r += 1)
                      if (!n[r].evaluate(t)) return !1
                    return !0
                  },
                ],
              ],
            },
            any: {
              type: Bt,
              overloads: [
                [
                  [Bt, Bt],
                  function (t, e) {
                    var r = e[1]
                    return e[0].evaluate(t) || r.evaluate(t)
                  },
                ],
                [
                  Or(Bt),
                  function (t, e) {
                    for (var r = 0, n = e; r < n.length; r += 1)
                      if (n[r].evaluate(t)) return !0
                    return !1
                  },
                ],
              ],
            },
            '!': [
              Bt,
              [Bt],
              function (t, e) {
                return !e[0].evaluate(t)
              },
            ],
            'is-supported-script': [
              Bt,
              [Ft],
              function (t, e) {
                var r = t.globals && t.globals.isSupportedScript
                return !r || r(e[0].evaluate(t))
              },
            ],
            upcase: [
              Ft,
              [Ft],
              function (t, e) {
                return e[0].evaluate(t).toUpperCase()
              },
            ],
            downcase: [
              Ft,
              [Ft],
              function (t, e) {
                return e[0].evaluate(t).toLowerCase()
              },
            ],
            concat: [
              Ft,
              Or(jt),
              function (t, e) {
                return e
                  .map(function (e) {
                    return ie(e.evaluate(t))
                  })
                  .join('')
              },
            ],
            'resolved-locale': [
              Ft,
              [Vt],
              function (t, e) {
                return e[0].evaluate(t).resolvedLocale()
              },
            ],
          })
          var Kr = function (t, e) {
            ;(this.expression = t),
              (this._warningHistory = {}),
              (this._evaluator = new de()),
              (this._defaultValue = e
                ? (function (t) {
                    return 'color' === t.type && jr(t.default)
                      ? new Ht(0, 0, 0, 0)
                      : 'color' === t.type
                      ? Ht.parse(t.default) || null
                      : void 0 === t.default
                      ? null
                      : t.default
                  })(e)
                : null),
              (this._enumValues = e && 'enum' === e.type ? e.values : null)
          }
          function Wr(t) {
            return (
              Array.isArray(t) &&
              t.length > 0 &&
              'string' == typeof t[0] &&
              t[0] in Pr
            )
          }
          function Hr(t, e) {
            var r = new Ge(
                Pr,
                [],
                e
                  ? (function (t) {
                      var e = {
                        color: Nt,
                        string: Ft,
                        number: Rt,
                        enum: Ft,
                        boolean: Bt,
                        formatted: qt,
                        resolvedImage: Gt,
                      }
                      return 'array' === t.type
                        ? $t(e[t.value] || jt, t.length)
                        : e[t.type]
                    })(e)
                  : void 0
              ),
              n = r.parse(
                t,
                void 0,
                void 0,
                void 0,
                e && 'string' === e.type ? { typeAnnotation: 'coerce' } : void 0
              )
            return n ? Dr(new Kr(n, e)) : Rr(r.errors)
          }
          ;(Kr.prototype.evaluateWithoutErrorHandling = function (
            t,
            e,
            r,
            n,
            i,
            o
          ) {
            return (
              (this._evaluator.globals = t),
              (this._evaluator.feature = e),
              (this._evaluator.featureState = r),
              (this._evaluator.canonical = n),
              (this._evaluator.availableImages = i || null),
              (this._evaluator.formattedSection = o),
              this.expression.evaluate(this._evaluator)
            )
          }),
            (Kr.prototype.evaluate = function (t, e, r, n, i, o) {
              ;(this._evaluator.globals = t),
                (this._evaluator.feature = e || null),
                (this._evaluator.featureState = r || null),
                (this._evaluator.canonical = n),
                (this._evaluator.availableImages = i || null),
                (this._evaluator.formattedSection = o || null)
              try {
                var a = this.expression.evaluate(this._evaluator)
                if (null == a || ('number' == typeof a && a != a))
                  return this._defaultValue
                if (this._enumValues && !(a in this._enumValues))
                  throw new ae(
                    'Expected value to be one of ' +
                      Object.keys(this._enumValues)
                        .map(function (t) {
                          return JSON.stringify(t)
                        })
                        .join(', ') +
                      ', but found ' +
                      JSON.stringify(a) +
                      ' instead.'
                  )
                return a
              } catch (t) {
                return (
                  this._warningHistory[t.message] ||
                    ((this._warningHistory[t.message] = !0),
                    'undefined' != typeof console && console.warn(t.message)),
                  this._defaultValue
                )
              }
            })
          var Jr = function (t, e) {
            ;(this.kind = t),
              (this._styleExpression = e),
              (this.isStateDependent = 'constant' !== t && !je(e.expression))
          }
          ;(Jr.prototype.evaluateWithoutErrorHandling = function (
            t,
            e,
            r,
            n,
            i,
            o
          ) {
            return this._styleExpression.evaluateWithoutErrorHandling(
              t,
              e,
              r,
              n,
              i,
              o
            )
          }),
            (Jr.prototype.evaluate = function (t, e, r, n, i, o) {
              return this._styleExpression.evaluate(t, e, r, n, i, o)
            })
          var Yr = function (t, e, r, n) {
            ;(this.kind = t),
              (this.zoomStops = r),
              (this._styleExpression = e),
              (this.isStateDependent = 'camera' !== t && !je(e.expression)),
              (this.interpolationType = n)
          }
          function Qr(t, e) {
            if ('error' === (t = Hr(t, e)).result) return t
            var r = t.value.expression,
              n = Ue(r)
            if (!n && !Fr(e))
              return Rr([new zt('', 'data expressions not supported')])
            var i = Ve(r, ['zoom'])
            if (!i && !Br(e))
              return Rr([new zt('', 'zoom expressions not supported')])
            var o = (function t(e) {
              var r = null
              if (e instanceof dr) r = t(e.result)
              else if (e instanceof fr)
                for (
                  var n = 0, i = e.args;
                  n < i.length && !(r = t(i[n]));
                  n += 1
                );
              else
                (e instanceof Ze || e instanceof pr) &&
                  e.input instanceof me &&
                  'zoom' === e.input.name &&
                  (r = e)
              return (
                r instanceof zt ||
                  e.eachChild(function (e) {
                    var n = t(e)
                    n instanceof zt
                      ? (r = n)
                      : !r && n
                      ? (r = new zt(
                          '',
                          '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
                        ))
                      : r &&
                        n &&
                        r !== n &&
                        (r = new zt(
                          '',
                          'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'
                        ))
                  }),
                r
              )
            })(r)
            return o || i
              ? o instanceof zt
                ? Rr([o])
                : o instanceof pr && !Nr(e)
                ? Rr([
                    new zt(
                      '',
                      '"interpolate" expressions cannot be used with this property'
                    ),
                  ])
                : Dr(
                    o
                      ? new Yr(
                          n ? 'camera' : 'composite',
                          t.value,
                          o.labels,
                          o instanceof pr ? o.interpolation : void 0
                        )
                      : new Jr(n ? 'constant' : 'source', t.value)
                  )
              : Rr([
                  new zt(
                    '',
                    '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
                  ),
                ])
          }
          ;(Yr.prototype.evaluateWithoutErrorHandling = function (
            t,
            e,
            r,
            n,
            i,
            o
          ) {
            return this._styleExpression.evaluateWithoutErrorHandling(
              t,
              e,
              r,
              n,
              i,
              o
            )
          }),
            (Yr.prototype.evaluate = function (t, e, r, n, i, o) {
              return this._styleExpression.evaluate(t, e, r, n, i, o)
            }),
            (Yr.prototype.interpolationFactor = function (t, e, r) {
              return this.interpolationType
                ? pr.interpolationFactor(this.interpolationType, t, e, r)
                : 0
            })
          var tn = function (t, e) {
            ;(this._parameters = t),
              (this._specification = e),
              Pt(
                this,
                (function t(e, r) {
                  var n,
                    i,
                    o,
                    a = 'color' === r.type,
                    s = e.stops && 'object' == typeof e.stops[0][0],
                    l = s || !(s || void 0 !== e.property),
                    u = e.type || (Nr(r) ? 'exponential' : 'interval')
                  if (
                    (a &&
                      ((e = Pt({}, e)).stops &&
                        (e.stops = e.stops.map(function (t) {
                          return [t[0], Ht.parse(t[1])]
                        })),
                      (e.default = Ht.parse(
                        e.default ? e.default : r.default
                      ))),
                    e.colorSpace && 'rgb' !== e.colorSpace && !cr[e.colorSpace])
                  )
                    throw new Error('Unknown color space: ' + e.colorSpace)
                  if ('exponential' === u) n = Zr
                  else if ('interval' === u) n = $r
                  else if ('categorical' === u) {
                    ;(n = Gr), (i = Object.create(null))
                    for (var c = 0, p = e.stops; c < p.length; c += 1) {
                      var h = p[c]
                      i[h[0]] = h[1]
                    }
                    o = typeof e.stops[0][0]
                  } else {
                    if ('identity' !== u)
                      throw new Error('Unknown function type "' + u + '"')
                    n = Xr
                  }
                  if (s) {
                    for (var f = {}, d = [], m = 0; m < e.stops.length; m++) {
                      var y = e.stops[m],
                        v = y[0].zoom
                      void 0 === f[v] &&
                        ((f[v] = {
                          zoom: v,
                          type: e.type,
                          property: e.property,
                          default: e.default,
                          stops: [],
                        }),
                        d.push(v)),
                        f[v].stops.push([y[0].value, y[1]])
                    }
                    for (var g = [], _ = 0, x = d; _ < x.length; _ += 1) {
                      var b = x[_]
                      g.push([f[b].zoom, t(f[b], r)])
                    }
                    var w = { name: 'linear' }
                    return {
                      kind: 'composite',
                      interpolationType: w,
                      interpolationFactor: pr.interpolationFactor.bind(
                        void 0,
                        w
                      ),
                      zoomStops: g.map(function (t) {
                        return t[0]
                      }),
                      evaluate: function (t, n) {
                        var i = t.zoom
                        return Zr({ stops: g, base: e.base }, r, i).evaluate(
                          i,
                          n
                        )
                      },
                    }
                  }
                  if (l) {
                    var E =
                      'exponential' === u
                        ? {
                            name: 'exponential',
                            base: void 0 !== e.base ? e.base : 1,
                          }
                        : null
                    return {
                      kind: 'camera',
                      interpolationType: E,
                      interpolationFactor: pr.interpolationFactor.bind(
                        void 0,
                        E
                      ),
                      zoomStops: e.stops.map(function (t) {
                        return t[0]
                      }),
                      evaluate: function (t) {
                        return n(e, r, t.zoom, i, o)
                      },
                    }
                  }
                  return {
                    kind: 'source',
                    evaluate: function (t, a) {
                      var s =
                        a && a.properties ? a.properties[e.property] : void 0
                      return void 0 === s
                        ? qr(e.default, r.default)
                        : n(e, r, s, i, o)
                    },
                  }
                })(this._parameters, this._specification)
              )
          }
          function en(t) {
            var e = t.key,
              r = t.value,
              n = t.valueSpec || {},
              i = t.objectElementValidators || {},
              o = t.style,
              a = t.styleSpec,
              s = [],
              l = Ur(r)
            if ('object' !== l)
              return [new At(e, r, 'object expected, ' + l + ' found')]
            for (var u in r) {
              var c = u.split('.')[0],
                p = n[c] || n['*'],
                h = void 0
              if (i[c]) h = i[c]
              else if (n[c]) h = Cn
              else if (i['*']) h = i['*']
              else {
                if (!n['*']) {
                  s.push(new At(e, r[u], 'unknown property "' + u + '"'))
                  continue
                }
                h = Cn
              }
              s = s.concat(
                h(
                  {
                    key: (e ? e + '.' : e) + u,
                    value: r[u],
                    valueSpec: p,
                    style: o,
                    styleSpec: a,
                    object: r,
                    objectKey: u,
                  },
                  r
                )
              )
            }
            for (var f in n)
              i[f] ||
                (n[f].required &&
                  void 0 === n[f].default &&
                  void 0 === r[f] &&
                  s.push(new At(e, r, 'missing required property "' + f + '"')))
            return s
          }
          function rn(t) {
            var e = t.value,
              r = t.valueSpec,
              n = t.style,
              i = t.styleSpec,
              o = t.key,
              a = t.arrayElementValidator || Cn
            if ('array' !== Ur(e))
              return [new At(o, e, 'array expected, ' + Ur(e) + ' found')]
            if (r.length && e.length !== r.length)
              return [
                new At(
                  o,
                  e,
                  'array length ' +
                    r.length +
                    ' expected, length ' +
                    e.length +
                    ' found'
                ),
              ]
            if (r['min-length'] && e.length < r['min-length'])
              return [
                new At(
                  o,
                  e,
                  'array length at least ' +
                    r['min-length'] +
                    ' expected, length ' +
                    e.length +
                    ' found'
                ),
              ]
            var s = { type: r.value, values: r.values }
            i.$version < 7 && (s.function = r.function),
              'object' === Ur(r.value) && (s = r.value)
            for (var l = [], u = 0; u < e.length; u++)
              l = l.concat(
                a({
                  array: e,
                  arrayIndex: u,
                  value: e[u],
                  valueSpec: s,
                  style: n,
                  styleSpec: i,
                  key: o + '[' + u + ']',
                })
              )
            return l
          }
          function nn(t) {
            var e = t.key,
              r = t.value,
              n = t.valueSpec,
              i = Ur(r)
            return (
              'number' === i && r != r && (i = 'NaN'),
              'number' !== i
                ? [new At(e, r, 'number expected, ' + i + ' found')]
                : 'minimum' in n && r < n.minimum
                ? [
                    new At(
                      e,
                      r,
                      r + ' is less than the minimum value ' + n.minimum
                    ),
                  ]
                : 'maximum' in n && r > n.maximum
                ? [
                    new At(
                      e,
                      r,
                      r + ' is greater than the maximum value ' + n.maximum
                    ),
                  ]
                : []
            )
          }
          function on(t) {
            var e,
              r,
              n,
              i = t.valueSpec,
              o = Mt(t.value.type),
              a = {},
              s = 'categorical' !== o && void 0 === t.value.property,
              l = !s,
              u =
                'array' === Ur(t.value.stops) &&
                'array' === Ur(t.value.stops[0]) &&
                'object' === Ur(t.value.stops[0][0]),
              c = en({
                key: t.key,
                value: t.value,
                valueSpec: t.styleSpec.function,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                  stops: function (t) {
                    if ('identity' === o)
                      return [
                        new At(
                          t.key,
                          t.value,
                          'identity function may not have a "stops" property'
                        ),
                      ]
                    var e = [],
                      r = t.value
                    return (
                      (e = e.concat(
                        rn({
                          key: t.key,
                          value: r,
                          valueSpec: t.valueSpec,
                          style: t.style,
                          styleSpec: t.styleSpec,
                          arrayElementValidator: p,
                        })
                      )),
                      'array' === Ur(r) &&
                        0 === r.length &&
                        e.push(
                          new At(t.key, r, 'array must have at least one stop')
                        ),
                      e
                    )
                  },
                  default: function (t) {
                    return Cn({
                      key: t.key,
                      value: t.value,
                      valueSpec: i,
                      style: t.style,
                      styleSpec: t.styleSpec,
                    })
                  },
                },
              })
            return (
              'identity' === o &&
                s &&
                c.push(
                  new At(t.key, t.value, 'missing required property "property"')
                ),
              'identity' === o ||
                t.value.stops ||
                c.push(
                  new At(t.key, t.value, 'missing required property "stops"')
                ),
              'exponential' === o &&
                t.valueSpec.expression &&
                !Nr(t.valueSpec) &&
                c.push(
                  new At(t.key, t.value, 'exponential functions not supported')
                ),
              t.styleSpec.$version >= 8 &&
                (l && !Fr(t.valueSpec)
                  ? c.push(
                      new At(t.key, t.value, 'property functions not supported')
                    )
                  : s &&
                    !Br(t.valueSpec) &&
                    c.push(
                      new At(t.key, t.value, 'zoom functions not supported')
                    )),
              ('categorical' !== o && !u) ||
                void 0 !== t.value.property ||
                c.push(
                  new At(t.key, t.value, '"property" property is required')
                ),
              c
            )
            function p(t) {
              var e = [],
                o = t.value,
                s = t.key
              if ('array' !== Ur(o))
                return [new At(s, o, 'array expected, ' + Ur(o) + ' found')]
              if (2 !== o.length)
                return [
                  new At(
                    s,
                    o,
                    'array length 2 expected, length ' + o.length + ' found'
                  ),
                ]
              if (u) {
                if ('object' !== Ur(o[0]))
                  return [
                    new At(s, o, 'object expected, ' + Ur(o[0]) + ' found'),
                  ]
                if (void 0 === o[0].zoom)
                  return [new At(s, o, 'object stop key must have zoom')]
                if (void 0 === o[0].value)
                  return [new At(s, o, 'object stop key must have value')]
                if (n && n > Mt(o[0].zoom))
                  return [
                    new At(
                      s,
                      o[0].zoom,
                      'stop zoom values must appear in ascending order'
                    ),
                  ]
                Mt(o[0].zoom) !== n &&
                  ((n = Mt(o[0].zoom)), (r = void 0), (a = {})),
                  (e = e.concat(
                    en({
                      key: s + '[0]',
                      value: o[0],
                      valueSpec: { zoom: {} },
                      style: t.style,
                      styleSpec: t.styleSpec,
                      objectElementValidators: { zoom: nn, value: h },
                    })
                  ))
              } else e = e.concat(h({ key: s + '[0]', value: o[0], valueSpec: {}, style: t.style, styleSpec: t.styleSpec }, o))
              return Wr(Lt(o[1]))
                ? e.concat([
                    new At(
                      s + '[1]',
                      o[1],
                      'expressions are not allowed in function stops.'
                    ),
                  ])
                : e.concat(
                    Cn({
                      key: s + '[1]',
                      value: o[1],
                      valueSpec: i,
                      style: t.style,
                      styleSpec: t.styleSpec,
                    })
                  )
            }
            function h(t, n) {
              var s = Ur(t.value),
                l = Mt(t.value),
                u = null !== t.value ? t.value : n
              if (e) {
                if (s !== e)
                  return [
                    new At(
                      t.key,
                      u,
                      s +
                        ' stop domain type must match previous stop domain type ' +
                        e
                    ),
                  ]
              } else e = s
              if ('number' !== s && 'string' !== s && 'boolean' !== s)
                return [
                  new At(
                    t.key,
                    u,
                    'stop domain value must be a number, string, or boolean'
                  ),
                ]
              if ('number' !== s && 'categorical' !== o) {
                var c = 'number expected, ' + s + ' found'
                return (
                  Fr(i) &&
                    void 0 === o &&
                    (c +=
                      '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
                  [new At(t.key, u, c)]
                )
              }
              return 'categorical' !== o ||
                'number' !== s ||
                (isFinite(l) && Math.floor(l) === l)
                ? 'categorical' !== o && 'number' === s && void 0 !== r && l < r
                  ? [
                      new At(
                        t.key,
                        u,
                        'stop domain values must appear in ascending order'
                      ),
                    ]
                  : ((r = l),
                    'categorical' === o && l in a
                      ? [new At(t.key, u, 'stop domain values must be unique')]
                      : ((a[l] = !0), []))
                : [new At(t.key, u, 'integer expected, found ' + l)]
            }
          }
          function an(t) {
            var e = ('property' === t.expressionContext ? Qr : Hr)(
              Lt(t.value),
              t.valueSpec
            )
            if ('error' === e.result)
              return e.value.map(function (e) {
                return new At('' + t.key + e.key, t.value, e.message)
              })
            var r = e.value.expression || e.value._styleExpression.expression
            if (
              'property' === t.expressionContext &&
              'text-font' === t.propertyKey &&
              !r.outputDefined()
            )
              return [
                new At(
                  t.key,
                  t.value,
                  'Invalid data expression for "' +
                    t.propertyKey +
                    '". Output values must be contained as literals within the expression.'
                ),
              ]
            if (
              'property' === t.expressionContext &&
              'layout' === t.propertyType &&
              !je(r)
            )
              return [
                new At(
                  t.key,
                  t.value,
                  '"feature-state" data expressions are not supported with layout properties.'
                ),
              ]
            if ('filter' === t.expressionContext && !je(r))
              return [
                new At(
                  t.key,
                  t.value,
                  '"feature-state" data expressions are not supported with filters.'
                ),
              ]
            if (
              t.expressionContext &&
              0 === t.expressionContext.indexOf('cluster')
            ) {
              if (!Ve(r, ['zoom', 'feature-state']))
                return [
                  new At(
                    t.key,
                    t.value,
                    '"zoom" and "feature-state" expressions are not supported with cluster properties.'
                  ),
                ]
              if ('cluster-initial' === t.expressionContext && !Ue(r))
                return [
                  new At(
                    t.key,
                    t.value,
                    'Feature data expressions are not supported with initial expression part of cluster properties.'
                  ),
                ]
            }
            return []
          }
          function sn(t) {
            var e = t.key,
              r = t.value,
              n = t.valueSpec,
              i = []
            return (
              Array.isArray(n.values)
                ? -1 === n.values.indexOf(Mt(r)) &&
                  i.push(
                    new At(
                      e,
                      r,
                      'expected one of [' +
                        n.values.join(', ') +
                        '], ' +
                        JSON.stringify(r) +
                        ' found'
                    )
                  )
                : -1 === Object.keys(n.values).indexOf(Mt(r)) &&
                  i.push(
                    new At(
                      e,
                      r,
                      'expected one of [' +
                        Object.keys(n.values).join(', ') +
                        '], ' +
                        JSON.stringify(r) +
                        ' found'
                    )
                  ),
              i
            )
          }
          function ln(t) {
            if (!0 === t || !1 === t) return !0
            if (!Array.isArray(t) || 0 === t.length) return !1
            switch (t[0]) {
              case 'has':
                return t.length >= 2 && '$id' !== t[1] && '$type' !== t[1]
              case 'in':
                return (
                  t.length >= 3 &&
                  ('string' != typeof t[1] || Array.isArray(t[2]))
                )
              case '!in':
              case '!has':
              case 'none':
                return !1
              case '==':
              case '!=':
              case '>':
              case '>=':
              case '<':
              case '<=':
                return (
                  3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2])
                )
              case 'any':
              case 'all':
                for (var e = 0, r = t.slice(1); e < r.length; e += 1) {
                  var n = r[e]
                  if (!ln(n) && 'boolean' != typeof n) return !1
                }
                return !0
              default:
                return !0
            }
          }
          ;(tn.deserialize = function (t) {
            return new tn(t._parameters, t._specification)
          }),
            (tn.serialize = function (t) {
              return {
                _parameters: t._parameters,
                _specification: t._specification,
              }
            })
          var un = {
            type: 'boolean',
            default: !1,
            transition: !1,
            'property-type': 'data-driven',
            expression: { interpolated: !1, parameters: ['zoom', 'feature'] },
          }
          function cn(t) {
            if (null == t)
              return {
                filter: function () {
                  return !0
                },
                needGeometry: !1,
              }
            ln(t) || (t = hn(t))
            var e = Hr(t, un)
            if ('error' === e.result)
              throw new Error(
                e.value
                  .map(function (t) {
                    return t.key + ': ' + t.message
                  })
                  .join(', ')
              )
            return {
              filter: function (t, r, n) {
                return e.value.evaluate(t, r, {}, n)
              },
              needGeometry:
                Array.isArray(t) && 0 !== t.length && 'within' === t[0],
            }
          }
          function pn(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
          }
          function hn(t) {
            if (!t) return !0
            var e,
              r = t[0]
            return t.length <= 1
              ? 'any' !== r
              : '==' === r
              ? fn(t[1], t[2], '==')
              : '!=' === r
              ? yn(fn(t[1], t[2], '=='))
              : '<' === r || '>' === r || '<=' === r || '>=' === r
              ? fn(t[1], t[2], r)
              : 'any' === r
              ? ((e = t.slice(1)), ['any'].concat(e.map(hn)))
              : 'all' === r
              ? ['all'].concat(t.slice(1).map(hn))
              : 'none' === r
              ? ['all'].concat(t.slice(1).map(hn).map(yn))
              : 'in' === r
              ? dn(t[1], t.slice(2))
              : '!in' === r
              ? yn(dn(t[1], t.slice(2)))
              : 'has' === r
              ? mn(t[1])
              : '!has' !== r || yn(mn(t[1]))
          }
          function fn(t, e, r) {
            switch (t) {
              case '$type':
                return ['filter-type-' + r, e]
              case '$id':
                return ['filter-id-' + r, e]
              default:
                return ['filter-' + r, t, e]
            }
          }
          function dn(t, e) {
            if (0 === e.length) return !1
            switch (t) {
              case '$type':
                return ['filter-type-in', ['literal', e]]
              case '$id':
                return ['filter-id-in', ['literal', e]]
              default:
                return e.length > 200 &&
                  !e.some(function (t) {
                    return typeof t != typeof e[0]
                  })
                  ? ['filter-in-large', t, ['literal', e.sort(pn)]]
                  : ['filter-in-small', t, ['literal', e]]
            }
          }
          function mn(t) {
            switch (t) {
              case '$type':
                return !0
              case '$id':
                return ['filter-has-id']
              default:
                return ['filter-has', t]
            }
          }
          function yn(t) {
            return ['!', t]
          }
          function vn(t) {
            return ln(Lt(t.value))
              ? an(
                  Pt({}, t, {
                    expressionContext: 'filter',
                    valueSpec: { value: 'boolean' },
                  })
                )
              : (function t(e) {
                  var r = e.value,
                    n = e.key
                  if ('array' !== Ur(r))
                    return [new At(n, r, 'array expected, ' + Ur(r) + ' found')]
                  var i,
                    o = e.styleSpec,
                    a = []
                  if (r.length < 1)
                    return [
                      new At(n, r, 'filter array must have at least 1 element'),
                    ]
                  switch (
                    ((a = a.concat(
                      sn({
                        key: n + '[0]',
                        value: r[0],
                        valueSpec: o.filter_operator,
                        style: e.style,
                        styleSpec: e.styleSpec,
                      })
                    )),
                    Mt(r[0]))
                  ) {
                    case '<':
                    case '<=':
                    case '>':
                    case '>=':
                      r.length >= 2 &&
                        '$type' === Mt(r[1]) &&
                        a.push(
                          new At(
                            n,
                            r,
                            '"$type" cannot be use with operator "' + r[0] + '"'
                          )
                        )
                    case '==':
                    case '!=':
                      3 !== r.length &&
                        a.push(
                          new At(
                            n,
                            r,
                            'filter array for operator "' +
                              r[0] +
                              '" must have 3 elements'
                          )
                        )
                    case 'in':
                    case '!in':
                      r.length >= 2 &&
                        'string' !== (i = Ur(r[1])) &&
                        a.push(
                          new At(
                            n + '[1]',
                            r[1],
                            'string expected, ' + i + ' found'
                          )
                        )
                      for (var s = 2; s < r.length; s++)
                        (i = Ur(r[s])),
                          '$type' === Mt(r[1])
                            ? (a = a.concat(
                                sn({
                                  key: n + '[' + s + ']',
                                  value: r[s],
                                  valueSpec: o.geometry_type,
                                  style: e.style,
                                  styleSpec: e.styleSpec,
                                })
                              ))
                            : 'string' !== i &&
                              'number' !== i &&
                              'boolean' !== i &&
                              a.push(
                                new At(
                                  n + '[' + s + ']',
                                  r[s],
                                  'string, number, or boolean expected, ' +
                                    i +
                                    ' found'
                                )
                              )
                      break
                    case 'any':
                    case 'all':
                    case 'none':
                      for (var l = 1; l < r.length; l++)
                        a = a.concat(
                          t({
                            key: n + '[' + l + ']',
                            value: r[l],
                            style: e.style,
                            styleSpec: e.styleSpec,
                          })
                        )
                      break
                    case 'has':
                    case '!has':
                      ;(i = Ur(r[1])),
                        2 !== r.length
                          ? a.push(
                              new At(
                                n,
                                r,
                                'filter array for "' +
                                  r[0] +
                                  '" operator must have 2 elements'
                              )
                            )
                          : 'string' !== i &&
                            a.push(
                              new At(
                                n + '[1]',
                                r[1],
                                'string expected, ' + i + ' found'
                              )
                            )
                  }
                  return a
                })(t)
          }
          function gn(t, e) {
            var r = t.key,
              n = t.style,
              i = t.styleSpec,
              o = t.value,
              a = t.objectKey,
              s = i[e + '_' + t.layerType]
            if (!s) return []
            var l = a.match(/^(.*)-transition$/)
            if ('paint' === e && l && s[l[1]] && s[l[1]].transition)
              return Cn({
                key: r,
                value: o,
                valueSpec: i.transition,
                style: n,
                styleSpec: i,
              })
            var u,
              c = t.valueSpec || s[a]
            if (!c) return [new At(r, o, 'unknown property "' + a + '"')]
            if (
              'string' === Ur(o) &&
              Fr(c) &&
              !c.tokens &&
              (u = /^{([^}]+)}$/.exec(o))
            )
              return [
                new At(
                  r,
                  o,
                  '"' +
                    a +
                    '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' +
                    JSON.stringify(u[1]) +
                    ' }`.'
                ),
              ]
            var p = []
            return (
              'symbol' === t.layerType &&
                ('text-field' === a &&
                  n &&
                  !n.glyphs &&
                  p.push(
                    new At(
                      r,
                      o,
                      'use of "text-field" requires a style "glyphs" property'
                    )
                  ),
                'text-font' === a &&
                  jr(Lt(o)) &&
                  'identity' === Mt(o.type) &&
                  p.push(
                    new At(
                      r,
                      o,
                      '"text-font" does not support identity functions'
                    )
                  )),
              p.concat(
                Cn({
                  key: t.key,
                  value: o,
                  valueSpec: c,
                  style: n,
                  styleSpec: i,
                  expressionContext: 'property',
                  propertyType: e,
                  propertyKey: a,
                })
              )
            )
          }
          function _n(t) {
            return gn(t, 'paint')
          }
          function xn(t) {
            return gn(t, 'layout')
          }
          function bn(t) {
            var e = [],
              r = t.value,
              n = t.key,
              i = t.style,
              o = t.styleSpec
            r.type ||
              r.ref ||
              e.push(new At(n, r, 'either "type" or "ref" is required'))
            var a,
              s = Mt(r.type),
              l = Mt(r.ref)
            if (r.id)
              for (var u = Mt(r.id), c = 0; c < t.arrayIndex; c++) {
                var p = i.layers[c]
                Mt(p.id) === u &&
                  e.push(
                    new At(
                      n,
                      r.id,
                      'duplicate layer id "' +
                        r.id +
                        '", previously used at line ' +
                        p.id.__line__
                    )
                  )
              }
            if ('ref' in r)
              ['type', 'source', 'source-layer', 'filter', 'layout'].forEach(
                function (t) {
                  t in r &&
                    e.push(
                      new At(
                        n,
                        r[t],
                        '"' + t + '" is prohibited for ref layers'
                      )
                    )
                }
              ),
                i.layers.forEach(function (t) {
                  Mt(t.id) === l && (a = t)
                }),
                a
                  ? a.ref
                    ? e.push(
                        new At(
                          n,
                          r.ref,
                          'ref cannot reference another ref layer'
                        )
                      )
                    : (s = Mt(a.type))
                  : e.push(new At(n, r.ref, 'ref layer "' + l + '" not found'))
            else if ('background' !== s)
              if (r.source) {
                var h = i.sources && i.sources[r.source],
                  f = h && Mt(h.type)
                h
                  ? 'vector' === f && 'raster' === s
                    ? e.push(
                        new At(
                          n,
                          r.source,
                          'layer "' + r.id + '" requires a raster source'
                        )
                      )
                    : 'raster' === f && 'raster' !== s
                    ? e.push(
                        new At(
                          n,
                          r.source,
                          'layer "' + r.id + '" requires a vector source'
                        )
                      )
                    : 'vector' !== f || r['source-layer']
                    ? 'raster-dem' === f && 'hillshade' !== s
                      ? e.push(
                          new At(
                            n,
                            r.source,
                            "raster-dem source can only be used with layer type 'hillshade'."
                          )
                        )
                      : 'line' !== s ||
                        !r.paint ||
                        !r.paint['line-gradient'] ||
                        ('geojson' === f && h.lineMetrics) ||
                        e.push(
                          new At(
                            n,
                            r,
                            'layer "' +
                              r.id +
                              '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'
                          )
                        )
                    : e.push(
                        new At(
                          n,
                          r,
                          'layer "' + r.id + '" must specify a "source-layer"'
                        )
                      )
                  : e.push(
                      new At(n, r.source, 'source "' + r.source + '" not found')
                    )
              } else e.push(new At(n, r, 'missing required property "source"'))
            return (e = e.concat(
              en({
                key: n,
                value: r,
                valueSpec: o.layer,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                  '*': function () {
                    return []
                  },
                  type: function () {
                    return Cn({
                      key: n + '.type',
                      value: r.type,
                      valueSpec: o.layer.type,
                      style: t.style,
                      styleSpec: t.styleSpec,
                      object: r,
                      objectKey: 'type',
                    })
                  },
                  filter: vn,
                  layout: function (t) {
                    return en({
                      layer: r,
                      key: t.key,
                      value: t.value,
                      style: t.style,
                      styleSpec: t.styleSpec,
                      objectElementValidators: {
                        '*': function (t) {
                          return xn(Pt({ layerType: s }, t))
                        },
                      },
                    })
                  },
                  paint: function (t) {
                    return en({
                      layer: r,
                      key: t.key,
                      value: t.value,
                      style: t.style,
                      styleSpec: t.styleSpec,
                      objectElementValidators: {
                        '*': function (t) {
                          return _n(Pt({ layerType: s }, t))
                        },
                      },
                    })
                  },
                },
              })
            ))
          }
          function wn(t) {
            var e = t.value,
              r = t.key,
              n = Ur(e)
            return 'string' !== n
              ? [new At(r, e, 'string expected, ' + n + ' found')]
              : []
          }
          var En = {
            promoteId: function (t) {
              var e = t.key,
                r = t.value
              if ('string' === Ur(r)) return wn({ key: e, value: r })
              var n = []
              for (var i in r)
                n.push.apply(n, wn({ key: e + '.' + i, value: r[i] }))
              return n
            },
          }
          function Sn(t) {
            var e = t.value,
              r = t.key,
              n = t.styleSpec,
              i = t.style
            if (!e.type) return [new At(r, e, '"type" is required')]
            var o,
              a = Mt(e.type)
            switch (a) {
              case 'vector':
              case 'raster':
              case 'raster-dem':
                return en({
                  key: r,
                  value: e,
                  valueSpec: n['source_' + a.replace('-', '_')],
                  style: t.style,
                  styleSpec: n,
                  objectElementValidators: En,
                })
              case 'geojson':
                if (
                  ((o = en({
                    key: r,
                    value: e,
                    valueSpec: n.source_geojson,
                    style: i,
                    styleSpec: n,
                    objectElementValidators: En,
                  })),
                  e.cluster)
                )
                  for (var s in e.clusterProperties) {
                    var l = e.clusterProperties[s],
                      u = l[0],
                      c =
                        'string' == typeof u
                          ? [u, ['accumulated'], ['get', s]]
                          : u
                    o.push.apply(
                      o,
                      an({
                        key: r + '.' + s + '.map',
                        value: l[1],
                        expressionContext: 'cluster-map',
                      })
                    ),
                      o.push.apply(
                        o,
                        an({
                          key: r + '.' + s + '.reduce',
                          value: c,
                          expressionContext: 'cluster-reduce',
                        })
                      )
                  }
                return o
              case 'video':
                return en({
                  key: r,
                  value: e,
                  valueSpec: n.source_video,
                  style: i,
                  styleSpec: n,
                })
              case 'image':
                return en({
                  key: r,
                  value: e,
                  valueSpec: n.source_image,
                  style: i,
                  styleSpec: n,
                })
              case 'canvas':
                return [
                  new At(
                    r,
                    null,
                    'Please use runtime APIs to add canvas sources, rather than including them in stylesheets.',
                    'source.canvas'
                  ),
                ]
              default:
                return sn({
                  key: r + '.type',
                  value: e.type,
                  valueSpec: {
                    values: [
                      'vector',
                      'raster',
                      'raster-dem',
                      'geojson',
                      'video',
                      'image',
                    ],
                  },
                  style: i,
                  styleSpec: n,
                })
            }
          }
          function Tn(t) {
            var e = t.value,
              r = t.styleSpec,
              n = r.light,
              i = t.style,
              o = [],
              a = Ur(e)
            if (void 0 === e) return o
            if ('object' !== a)
              return o.concat([
                new At('light', e, 'object expected, ' + a + ' found'),
              ])
            for (var s in e) {
              var l = s.match(/^(.*)-transition$/)
              o = o.concat(
                l && n[l[1]] && n[l[1]].transition
                  ? Cn({
                      key: s,
                      value: e[s],
                      valueSpec: r.transition,
                      style: i,
                      styleSpec: r,
                    })
                  : n[s]
                  ? Cn({
                      key: s,
                      value: e[s],
                      valueSpec: n[s],
                      style: i,
                      styleSpec: r,
                    })
                  : [new At(s, e[s], 'unknown property "' + s + '"')]
              )
            }
            return o
          }
          var In = {
            '*': function () {
              return []
            },
            array: rn,
            boolean: function (t) {
              var e = t.value,
                r = t.key,
                n = Ur(e)
              return 'boolean' !== n
                ? [new At(r, e, 'boolean expected, ' + n + ' found')]
                : []
            },
            number: nn,
            color: function (t) {
              var e = t.key,
                r = t.value,
                n = Ur(r)
              return 'string' !== n
                ? [new At(e, r, 'color expected, ' + n + ' found')]
                : null === Wt(r)
                ? [new At(e, r, 'color expected, "' + r + '" found')]
                : []
            },
            constants: kt,
            enum: sn,
            filter: vn,
            function: on,
            layer: bn,
            object: en,
            source: Sn,
            light: Tn,
            string: wn,
            formatted: function (t) {
              return 0 === wn(t).length ? [] : an(t)
            },
            resolvedImage: function (t) {
              return 0 === wn(t).length ? [] : an(t)
            },
          }
          function Cn(t) {
            var e = t.value,
              r = t.valueSpec,
              n = t.styleSpec
            return r.expression && jr(Mt(e))
              ? on(t)
              : r.expression && Wr(Lt(e))
              ? an(t)
              : r.type && In[r.type]
              ? In[r.type](t)
              : en(Pt({}, t, { valueSpec: r.type ? n[r.type] : r }))
          }
          function An(t) {
            var e = t.value,
              r = t.key,
              n = wn(t)
            return (
              n.length ||
                (-1 === e.indexOf('{fontstack}') &&
                  n.push(
                    new At(
                      r,
                      e,
                      '"glyphs" url must include a "{fontstack}" token'
                    )
                  ),
                -1 === e.indexOf('{range}') &&
                  n.push(
                    new At(r, e, '"glyphs" url must include a "{range}" token')
                  )),
              n
            )
          }
          function kn(t, e) {
            void 0 === e && (e = Ct)
            var r = []
            return (
              (r = r.concat(
                Cn({
                  key: '',
                  value: t,
                  valueSpec: e.$root,
                  styleSpec: e,
                  style: t,
                  objectElementValidators: {
                    glyphs: An,
                    '*': function () {
                      return []
                    },
                  },
                })
              )),
              t.constants &&
                (r = r.concat(
                  kt({
                    key: 'constants',
                    value: t.constants,
                    style: t,
                    styleSpec: e,
                  })
                )),
              Pn(r)
            )
          }
          function Pn(t) {
            return [].concat(t).sort(function (t, e) {
              return t.line - e.line
            })
          }
          function Mn(t) {
            return function () {
              for (var e = [], r = arguments.length; r--; ) e[r] = arguments[r]
              return Pn(t.apply(this, e))
            }
          }
          ;(kn.source = Mn(Sn)),
            (kn.light = Mn(Tn)),
            (kn.layer = Mn(bn)),
            (kn.filter = Mn(vn)),
            (kn.paintProperty = Mn(_n)),
            (kn.layoutProperty = Mn(xn))
          var Ln = kn,
            zn = Ln.light,
            On = Ln.paintProperty,
            Dn = Ln.layoutProperty
          function Rn(t, e) {
            var r = !1
            if (e && e.length)
              for (var n = 0, i = e; n < i.length; n += 1)
                t.fire(new Tt(new Error(i[n].message))), (r = !0)
            return r
          }
          var Fn = Bn
          function Bn(t, e, r) {
            var n = (this.cells = [])
            if (t instanceof ArrayBuffer) {
              this.arrayBuffer = t
              var i = new Int32Array(this.arrayBuffer)
              ;(t = i[0]), (this.d = (e = i[1]) + 2 * (r = i[2]))
              for (var o = 0; o < this.d * this.d; o++) {
                var a = i[3 + o],
                  s = i[3 + o + 1]
                n.push(a === s ? null : i.subarray(a, s))
              }
              var l = i[3 + n.length + 1]
              ;(this.keys = i.subarray(i[3 + n.length], l)),
                (this.bboxes = i.subarray(l)),
                (this.insert = this._insertReadonly)
            } else {
              this.d = e + 2 * r
              for (var u = 0; u < this.d * this.d; u++) n.push([])
              ;(this.keys = []), (this.bboxes = [])
            }
            ;(this.n = e),
              (this.extent = t),
              (this.padding = r),
              (this.scale = e / t),
              (this.uid = 0)
            var c = (r / e) * t
            ;(this.min = -c), (this.max = t + c)
          }
          ;(Bn.prototype.insert = function (t, e, r, n, i) {
            this._forEachCell(e, r, n, i, this._insertCell, this.uid++),
              this.keys.push(t),
              this.bboxes.push(e),
              this.bboxes.push(r),
              this.bboxes.push(n),
              this.bboxes.push(i)
          }),
            (Bn.prototype._insertReadonly = function () {
              throw 'Cannot insert into a GridIndex created from an ArrayBuffer.'
            }),
            (Bn.prototype._insertCell = function (t, e, r, n, i, o) {
              this.cells[i].push(o)
            }),
            (Bn.prototype.query = function (t, e, r, n, i) {
              var o = this.min,
                a = this.max
              if (t <= o && e <= o && a <= r && a <= n && !i)
                return Array.prototype.slice.call(this.keys)
              var s = []
              return this._forEachCell(t, e, r, n, this._queryCell, s, {}, i), s
            }),
            (Bn.prototype._queryCell = function (t, e, r, n, i, o, a, s) {
              var l = this.cells[i]
              if (null !== l)
                for (
                  var u = this.keys, c = this.bboxes, p = 0;
                  p < l.length;
                  p++
                ) {
                  var h = l[p]
                  if (void 0 === a[h]) {
                    var f = 4 * h
                    ;(
                      s
                        ? s(c[f + 0], c[f + 1], c[f + 2], c[f + 3])
                        : t <= c[f + 2] &&
                          e <= c[f + 3] &&
                          r >= c[f + 0] &&
                          n >= c[f + 1]
                    )
                      ? ((a[h] = !0), o.push(u[h]))
                      : (a[h] = !1)
                  }
                }
            }),
            (Bn.prototype._forEachCell = function (t, e, r, n, i, o, a, s) {
              for (
                var l = this._convertToCellCoord(t),
                  u = this._convertToCellCoord(e),
                  c = this._convertToCellCoord(r),
                  p = this._convertToCellCoord(n),
                  h = l;
                h <= c;
                h++
              )
                for (var f = u; f <= p; f++) {
                  var d = this.d * f + h
                  if (
                    (!s ||
                      s(
                        this._convertFromCellCoord(h),
                        this._convertFromCellCoord(f),
                        this._convertFromCellCoord(h + 1),
                        this._convertFromCellCoord(f + 1)
                      )) &&
                    i.call(this, t, e, r, n, d, o, a, s)
                  )
                    return
                }
            }),
            (Bn.prototype._convertFromCellCoord = function (t) {
              return (t - this.padding) / this.scale
            }),
            (Bn.prototype._convertToCellCoord = function (t) {
              return Math.max(
                0,
                Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding)
              )
            }),
            (Bn.prototype.toArrayBuffer = function () {
              if (this.arrayBuffer) return this.arrayBuffer
              for (
                var t = this.cells,
                  e = 3 + this.cells.length + 1 + 1,
                  r = 0,
                  n = 0;
                n < this.cells.length;
                n++
              )
                r += this.cells[n].length
              var i = new Int32Array(
                e + r + this.keys.length + this.bboxes.length
              )
              ;(i[0] = this.extent), (i[1] = this.n), (i[2] = this.padding)
              for (var o = e, a = 0; a < t.length; a++) {
                var s = t[a]
                ;(i[3 + a] = o), i.set(s, o), (o += s.length)
              }
              return (
                (i[3 + t.length] = o),
                i.set(this.keys, o),
                (i[3 + t.length + 1] = o += this.keys.length),
                i.set(this.bboxes, o),
                (o += this.bboxes.length),
                i.buffer
              )
            })
          var Nn = self.ImageData,
            Un = self.ImageBitmap,
            jn = {}
          function Vn(t, e, r) {
            void 0 === r && (r = {}),
              Object.defineProperty(e, '_classRegistryKey', {
                value: t,
                writeable: !1,
              }),
              (jn[t] = {
                klass: e,
                omit: r.omit || [],
                shallow: r.shallow || [],
              })
          }
          for (var qn in (Vn('Object', Object),
          (Fn.serialize = function (t, e) {
            var r = t.toArrayBuffer()
            return e && e.push(r), { buffer: r }
          }),
          (Fn.deserialize = function (t) {
            return new Fn(t.buffer)
          }),
          Vn('Grid', Fn),
          Vn('Color', Ht),
          Vn('Error', Error),
          Vn('ResolvedImage', te),
          Vn('StylePropertyFunction', tn),
          Vn('StyleExpression', Kr, { omit: ['_evaluator'] }),
          Vn('ZoomDependentExpression', Yr),
          Vn('ZoomConstantExpression', Jr),
          Vn('CompoundExpression', me, { omit: ['_evaluate'] }),
          Pr))
            Pr[qn]._classRegistryKey || Vn('Expression_' + qn, Pr[qn])
          function Gn(t) {
            return (
              t &&
              'undefined' != typeof ArrayBuffer &&
              (t instanceof ArrayBuffer ||
                (t.constructor && 'ArrayBuffer' === t.constructor.name))
            )
          }
          function $n(t) {
            return Un && t instanceof Un
          }
          function Zn(t, e) {
            if (
              null == t ||
              'boolean' == typeof t ||
              'number' == typeof t ||
              'string' == typeof t ||
              t instanceof Boolean ||
              t instanceof Number ||
              t instanceof String ||
              t instanceof Date ||
              t instanceof RegExp
            )
              return t
            if (Gn(t) || $n(t)) return e && e.push(t), t
            if (ArrayBuffer.isView(t)) {
              var r = t
              return e && e.push(r.buffer), r
            }
            if (t instanceof Nn) return e && e.push(t.data.buffer), t
            if (Array.isArray(t)) {
              for (var n = [], i = 0, o = t; i < o.length; i += 1)
                n.push(Zn(o[i], e))
              return n
            }
            if ('object' == typeof t) {
              var a = t.constructor,
                s = a._classRegistryKey
              if (!s)
                throw new Error("can't serialize object of unregistered class")
              var l = a.serialize ? a.serialize(t, e) : {}
              if (!a.serialize) {
                for (var u in t)
                  if (t.hasOwnProperty(u) && !(jn[s].omit.indexOf(u) >= 0)) {
                    var c = t[u]
                    l[u] = jn[s].shallow.indexOf(u) >= 0 ? c : Zn(c, e)
                  }
                t instanceof Error && (l.message = t.message)
              }
              if (l.$name)
                throw new Error(
                  '$name property is reserved for worker serialization logic.'
                )
              return 'Object' !== s && (l.$name = s), l
            }
            throw new Error("can't serialize object of type " + typeof t)
          }
          function Xn(t) {
            if (
              null == t ||
              'boolean' == typeof t ||
              'number' == typeof t ||
              'string' == typeof t ||
              t instanceof Boolean ||
              t instanceof Number ||
              t instanceof String ||
              t instanceof Date ||
              t instanceof RegExp ||
              Gn(t) ||
              $n(t) ||
              ArrayBuffer.isView(t) ||
              t instanceof Nn
            )
              return t
            if (Array.isArray(t)) return t.map(Xn)
            if ('object' == typeof t) {
              var e = t.$name || 'Object',
                r = jn[e].klass
              if (!r)
                throw new Error("can't deserialize unregistered class " + e)
              if (r.deserialize) return r.deserialize(t)
              for (
                var n = Object.create(r.prototype), i = 0, o = Object.keys(t);
                i < o.length;
                i += 1
              ) {
                var a = o[i]
                if ('$name' !== a) {
                  var s = t[a]
                  n[a] = jn[e].shallow.indexOf(a) >= 0 ? s : Xn(s)
                }
              }
              return n
            }
            throw new Error("can't deserialize object of type " + typeof t)
          }
          var Kn = function () {
            this.first = !0
          }
          Kn.prototype.update = function (t, e) {
            var r = Math.floor(t)
            return this.first
              ? ((this.first = !1),
                (this.lastIntegerZoom = r),
                (this.lastIntegerZoomTime = 0),
                (this.lastZoom = t),
                (this.lastFloorZoom = r),
                !0)
              : (this.lastFloorZoom > r
                  ? ((this.lastIntegerZoom = r + 1),
                    (this.lastIntegerZoomTime = e))
                  : this.lastFloorZoom < r &&
                    ((this.lastIntegerZoom = r),
                    (this.lastIntegerZoomTime = e)),
                t !== this.lastZoom &&
                  ((this.lastZoom = t), (this.lastFloorZoom = r), !0))
          }
          var Wn = {
            'Latin-1 Supplement': function (t) {
              return t >= 128 && t <= 255
            },
            Arabic: function (t) {
              return t >= 1536 && t <= 1791
            },
            'Arabic Supplement': function (t) {
              return t >= 1872 && t <= 1919
            },
            'Arabic Extended-A': function (t) {
              return t >= 2208 && t <= 2303
            },
            'Hangul Jamo': function (t) {
              return t >= 4352 && t <= 4607
            },
            'Unified Canadian Aboriginal Syllabics': function (t) {
              return t >= 5120 && t <= 5759
            },
            Khmer: function (t) {
              return t >= 6016 && t <= 6143
            },
            'Unified Canadian Aboriginal Syllabics Extended': function (t) {
              return t >= 6320 && t <= 6399
            },
            'General Punctuation': function (t) {
              return t >= 8192 && t <= 8303
            },
            'Letterlike Symbols': function (t) {
              return t >= 8448 && t <= 8527
            },
            'Number Forms': function (t) {
              return t >= 8528 && t <= 8591
            },
            'Miscellaneous Technical': function (t) {
              return t >= 8960 && t <= 9215
            },
            'Control Pictures': function (t) {
              return t >= 9216 && t <= 9279
            },
            'Optical Character Recognition': function (t) {
              return t >= 9280 && t <= 9311
            },
            'Enclosed Alphanumerics': function (t) {
              return t >= 9312 && t <= 9471
            },
            'Geometric Shapes': function (t) {
              return t >= 9632 && t <= 9727
            },
            'Miscellaneous Symbols': function (t) {
              return t >= 9728 && t <= 9983
            },
            'Miscellaneous Symbols and Arrows': function (t) {
              return t >= 11008 && t <= 11263
            },
            'CJK Radicals Supplement': function (t) {
              return t >= 11904 && t <= 12031
            },
            'Kangxi Radicals': function (t) {
              return t >= 12032 && t <= 12255
            },
            'Ideographic Description Characters': function (t) {
              return t >= 12272 && t <= 12287
            },
            'CJK Symbols and Punctuation': function (t) {
              return t >= 12288 && t <= 12351
            },
            Hiragana: function (t) {
              return t >= 12352 && t <= 12447
            },
            Katakana: function (t) {
              return t >= 12448 && t <= 12543
            },
            Bopomofo: function (t) {
              return t >= 12544 && t <= 12591
            },
            'Hangul Compatibility Jamo': function (t) {
              return t >= 12592 && t <= 12687
            },
            Kanbun: function (t) {
              return t >= 12688 && t <= 12703
            },
            'Bopomofo Extended': function (t) {
              return t >= 12704 && t <= 12735
            },
            'CJK Strokes': function (t) {
              return t >= 12736 && t <= 12783
            },
            'Katakana Phonetic Extensions': function (t) {
              return t >= 12784 && t <= 12799
            },
            'Enclosed CJK Letters and Months': function (t) {
              return t >= 12800 && t <= 13055
            },
            'CJK Compatibility': function (t) {
              return t >= 13056 && t <= 13311
            },
            'CJK Unified Ideographs Extension A': function (t) {
              return t >= 13312 && t <= 19903
            },
            'Yijing Hexagram Symbols': function (t) {
              return t >= 19904 && t <= 19967
            },
            'CJK Unified Ideographs': function (t) {
              return t >= 19968 && t <= 40959
            },
            'Yi Syllables': function (t) {
              return t >= 40960 && t <= 42127
            },
            'Yi Radicals': function (t) {
              return t >= 42128 && t <= 42191
            },
            'Hangul Jamo Extended-A': function (t) {
              return t >= 43360 && t <= 43391
            },
            'Hangul Syllables': function (t) {
              return t >= 44032 && t <= 55215
            },
            'Hangul Jamo Extended-B': function (t) {
              return t >= 55216 && t <= 55295
            },
            'Private Use Area': function (t) {
              return t >= 57344 && t <= 63743
            },
            'CJK Compatibility Ideographs': function (t) {
              return t >= 63744 && t <= 64255
            },
            'Arabic Presentation Forms-A': function (t) {
              return t >= 64336 && t <= 65023
            },
            'Vertical Forms': function (t) {
              return t >= 65040 && t <= 65055
            },
            'CJK Compatibility Forms': function (t) {
              return t >= 65072 && t <= 65103
            },
            'Small Form Variants': function (t) {
              return t >= 65104 && t <= 65135
            },
            'Arabic Presentation Forms-B': function (t) {
              return t >= 65136 && t <= 65279
            },
            'Halfwidth and Fullwidth Forms': function (t) {
              return t >= 65280 && t <= 65519
            },
          }
          function Hn(t) {
            for (var e = 0, r = t; e < r.length; e += 1)
              if (Jn(r[e].charCodeAt(0))) return !0
            return !1
          }
          function Jn(t) {
            return !(
              746 !== t &&
              747 !== t &&
              (t < 4352 ||
                !(
                  Wn['Bopomofo Extended'](t) ||
                  Wn.Bopomofo(t) ||
                  (Wn['CJK Compatibility Forms'](t) &&
                    !(t >= 65097 && t <= 65103)) ||
                  Wn['CJK Compatibility Ideographs'](t) ||
                  Wn['CJK Compatibility'](t) ||
                  Wn['CJK Radicals Supplement'](t) ||
                  Wn['CJK Strokes'](t) ||
                  !(
                    !Wn['CJK Symbols and Punctuation'](t) ||
                    (t >= 12296 && t <= 12305) ||
                    (t >= 12308 && t <= 12319) ||
                    12336 === t
                  ) ||
                  Wn['CJK Unified Ideographs Extension A'](t) ||
                  Wn['CJK Unified Ideographs'](t) ||
                  Wn['Enclosed CJK Letters and Months'](t) ||
                  Wn['Hangul Compatibility Jamo'](t) ||
                  Wn['Hangul Jamo Extended-A'](t) ||
                  Wn['Hangul Jamo Extended-B'](t) ||
                  Wn['Hangul Jamo'](t) ||
                  Wn['Hangul Syllables'](t) ||
                  Wn.Hiragana(t) ||
                  Wn['Ideographic Description Characters'](t) ||
                  Wn.Kanbun(t) ||
                  Wn['Kangxi Radicals'](t) ||
                  Wn['Katakana Phonetic Extensions'](t) ||
                  (Wn.Katakana(t) && 12540 !== t) ||
                  !(
                    !Wn['Halfwidth and Fullwidth Forms'](t) ||
                    65288 === t ||
                    65289 === t ||
                    65293 === t ||
                    (t >= 65306 && t <= 65310) ||
                    65339 === t ||
                    65341 === t ||
                    65343 === t ||
                    (t >= 65371 && t <= 65503) ||
                    65507 === t ||
                    (t >= 65512 && t <= 65519)
                  ) ||
                  !(
                    !Wn['Small Form Variants'](t) ||
                    (t >= 65112 && t <= 65118) ||
                    (t >= 65123 && t <= 65126)
                  ) ||
                  Wn['Unified Canadian Aboriginal Syllabics'](t) ||
                  Wn['Unified Canadian Aboriginal Syllabics Extended'](t) ||
                  Wn['Vertical Forms'](t) ||
                  Wn['Yijing Hexagram Symbols'](t) ||
                  Wn['Yi Syllables'](t) ||
                  Wn['Yi Radicals'](t)
                ))
            )
          }
          function Yn(t) {
            return !(
              Jn(t) ||
              (function (t) {
                return !!(
                  (Wn['Latin-1 Supplement'](t) &&
                    (167 === t ||
                      169 === t ||
                      174 === t ||
                      177 === t ||
                      188 === t ||
                      189 === t ||
                      190 === t ||
                      215 === t ||
                      247 === t)) ||
                  (Wn['General Punctuation'](t) &&
                    (8214 === t ||
                      8224 === t ||
                      8225 === t ||
                      8240 === t ||
                      8241 === t ||
                      8251 === t ||
                      8252 === t ||
                      8258 === t ||
                      8263 === t ||
                      8264 === t ||
                      8265 === t ||
                      8273 === t)) ||
                  Wn['Letterlike Symbols'](t) ||
                  Wn['Number Forms'](t) ||
                  (Wn['Miscellaneous Technical'](t) &&
                    ((t >= 8960 && t <= 8967) ||
                      (t >= 8972 && t <= 8991) ||
                      (t >= 8996 && t <= 9e3) ||
                      9003 === t ||
                      (t >= 9085 && t <= 9114) ||
                      (t >= 9150 && t <= 9165) ||
                      9167 === t ||
                      (t >= 9169 && t <= 9179) ||
                      (t >= 9186 && t <= 9215))) ||
                  (Wn['Control Pictures'](t) && 9251 !== t) ||
                  Wn['Optical Character Recognition'](t) ||
                  Wn['Enclosed Alphanumerics'](t) ||
                  Wn['Geometric Shapes'](t) ||
                  (Wn['Miscellaneous Symbols'](t) &&
                    !(t >= 9754 && t <= 9759)) ||
                  (Wn['Miscellaneous Symbols and Arrows'](t) &&
                    ((t >= 11026 && t <= 11055) ||
                      (t >= 11088 && t <= 11097) ||
                      (t >= 11192 && t <= 11243))) ||
                  Wn['CJK Symbols and Punctuation'](t) ||
                  Wn.Katakana(t) ||
                  Wn['Private Use Area'](t) ||
                  Wn['CJK Compatibility Forms'](t) ||
                  Wn['Small Form Variants'](t) ||
                  Wn['Halfwidth and Fullwidth Forms'](t) ||
                  8734 === t ||
                  8756 === t ||
                  8757 === t ||
                  (t >= 9984 && t <= 10087) ||
                  (t >= 10102 && t <= 10131) ||
                  65532 === t ||
                  65533 === t
                )
              })(t)
            )
          }
          function Qn(t) {
            return (
              (t >= 1424 && t <= 2303) ||
              Wn['Arabic Presentation Forms-A'](t) ||
              Wn['Arabic Presentation Forms-B'](t)
            )
          }
          function ti(t, e) {
            return !(
              (!e && Qn(t)) ||
              (t >= 2304 && t <= 3583) ||
              (t >= 3840 && t <= 4255) ||
              Wn.Khmer(t)
            )
          }
          function ei(t) {
            for (var e = 0, r = t; e < r.length; e += 1)
              if (Qn(r[e].charCodeAt(0))) return !0
            return !1
          }
          var ri = null,
            ni = 'unavailable',
            ii = null,
            oi = function (t) {
              ri && ri(t)
            }
          function ai() {
            si.fire(
              new St('pluginStateChange', { pluginStatus: ni, pluginURL: ii })
            )
          }
          var si = new It(),
            li = function () {
              return ni
            },
            ui = function () {
              if ('deferred' !== ni || !ii)
                throw new Error(
                  'rtl-text-plugin cannot be downloaded unless a pluginURL is specified'
                )
              ;(ni = 'loading'),
                ai(),
                ii &&
                  _t({ url: ii }, function (t) {
                    t ? oi(t) : ((ni = 'loaded'), ai())
                  })
            },
            ci = {
              applyArabicShaping: null,
              processBidirectionalText: null,
              processStyledBidirectionalText: null,
              isLoaded: function () {
                return 'loaded' === ni || null != ci.applyArabicShaping
              },
              isLoading: function () {
                return 'loading' === ni
              },
              setState: function (t) {
                ;(ni = t.pluginStatus), (ii = t.pluginURL)
              },
              isParsed: function () {
                return (
                  null != ci.applyArabicShaping &&
                  null != ci.processBidirectionalText &&
                  null != ci.processStyledBidirectionalText
                )
              },
              getPluginURL: function () {
                return ii
              },
            },
            pi = function (t, e) {
              ;(this.zoom = t),
                e
                  ? ((this.now = e.now),
                    (this.fadeDuration = e.fadeDuration),
                    (this.zoomHistory = e.zoomHistory),
                    (this.transition = e.transition))
                  : ((this.now = 0),
                    (this.fadeDuration = 0),
                    (this.zoomHistory = new Kn()),
                    (this.transition = {}))
            }
          ;(pi.prototype.isSupportedScript = function (t) {
            return (function (t, e) {
              for (var r = 0, n = t; r < n.length; r += 1)
                if (!ti(n[r].charCodeAt(0), e)) return !1
              return !0
            })(t, ci.isLoaded())
          }),
            (pi.prototype.crossFadingFactor = function () {
              return 0 === this.fadeDuration
                ? 1
                : Math.min(
                    (this.now - this.zoomHistory.lastIntegerZoomTime) /
                      this.fadeDuration,
                    1
                  )
            }),
            (pi.prototype.getCrossfadeParameters = function () {
              var t = this.zoom,
                e = t - Math.floor(t),
                r = this.crossFadingFactor()
              return t > this.zoomHistory.lastIntegerZoom
                ? { fromScale: 2, toScale: 1, t: e + (1 - e) * r }
                : { fromScale: 0.5, toScale: 1, t: 1 - (1 - r) * e }
            })
          var hi = function (t, e) {
            ;(this.property = t),
              (this.value = e),
              (this.expression = (function (t, e) {
                if (jr(t)) return new tn(t, e)
                if (Wr(t)) {
                  var r = Qr(t, e)
                  if ('error' === r.result)
                    throw new Error(
                      r.value
                        .map(function (t) {
                          return t.key + ': ' + t.message
                        })
                        .join(', ')
                    )
                  return r.value
                }
                var n = t
                return (
                  'string' == typeof t &&
                    'color' === e.type &&
                    (n = Ht.parse(t)),
                  {
                    kind: 'constant',
                    evaluate: function () {
                      return n
                    },
                  }
                )
              })(void 0 === e ? t.specification.default : e, t.specification))
          }
          ;(hi.prototype.isDataDriven = function () {
            return (
              'source' === this.expression.kind ||
              'composite' === this.expression.kind
            )
          }),
            (hi.prototype.possiblyEvaluate = function (t, e, r) {
              return this.property.possiblyEvaluate(this, t, e, r)
            })
          var fi = function (t) {
            ;(this.property = t), (this.value = new hi(t, void 0))
          }
          ;(fi.prototype.transitioned = function (t, e) {
            return new mi(
              this.property,
              this.value,
              e,
              c({}, t.transition, this.transition),
              t.now
            )
          }),
            (fi.prototype.untransitioned = function () {
              return new mi(this.property, this.value, null, {}, 0)
            })
          var di = function (t) {
            ;(this._properties = t),
              (this._values = Object.create(
                t.defaultTransitionablePropertyValues
              ))
          }
          ;(di.prototype.getValue = function (t) {
            return _(this._values[t].value.value)
          }),
            (di.prototype.setValue = function (t, e) {
              this._values.hasOwnProperty(t) ||
                (this._values[t] = new fi(this._values[t].property)),
                (this._values[t].value = new hi(
                  this._values[t].property,
                  null === e ? void 0 : _(e)
                ))
            }),
            (di.prototype.getTransition = function (t) {
              return _(this._values[t].transition)
            }),
            (di.prototype.setTransition = function (t, e) {
              this._values.hasOwnProperty(t) ||
                (this._values[t] = new fi(this._values[t].property)),
                (this._values[t].transition = _(e) || void 0)
            }),
            (di.prototype.serialize = function () {
              for (
                var t = {}, e = 0, r = Object.keys(this._values);
                e < r.length;
                e += 1
              ) {
                var n = r[e],
                  i = this.getValue(n)
                void 0 !== i && (t[n] = i)
                var o = this.getTransition(n)
                void 0 !== o && (t[n + '-transition'] = o)
              }
              return t
            }),
            (di.prototype.transitioned = function (t, e) {
              for (
                var r = new yi(this._properties),
                  n = 0,
                  i = Object.keys(this._values);
                n < i.length;
                n += 1
              ) {
                var o = i[n]
                r._values[o] = this._values[o].transitioned(t, e._values[o])
              }
              return r
            }),
            (di.prototype.untransitioned = function () {
              for (
                var t = new yi(this._properties),
                  e = 0,
                  r = Object.keys(this._values);
                e < r.length;
                e += 1
              ) {
                var n = r[e]
                t._values[n] = this._values[n].untransitioned()
              }
              return t
            })
          var mi = function (t, e, r, n, i) {
            ;(this.property = t),
              (this.value = e),
              (this.begin = i + n.delay || 0),
              (this.end = this.begin + n.duration || 0),
              t.specification.transition &&
                (n.delay || n.duration) &&
                (this.prior = r)
          }
          mi.prototype.possiblyEvaluate = function (t, e, r) {
            var n = t.now || 0,
              i = this.value.possiblyEvaluate(t, e, r),
              o = this.prior
            if (o) {
              if (n > this.end) return (this.prior = null), i
              if (this.value.isDataDriven()) return (this.prior = null), i
              if (n < this.begin) return o.possiblyEvaluate(t, e, r)
              var a = (n - this.begin) / (this.end - this.begin)
              return this.property.interpolate(
                o.possiblyEvaluate(t, e, r),
                i,
                (function (t) {
                  if (t <= 0) return 0
                  if (t >= 1) return 1
                  var e = t * t,
                    r = e * t
                  return 4 * (t < 0.5 ? r : 3 * (t - e) + r - 0.75)
                })(a)
              )
            }
            return i
          }
          var yi = function (t) {
            ;(this._properties = t),
              (this._values = Object.create(
                t.defaultTransitioningPropertyValues
              ))
          }
          ;(yi.prototype.possiblyEvaluate = function (t, e) {
            for (
              var r = new _i(this._properties),
                n = 0,
                i = Object.keys(this._values);
              n < i.length;
              n += 1
            ) {
              var o = i[n]
              r._values[o] = this._values[o].possiblyEvaluate(t, e)
            }
            return r
          }),
            (yi.prototype.hasTransition = function () {
              for (
                var t = 0, e = Object.keys(this._values);
                t < e.length;
                t += 1
              )
                if (this._values[e[t]].prior) return !0
              return !1
            })
          var vi = function (t) {
            ;(this._properties = t),
              (this._values = Object.create(t.defaultPropertyValues))
          }
          ;(vi.prototype.getValue = function (t) {
            return _(this._values[t].value)
          }),
            (vi.prototype.setValue = function (t, e) {
              this._values[t] = new hi(
                this._values[t].property,
                null === e ? void 0 : _(e)
              )
            }),
            (vi.prototype.serialize = function () {
              for (
                var t = {}, e = 0, r = Object.keys(this._values);
                e < r.length;
                e += 1
              ) {
                var n = r[e],
                  i = this.getValue(n)
                void 0 !== i && (t[n] = i)
              }
              return t
            }),
            (vi.prototype.possiblyEvaluate = function (t, e) {
              for (
                var r = new _i(this._properties),
                  n = 0,
                  i = Object.keys(this._values);
                n < i.length;
                n += 1
              ) {
                var o = i[n]
                r._values[o] = this._values[o].possiblyEvaluate(t, e)
              }
              return r
            })
          var gi = function (t, e, r) {
            ;(this.property = t), (this.value = e), (this.parameters = r)
          }
          ;(gi.prototype.isConstant = function () {
            return 'constant' === this.value.kind
          }),
            (gi.prototype.constantOr = function (t) {
              return 'constant' === this.value.kind ? this.value.value : t
            }),
            (gi.prototype.evaluate = function (t, e, r, n) {
              return this.property.evaluate(
                this.value,
                this.parameters,
                t,
                e,
                r,
                n
              )
            })
          var _i = function (t) {
            ;(this._properties = t),
              (this._values = Object.create(t.defaultPossiblyEvaluatedValues))
          }
          _i.prototype.get = function (t) {
            return this._values[t]
          }
          var xi = function (t) {
            this.specification = t
          }
          ;(xi.prototype.possiblyEvaluate = function (t, e) {
            return t.expression.evaluate(e)
          }),
            (xi.prototype.interpolate = function (t, e, r) {
              var n = He[this.specification.type]
              return n ? n(t, e, r) : t
            })
          var bi = function (t, e) {
            ;(this.specification = t), (this.overrides = e)
          }
          ;(bi.prototype.possiblyEvaluate = function (t, e, r, n) {
            return new gi(
              this,
              'constant' === t.expression.kind || 'camera' === t.expression.kind
                ? {
                    kind: 'constant',
                    value: t.expression.evaluate(e, null, {}, r, n),
                  }
                : t.expression,
              e
            )
          }),
            (bi.prototype.interpolate = function (t, e, r) {
              if ('constant' !== t.value.kind || 'constant' !== e.value.kind)
                return t
              if (void 0 === t.value.value || void 0 === e.value.value)
                return new gi(
                  this,
                  { kind: 'constant', value: void 0 },
                  t.parameters
                )
              var n = He[this.specification.type]
              return n
                ? new gi(
                    this,
                    {
                      kind: 'constant',
                      value: n(t.value.value, e.value.value, r),
                    },
                    t.parameters
                  )
                : t
            }),
            (bi.prototype.evaluate = function (t, e, r, n, i, o) {
              return 'constant' === t.kind ? t.value : t.evaluate(e, r, n, i, o)
            })
          var wi = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.possiblyEvaluate = function (t, e, r, n) {
                  if (void 0 === t.value)
                    return new gi(this, { kind: 'constant', value: void 0 }, e)
                  if ('constant' === t.expression.kind) {
                    var i = t.expression.evaluate(e, null, {}, r, n),
                      o =
                        'resolvedImage' === t.property.specification.type &&
                        'string' != typeof i
                          ? i.name
                          : i,
                      a = this._calculate(o, o, o, e)
                    return new gi(this, { kind: 'constant', value: a }, e)
                  }
                  if ('camera' === t.expression.kind) {
                    var s = this._calculate(
                      t.expression.evaluate({ zoom: e.zoom - 1 }),
                      t.expression.evaluate({ zoom: e.zoom }),
                      t.expression.evaluate({ zoom: e.zoom + 1 }),
                      e
                    )
                    return new gi(this, { kind: 'constant', value: s }, e)
                  }
                  return new gi(this, t.expression, e)
                }),
                (e.prototype.evaluate = function (t, e, r, n, i, o) {
                  if ('source' === t.kind) {
                    var a = t.evaluate(e, r, n, i, o)
                    return this._calculate(a, a, a, e)
                  }
                  return 'composite' === t.kind
                    ? this._calculate(
                        t.evaluate({ zoom: Math.floor(e.zoom) - 1 }, r, n),
                        t.evaluate({ zoom: Math.floor(e.zoom) }, r, n),
                        t.evaluate({ zoom: Math.floor(e.zoom) + 1 }, r, n),
                        e
                      )
                    : t.value
                }),
                (e.prototype._calculate = function (t, e, r, n) {
                  return n.zoom > n.zoomHistory.lastIntegerZoom
                    ? { from: t, to: e }
                    : { from: r, to: e }
                }),
                (e.prototype.interpolate = function (t) {
                  return t
                }),
                e
              )
            })(bi),
            Ei = function (t) {
              this.specification = t
            }
          ;(Ei.prototype.possiblyEvaluate = function (t, e, r, n) {
            if (void 0 !== t.value) {
              if ('constant' === t.expression.kind) {
                var i = t.expression.evaluate(e, null, {}, r, n)
                return this._calculate(i, i, i, e)
              }
              return this._calculate(
                t.expression.evaluate(new pi(Math.floor(e.zoom - 1), e)),
                t.expression.evaluate(new pi(Math.floor(e.zoom), e)),
                t.expression.evaluate(new pi(Math.floor(e.zoom + 1), e)),
                e
              )
            }
          }),
            (Ei.prototype._calculate = function (t, e, r, n) {
              return n.zoom > n.zoomHistory.lastIntegerZoom
                ? { from: t, to: e }
                : { from: r, to: e }
            }),
            (Ei.prototype.interpolate = function (t) {
              return t
            })
          var Si = function (t) {
            this.specification = t
          }
          ;(Si.prototype.possiblyEvaluate = function (t, e, r, n) {
            return !!t.expression.evaluate(e, null, {}, r, n)
          }),
            (Si.prototype.interpolate = function () {
              return !1
            })
          var Ti = function (t) {
            for (var e in ((this.properties = t),
            (this.defaultPropertyValues = {}),
            (this.defaultTransitionablePropertyValues = {}),
            (this.defaultTransitioningPropertyValues = {}),
            (this.defaultPossiblyEvaluatedValues = {}),
            (this.overridableProperties = []),
            t)) {
              var r = t[e]
              r.specification.overridable && this.overridableProperties.push(e)
              var n = (this.defaultPropertyValues[e] = new hi(r, void 0)),
                i = (this.defaultTransitionablePropertyValues[e] = new fi(r))
              ;(this.defaultTransitioningPropertyValues[
                e
              ] = i.untransitioned()),
                (this.defaultPossiblyEvaluatedValues[e] = n.possiblyEvaluate(
                  {}
                ))
            }
          }
          Vn('DataDrivenProperty', bi),
            Vn('DataConstantProperty', xi),
            Vn('CrossFadedDataDrivenProperty', wi),
            Vn('CrossFadedProperty', Ei),
            Vn('ColorRampProperty', Si)
          var Ii = (function (t) {
              function e(e, r) {
                if (
                  (t.call(this),
                  (this.id = e.id),
                  (this.type = e.type),
                  (this._featureFilter = {
                    filter: function () {
                      return !0
                    },
                    needGeometry: !1,
                  }),
                  'custom' !== e.type &&
                    ((this.metadata = (e = e).metadata),
                    (this.minzoom = e.minzoom),
                    (this.maxzoom = e.maxzoom),
                    'background' !== e.type &&
                      ((this.source = e.source),
                      (this.sourceLayer = e['source-layer']),
                      (this.filter = e.filter)),
                    r.layout && (this._unevaluatedLayout = new vi(r.layout)),
                    r.paint))
                ) {
                  for (var n in ((this._transitionablePaint = new di(r.paint)),
                  e.paint))
                    this.setPaintProperty(n, e.paint[n], { validate: !1 })
                  for (var i in e.layout)
                    this.setLayoutProperty(i, e.layout[i], { validate: !1 })
                  this._transitioningPaint = this._transitionablePaint.untransitioned()
                }
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getCrossfadeParameters = function () {
                  return this._crossfadeParameters
                }),
                (e.prototype.getLayoutProperty = function (t) {
                  return 'visibility' === t
                    ? this.visibility
                    : this._unevaluatedLayout.getValue(t)
                }),
                (e.prototype.setLayoutProperty = function (t, e, r) {
                  void 0 === r && (r = {}),
                    (null != e &&
                      this._validate(
                        Dn,
                        'layers.' + this.id + '.layout.' + t,
                        t,
                        e,
                        r
                      )) ||
                      ('visibility' !== t
                        ? this._unevaluatedLayout.setValue(t, e)
                        : (this.visibility = e))
                }),
                (e.prototype.getPaintProperty = function (t) {
                  return y(t, '-transition')
                    ? this._transitionablePaint.getTransition(
                        t.slice(0, -'-transition'.length)
                      )
                    : this._transitionablePaint.getValue(t)
                }),
                (e.prototype.setPaintProperty = function (t, e, r) {
                  if (
                    (void 0 === r && (r = {}),
                    null != e &&
                      this._validate(
                        On,
                        'layers.' + this.id + '.paint.' + t,
                        t,
                        e,
                        r
                      ))
                  )
                    return !1
                  if (y(t, '-transition'))
                    return (
                      this._transitionablePaint.setTransition(
                        t.slice(0, -'-transition'.length),
                        e || void 0
                      ),
                      !1
                    )
                  var n = this._transitionablePaint._values[t],
                    i =
                      'cross-faded-data-driven' ===
                      n.property.specification['property-type'],
                    o = n.value.isDataDriven(),
                    a = n.value
                  this._transitionablePaint.setValue(t, e),
                    this._handleSpecialPaintPropertyUpdate(t)
                  var s = this._transitionablePaint._values[t].value
                  return (
                    s.isDataDriven() ||
                    o ||
                    i ||
                    this._handleOverridablePaintPropertyUpdate(t, a, s)
                  )
                }),
                (e.prototype._handleSpecialPaintPropertyUpdate = function (
                  t
                ) {}),
                (e.prototype._handleOverridablePaintPropertyUpdate = function (
                  t,
                  e,
                  r
                ) {
                  return !1
                }),
                (e.prototype.isHidden = function (t) {
                  return (
                    !!(this.minzoom && t < this.minzoom) ||
                    !!(this.maxzoom && t >= this.maxzoom) ||
                    'none' === this.visibility
                  )
                }),
                (e.prototype.updateTransitions = function (t) {
                  this._transitioningPaint = this._transitionablePaint.transitioned(
                    t,
                    this._transitioningPaint
                  )
                }),
                (e.prototype.hasTransition = function () {
                  return this._transitioningPaint.hasTransition()
                }),
                (e.prototype.recalculate = function (t, e) {
                  t.getCrossfadeParameters &&
                    (this._crossfadeParameters = t.getCrossfadeParameters()),
                    this._unevaluatedLayout &&
                      (this.layout = this._unevaluatedLayout.possiblyEvaluate(
                        t,
                        e
                      )),
                    (this.paint = this._transitioningPaint.possiblyEvaluate(
                      t,
                      e
                    ))
                }),
                (e.prototype.serialize = function () {
                  var t = {
                    id: this.id,
                    type: this.type,
                    source: this.source,
                    'source-layer': this.sourceLayer,
                    metadata: this.metadata,
                    minzoom: this.minzoom,
                    maxzoom: this.maxzoom,
                    filter: this.filter,
                    layout:
                      this._unevaluatedLayout &&
                      this._unevaluatedLayout.serialize(),
                    paint:
                      this._transitionablePaint &&
                      this._transitionablePaint.serialize(),
                  }
                  return (
                    this.visibility &&
                      ((t.layout = t.layout || {}),
                      (t.layout.visibility = this.visibility)),
                    g(t, function (t, e) {
                      return !(
                        void 0 === t ||
                        ('layout' === e && !Object.keys(t).length) ||
                        ('paint' === e && !Object.keys(t).length)
                      )
                    })
                  )
                }),
                (e.prototype._validate = function (t, e, r, n, i) {
                  return (
                    void 0 === i && (i = {}),
                    (!i || !1 !== i.validate) &&
                      Rn(
                        this,
                        t.call(Ln, {
                          key: e,
                          layerType: this.type,
                          objectKey: r,
                          value: n,
                          styleSpec: Ct,
                          style: { glyphs: !0, sprite: !0 },
                        })
                      )
                  )
                }),
                (e.prototype.is3D = function () {
                  return !1
                }),
                (e.prototype.isTileClipped = function () {
                  return !1
                }),
                (e.prototype.hasOffscreenPass = function () {
                  return !1
                }),
                (e.prototype.resize = function () {}),
                (e.prototype.isStateDependent = function () {
                  for (var t in this.paint._values) {
                    var e = this.paint.get(t)
                    if (
                      e instanceof gi &&
                      Fr(e.property.specification) &&
                      ('source' === e.value.kind ||
                        'composite' === e.value.kind) &&
                      e.value.isStateDependent
                    )
                      return !0
                  }
                  return !1
                }),
                e
              )
            })(It),
            Ci = {
              Int8: Int8Array,
              Uint8: Uint8Array,
              Int16: Int16Array,
              Uint16: Uint16Array,
              Int32: Int32Array,
              Uint32: Uint32Array,
              Float32: Float32Array,
            },
            Ai = function (t, e) {
              ;(this._structArray = t),
                (this._pos1 = e * this.size),
                (this._pos2 = this._pos1 / 2),
                (this._pos4 = this._pos1 / 4),
                (this._pos8 = this._pos1 / 8)
            },
            ki = function () {
              ;(this.isTransferred = !1), (this.capacity = -1), this.resize(0)
            }
          function Pi(t, e) {
            void 0 === e && (e = 1)
            var r = 0,
              n = 0
            return {
              members: t.map(function (t) {
                var i = Ci[t.type].BYTES_PER_ELEMENT,
                  o = (r = Mi(r, Math.max(e, i))),
                  a = t.components || 1
                return (
                  (n = Math.max(n, i)),
                  (r += i * a),
                  { name: t.name, type: t.type, components: a, offset: o }
                )
              }),
              size: Mi(r, Math.max(n, e)),
              alignment: e,
            }
          }
          function Mi(t, e) {
            return Math.ceil(t / e) * e
          }
          ;(ki.serialize = function (t, e) {
            return (
              t._trim(),
              e && ((t.isTransferred = !0), e.push(t.arrayBuffer)),
              { length: t.length, arrayBuffer: t.arrayBuffer }
            )
          }),
            (ki.deserialize = function (t) {
              var e = Object.create(this.prototype)
              return (
                (e.arrayBuffer = t.arrayBuffer),
                (e.length = t.length),
                (e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement),
                e._refreshViews(),
                e
              )
            }),
            (ki.prototype._trim = function () {
              this.length !== this.capacity &&
                ((this.capacity = this.length),
                (this.arrayBuffer = this.arrayBuffer.slice(
                  0,
                  this.length * this.bytesPerElement
                )),
                this._refreshViews())
            }),
            (ki.prototype.clear = function () {
              this.length = 0
            }),
            (ki.prototype.resize = function (t) {
              this.reserve(t), (this.length = t)
            }),
            (ki.prototype.reserve = function (t) {
              if (t > this.capacity) {
                ;(this.capacity = Math.max(
                  t,
                  Math.floor(5 * this.capacity),
                  128
                )),
                  (this.arrayBuffer = new ArrayBuffer(
                    this.capacity * this.bytesPerElement
                  ))
                var e = this.uint8
                this._refreshViews(), e && this.uint8.set(e)
              }
            }),
            (ki.prototype._refreshViews = function () {
              throw new Error(
                '_refreshViews() must be implemented by each concrete StructArray layout'
              )
            })
          var Li = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e) {
                var r = this.length
                return this.resize(r + 1), this.emplace(r, t, e)
              }),
              (e.prototype.emplace = function (t, e, r) {
                var n = 2 * t
                return (this.int16[n + 0] = e), (this.int16[n + 1] = r), t
              }),
              e
            )
          })(ki)
          ;(Li.prototype.bytesPerElement = 4), Vn('StructArrayLayout2i4', Li)
          var zi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n) {
                var i = this.length
                return this.resize(i + 1), this.emplace(i, t, e, r, n)
              }),
              (e.prototype.emplace = function (t, e, r, n, i) {
                var o = 4 * t
                return (
                  (this.int16[o + 0] = e),
                  (this.int16[o + 1] = r),
                  (this.int16[o + 2] = n),
                  (this.int16[o + 3] = i),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(zi.prototype.bytesPerElement = 8), Vn('StructArrayLayout4i8', zi)
          var Oi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n, i, o) {
                var a = this.length
                return this.resize(a + 1), this.emplace(a, t, e, r, n, i, o)
              }),
              (e.prototype.emplace = function (t, e, r, n, i, o, a) {
                var s = 6 * t
                return (
                  (this.int16[s + 0] = e),
                  (this.int16[s + 1] = r),
                  (this.int16[s + 2] = n),
                  (this.int16[s + 3] = i),
                  (this.int16[s + 4] = o),
                  (this.int16[s + 5] = a),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Oi.prototype.bytesPerElement = 12),
            Vn('StructArrayLayout2i4i12', Oi)
          var Di = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n, i, o) {
                var a = this.length
                return this.resize(a + 1), this.emplace(a, t, e, r, n, i, o)
              }),
              (e.prototype.emplace = function (t, e, r, n, i, o, a) {
                var s = 4 * t,
                  l = 8 * t
                return (
                  (this.int16[s + 0] = e),
                  (this.int16[s + 1] = r),
                  (this.uint8[l + 4] = n),
                  (this.uint8[l + 5] = i),
                  (this.uint8[l + 6] = o),
                  (this.uint8[l + 7] = a),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Di.prototype.bytesPerElement = 8), Vn('StructArrayLayout2i4ub8', Di)
          var Ri = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u
              ) {
                var c = this.length
                return (
                  this.resize(c + 1),
                  this.emplace(c, t, e, r, n, i, o, a, s, l, u)
                )
              }),
              (e.prototype.emplace = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c
              ) {
                var p = 9 * t,
                  h = 18 * t
                return (
                  (this.uint16[p + 0] = e),
                  (this.uint16[p + 1] = r),
                  (this.uint16[p + 2] = n),
                  (this.uint16[p + 3] = i),
                  (this.uint16[p + 4] = o),
                  (this.uint16[p + 5] = a),
                  (this.uint16[p + 6] = s),
                  (this.uint16[p + 7] = l),
                  (this.uint8[h + 16] = u),
                  (this.uint8[h + 17] = c),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Ri.prototype.bytesPerElement = 18),
            Vn('StructArrayLayout8ui2ub18', Ri)
          var Fi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p
              ) {
                var h = this.length
                return (
                  this.resize(h + 1),
                  this.emplace(h, t, e, r, n, i, o, a, s, l, u, c, p)
                )
              }),
              (e.prototype.emplace = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h
              ) {
                var f = 12 * t
                return (
                  (this.int16[f + 0] = e),
                  (this.int16[f + 1] = r),
                  (this.int16[f + 2] = n),
                  (this.int16[f + 3] = i),
                  (this.uint16[f + 4] = o),
                  (this.uint16[f + 5] = a),
                  (this.uint16[f + 6] = s),
                  (this.uint16[f + 7] = l),
                  (this.int16[f + 8] = u),
                  (this.int16[f + 9] = c),
                  (this.int16[f + 10] = p),
                  (this.int16[f + 11] = h),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Fi.prototype.bytesPerElement = 24),
            Vn('StructArrayLayout4i4ui4i24', Fi)
          var Bi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r) {
                var n = this.length
                return this.resize(n + 1), this.emplace(n, t, e, r)
              }),
              (e.prototype.emplace = function (t, e, r, n) {
                var i = 3 * t
                return (
                  (this.float32[i + 0] = e),
                  (this.float32[i + 1] = r),
                  (this.float32[i + 2] = n),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Bi.prototype.bytesPerElement = 12), Vn('StructArrayLayout3f12', Bi)
          var Ni = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint32 = new Uint32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t) {
                var e = this.length
                return this.resize(e + 1), this.emplace(e, t)
              }),
              (e.prototype.emplace = function (t, e) {
                return (this.uint32[1 * t + 0] = e), t
              }),
              e
            )
          })(ki)
          ;(Ni.prototype.bytesPerElement = 4), Vn('StructArrayLayout1ul4', Ni)
          var Ui = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer)),
                  (this.uint32 = new Uint32Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c
              ) {
                var p = this.length
                return (
                  this.resize(p + 1),
                  this.emplace(p, t, e, r, n, i, o, a, s, l, u, c)
                )
              }),
              (e.prototype.emplace = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p
              ) {
                var h = 12 * t,
                  f = 6 * t
                return (
                  (this.int16[h + 0] = e),
                  (this.int16[h + 1] = r),
                  (this.int16[h + 2] = n),
                  (this.int16[h + 3] = i),
                  (this.int16[h + 4] = o),
                  (this.int16[h + 5] = a),
                  (this.uint32[f + 3] = s),
                  (this.uint16[h + 8] = l),
                  (this.uint16[h + 9] = u),
                  (this.int16[h + 10] = c),
                  (this.int16[h + 11] = p),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Ui.prototype.bytesPerElement = 24),
            Vn('StructArrayLayout6i1ul2ui2i24', Ui)
          var ji = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n, i, o) {
                var a = this.length
                return this.resize(a + 1), this.emplace(a, t, e, r, n, i, o)
              }),
              (e.prototype.emplace = function (t, e, r, n, i, o, a) {
                var s = 6 * t
                return (
                  (this.int16[s + 0] = e),
                  (this.int16[s + 1] = r),
                  (this.int16[s + 2] = n),
                  (this.int16[s + 3] = i),
                  (this.int16[s + 4] = o),
                  (this.int16[s + 5] = a),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(ji.prototype.bytesPerElement = 12),
            Vn('StructArrayLayout2i2i2i12', ji)
          var Vi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n) {
                var i = this.length
                return this.resize(i + 1), this.emplace(i, t, e, r, n)
              }),
              (e.prototype.emplace = function (t, e, r, n, i) {
                var o = 12 * t,
                  a = 3 * t
                return (
                  (this.uint8[o + 0] = e),
                  (this.uint8[o + 1] = r),
                  (this.float32[a + 1] = n),
                  (this.float32[a + 2] = i),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Vi.prototype.bytesPerElement = 12),
            Vn('StructArrayLayout2ub2f12', Vi)
          var qi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer)),
                  (this.uint32 = new Uint32Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h,
                f,
                d,
                m,
                y
              ) {
                var v = this.length
                return (
                  this.resize(v + 1),
                  this.emplace(
                    v,
                    t,
                    e,
                    r,
                    n,
                    i,
                    o,
                    a,
                    s,
                    l,
                    u,
                    c,
                    p,
                    h,
                    f,
                    d,
                    m,
                    y
                  )
                )
              }),
              (e.prototype.emplace = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h,
                f,
                d,
                m,
                y,
                v
              ) {
                var g = 24 * t,
                  _ = 12 * t,
                  x = 48 * t
                return (
                  (this.int16[g + 0] = e),
                  (this.int16[g + 1] = r),
                  (this.uint16[g + 2] = n),
                  (this.uint16[g + 3] = i),
                  (this.uint32[_ + 2] = o),
                  (this.uint32[_ + 3] = a),
                  (this.uint32[_ + 4] = s),
                  (this.uint16[g + 10] = l),
                  (this.uint16[g + 11] = u),
                  (this.uint16[g + 12] = c),
                  (this.float32[_ + 7] = p),
                  (this.float32[_ + 8] = h),
                  (this.uint8[x + 36] = f),
                  (this.uint8[x + 37] = d),
                  (this.uint8[x + 38] = m),
                  (this.uint32[_ + 10] = y),
                  (this.int16[g + 22] = v),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(qi.prototype.bytesPerElement = 48),
            Vn('StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48', qi)
          var Gi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer)),
                  (this.uint32 = new Uint32Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h,
                f,
                d,
                m,
                y,
                v,
                g,
                _,
                x,
                b,
                w,
                E,
                S,
                T
              ) {
                var I = this.length
                return (
                  this.resize(I + 1),
                  this.emplace(
                    I,
                    t,
                    e,
                    r,
                    n,
                    i,
                    o,
                    a,
                    s,
                    l,
                    u,
                    c,
                    p,
                    h,
                    f,
                    d,
                    m,
                    y,
                    v,
                    g,
                    _,
                    x,
                    b,
                    w,
                    E,
                    S,
                    T
                  )
                )
              }),
              (e.prototype.emplace = function (
                t,
                e,
                r,
                n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h,
                f,
                d,
                m,
                y,
                v,
                g,
                _,
                x,
                b,
                w,
                E,
                S,
                T,
                I
              ) {
                var C = 30 * t,
                  A = 15 * t
                return (
                  (this.int16[C + 0] = e),
                  (this.int16[C + 1] = r),
                  (this.int16[C + 2] = n),
                  (this.int16[C + 3] = i),
                  (this.int16[C + 4] = o),
                  (this.int16[C + 5] = a),
                  (this.int16[C + 6] = s),
                  (this.int16[C + 7] = l),
                  (this.uint16[C + 8] = u),
                  (this.uint16[C + 9] = c),
                  (this.uint16[C + 10] = p),
                  (this.uint16[C + 11] = h),
                  (this.uint16[C + 12] = f),
                  (this.uint16[C + 13] = d),
                  (this.uint16[C + 14] = m),
                  (this.uint16[C + 15] = y),
                  (this.uint16[C + 16] = v),
                  (this.uint16[C + 17] = g),
                  (this.uint16[C + 18] = _),
                  (this.uint16[C + 19] = x),
                  (this.uint16[C + 20] = b),
                  (this.uint16[C + 21] = w),
                  (this.uint32[A + 11] = E),
                  (this.float32[A + 12] = S),
                  (this.float32[A + 13] = T),
                  (this.float32[A + 14] = I),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Gi.prototype.bytesPerElement = 60),
            Vn('StructArrayLayout8i14ui1ul3f60', Gi)
          var $i = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t) {
                var e = this.length
                return this.resize(e + 1), this.emplace(e, t)
              }),
              (e.prototype.emplace = function (t, e) {
                return (this.float32[1 * t + 0] = e), t
              }),
              e
            )
          })(ki)
          ;($i.prototype.bytesPerElement = 4), Vn('StructArrayLayout1f4', $i)
          var Zi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.int16 = new Int16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r) {
                var n = this.length
                return this.resize(n + 1), this.emplace(n, t, e, r)
              }),
              (e.prototype.emplace = function (t, e, r, n) {
                var i = 3 * t
                return (
                  (this.int16[i + 0] = e),
                  (this.int16[i + 1] = r),
                  (this.int16[i + 2] = n),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Zi.prototype.bytesPerElement = 6), Vn('StructArrayLayout3i6', Zi)
          var Xi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint32 = new Uint32Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r) {
                var n = this.length
                return this.resize(n + 1), this.emplace(n, t, e, r)
              }),
              (e.prototype.emplace = function (t, e, r, n) {
                var i = 4 * t
                return (
                  (this.uint32[2 * t + 0] = e),
                  (this.uint16[i + 2] = r),
                  (this.uint16[i + 3] = n),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Xi.prototype.bytesPerElement = 8),
            Vn('StructArrayLayout1ul2ui8', Xi)
          var Ki = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r) {
                var n = this.length
                return this.resize(n + 1), this.emplace(n, t, e, r)
              }),
              (e.prototype.emplace = function (t, e, r, n) {
                var i = 3 * t
                return (
                  (this.uint16[i + 0] = e),
                  (this.uint16[i + 1] = r),
                  (this.uint16[i + 2] = n),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Ki.prototype.bytesPerElement = 6), Vn('StructArrayLayout3ui6', Ki)
          var Wi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e) {
                var r = this.length
                return this.resize(r + 1), this.emplace(r, t, e)
              }),
              (e.prototype.emplace = function (t, e, r) {
                var n = 2 * t
                return (this.uint16[n + 0] = e), (this.uint16[n + 1] = r), t
              }),
              e
            )
          })(ki)
          ;(Wi.prototype.bytesPerElement = 4), Vn('StructArrayLayout2ui4', Wi)
          var Hi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.uint16 = new Uint16Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t) {
                var e = this.length
                return this.resize(e + 1), this.emplace(e, t)
              }),
              (e.prototype.emplace = function (t, e) {
                return (this.uint16[1 * t + 0] = e), t
              }),
              e
            )
          })(ki)
          ;(Hi.prototype.bytesPerElement = 2), Vn('StructArrayLayout1ui2', Hi)
          var Ji = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e) {
                var r = this.length
                return this.resize(r + 1), this.emplace(r, t, e)
              }),
              (e.prototype.emplace = function (t, e, r) {
                var n = 2 * t
                return (this.float32[n + 0] = e), (this.float32[n + 1] = r), t
              }),
              e
            )
          })(ki)
          ;(Ji.prototype.bytesPerElement = 8), Vn('StructArrayLayout2f8', Ji)
          var Yi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._refreshViews = function () {
                ;(this.uint8 = new Uint8Array(this.arrayBuffer)),
                  (this.float32 = new Float32Array(this.arrayBuffer))
              }),
              (e.prototype.emplaceBack = function (t, e, r, n) {
                var i = this.length
                return this.resize(i + 1), this.emplace(i, t, e, r, n)
              }),
              (e.prototype.emplace = function (t, e, r, n, i) {
                var o = 4 * t
                return (
                  (this.float32[o + 0] = e),
                  (this.float32[o + 1] = r),
                  (this.float32[o + 2] = n),
                  (this.float32[o + 3] = i),
                  t
                )
              }),
              e
            )
          })(ki)
          ;(Yi.prototype.bytesPerElement = 16), Vn('StructArrayLayout4f16', Yi)
          var Qi = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e)
            var r = {
              anchorPointX: { configurable: !0 },
              anchorPointY: { configurable: !0 },
              x1: { configurable: !0 },
              y1: { configurable: !0 },
              x2: { configurable: !0 },
              y2: { configurable: !0 },
              featureIndex: { configurable: !0 },
              sourceLayerIndex: { configurable: !0 },
              bucketIndex: { configurable: !0 },
              radius: { configurable: !0 },
              signedDistanceFromAnchor: { configurable: !0 },
              anchorPoint: { configurable: !0 },
            }
            return (
              (r.anchorPointX.get = function () {
                return this._structArray.int16[this._pos2 + 0]
              }),
              (r.anchorPointY.get = function () {
                return this._structArray.int16[this._pos2 + 1]
              }),
              (r.x1.get = function () {
                return this._structArray.int16[this._pos2 + 2]
              }),
              (r.y1.get = function () {
                return this._structArray.int16[this._pos2 + 3]
              }),
              (r.x2.get = function () {
                return this._structArray.int16[this._pos2 + 4]
              }),
              (r.y2.get = function () {
                return this._structArray.int16[this._pos2 + 5]
              }),
              (r.featureIndex.get = function () {
                return this._structArray.uint32[this._pos4 + 3]
              }),
              (r.sourceLayerIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 8]
              }),
              (r.bucketIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 9]
              }),
              (r.radius.get = function () {
                return this._structArray.int16[this._pos2 + 10]
              }),
              (r.signedDistanceFromAnchor.get = function () {
                return this._structArray.int16[this._pos2 + 11]
              }),
              (r.anchorPoint.get = function () {
                return new i(this.anchorPointX, this.anchorPointY)
              }),
              Object.defineProperties(e.prototype, r),
              e
            )
          })(Ai)
          Qi.prototype.size = 24
          var to = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.get = function (t) {
                return new Qi(this, t)
              }),
              e
            )
          })(Ui)
          Vn('CollisionBoxArray', to)
          var eo = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e)
            var r = {
              anchorX: { configurable: !0 },
              anchorY: { configurable: !0 },
              glyphStartIndex: { configurable: !0 },
              numGlyphs: { configurable: !0 },
              vertexStartIndex: { configurable: !0 },
              lineStartIndex: { configurable: !0 },
              lineLength: { configurable: !0 },
              segment: { configurable: !0 },
              lowerSize: { configurable: !0 },
              upperSize: { configurable: !0 },
              lineOffsetX: { configurable: !0 },
              lineOffsetY: { configurable: !0 },
              writingMode: { configurable: !0 },
              placedOrientation: { configurable: !0 },
              hidden: { configurable: !0 },
              crossTileID: { configurable: !0 },
              associatedIconIndex: { configurable: !0 },
            }
            return (
              (r.anchorX.get = function () {
                return this._structArray.int16[this._pos2 + 0]
              }),
              (r.anchorY.get = function () {
                return this._structArray.int16[this._pos2 + 1]
              }),
              (r.glyphStartIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 2]
              }),
              (r.numGlyphs.get = function () {
                return this._structArray.uint16[this._pos2 + 3]
              }),
              (r.vertexStartIndex.get = function () {
                return this._structArray.uint32[this._pos4 + 2]
              }),
              (r.lineStartIndex.get = function () {
                return this._structArray.uint32[this._pos4 + 3]
              }),
              (r.lineLength.get = function () {
                return this._structArray.uint32[this._pos4 + 4]
              }),
              (r.segment.get = function () {
                return this._structArray.uint16[this._pos2 + 10]
              }),
              (r.lowerSize.get = function () {
                return this._structArray.uint16[this._pos2 + 11]
              }),
              (r.upperSize.get = function () {
                return this._structArray.uint16[this._pos2 + 12]
              }),
              (r.lineOffsetX.get = function () {
                return this._structArray.float32[this._pos4 + 7]
              }),
              (r.lineOffsetY.get = function () {
                return this._structArray.float32[this._pos4 + 8]
              }),
              (r.writingMode.get = function () {
                return this._structArray.uint8[this._pos1 + 36]
              }),
              (r.placedOrientation.get = function () {
                return this._structArray.uint8[this._pos1 + 37]
              }),
              (r.placedOrientation.set = function (t) {
                this._structArray.uint8[this._pos1 + 37] = t
              }),
              (r.hidden.get = function () {
                return this._structArray.uint8[this._pos1 + 38]
              }),
              (r.hidden.set = function (t) {
                this._structArray.uint8[this._pos1 + 38] = t
              }),
              (r.crossTileID.get = function () {
                return this._structArray.uint32[this._pos4 + 10]
              }),
              (r.crossTileID.set = function (t) {
                this._structArray.uint32[this._pos4 + 10] = t
              }),
              (r.associatedIconIndex.get = function () {
                return this._structArray.int16[this._pos2 + 22]
              }),
              Object.defineProperties(e.prototype, r),
              e
            )
          })(Ai)
          eo.prototype.size = 48
          var ro = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.get = function (t) {
                return new eo(this, t)
              }),
              e
            )
          })(qi)
          Vn('PlacedSymbolArray', ro)
          var no = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e)
            var r = {
              anchorX: { configurable: !0 },
              anchorY: { configurable: !0 },
              rightJustifiedTextSymbolIndex: { configurable: !0 },
              centerJustifiedTextSymbolIndex: { configurable: !0 },
              leftJustifiedTextSymbolIndex: { configurable: !0 },
              verticalPlacedTextSymbolIndex: { configurable: !0 },
              placedIconSymbolIndex: { configurable: !0 },
              verticalPlacedIconSymbolIndex: { configurable: !0 },
              key: { configurable: !0 },
              textBoxStartIndex: { configurable: !0 },
              textBoxEndIndex: { configurable: !0 },
              verticalTextBoxStartIndex: { configurable: !0 },
              verticalTextBoxEndIndex: { configurable: !0 },
              iconBoxStartIndex: { configurable: !0 },
              iconBoxEndIndex: { configurable: !0 },
              verticalIconBoxStartIndex: { configurable: !0 },
              verticalIconBoxEndIndex: { configurable: !0 },
              featureIndex: { configurable: !0 },
              numHorizontalGlyphVertices: { configurable: !0 },
              numVerticalGlyphVertices: { configurable: !0 },
              numIconVertices: { configurable: !0 },
              numVerticalIconVertices: { configurable: !0 },
              crossTileID: { configurable: !0 },
              textBoxScale: { configurable: !0 },
              textOffset0: { configurable: !0 },
              textOffset1: { configurable: !0 },
            }
            return (
              (r.anchorX.get = function () {
                return this._structArray.int16[this._pos2 + 0]
              }),
              (r.anchorY.get = function () {
                return this._structArray.int16[this._pos2 + 1]
              }),
              (r.rightJustifiedTextSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 2]
              }),
              (r.centerJustifiedTextSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 3]
              }),
              (r.leftJustifiedTextSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 4]
              }),
              (r.verticalPlacedTextSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 5]
              }),
              (r.placedIconSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 6]
              }),
              (r.verticalPlacedIconSymbolIndex.get = function () {
                return this._structArray.int16[this._pos2 + 7]
              }),
              (r.key.get = function () {
                return this._structArray.uint16[this._pos2 + 8]
              }),
              (r.textBoxStartIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 9]
              }),
              (r.textBoxEndIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 10]
              }),
              (r.verticalTextBoxStartIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 11]
              }),
              (r.verticalTextBoxEndIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 12]
              }),
              (r.iconBoxStartIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 13]
              }),
              (r.iconBoxEndIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 14]
              }),
              (r.verticalIconBoxStartIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 15]
              }),
              (r.verticalIconBoxEndIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 16]
              }),
              (r.featureIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 17]
              }),
              (r.numHorizontalGlyphVertices.get = function () {
                return this._structArray.uint16[this._pos2 + 18]
              }),
              (r.numVerticalGlyphVertices.get = function () {
                return this._structArray.uint16[this._pos2 + 19]
              }),
              (r.numIconVertices.get = function () {
                return this._structArray.uint16[this._pos2 + 20]
              }),
              (r.numVerticalIconVertices.get = function () {
                return this._structArray.uint16[this._pos2 + 21]
              }),
              (r.crossTileID.get = function () {
                return this._structArray.uint32[this._pos4 + 11]
              }),
              (r.crossTileID.set = function (t) {
                this._structArray.uint32[this._pos4 + 11] = t
              }),
              (r.textBoxScale.get = function () {
                return this._structArray.float32[this._pos4 + 12]
              }),
              (r.textOffset0.get = function () {
                return this._structArray.float32[this._pos4 + 13]
              }),
              (r.textOffset1.get = function () {
                return this._structArray.float32[this._pos4 + 14]
              }),
              Object.defineProperties(e.prototype, r),
              e
            )
          })(Ai)
          no.prototype.size = 60
          var io = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.get = function (t) {
                return new no(this, t)
              }),
              e
            )
          })(Gi)
          Vn('SymbolInstanceArray', io)
          var oo = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.getoffsetX = function (t) {
                return this.float32[1 * t + 0]
              }),
              e
            )
          })($i)
          Vn('GlyphOffsetArray', oo)
          var ao = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.getx = function (t) {
                return this.int16[3 * t + 0]
              }),
              (e.prototype.gety = function (t) {
                return this.int16[3 * t + 1]
              }),
              (e.prototype.gettileUnitDistanceFromAnchor = function (t) {
                return this.int16[3 * t + 2]
              }),
              e
            )
          })(Zi)
          Vn('SymbolLineVertexArray', ao)
          var so = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e)
            var r = {
              featureIndex: { configurable: !0 },
              sourceLayerIndex: { configurable: !0 },
              bucketIndex: { configurable: !0 },
            }
            return (
              (r.featureIndex.get = function () {
                return this._structArray.uint32[this._pos4 + 0]
              }),
              (r.sourceLayerIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 2]
              }),
              (r.bucketIndex.get = function () {
                return this._structArray.uint16[this._pos2 + 3]
              }),
              Object.defineProperties(e.prototype, r),
              e
            )
          })(Ai)
          so.prototype.size = 8
          var lo = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.get = function (t) {
                return new so(this, t)
              }),
              e
            )
          })(Xi)
          Vn('FeatureIndexArray', lo)
          var uo = Pi([{ name: 'a_pos', components: 2, type: 'Int16' }], 4)
              .members,
            co = function (t) {
              void 0 === t && (t = []), (this.segments = t)
            }
          function po(t, e) {
            return (
              256 * (t = l(Math.floor(t), 0, 255)) + l(Math.floor(e), 0, 255)
            )
          }
          ;(co.prototype.prepareSegment = function (t, e, r, n) {
            var i = this.segments[this.segments.length - 1]
            return (
              t > co.MAX_VERTEX_ARRAY_LENGTH &&
                b(
                  'Max vertices per segment is ' +
                    co.MAX_VERTEX_ARRAY_LENGTH +
                    ': bucket requested ' +
                    t
                ),
              (!i ||
                i.vertexLength + t > co.MAX_VERTEX_ARRAY_LENGTH ||
                i.sortKey !== n) &&
                ((i = {
                  vertexOffset: e.length,
                  primitiveOffset: r.length,
                  vertexLength: 0,
                  primitiveLength: 0,
                }),
                void 0 !== n && (i.sortKey = n),
                this.segments.push(i)),
              i
            )
          }),
            (co.prototype.get = function () {
              return this.segments
            }),
            (co.prototype.destroy = function () {
              for (var t = 0, e = this.segments; t < e.length; t += 1) {
                var r = e[t]
                for (var n in r.vaos) r.vaos[n].destroy()
              }
            }),
            (co.simpleSegment = function (t, e, r, n) {
              return new co([
                {
                  vertexOffset: t,
                  primitiveOffset: e,
                  vertexLength: r,
                  primitiveLength: n,
                  vaos: {},
                  sortKey: 0,
                },
              ])
            }),
            (co.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1),
            Vn('SegmentVector', co)
          var ho = Pi([
              { name: 'a_pattern_from', components: 4, type: 'Uint16' },
              { name: 'a_pattern_to', components: 4, type: 'Uint16' },
              { name: 'a_pixel_ratio_from', components: 1, type: 'Uint8' },
              { name: 'a_pixel_ratio_to', components: 1, type: 'Uint8' },
            ]),
            fo = e(function (t) {
              t.exports = function (t, e) {
                var r, n, i, o, a, s, l, u
                for (
                  n = t.length - (r = 3 & t.length),
                    i = e,
                    a = 3432918353,
                    s = 461845907,
                    u = 0;
                  u < n;

                )
                  (l =
                    (255 & t.charCodeAt(u)) |
                    ((255 & t.charCodeAt(++u)) << 8) |
                    ((255 & t.charCodeAt(++u)) << 16) |
                    ((255 & t.charCodeAt(++u)) << 24)),
                    ++u,
                    (i =
                      27492 +
                      (65535 &
                        (o =
                          (5 *
                            (65535 &
                              (i =
                                ((i ^= l =
                                  ((65535 &
                                    (l =
                                      ((l =
                                        ((65535 & l) * a +
                                          ((((l >>> 16) * a) & 65535) << 16)) &
                                        4294967295) <<
                                        15) |
                                      (l >>> 17))) *
                                    s +
                                    ((((l >>> 16) * s) & 65535) << 16)) &
                                  4294967295) <<
                                  13) |
                                (i >>> 19))) +
                            (((5 * (i >>> 16)) & 65535) << 16)) &
                          4294967295)) +
                      (((58964 + (o >>> 16)) & 65535) << 16))
                switch (((l = 0), r)) {
                  case 3:
                    l ^= (255 & t.charCodeAt(u + 2)) << 16
                  case 2:
                    l ^= (255 & t.charCodeAt(u + 1)) << 8
                  case 1:
                    i ^= l =
                      ((65535 &
                        (l =
                          ((l =
                            ((65535 & (l ^= 255 & t.charCodeAt(u))) * a +
                              ((((l >>> 16) * a) & 65535) << 16)) &
                            4294967295) <<
                            15) |
                          (l >>> 17))) *
                        s +
                        ((((l >>> 16) * s) & 65535) << 16)) &
                      4294967295
                }
                return (
                  (i ^= t.length),
                  (i =
                    (2246822507 * (65535 & (i ^= i >>> 16)) +
                      (((2246822507 * (i >>> 16)) & 65535) << 16)) &
                    4294967295),
                  (i =
                    (3266489909 * (65535 & (i ^= i >>> 13)) +
                      (((3266489909 * (i >>> 16)) & 65535) << 16)) &
                    4294967295),
                  (i ^= i >>> 16) >>> 0
                )
              }
            }),
            mo = e(function (t) {
              t.exports = function (t, e) {
                for (var r, n = t.length, i = e ^ n, o = 0; n >= 4; )
                  (r =
                    1540483477 *
                      (65535 &
                        (r =
                          (255 & t.charCodeAt(o)) |
                          ((255 & t.charCodeAt(++o)) << 8) |
                          ((255 & t.charCodeAt(++o)) << 16) |
                          ((255 & t.charCodeAt(++o)) << 24))) +
                    (((1540483477 * (r >>> 16)) & 65535) << 16)),
                    (i =
                      (1540483477 * (65535 & i) +
                        (((1540483477 * (i >>> 16)) & 65535) << 16)) ^
                      (r =
                        1540483477 * (65535 & (r ^= r >>> 24)) +
                        (((1540483477 * (r >>> 16)) & 65535) << 16))),
                    (n -= 4),
                    ++o
                switch (n) {
                  case 3:
                    i ^= (255 & t.charCodeAt(o + 2)) << 16
                  case 2:
                    i ^= (255 & t.charCodeAt(o + 1)) << 8
                  case 1:
                    i =
                      1540483477 * (65535 & (i ^= 255 & t.charCodeAt(o))) +
                      (((1540483477 * (i >>> 16)) & 65535) << 16)
                }
                return (
                  (i =
                    1540483477 * (65535 & (i ^= i >>> 13)) +
                    (((1540483477 * (i >>> 16)) & 65535) << 16)),
                  (i ^= i >>> 15) >>> 0
                )
              }
            }),
            yo = fo,
            vo = mo
          ;(yo.murmur3 = fo), (yo.murmur2 = vo)
          var go = function () {
            ;(this.ids = []), (this.positions = []), (this.indexed = !1)
          }
          ;(go.prototype.add = function (t, e, r, n) {
            this.ids.push(xo(t)), this.positions.push(e, r, n)
          }),
            (go.prototype.getPositions = function (t) {
              for (var e = xo(t), r = 0, n = this.ids.length - 1; r < n; ) {
                var i = (r + n) >> 1
                this.ids[i] >= e ? (n = i) : (r = i + 1)
              }
              for (var o = []; this.ids[r] === e; )
                o.push({
                  index: this.positions[3 * r],
                  start: this.positions[3 * r + 1],
                  end: this.positions[3 * r + 2],
                }),
                  r++
              return o
            }),
            (go.serialize = function (t, e) {
              var r = new Float64Array(t.ids),
                n = new Uint32Array(t.positions)
              return (
                (function t(e, r, n, i) {
                  if (!(n >= i)) {
                    for (var o = e[(n + i) >> 1], a = n - 1, s = i + 1; ; ) {
                      do {
                        a++
                      } while (e[a] < o)
                      do {
                        s--
                      } while (e[s] > o)
                      if (a >= s) break
                      bo(e, a, s),
                        bo(r, 3 * a, 3 * s),
                        bo(r, 3 * a + 1, 3 * s + 1),
                        bo(r, 3 * a + 2, 3 * s + 2)
                    }
                    t(e, r, n, s), t(e, r, s + 1, i)
                  }
                })(r, n, 0, r.length - 1),
                e && e.push(r.buffer, n.buffer),
                { ids: r, positions: n }
              )
            }),
            (go.deserialize = function (t) {
              var e = new go()
              return (
                (e.ids = t.ids),
                (e.positions = t.positions),
                (e.indexed = !0),
                e
              )
            })
          var _o = Math.pow(2, 53) - 1
          function xo(t) {
            var e = +t
            return !isNaN(e) && e <= _o ? e : yo(String(t))
          }
          function bo(t, e, r) {
            var n = t[e]
            ;(t[e] = t[r]), (t[r] = n)
          }
          Vn('FeaturePositionMap', go)
          var wo = function (t, e) {
              ;(this.gl = t.gl), (this.location = e)
            },
            Eo = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = 0)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  this.current !== t &&
                    ((this.current = t), this.gl.uniform1i(this.location, t))
                }),
                e
              )
            })(wo),
            So = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = 0)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  this.current !== t &&
                    ((this.current = t), this.gl.uniform1f(this.location, t))
                }),
                e
              )
            })(wo),
            To = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = [0, 0])
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  ;(t[0] === this.current[0] && t[1] === this.current[1]) ||
                    ((this.current = t),
                    this.gl.uniform2f(this.location, t[0], t[1]))
                }),
                e
              )
            })(wo),
            Io = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = [0, 0, 0])
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  ;(t[0] === this.current[0] &&
                    t[1] === this.current[1] &&
                    t[2] === this.current[2]) ||
                    ((this.current = t),
                    this.gl.uniform3f(this.location, t[0], t[1], t[2]))
                }),
                e
              )
            })(wo),
            Co = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = [0, 0, 0, 0])
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  ;(t[0] === this.current[0] &&
                    t[1] === this.current[1] &&
                    t[2] === this.current[2] &&
                    t[3] === this.current[3]) ||
                    ((this.current = t),
                    this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]))
                }),
                e
              )
            })(wo),
            Ao = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = Ht.transparent)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  ;(t.r === this.current.r &&
                    t.g === this.current.g &&
                    t.b === this.current.b &&
                    t.a === this.current.a) ||
                    ((this.current = t),
                    this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a))
                }),
                e
              )
            })(wo),
            ko = new Float32Array(16),
            Po = (function (t) {
              function e(e, r) {
                t.call(this, e, r), (this.current = ko)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  if (t[12] !== this.current[12] || t[0] !== this.current[0])
                    return (
                      (this.current = t),
                      void this.gl.uniformMatrix4fv(this.location, !1, t)
                    )
                  for (var e = 1; e < 16; e++)
                    if (t[e] !== this.current[e]) {
                      ;(this.current = t),
                        this.gl.uniformMatrix4fv(this.location, !1, t)
                      break
                    }
                }),
                e
              )
            })(wo)
          function Mo(t) {
            return [po(255 * t.r, 255 * t.g), po(255 * t.b, 255 * t.a)]
          }
          var Lo = function (t, e, r) {
            ;(this.value = t),
              (this.uniformNames = e.map(function (t) {
                return 'u_' + t
              })),
              (this.type = r)
          }
          ;(Lo.prototype.setUniform = function (t, e, r) {
            t.set(r.constantOr(this.value))
          }),
            (Lo.prototype.getBinding = function (t, e, r) {
              return 'color' === this.type ? new Ao(t, e) : new So(t, e)
            })
          var zo = function (t, e) {
            ;(this.uniformNames = e.map(function (t) {
              return 'u_' + t
            })),
              (this.patternFrom = null),
              (this.patternTo = null),
              (this.pixelRatioFrom = 1),
              (this.pixelRatioTo = 1)
          }
          ;(zo.prototype.setConstantPatternPositions = function (t, e) {
            ;(this.pixelRatioFrom = e.pixelRatio),
              (this.pixelRatioTo = t.pixelRatio),
              (this.patternFrom = e.tlbr),
              (this.patternTo = t.tlbr)
          }),
            (zo.prototype.setUniform = function (t, e, r, n) {
              var i =
                'u_pattern_to' === n
                  ? this.patternTo
                  : 'u_pattern_from' === n
                  ? this.patternFrom
                  : 'u_pixel_ratio_to' === n
                  ? this.pixelRatioTo
                  : 'u_pixel_ratio_from' === n
                  ? this.pixelRatioFrom
                  : null
              i && t.set(i)
            }),
            (zo.prototype.getBinding = function (t, e, r) {
              return 'u_pattern' === r.substr(0, 9)
                ? new Co(t, e)
                : new So(t, e)
            })
          var Oo = function (t, e, r, n) {
            ;(this.expression = t),
              (this.type = r),
              (this.maxValue = 0),
              (this.paintVertexAttributes = e.map(function (t) {
                return {
                  name: 'a_' + t,
                  type: 'Float32',
                  components: 'color' === r ? 2 : 1,
                  offset: 0,
                }
              })),
              (this.paintVertexArray = new n())
          }
          ;(Oo.prototype.populatePaintArray = function (t, e, r, n, i) {
            var o = this.paintVertexArray.length,
              a = this.expression.evaluate(new pi(0), e, {}, n, [], i)
            this.paintVertexArray.resize(t), this._setPaintValue(o, t, a)
          }),
            (Oo.prototype.updatePaintArray = function (t, e, r, n) {
              var i = this.expression.evaluate({ zoom: 0 }, r, n)
              this._setPaintValue(t, e, i)
            }),
            (Oo.prototype._setPaintValue = function (t, e, r) {
              if ('color' === this.type)
                for (var n = Mo(r), i = t; i < e; i++)
                  this.paintVertexArray.emplace(i, n[0], n[1])
              else {
                for (var o = t; o < e; o++) this.paintVertexArray.emplace(o, r)
                this.maxValue = Math.max(this.maxValue, Math.abs(r))
              }
            }),
            (Oo.prototype.upload = function (t) {
              this.paintVertexArray &&
                this.paintVertexArray.arrayBuffer &&
                (this.paintVertexBuffer && this.paintVertexBuffer.buffer
                  ? this.paintVertexBuffer.updateData(this.paintVertexArray)
                  : (this.paintVertexBuffer = t.createVertexBuffer(
                      this.paintVertexArray,
                      this.paintVertexAttributes,
                      this.expression.isStateDependent
                    )))
            }),
            (Oo.prototype.destroy = function () {
              this.paintVertexBuffer && this.paintVertexBuffer.destroy()
            })
          var Do = function (t, e, r, n, i, o) {
            ;(this.expression = t),
              (this.uniformNames = e.map(function (t) {
                return 'u_' + t + '_t'
              })),
              (this.type = r),
              (this.useIntegerZoom = n),
              (this.zoom = i),
              (this.maxValue = 0),
              (this.paintVertexAttributes = e.map(function (t) {
                return {
                  name: 'a_' + t,
                  type: 'Float32',
                  components: 'color' === r ? 4 : 2,
                  offset: 0,
                }
              })),
              (this.paintVertexArray = new o())
          }
          ;(Do.prototype.populatePaintArray = function (t, e, r, n, i) {
            var o = this.expression.evaluate(
                new pi(this.zoom),
                e,
                {},
                n,
                [],
                i
              ),
              a = this.expression.evaluate(
                new pi(this.zoom + 1),
                e,
                {},
                n,
                [],
                i
              ),
              s = this.paintVertexArray.length
            this.paintVertexArray.resize(t), this._setPaintValue(s, t, o, a)
          }),
            (Do.prototype.updatePaintArray = function (t, e, r, n) {
              var i = this.expression.evaluate({ zoom: this.zoom }, r, n),
                o = this.expression.evaluate({ zoom: this.zoom + 1 }, r, n)
              this._setPaintValue(t, e, i, o)
            }),
            (Do.prototype._setPaintValue = function (t, e, r, n) {
              if ('color' === this.type)
                for (var i = Mo(r), o = Mo(n), a = t; a < e; a++)
                  this.paintVertexArray.emplace(a, i[0], i[1], o[0], o[1])
              else {
                for (var s = t; s < e; s++)
                  this.paintVertexArray.emplace(s, r, n)
                this.maxValue = Math.max(
                  this.maxValue,
                  Math.abs(r),
                  Math.abs(n)
                )
              }
            }),
            (Do.prototype.upload = function (t) {
              this.paintVertexArray &&
                this.paintVertexArray.arrayBuffer &&
                (this.paintVertexBuffer && this.paintVertexBuffer.buffer
                  ? this.paintVertexBuffer.updateData(this.paintVertexArray)
                  : (this.paintVertexBuffer = t.createVertexBuffer(
                      this.paintVertexArray,
                      this.paintVertexAttributes,
                      this.expression.isStateDependent
                    )))
            }),
            (Do.prototype.destroy = function () {
              this.paintVertexBuffer && this.paintVertexBuffer.destroy()
            }),
            (Do.prototype.setUniform = function (t, e) {
              var r = this.useIntegerZoom ? Math.floor(e.zoom) : e.zoom,
                n = l(
                  this.expression.interpolationFactor(
                    r,
                    this.zoom,
                    this.zoom + 1
                  ),
                  0,
                  1
                )
              t.set(n)
            }),
            (Do.prototype.getBinding = function (t, e, r) {
              return new So(t, e)
            })
          var Ro = function (t, e, r, n, i, o) {
            ;(this.expression = t),
              (this.type = e),
              (this.useIntegerZoom = r),
              (this.zoom = n),
              (this.layerId = o),
              (this.zoomInPaintVertexArray = new i()),
              (this.zoomOutPaintVertexArray = new i())
          }
          ;(Ro.prototype.populatePaintArray = function (t, e, r) {
            var n = this.zoomInPaintVertexArray.length
            this.zoomInPaintVertexArray.resize(t),
              this.zoomOutPaintVertexArray.resize(t),
              this._setPaintValues(
                n,
                t,
                e.patterns && e.patterns[this.layerId],
                r
              )
          }),
            (Ro.prototype.updatePaintArray = function (t, e, r, n, i) {
              this._setPaintValues(
                t,
                e,
                r.patterns && r.patterns[this.layerId],
                i
              )
            }),
            (Ro.prototype._setPaintValues = function (t, e, r, n) {
              if (n && r) {
                var i = n[r.min],
                  o = n[r.mid],
                  a = n[r.max]
                if (i && o && a)
                  for (var s = t; s < e; s++)
                    this.zoomInPaintVertexArray.emplace(
                      s,
                      o.tl[0],
                      o.tl[1],
                      o.br[0],
                      o.br[1],
                      i.tl[0],
                      i.tl[1],
                      i.br[0],
                      i.br[1],
                      o.pixelRatio,
                      i.pixelRatio
                    ),
                      this.zoomOutPaintVertexArray.emplace(
                        s,
                        o.tl[0],
                        o.tl[1],
                        o.br[0],
                        o.br[1],
                        a.tl[0],
                        a.tl[1],
                        a.br[0],
                        a.br[1],
                        o.pixelRatio,
                        a.pixelRatio
                      )
              }
            }),
            (Ro.prototype.upload = function (t) {
              this.zoomInPaintVertexArray &&
                this.zoomInPaintVertexArray.arrayBuffer &&
                this.zoomOutPaintVertexArray &&
                this.zoomOutPaintVertexArray.arrayBuffer &&
                ((this.zoomInPaintVertexBuffer = t.createVertexBuffer(
                  this.zoomInPaintVertexArray,
                  ho.members,
                  this.expression.isStateDependent
                )),
                (this.zoomOutPaintVertexBuffer = t.createVertexBuffer(
                  this.zoomOutPaintVertexArray,
                  ho.members,
                  this.expression.isStateDependent
                )))
            }),
            (Ro.prototype.destroy = function () {
              this.zoomOutPaintVertexBuffer &&
                this.zoomOutPaintVertexBuffer.destroy(),
                this.zoomInPaintVertexBuffer &&
                  this.zoomInPaintVertexBuffer.destroy()
            })
          var Fo = function (t, e, r, n) {
            ;(this.binders = {}),
              (this.layoutAttributes = n),
              (this._buffers = [])
            var i = []
            for (var o in t.paint._values)
              if (r(o)) {
                var a = t.paint.get(o)
                if (a instanceof gi && Fr(a.property.specification)) {
                  var s = No(o, t.type),
                    l = a.value,
                    u = a.property.specification.type,
                    c = a.property.useIntegerZoom,
                    p = a.property.specification['property-type'],
                    h = 'cross-faded' === p || 'cross-faded-data-driven' === p
                  if ('constant' === l.kind)
                    (this.binders[o] = h
                      ? new zo(l.value, s)
                      : new Lo(l.value, s, u)),
                      i.push('/u_' + o)
                  else if ('source' === l.kind || h) {
                    var f = Uo(o, u, 'source')
                    ;(this.binders[o] = h
                      ? new Ro(l, u, c, e, f, t.id)
                      : new Oo(l, s, u, f)),
                      i.push('/a_' + o)
                  } else {
                    var d = Uo(o, u, 'composite')
                    ;(this.binders[o] = new Do(l, s, u, c, e, d)),
                      i.push('/z_' + o)
                  }
                }
              }
            this.cacheKey = i.sort().join('')
          }
          ;(Fo.prototype.getMaxValue = function (t) {
            var e = this.binders[t]
            return e instanceof Oo || e instanceof Do ? e.maxValue : 0
          }),
            (Fo.prototype.populatePaintArrays = function (t, e, r, n, i) {
              for (var o in this.binders) {
                var a = this.binders[o]
                ;(a instanceof Oo || a instanceof Do || a instanceof Ro) &&
                  a.populatePaintArray(t, e, r, n, i)
              }
            }),
            (Fo.prototype.setConstantPatternPositions = function (t, e) {
              for (var r in this.binders) {
                var n = this.binders[r]
                n instanceof zo && n.setConstantPatternPositions(t, e)
              }
            }),
            (Fo.prototype.updatePaintArrays = function (t, e, r, n, i) {
              var o = !1
              for (var a in t)
                for (var s = 0, l = e.getPositions(a); s < l.length; s += 1) {
                  var u = l[s],
                    c = r.feature(u.index)
                  for (var p in this.binders) {
                    var h = this.binders[p]
                    if (
                      (h instanceof Oo || h instanceof Do || h instanceof Ro) &&
                      !0 === h.expression.isStateDependent
                    ) {
                      var f = n.paint.get(p)
                      ;(h.expression = f.value),
                        h.updatePaintArray(u.start, u.end, c, t[a], i),
                        (o = !0)
                    }
                  }
                }
              return o
            }),
            (Fo.prototype.defines = function () {
              var t = []
              for (var e in this.binders) {
                var r = this.binders[e]
                ;(r instanceof Lo || r instanceof zo) &&
                  t.push.apply(
                    t,
                    r.uniformNames.map(function (t) {
                      return '#define HAS_UNIFORM_' + t
                    })
                  )
              }
              return t
            }),
            (Fo.prototype.getPaintVertexBuffers = function () {
              return this._buffers
            }),
            (Fo.prototype.getUniforms = function (t, e) {
              var r = []
              for (var n in this.binders) {
                var i = this.binders[n]
                if (i instanceof Lo || i instanceof zo || i instanceof Do)
                  for (var o = 0, a = i.uniformNames; o < a.length; o += 1) {
                    var s = a[o]
                    if (e[s]) {
                      var l = i.getBinding(t, e[s], s)
                      r.push({ name: s, property: n, binding: l })
                    }
                  }
              }
              return r
            }),
            (Fo.prototype.setUniforms = function (t, e, r, n) {
              for (var i = 0, o = e; i < o.length; i += 1) {
                var a = o[i],
                  s = a.name,
                  l = a.property
                this.binders[l].setUniform(a.binding, n, r.get(l), s)
              }
            }),
            (Fo.prototype.updatePaintBuffers = function (t) {
              for (var e in ((this._buffers = []), this.binders)) {
                var r = this.binders[e]
                if (t && r instanceof Ro) {
                  var n =
                    2 === t.fromScale
                      ? r.zoomInPaintVertexBuffer
                      : r.zoomOutPaintVertexBuffer
                  n && this._buffers.push(n)
                } else
                  (r instanceof Oo || r instanceof Do) &&
                    r.paintVertexBuffer &&
                    this._buffers.push(r.paintVertexBuffer)
              }
            }),
            (Fo.prototype.upload = function (t) {
              for (var e in this.binders) {
                var r = this.binders[e]
                ;(r instanceof Oo || r instanceof Do || r instanceof Ro) &&
                  r.upload(t)
              }
              this.updatePaintBuffers()
            }),
            (Fo.prototype.destroy = function () {
              for (var t in this.binders) {
                var e = this.binders[t]
                ;(e instanceof Oo || e instanceof Do || e instanceof Ro) &&
                  e.destroy()
              }
            })
          var Bo = function (t, e, r, n) {
            void 0 === n &&
              (n = function () {
                return !0
              }),
              (this.programConfigurations = {})
            for (var i = 0, o = e; i < o.length; i += 1) {
              var a = o[i]
              this.programConfigurations[a.id] = new Fo(a, r, n, t)
            }
            ;(this.needsUpload = !1),
              (this._featureMap = new go()),
              (this._bufferOffset = 0)
          }
          function No(t, e) {
            return (
              {
                'text-opacity': ['opacity'],
                'icon-opacity': ['opacity'],
                'text-color': ['fill_color'],
                'icon-color': ['fill_color'],
                'text-halo-color': ['halo_color'],
                'icon-halo-color': ['halo_color'],
                'text-halo-blur': ['halo_blur'],
                'icon-halo-blur': ['halo_blur'],
                'text-halo-width': ['halo_width'],
                'icon-halo-width': ['halo_width'],
                'line-gap-width': ['gapwidth'],
                'line-pattern': [
                  'pattern_to',
                  'pattern_from',
                  'pixel_ratio_to',
                  'pixel_ratio_from',
                ],
                'fill-pattern': [
                  'pattern_to',
                  'pattern_from',
                  'pixel_ratio_to',
                  'pixel_ratio_from',
                ],
                'fill-extrusion-pattern': [
                  'pattern_to',
                  'pattern_from',
                  'pixel_ratio_to',
                  'pixel_ratio_from',
                ],
              }[t] || [t.replace(e + '-', '').replace(/-/g, '_')]
            )
          }
          function Uo(t, e, r) {
            var n = {
                color: { source: Ji, composite: Yi },
                number: { source: $i, composite: Ji },
              },
              i = (function (t) {
                return {
                  'line-pattern': { source: Ri, composite: Ri },
                  'fill-pattern': { source: Ri, composite: Ri },
                  'fill-extrusion-pattern': { source: Ri, composite: Ri },
                }[t]
              })(t)
            return (i && i[r]) || n[e][r]
          }
          ;(Bo.prototype.populatePaintArrays = function (t, e, r, n, i, o) {
            for (var a in this.programConfigurations)
              this.programConfigurations[a].populatePaintArrays(t, e, n, i, o)
            void 0 !== e.id &&
              this._featureMap.add(e.id, r, this._bufferOffset, t),
              (this._bufferOffset = t),
              (this.needsUpload = !0)
          }),
            (Bo.prototype.updatePaintArrays = function (t, e, r, n) {
              for (var i = 0, o = r; i < o.length; i += 1) {
                var a = o[i]
                this.needsUpload =
                  this.programConfigurations[a.id].updatePaintArrays(
                    t,
                    this._featureMap,
                    e,
                    a,
                    n
                  ) || this.needsUpload
              }
            }),
            (Bo.prototype.get = function (t) {
              return this.programConfigurations[t]
            }),
            (Bo.prototype.upload = function (t) {
              if (this.needsUpload) {
                for (var e in this.programConfigurations)
                  this.programConfigurations[e].upload(t)
                this.needsUpload = !1
              }
            }),
            (Bo.prototype.destroy = function () {
              for (var t in this.programConfigurations)
                this.programConfigurations[t].destroy()
            }),
            Vn('ConstantBinder', Lo),
            Vn('CrossFadedConstantBinder', zo),
            Vn('SourceExpressionBinder', Oo),
            Vn('CrossFadedCompositeBinder', Ro),
            Vn('CompositeExpressionBinder', Do),
            Vn('ProgramConfiguration', Fo, { omit: ['_buffers'] }),
            Vn('ProgramConfigurationSet', Bo)
          var jo = { min: -1 * Math.pow(2, 14), max: Math.pow(2, 14) - 1 }
          function Vo(t) {
            for (
              var e = Ie / t.extent, r = t.loadGeometry(), n = 0;
              n < r.length;
              n++
            )
              for (var i = r[n], o = 0; o < i.length; o++) {
                var a = i[o]
                ;(a.x = Math.round(a.x * e)),
                  (a.y = Math.round(a.y * e)),
                  (a.x < jo.min ||
                    a.x > jo.max ||
                    a.y < jo.min ||
                    a.y > jo.max) &&
                    (b(
                      'Geometry exceeds allowed extent, reduce your vector tile buffer size'
                    ),
                    (a.x = l(a.x, jo.min, jo.max)),
                    (a.y = l(a.y, jo.min, jo.max)))
              }
            return r
          }
          function qo(t, e, r, n, i) {
            t.emplaceBack(2 * e + (n + 1) / 2, 2 * r + (i + 1) / 2)
          }
          var Go = function (t) {
            ;(this.zoom = t.zoom),
              (this.overscaling = t.overscaling),
              (this.layers = t.layers),
              (this.layerIds = this.layers.map(function (t) {
                return t.id
              })),
              (this.index = t.index),
              (this.hasPattern = !1),
              (this.layoutVertexArray = new Li()),
              (this.indexArray = new Ki()),
              (this.segments = new co()),
              (this.programConfigurations = new Bo(uo, t.layers, t.zoom)),
              (this.stateDependentLayerIds = this.layers
                .filter(function (t) {
                  return t.isStateDependent()
                })
                .map(function (t) {
                  return t.id
                }))
          }
          function $o(t, e) {
            for (var r = 0; r < t.length; r++) if (ta(e, t[r])) return !0
            for (var n = 0; n < e.length; n++) if (ta(t, e[n])) return !0
            return !!Wo(t, e)
          }
          function Zo(t, e, r) {
            return !!ta(t, e) || !!Jo(e, t, r)
          }
          function Xo(t, e) {
            if (1 === t.length) return Qo(e, t[0])
            for (var r = 0; r < e.length; r++)
              for (var n = e[r], i = 0; i < n.length; i++)
                if (ta(t, n[i])) return !0
            for (var o = 0; o < t.length; o++) if (Qo(e, t[o])) return !0
            for (var a = 0; a < e.length; a++) if (Wo(t, e[a])) return !0
            return !1
          }
          function Ko(t, e, r) {
            if (t.length > 1) {
              if (Wo(t, e)) return !0
              for (var n = 0; n < e.length; n++) if (Jo(e[n], t, r)) return !0
            }
            for (var i = 0; i < t.length; i++) if (Jo(t[i], e, r)) return !0
            return !1
          }
          function Wo(t, e) {
            if (0 === t.length || 0 === e.length) return !1
            for (var r = 0; r < t.length - 1; r++)
              for (var n = t[r], i = t[r + 1], o = 0; o < e.length - 1; o++)
                if (Ho(n, i, e[o], e[o + 1])) return !0
            return !1
          }
          function Ho(t, e, r, n) {
            return w(t, r, n) !== w(e, r, n) && w(t, e, r) !== w(t, e, n)
          }
          function Jo(t, e, r) {
            var n = r * r
            if (1 === e.length) return t.distSqr(e[0]) < n
            for (var i = 1; i < e.length; i++)
              if (Yo(t, e[i - 1], e[i]) < n) return !0
            return !1
          }
          function Yo(t, e, r) {
            var n = e.distSqr(r)
            if (0 === n) return t.distSqr(e)
            var i = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / n
            return t.distSqr(i < 0 ? e : i > 1 ? r : r.sub(e)._mult(i)._add(e))
          }
          function Qo(t, e) {
            for (var r, n, i, o = !1, a = 0; a < t.length; a++)
              for (var s = 0, l = (r = t[a]).length - 1; s < r.length; l = s++)
                (n = r[s]).y > e.y != (i = r[l]).y > e.y &&
                  e.x < ((i.x - n.x) * (e.y - n.y)) / (i.y - n.y) + n.x &&
                  (o = !o)
            return o
          }
          function ta(t, e) {
            for (var r = !1, n = 0, i = t.length - 1; n < t.length; i = n++) {
              var o = t[n],
                a = t[i]
              o.y > e.y != a.y > e.y &&
                e.x < ((a.x - o.x) * (e.y - o.y)) / (a.y - o.y) + o.x &&
                (r = !r)
            }
            return r
          }
          function ea(t, e, r) {
            var n = r[0],
              i = r[2]
            if (
              (t.x < n.x && e.x < n.x) ||
              (t.x > i.x && e.x > i.x) ||
              (t.y < n.y && e.y < n.y) ||
              (t.y > i.y && e.y > i.y)
            )
              return !1
            var o = w(t, e, r[0])
            return (
              o !== w(t, e, r[1]) || o !== w(t, e, r[2]) || o !== w(t, e, r[3])
            )
          }
          function ra(t, e, r) {
            var n = e.paint.get(t).value
            return 'constant' === n.kind
              ? n.value
              : r.programConfigurations.get(e.id).getMaxValue(t)
          }
          function na(t) {
            return Math.sqrt(t[0] * t[0] + t[1] * t[1])
          }
          function ia(t, e, r, n, o) {
            if (!e[0] && !e[1]) return t
            var a = i.convert(e)._mult(o)
            'viewport' === r && a._rotate(-n)
            for (var s = [], l = 0; l < t.length; l++) s.push(t[l].sub(a))
            return s
          }
          ;(Go.prototype.populate = function (t, e, r) {
            var n = this.layers[0],
              i = [],
              o = null
            'circle' === n.type && (o = n.layout.get('circle-sort-key'))
            for (var a = 0, s = t; a < s.length; a += 1) {
              var l = s[a],
                u = l.feature,
                c = l.id,
                p = l.index,
                h = l.sourceLayerIndex,
                f = this.layers[0]._featureFilter.needGeometry,
                d = {
                  type: u.type,
                  id: c,
                  properties: u.properties,
                  geometry: f ? Vo(u) : [],
                }
              if (
                this.layers[0]._featureFilter.filter(new pi(this.zoom), d, r)
              ) {
                f || (d.geometry = Vo(u))
                var m = o ? o.evaluate(d, {}, r) : void 0
                i.push({
                  id: c,
                  properties: u.properties,
                  type: u.type,
                  sourceLayerIndex: h,
                  index: p,
                  geometry: d.geometry,
                  patterns: {},
                  sortKey: m,
                })
              }
            }
            o &&
              i.sort(function (t, e) {
                return t.sortKey - e.sortKey
              })
            for (var y = 0, v = i; y < v.length; y += 1) {
              var g = v[y],
                _ = g.geometry,
                x = g.index,
                b = g.sourceLayerIndex,
                w = t[x].feature
              this.addFeature(g, _, x, r),
                e.featureIndex.insert(w, _, x, b, this.index)
            }
          }),
            (Go.prototype.update = function (t, e, r) {
              this.stateDependentLayers.length &&
                this.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.stateDependentLayers,
                  r
                )
            }),
            (Go.prototype.isEmpty = function () {
              return 0 === this.layoutVertexArray.length
            }),
            (Go.prototype.uploadPending = function () {
              return !this.uploaded || this.programConfigurations.needsUpload
            }),
            (Go.prototype.upload = function (t) {
              this.uploaded ||
                ((this.layoutVertexBuffer = t.createVertexBuffer(
                  this.layoutVertexArray,
                  uo
                )),
                (this.indexBuffer = t.createIndexBuffer(this.indexArray))),
                this.programConfigurations.upload(t),
                (this.uploaded = !0)
            }),
            (Go.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.programConfigurations.destroy(),
                this.segments.destroy())
            }),
            (Go.prototype.addFeature = function (t, e, r, n) {
              for (var i = 0, o = e; i < o.length; i += 1)
                for (var a = 0, s = o[i]; a < s.length; a += 1) {
                  var l = s[a],
                    u = l.x,
                    c = l.y
                  if (!(u < 0 || u >= Ie || c < 0 || c >= Ie)) {
                    var p = this.segments.prepareSegment(
                        4,
                        this.layoutVertexArray,
                        this.indexArray,
                        t.sortKey
                      ),
                      h = p.vertexLength
                    qo(this.layoutVertexArray, u, c, -1, -1),
                      qo(this.layoutVertexArray, u, c, 1, -1),
                      qo(this.layoutVertexArray, u, c, 1, 1),
                      qo(this.layoutVertexArray, u, c, -1, 1),
                      this.indexArray.emplaceBack(h, h + 1, h + 2),
                      this.indexArray.emplaceBack(h, h + 3, h + 2),
                      (p.vertexLength += 4),
                      (p.primitiveLength += 2)
                  }
                }
              this.programConfigurations.populatePaintArrays(
                this.layoutVertexArray.length,
                t,
                r,
                {},
                n
              )
            }),
            Vn('CircleBucket', Go, { omit: ['layers'] })
          var oa,
            aa = new Ti({
              'circle-sort-key': new bi(Ct.layout_circle['circle-sort-key']),
            }),
            sa = {
              paint: new Ti({
                'circle-radius': new bi(Ct.paint_circle['circle-radius']),
                'circle-color': new bi(Ct.paint_circle['circle-color']),
                'circle-blur': new bi(Ct.paint_circle['circle-blur']),
                'circle-opacity': new bi(Ct.paint_circle['circle-opacity']),
                'circle-translate': new xi(Ct.paint_circle['circle-translate']),
                'circle-translate-anchor': new xi(
                  Ct.paint_circle['circle-translate-anchor']
                ),
                'circle-pitch-scale': new xi(
                  Ct.paint_circle['circle-pitch-scale']
                ),
                'circle-pitch-alignment': new xi(
                  Ct.paint_circle['circle-pitch-alignment']
                ),
                'circle-stroke-width': new bi(
                  Ct.paint_circle['circle-stroke-width']
                ),
                'circle-stroke-color': new bi(
                  Ct.paint_circle['circle-stroke-color']
                ),
                'circle-stroke-opacity': new bi(
                  Ct.paint_circle['circle-stroke-opacity']
                ),
              }),
              layout: aa,
            },
            la = 'undefined' != typeof Float32Array ? Float32Array : Array
          function ua(t, e, r) {
            var n = e[0],
              i = e[1],
              o = e[2],
              a = e[3]
            return (
              (t[0] = r[0] * n + r[4] * i + r[8] * o + r[12] * a),
              (t[1] = r[1] * n + r[5] * i + r[9] * o + r[13] * a),
              (t[2] = r[2] * n + r[6] * i + r[10] * o + r[14] * a),
              (t[3] = r[3] * n + r[7] * i + r[11] * o + r[15] * a),
              t
            )
          }
          Math.hypot ||
            (Math.hypot = function () {
              for (var t = arguments, e = 0, r = arguments.length; r--; )
                e += t[r] * t[r]
              return Math.sqrt(e)
            }),
            (oa = new la(3)),
            la != Float32Array && ((oa[0] = 0), (oa[1] = 0), (oa[2] = 0)),
            (function () {
              var t = new la(4)
              la != Float32Array &&
                ((t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 0))
            })()
          var ca =
            ((function () {
              var t = new la(2)
              la != Float32Array && ((t[0] = 0), (t[1] = 0))
            })(),
            (function (t) {
              function e(e) {
                t.call(this, e, sa)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.createBucket = function (t) {
                  return new Go(t)
                }),
                (e.prototype.queryRadius = function (t) {
                  var e = t
                  return (
                    ra('circle-radius', this, e) +
                    ra('circle-stroke-width', this, e) +
                    na(this.paint.get('circle-translate'))
                  )
                }),
                (e.prototype.queryIntersectsFeature = function (
                  t,
                  e,
                  r,
                  n,
                  i,
                  o,
                  a,
                  s
                ) {
                  for (
                    var l = ia(
                        t,
                        this.paint.get('circle-translate'),
                        this.paint.get('circle-translate-anchor'),
                        o.angle,
                        a
                      ),
                      u =
                        this.paint.get('circle-radius').evaluate(e, r) +
                        this.paint.get('circle-stroke-width').evaluate(e, r),
                      c = 'map' === this.paint.get('circle-pitch-alignment'),
                      p = c
                        ? l
                        : (function (t, e) {
                            return t.map(function (t) {
                              return pa(t, e)
                            })
                          })(l, s),
                      h = c ? u * a : u,
                      f = 0,
                      d = n;
                    f < d.length;
                    f += 1
                  )
                    for (var m = 0, y = d[f]; m < y.length; m += 1) {
                      var v = y[m],
                        g = c ? v : pa(v, s),
                        _ = h,
                        x = ua([], [v.x, v.y, 0, 1], s)
                      if (
                        ('viewport' === this.paint.get('circle-pitch-scale') &&
                        'map' === this.paint.get('circle-pitch-alignment')
                          ? (_ *= x[3] / o.cameraToCenterDistance)
                          : 'map' === this.paint.get('circle-pitch-scale') &&
                            'viewport' ===
                              this.paint.get('circle-pitch-alignment') &&
                            (_ *= o.cameraToCenterDistance / x[3]),
                        Zo(p, g, _))
                      )
                        return !0
                    }
                  return !1
                }),
                e
              )
            })(Ii))
          function pa(t, e) {
            var r = ua([], [t.x, t.y, 0, 1], e)
            return new i(r[0] / r[3], r[1] / r[3])
          }
          var ha = (function (t) {
            function e() {
              t.apply(this, arguments)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              e
            )
          })(Go)
          function fa(t, e, r, n) {
            var i = e.width,
              o = e.height
            if (n) {
              if (n instanceof Uint8ClampedArray) n = new Uint8Array(n.buffer)
              else if (n.length !== i * o * r)
                throw new RangeError('mismatched image size')
            } else n = new Uint8Array(i * o * r)
            return (t.width = i), (t.height = o), (t.data = n), t
          }
          function da(t, e, r) {
            var n = e.width,
              i = e.height
            if (n !== t.width || i !== t.height) {
              var o = fa({}, { width: n, height: i }, r)
              ma(
                t,
                o,
                { x: 0, y: 0 },
                { x: 0, y: 0 },
                { width: Math.min(t.width, n), height: Math.min(t.height, i) },
                r
              ),
                (t.width = n),
                (t.height = i),
                (t.data = o.data)
            }
          }
          function ma(t, e, r, n, i, o) {
            if (0 === i.width || 0 === i.height) return e
            if (
              i.width > t.width ||
              i.height > t.height ||
              r.x > t.width - i.width ||
              r.y > t.height - i.height
            )
              throw new RangeError(
                'out of range source coordinates for image copy'
              )
            if (
              i.width > e.width ||
              i.height > e.height ||
              n.x > e.width - i.width ||
              n.y > e.height - i.height
            )
              throw new RangeError(
                'out of range destination coordinates for image copy'
              )
            for (var a = t.data, s = e.data, l = 0; l < i.height; l++)
              for (
                var u = ((r.y + l) * t.width + r.x) * o,
                  c = ((n.y + l) * e.width + n.x) * o,
                  p = 0;
                p < i.width * o;
                p++
              )
                s[c + p] = a[u + p]
            return e
          }
          Vn('HeatmapBucket', ha, { omit: ['layers'] })
          var ya = function (t, e) {
            fa(this, t, 1, e)
          }
          ;(ya.prototype.resize = function (t) {
            da(this, t, 1)
          }),
            (ya.prototype.clone = function () {
              return new ya(
                { width: this.width, height: this.height },
                new Uint8Array(this.data)
              )
            }),
            (ya.copy = function (t, e, r, n, i) {
              ma(t, e, r, n, i, 1)
            })
          var va = function (t, e) {
            fa(this, t, 4, e)
          }
          ;(va.prototype.resize = function (t) {
            da(this, t, 4)
          }),
            (va.prototype.replace = function (t, e) {
              e
                ? this.data.set(t)
                : (this.data =
                    t instanceof Uint8ClampedArray
                      ? new Uint8Array(t.buffer)
                      : t)
            }),
            (va.prototype.clone = function () {
              return new va(
                { width: this.width, height: this.height },
                new Uint8Array(this.data)
              )
            }),
            (va.copy = function (t, e, r, n, i) {
              ma(t, e, r, n, i, 4)
            }),
            Vn('AlphaImage', ya),
            Vn('RGBAImage', va)
          var ga = {
            paint: new Ti({
              'heatmap-radius': new bi(Ct.paint_heatmap['heatmap-radius']),
              'heatmap-weight': new bi(Ct.paint_heatmap['heatmap-weight']),
              'heatmap-intensity': new xi(
                Ct.paint_heatmap['heatmap-intensity']
              ),
              'heatmap-color': new Si(Ct.paint_heatmap['heatmap-color']),
              'heatmap-opacity': new xi(Ct.paint_heatmap['heatmap-opacity']),
            }),
          }
          function _a(t, e) {
            for (
              var r = new Uint8Array(1024), n = {}, i = 0, o = 0;
              i < 256;
              i++, o += 4
            ) {
              n[e] = i / 255
              var a = t.evaluate(n)
              ;(r[o + 0] = Math.floor((255 * a.r) / a.a)),
                (r[o + 1] = Math.floor((255 * a.g) / a.a)),
                (r[o + 2] = Math.floor((255 * a.b) / a.a)),
                (r[o + 3] = Math.floor(255 * a.a))
            }
            return new va({ width: 256, height: 1 }, r)
          }
          var xa = (function (t) {
              function e(e) {
                t.call(this, e, ga), this._updateColorRamp()
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.createBucket = function (t) {
                  return new ha(t)
                }),
                (e.prototype._handleSpecialPaintPropertyUpdate = function (t) {
                  'heatmap-color' === t && this._updateColorRamp()
                }),
                (e.prototype._updateColorRamp = function () {
                  ;(this.colorRamp = _a(
                    this._transitionablePaint._values['heatmap-color'].value
                      .expression,
                    'heatmapDensity'
                  )),
                    (this.colorRampTexture = null)
                }),
                (e.prototype.resize = function () {
                  this.heatmapFbo &&
                    (this.heatmapFbo.destroy(), (this.heatmapFbo = null))
                }),
                (e.prototype.queryRadius = function () {
                  return 0
                }),
                (e.prototype.queryIntersectsFeature = function () {
                  return !1
                }),
                (e.prototype.hasOffscreenPass = function () {
                  return (
                    0 !== this.paint.get('heatmap-opacity') &&
                    'none' !== this.visibility
                  )
                }),
                e
              )
            })(Ii),
            ba = {
              paint: new Ti({
                'hillshade-illumination-direction': new xi(
                  Ct.paint_hillshade['hillshade-illumination-direction']
                ),
                'hillshade-illumination-anchor': new xi(
                  Ct.paint_hillshade['hillshade-illumination-anchor']
                ),
                'hillshade-exaggeration': new xi(
                  Ct.paint_hillshade['hillshade-exaggeration']
                ),
                'hillshade-shadow-color': new xi(
                  Ct.paint_hillshade['hillshade-shadow-color']
                ),
                'hillshade-highlight-color': new xi(
                  Ct.paint_hillshade['hillshade-highlight-color']
                ),
                'hillshade-accent-color': new xi(
                  Ct.paint_hillshade['hillshade-accent-color']
                ),
              }),
            },
            wa = (function (t) {
              function e(e) {
                t.call(this, e, ba)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.hasOffscreenPass = function () {
                  return (
                    0 !== this.paint.get('hillshade-exaggeration') &&
                    'none' !== this.visibility
                  )
                }),
                e
              )
            })(Ii),
            Ea = Pi([{ name: 'a_pos', components: 2, type: 'Int16' }], 4)
              .members,
            Sa = Ia,
            Ta = Ia
          function Ia(t, e, r) {
            r = r || 2
            var n,
              i,
              o,
              a,
              s,
              l,
              u,
              c = e && e.length,
              p = c ? e[0] * r : t.length,
              h = Ca(t, 0, p, r, !0),
              f = []
            if (!h || h.next === h.prev) return f
            if (
              (c &&
                (h = (function (t, e, r, n) {
                  var i,
                    o,
                    a,
                    s = []
                  for (i = 0, o = e.length; i < o; i++)
                    (a = Ca(
                      t,
                      e[i] * n,
                      i < o - 1 ? e[i + 1] * n : t.length,
                      n,
                      !1
                    )) === a.next && (a.steiner = !0),
                      s.push(Ba(a))
                  for (s.sort(Oa), i = 0; i < s.length; i++)
                    Da(s[i], r), (r = Aa(r, r.next))
                  return r
                })(t, e, h, r)),
              t.length > 80 * r)
            ) {
              ;(n = o = t[0]), (i = a = t[1])
              for (var d = r; d < p; d += r)
                (s = t[d]) < n && (n = s),
                  (l = t[d + 1]) < i && (i = l),
                  s > o && (o = s),
                  l > a && (a = l)
              u = 0 !== (u = Math.max(o - n, a - i)) ? 1 / u : 0
            }
            return ka(h, f, r, n, i, u), f
          }
          function Ca(t, e, r, n, i) {
            var o, a
            if (i === Ja(t, e, r, n) > 0)
              for (o = e; o < r; o += n) a = Ka(o, t[o], t[o + 1], a)
            else for (o = r - n; o >= e; o -= n) a = Ka(o, t[o], t[o + 1], a)
            return a && Va(a, a.next) && (Wa(a), (a = a.next)), a
          }
          function Aa(t, e) {
            if (!t) return t
            e || (e = t)
            var r,
              n = t
            do {
              if (
                ((r = !1),
                n.steiner || (!Va(n, n.next) && 0 !== ja(n.prev, n, n.next)))
              )
                n = n.next
              else {
                if ((Wa(n), (n = e = n.prev) === n.next)) break
                r = !0
              }
            } while (r || n !== e)
            return e
          }
          function ka(t, e, r, n, i, o, a) {
            if (t) {
              !a &&
                o &&
                (function (t, e, r, n) {
                  var i = t
                  do {
                    null === i.z && (i.z = Fa(i.x, i.y, e, r, n)),
                      (i.prevZ = i.prev),
                      (i.nextZ = i.next),
                      (i = i.next)
                  } while (i !== t)
                  ;(i.prevZ.nextZ = null),
                    (i.prevZ = null),
                    (function (t) {
                      var e,
                        r,
                        n,
                        i,
                        o,
                        a,
                        s,
                        l,
                        u = 1
                      do {
                        for (r = t, t = null, o = null, a = 0; r; ) {
                          for (
                            a++, n = r, s = 0, e = 0;
                            e < u && (s++, (n = n.nextZ));
                            e++
                          );
                          for (l = u; s > 0 || (l > 0 && n); )
                            0 !== s && (0 === l || !n || r.z <= n.z)
                              ? ((i = r), (r = r.nextZ), s--)
                              : ((i = n), (n = n.nextZ), l--),
                              o ? (o.nextZ = i) : (t = i),
                              (i.prevZ = o),
                              (o = i)
                          r = n
                        }
                        ;(o.nextZ = null), (u *= 2)
                      } while (a > 1)
                    })(i)
                })(t, n, i, o)
              for (var s, l, u = t; t.prev !== t.next; )
                if (((s = t.prev), (l = t.next), o ? Ma(t, n, i, o) : Pa(t)))
                  e.push(s.i / r),
                    e.push(t.i / r),
                    e.push(l.i / r),
                    Wa(t),
                    (t = l.next),
                    (u = l.next)
                else if ((t = l) === u) {
                  a
                    ? 1 === a
                      ? ka((t = La(Aa(t), e, r)), e, r, n, i, o, 2)
                      : 2 === a && za(t, e, r, n, i, o)
                    : ka(Aa(t), e, r, n, i, o, 1)
                  break
                }
            }
          }
          function Pa(t) {
            var e = t.prev,
              r = t,
              n = t.next
            if (ja(e, r, n) >= 0) return !1
            for (var i = t.next.next; i !== t.prev; ) {
              if (
                Na(e.x, e.y, r.x, r.y, n.x, n.y, i.x, i.y) &&
                ja(i.prev, i, i.next) >= 0
              )
                return !1
              i = i.next
            }
            return !0
          }
          function Ma(t, e, r, n) {
            var i = t.prev,
              o = t,
              a = t.next
            if (ja(i, o, a) >= 0) return !1
            for (
              var s =
                  i.x > o.x ? (i.x > a.x ? i.x : a.x) : o.x > a.x ? o.x : a.x,
                l = i.y > o.y ? (i.y > a.y ? i.y : a.y) : o.y > a.y ? o.y : a.y,
                u = Fa(
                  i.x < o.x ? (i.x < a.x ? i.x : a.x) : o.x < a.x ? o.x : a.x,
                  i.y < o.y ? (i.y < a.y ? i.y : a.y) : o.y < a.y ? o.y : a.y,
                  e,
                  r,
                  n
                ),
                c = Fa(s, l, e, r, n),
                p = t.prevZ,
                h = t.nextZ;
              p && p.z >= u && h && h.z <= c;

            ) {
              if (
                p !== t.prev &&
                p !== t.next &&
                Na(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) &&
                ja(p.prev, p, p.next) >= 0
              )
                return !1
              if (
                ((p = p.prevZ),
                h !== t.prev &&
                  h !== t.next &&
                  Na(i.x, i.y, o.x, o.y, a.x, a.y, h.x, h.y) &&
                  ja(h.prev, h, h.next) >= 0)
              )
                return !1
              h = h.nextZ
            }
            for (; p && p.z >= u; ) {
              if (
                p !== t.prev &&
                p !== t.next &&
                Na(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) &&
                ja(p.prev, p, p.next) >= 0
              )
                return !1
              p = p.prevZ
            }
            for (; h && h.z <= c; ) {
              if (
                h !== t.prev &&
                h !== t.next &&
                Na(i.x, i.y, o.x, o.y, a.x, a.y, h.x, h.y) &&
                ja(h.prev, h, h.next) >= 0
              )
                return !1
              h = h.nextZ
            }
            return !0
          }
          function La(t, e, r) {
            var n = t
            do {
              var i = n.prev,
                o = n.next.next
              !Va(i, o) &&
                qa(i, n, n.next, o) &&
                Za(i, o) &&
                Za(o, i) &&
                (e.push(i.i / r),
                e.push(n.i / r),
                e.push(o.i / r),
                Wa(n),
                Wa(n.next),
                (n = t = o)),
                (n = n.next)
            } while (n !== t)
            return Aa(n)
          }
          function za(t, e, r, n, i, o) {
            var a = t
            do {
              for (var s = a.next.next; s !== a.prev; ) {
                if (a.i !== s.i && Ua(a, s)) {
                  var l = Xa(a, s)
                  return (
                    (a = Aa(a, a.next)),
                    (l = Aa(l, l.next)),
                    ka(a, e, r, n, i, o),
                    void ka(l, e, r, n, i, o)
                  )
                }
                s = s.next
              }
              a = a.next
            } while (a !== t)
          }
          function Oa(t, e) {
            return t.x - e.x
          }
          function Da(t, e) {
            if (
              (e = (function (t, e) {
                var r,
                  n = e,
                  i = t.x,
                  o = t.y,
                  a = -1 / 0
                do {
                  if (o <= n.y && o >= n.next.y && n.next.y !== n.y) {
                    var s =
                      n.x + ((o - n.y) * (n.next.x - n.x)) / (n.next.y - n.y)
                    if (s <= i && s > a) {
                      if (((a = s), s === i)) {
                        if (o === n.y) return n
                        if (o === n.next.y) return n.next
                      }
                      r = n.x < n.next.x ? n : n.next
                    }
                  }
                  n = n.next
                } while (n !== e)
                if (!r) return null
                if (i === a) return r
                var l,
                  u = r,
                  c = r.x,
                  p = r.y,
                  h = 1 / 0
                n = r
                do {
                  i >= n.x &&
                    n.x >= c &&
                    i !== n.x &&
                    Na(o < p ? i : a, o, c, p, o < p ? a : i, o, n.x, n.y) &&
                    ((l = Math.abs(o - n.y) / (i - n.x)),
                    Za(n, t) &&
                      (l < h ||
                        (l === h &&
                          (n.x > r.x || (n.x === r.x && Ra(r, n))))) &&
                      ((r = n), (h = l))),
                    (n = n.next)
                } while (n !== u)
                return r
              })(t, e))
            ) {
              var r = Xa(e, t)
              Aa(e, e.next), Aa(r, r.next)
            }
          }
          function Ra(t, e) {
            return ja(t.prev, t, e.prev) < 0 && ja(e.next, t, t.next) < 0
          }
          function Fa(t, e, r, n, i) {
            return (
              (t =
                1431655765 &
                ((t =
                  858993459 &
                  ((t =
                    252645135 &
                    ((t = 16711935 & ((t = 32767 * (t - r) * i) | (t << 8))) |
                      (t << 4))) |
                    (t << 2))) |
                  (t << 1))) |
              ((e =
                1431655765 &
                ((e =
                  858993459 &
                  ((e =
                    252645135 &
                    ((e = 16711935 & ((e = 32767 * (e - n) * i) | (e << 8))) |
                      (e << 4))) |
                    (e << 2))) |
                  (e << 1))) <<
                1)
            )
          }
          function Ba(t) {
            var e = t,
              r = t
            do {
              ;(e.x < r.x || (e.x === r.x && e.y < r.y)) && (r = e),
                (e = e.next)
            } while (e !== t)
            return r
          }
          function Na(t, e, r, n, i, o, a, s) {
            return (
              (i - a) * (e - s) - (t - a) * (o - s) >= 0 &&
              (t - a) * (n - s) - (r - a) * (e - s) >= 0 &&
              (r - a) * (o - s) - (i - a) * (n - s) >= 0
            )
          }
          function Ua(t, e) {
            return (
              t.next.i !== e.i &&
              t.prev.i !== e.i &&
              !(function (t, e) {
                var r = t
                do {
                  if (
                    r.i !== t.i &&
                    r.next.i !== t.i &&
                    r.i !== e.i &&
                    r.next.i !== e.i &&
                    qa(r, r.next, t, e)
                  )
                    return !0
                  r = r.next
                } while (r !== t)
                return !1
              })(t, e) &&
              ((Za(t, e) &&
                Za(e, t) &&
                (function (t, e) {
                  var r = t,
                    n = !1,
                    i = (t.x + e.x) / 2,
                    o = (t.y + e.y) / 2
                  do {
                    r.y > o != r.next.y > o &&
                      r.next.y !== r.y &&
                      i <
                        ((r.next.x - r.x) * (o - r.y)) / (r.next.y - r.y) +
                          r.x &&
                      (n = !n),
                      (r = r.next)
                  } while (r !== t)
                  return n
                })(t, e) &&
                (ja(t.prev, t, e.prev) || ja(t, e.prev, e))) ||
                (Va(t, e) &&
                  ja(t.prev, t, t.next) > 0 &&
                  ja(e.prev, e, e.next) > 0))
            )
          }
          function ja(t, e, r) {
            return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
          }
          function Va(t, e) {
            return t.x === e.x && t.y === e.y
          }
          function qa(t, e, r, n) {
            var i = $a(ja(t, e, r)),
              o = $a(ja(t, e, n)),
              a = $a(ja(r, n, t)),
              s = $a(ja(r, n, e))
            return (
              (i !== o && a !== s) ||
              !(0 !== i || !Ga(t, r, e)) ||
              !(0 !== o || !Ga(t, n, e)) ||
              !(0 !== a || !Ga(r, t, n)) ||
              !(0 !== s || !Ga(r, e, n))
            )
          }
          function Ga(t, e, r) {
            return (
              e.x <= Math.max(t.x, r.x) &&
              e.x >= Math.min(t.x, r.x) &&
              e.y <= Math.max(t.y, r.y) &&
              e.y >= Math.min(t.y, r.y)
            )
          }
          function $a(t) {
            return t > 0 ? 1 : t < 0 ? -1 : 0
          }
          function Za(t, e) {
            return ja(t.prev, t, t.next) < 0
              ? ja(t, e, t.next) >= 0 && ja(t, t.prev, e) >= 0
              : ja(t, e, t.prev) < 0 || ja(t, t.next, e) < 0
          }
          function Xa(t, e) {
            var r = new Ha(t.i, t.x, t.y),
              n = new Ha(e.i, e.x, e.y),
              i = t.next,
              o = e.prev
            return (
              (t.next = e),
              (e.prev = t),
              (r.next = i),
              (i.prev = r),
              (n.next = r),
              (r.prev = n),
              (o.next = n),
              (n.prev = o),
              n
            )
          }
          function Ka(t, e, r, n) {
            var i = new Ha(t, e, r)
            return (
              n
                ? ((i.next = n.next),
                  (i.prev = n),
                  (n.next.prev = i),
                  (n.next = i))
                : ((i.prev = i), (i.next = i)),
              i
            )
          }
          function Wa(t) {
            ;(t.next.prev = t.prev),
              (t.prev.next = t.next),
              t.prevZ && (t.prevZ.nextZ = t.nextZ),
              t.nextZ && (t.nextZ.prevZ = t.prevZ)
          }
          function Ha(t, e, r) {
            ;(this.i = t),
              (this.x = e),
              (this.y = r),
              (this.prev = null),
              (this.next = null),
              (this.z = null),
              (this.prevZ = null),
              (this.nextZ = null),
              (this.steiner = !1)
          }
          function Ja(t, e, r, n) {
            for (var i = 0, o = e, a = r - n; o < r; o += n)
              (i += (t[a] - t[o]) * (t[o + 1] + t[a + 1])), (a = o)
            return i
          }
          function Ya(t, e, r, n, i) {
            !(function t(e, r, n, i, o) {
              for (; i > n; ) {
                if (i - n > 600) {
                  var a = i - n + 1,
                    s = r - n + 1,
                    l = Math.log(a),
                    u = 0.5 * Math.exp((2 * l) / 3),
                    c =
                      0.5 *
                      Math.sqrt((l * u * (a - u)) / a) *
                      (s - a / 2 < 0 ? -1 : 1)
                  t(
                    e,
                    r,
                    Math.max(n, Math.floor(r - (s * u) / a + c)),
                    Math.min(i, Math.floor(r + ((a - s) * u) / a + c)),
                    o
                  )
                }
                var p = e[r],
                  h = n,
                  f = i
                for (Qa(e, n, r), o(e[i], p) > 0 && Qa(e, n, i); h < f; ) {
                  for (Qa(e, h, f), h++, f--; o(e[h], p) < 0; ) h++
                  for (; o(e[f], p) > 0; ) f--
                }
                0 === o(e[n], p) ? Qa(e, n, f) : Qa(e, ++f, i),
                  f <= r && (n = f + 1),
                  r <= f && (i = f - 1)
              }
            })(t, e, r || 0, n || t.length - 1, i || ts)
          }
          function Qa(t, e, r) {
            var n = t[e]
            ;(t[e] = t[r]), (t[r] = n)
          }
          function ts(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
          }
          function es(t, e) {
            var r = t.length
            if (r <= 1) return [t]
            for (var n, i, o = [], a = 0; a < r; a++) {
              var s = E(t[a])
              0 !== s &&
                ((t[a].area = Math.abs(s)),
                void 0 === i && (i = s < 0),
                i === s < 0 ? (n && o.push(n), (n = [t[a]])) : n.push(t[a]))
            }
            if ((n && o.push(n), e > 1))
              for (var l = 0; l < o.length; l++)
                o[l].length <= e ||
                  (Ya(o[l], e, 1, o[l].length - 1, rs),
                  (o[l] = o[l].slice(0, e)))
            return o
          }
          function rs(t, e) {
            return e.area - t.area
          }
          function ns(t, e, r) {
            for (
              var n = r.patternDependencies, i = !1, o = 0, a = e;
              o < a.length;
              o += 1
            ) {
              var s = a[o].paint.get(t + '-pattern')
              s.isConstant() || (i = !0)
              var l = s.constantOr(null)
              l && ((i = !0), (n[l.to] = !0), (n[l.from] = !0))
            }
            return i
          }
          function is(t, e, r, n, i) {
            for (
              var o = i.patternDependencies, a = 0, s = e;
              a < s.length;
              a += 1
            ) {
              var l = s[a],
                u = l.paint.get(t + '-pattern').value
              if ('constant' !== u.kind) {
                var c = u.evaluate({ zoom: n - 1 }, r, {}, i.availableImages),
                  p = u.evaluate({ zoom: n }, r, {}, i.availableImages),
                  h = u.evaluate({ zoom: n + 1 }, r, {}, i.availableImages)
                ;(p = p && p.name ? p.name : p),
                  (h = h && h.name ? h.name : h),
                  (o[(c = c && c.name ? c.name : c)] = !0),
                  (o[p] = !0),
                  (o[h] = !0),
                  (r.patterns[l.id] = { min: c, mid: p, max: h })
              }
            }
            return r
          }
          ;(Ia.deviation = function (t, e, r, n) {
            var i = e && e.length,
              o = Math.abs(Ja(t, 0, i ? e[0] * r : t.length, r))
            if (i)
              for (var a = 0, s = e.length; a < s; a++)
                o -= Math.abs(
                  Ja(t, e[a] * r, a < s - 1 ? e[a + 1] * r : t.length, r)
                )
            var l = 0
            for (a = 0; a < n.length; a += 3) {
              var u = n[a] * r,
                c = n[a + 1] * r,
                p = n[a + 2] * r
              l += Math.abs(
                (t[u] - t[p]) * (t[c + 1] - t[u + 1]) -
                  (t[u] - t[c]) * (t[p + 1] - t[u + 1])
              )
            }
            return 0 === o && 0 === l ? 0 : Math.abs((l - o) / o)
          }),
            (Ia.flatten = function (t) {
              for (
                var e = t[0][0].length,
                  r = { vertices: [], holes: [], dimensions: e },
                  n = 0,
                  i = 0;
                i < t.length;
                i++
              ) {
                for (var o = 0; o < t[i].length; o++)
                  for (var a = 0; a < e; a++) r.vertices.push(t[i][o][a])
                i > 0 && r.holes.push((n += t[i - 1].length))
              }
              return r
            }),
            (Sa.default = Ta)
          var os = function (t) {
            ;(this.zoom = t.zoom),
              (this.overscaling = t.overscaling),
              (this.layers = t.layers),
              (this.layerIds = this.layers.map(function (t) {
                return t.id
              })),
              (this.index = t.index),
              (this.hasPattern = !1),
              (this.patternFeatures = []),
              (this.layoutVertexArray = new Li()),
              (this.indexArray = new Ki()),
              (this.indexArray2 = new Wi()),
              (this.programConfigurations = new Bo(Ea, t.layers, t.zoom)),
              (this.segments = new co()),
              (this.segments2 = new co()),
              (this.stateDependentLayerIds = this.layers
                .filter(function (t) {
                  return t.isStateDependent()
                })
                .map(function (t) {
                  return t.id
                }))
          }
          ;(os.prototype.populate = function (t, e, r) {
            this.hasPattern = ns('fill', this.layers, e)
            for (
              var n = this.layers[0].layout.get('fill-sort-key'),
                i = [],
                o = 0,
                a = t;
              o < a.length;
              o += 1
            ) {
              var s = a[o],
                l = s.feature,
                u = s.id,
                c = s.index,
                p = s.sourceLayerIndex,
                h = this.layers[0]._featureFilter.needGeometry,
                f = {
                  type: l.type,
                  id: u,
                  properties: l.properties,
                  geometry: h ? Vo(l) : [],
                }
              if (
                this.layers[0]._featureFilter.filter(new pi(this.zoom), f, r)
              ) {
                h || (f.geometry = Vo(l))
                var d = n ? n.evaluate(f, {}, r, e.availableImages) : void 0
                i.push({
                  id: u,
                  properties: l.properties,
                  type: l.type,
                  sourceLayerIndex: p,
                  index: c,
                  geometry: f.geometry,
                  patterns: {},
                  sortKey: d,
                })
              }
            }
            n &&
              i.sort(function (t, e) {
                return t.sortKey - e.sortKey
              })
            for (var m = 0, y = i; m < y.length; m += 1) {
              var v = y[m],
                g = v.geometry,
                _ = v.index,
                x = v.sourceLayerIndex
              if (this.hasPattern) {
                var b = is('fill', this.layers, v, this.zoom, e)
                this.patternFeatures.push(b)
              } else this.addFeature(v, g, _, r, {})
              e.featureIndex.insert(t[_].feature, g, _, x, this.index)
            }
          }),
            (os.prototype.update = function (t, e, r) {
              this.stateDependentLayers.length &&
                this.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.stateDependentLayers,
                  r
                )
            }),
            (os.prototype.addFeatures = function (t, e, r) {
              for (var n = 0, i = this.patternFeatures; n < i.length; n += 1) {
                var o = i[n]
                this.addFeature(o, o.geometry, o.index, e, r)
              }
            }),
            (os.prototype.isEmpty = function () {
              return 0 === this.layoutVertexArray.length
            }),
            (os.prototype.uploadPending = function () {
              return !this.uploaded || this.programConfigurations.needsUpload
            }),
            (os.prototype.upload = function (t) {
              this.uploaded ||
                ((this.layoutVertexBuffer = t.createVertexBuffer(
                  this.layoutVertexArray,
                  Ea
                )),
                (this.indexBuffer = t.createIndexBuffer(this.indexArray)),
                (this.indexBuffer2 = t.createIndexBuffer(this.indexArray2))),
                this.programConfigurations.upload(t),
                (this.uploaded = !0)
            }),
            (os.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.indexBuffer2.destroy(),
                this.programConfigurations.destroy(),
                this.segments.destroy(),
                this.segments2.destroy())
            }),
            (os.prototype.addFeature = function (t, e, r, n, i) {
              for (var o = 0, a = es(e, 500); o < a.length; o += 1) {
                for (var s = a[o], l = 0, u = 0, c = s; u < c.length; u += 1)
                  l += c[u].length
                for (
                  var p = this.segments.prepareSegment(
                      l,
                      this.layoutVertexArray,
                      this.indexArray
                    ),
                    h = p.vertexLength,
                    f = [],
                    d = [],
                    m = 0,
                    y = s;
                  m < y.length;
                  m += 1
                ) {
                  var v = y[m]
                  if (0 !== v.length) {
                    v !== s[0] && d.push(f.length / 2)
                    var g = this.segments2.prepareSegment(
                        v.length,
                        this.layoutVertexArray,
                        this.indexArray2
                      ),
                      _ = g.vertexLength
                    this.layoutVertexArray.emplaceBack(v[0].x, v[0].y),
                      this.indexArray2.emplaceBack(_ + v.length - 1, _),
                      f.push(v[0].x),
                      f.push(v[0].y)
                    for (var x = 1; x < v.length; x++)
                      this.layoutVertexArray.emplaceBack(v[x].x, v[x].y),
                        this.indexArray2.emplaceBack(_ + x - 1, _ + x),
                        f.push(v[x].x),
                        f.push(v[x].y)
                    ;(g.vertexLength += v.length),
                      (g.primitiveLength += v.length)
                  }
                }
                for (var b = Sa(f, d), w = 0; w < b.length; w += 3)
                  this.indexArray.emplaceBack(
                    h + b[w],
                    h + b[w + 1],
                    h + b[w + 2]
                  )
                ;(p.vertexLength += l), (p.primitiveLength += b.length / 3)
              }
              this.programConfigurations.populatePaintArrays(
                this.layoutVertexArray.length,
                t,
                r,
                i,
                n
              )
            }),
            Vn('FillBucket', os, { omit: ['layers', 'patternFeatures'] })
          var as = new Ti({
              'fill-sort-key': new bi(Ct.layout_fill['fill-sort-key']),
            }),
            ss = {
              paint: new Ti({
                'fill-antialias': new xi(Ct.paint_fill['fill-antialias']),
                'fill-opacity': new bi(Ct.paint_fill['fill-opacity']),
                'fill-color': new bi(Ct.paint_fill['fill-color']),
                'fill-outline-color': new bi(
                  Ct.paint_fill['fill-outline-color']
                ),
                'fill-translate': new xi(Ct.paint_fill['fill-translate']),
                'fill-translate-anchor': new xi(
                  Ct.paint_fill['fill-translate-anchor']
                ),
                'fill-pattern': new wi(Ct.paint_fill['fill-pattern']),
              }),
              layout: as,
            },
            ls = (function (t) {
              function e(e) {
                t.call(this, e, ss)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.recalculate = function (e, r) {
                  t.prototype.recalculate.call(this, e, r)
                  var n = this.paint._values['fill-outline-color']
                  'constant' === n.value.kind &&
                    void 0 === n.value.value &&
                    (this.paint._values[
                      'fill-outline-color'
                    ] = this.paint._values['fill-color'])
                }),
                (e.prototype.createBucket = function (t) {
                  return new os(t)
                }),
                (e.prototype.queryRadius = function () {
                  return na(this.paint.get('fill-translate'))
                }),
                (e.prototype.queryIntersectsFeature = function (
                  t,
                  e,
                  r,
                  n,
                  i,
                  o,
                  a
                ) {
                  return Xo(
                    ia(
                      t,
                      this.paint.get('fill-translate'),
                      this.paint.get('fill-translate-anchor'),
                      o.angle,
                      a
                    ),
                    n
                  )
                }),
                (e.prototype.isTileClipped = function () {
                  return !0
                }),
                e
              )
            })(Ii),
            us = Pi(
              [
                { name: 'a_pos', components: 2, type: 'Int16' },
                { name: 'a_normal_ed', components: 4, type: 'Int16' },
              ],
              4
            ).members,
            cs = ps
          function ps(t, e, r, n, i) {
            ;(this.properties = {}),
              (this.extent = r),
              (this.type = 0),
              (this._pbf = t),
              (this._geometry = -1),
              (this._keys = n),
              (this._values = i),
              t.readFields(hs, this, e)
          }
          function hs(t, e, r) {
            1 == t
              ? (e.id = r.readVarint())
              : 2 == t
              ? (function (t, e) {
                  for (var r = t.readVarint() + t.pos; t.pos < r; ) {
                    var n = e._keys[t.readVarint()],
                      i = e._values[t.readVarint()]
                    e.properties[n] = i
                  }
                })(r, e)
              : 3 == t
              ? (e.type = r.readVarint())
              : 4 == t && (e._geometry = r.pos)
          }
          function fs(t) {
            for (
              var e, r, n = 0, i = 0, o = t.length, a = o - 1;
              i < o;
              a = i++
            )
              n += ((r = t[a]).x - (e = t[i]).x) * (e.y + r.y)
            return n
          }
          ;(ps.types = ['Unknown', 'Point', 'LineString', 'Polygon']),
            (ps.prototype.loadGeometry = function () {
              var t = this._pbf
              t.pos = this._geometry
              for (
                var e,
                  r = t.readVarint() + t.pos,
                  n = 1,
                  o = 0,
                  a = 0,
                  s = 0,
                  l = [];
                t.pos < r;

              ) {
                if (o <= 0) {
                  var u = t.readVarint()
                  ;(n = 7 & u), (o = u >> 3)
                }
                if ((o--, 1 === n || 2 === n))
                  (a += t.readSVarint()),
                    (s += t.readSVarint()),
                    1 === n && (e && l.push(e), (e = [])),
                    e.push(new i(a, s))
                else {
                  if (7 !== n) throw new Error('unknown command ' + n)
                  e && e.push(e[0].clone())
                }
              }
              return e && l.push(e), l
            }),
            (ps.prototype.bbox = function () {
              var t = this._pbf
              t.pos = this._geometry
              for (
                var e = t.readVarint() + t.pos,
                  r = 1,
                  n = 0,
                  i = 0,
                  o = 0,
                  a = 1 / 0,
                  s = -1 / 0,
                  l = 1 / 0,
                  u = -1 / 0;
                t.pos < e;

              ) {
                if (n <= 0) {
                  var c = t.readVarint()
                  ;(r = 7 & c), (n = c >> 3)
                }
                if ((n--, 1 === r || 2 === r))
                  (i += t.readSVarint()) < a && (a = i),
                    i > s && (s = i),
                    (o += t.readSVarint()) < l && (l = o),
                    o > u && (u = o)
                else if (7 !== r) throw new Error('unknown command ' + r)
              }
              return [a, l, s, u]
            }),
            (ps.prototype.toGeoJSON = function (t, e, r) {
              var n,
                i,
                o = this.extent * Math.pow(2, r),
                a = this.extent * t,
                s = this.extent * e,
                l = this.loadGeometry(),
                u = ps.types[this.type]
              function c(t) {
                for (var e = 0; e < t.length; e++) {
                  var r = t[e]
                  t[e] = [
                    (360 * (r.x + a)) / o - 180,
                    (360 / Math.PI) *
                      Math.atan(
                        Math.exp(
                          ((180 - (360 * (r.y + s)) / o) * Math.PI) / 180
                        )
                      ) -
                      90,
                  ]
                }
              }
              switch (this.type) {
                case 1:
                  var p = []
                  for (n = 0; n < l.length; n++) p[n] = l[n][0]
                  c((l = p))
                  break
                case 2:
                  for (n = 0; n < l.length; n++) c(l[n])
                  break
                case 3:
                  for (
                    l = (function (t) {
                      var e = t.length
                      if (e <= 1) return [t]
                      for (var r, n, i = [], o = 0; o < e; o++) {
                        var a = fs(t[o])
                        0 !== a &&
                          (void 0 === n && (n = a < 0),
                          n === a < 0
                            ? (r && i.push(r), (r = [t[o]]))
                            : r.push(t[o]))
                      }
                      return r && i.push(r), i
                    })(l),
                      n = 0;
                    n < l.length;
                    n++
                  )
                    for (i = 0; i < l[n].length; i++) c(l[n][i])
              }
              1 === l.length ? (l = l[0]) : (u = 'Multi' + u)
              var h = {
                type: 'Feature',
                geometry: { type: u, coordinates: l },
                properties: this.properties,
              }
              return 'id' in this && (h.id = this.id), h
            })
          var ds = ms
          function ms(t, e) {
            ;(this.version = 1),
              (this.name = null),
              (this.extent = 4096),
              (this.length = 0),
              (this._pbf = t),
              (this._keys = []),
              (this._values = []),
              (this._features = []),
              t.readFields(ys, this, e),
              (this.length = this._features.length)
          }
          function ys(t, e, r) {
            15 === t
              ? (e.version = r.readVarint())
              : 1 === t
              ? (e.name = r.readString())
              : 5 === t
              ? (e.extent = r.readVarint())
              : 2 === t
              ? e._features.push(r.pos)
              : 3 === t
              ? e._keys.push(r.readString())
              : 4 === t &&
                e._values.push(
                  (function (t) {
                    for (
                      var e = null, r = t.readVarint() + t.pos;
                      t.pos < r;

                    ) {
                      var n = t.readVarint() >> 3
                      e =
                        1 === n
                          ? t.readString()
                          : 2 === n
                          ? t.readFloat()
                          : 3 === n
                          ? t.readDouble()
                          : 4 === n
                          ? t.readVarint64()
                          : 5 === n
                          ? t.readVarint()
                          : 6 === n
                          ? t.readSVarint()
                          : 7 === n
                          ? t.readBoolean()
                          : null
                    }
                    return e
                  })(r)
                )
          }
          function vs(t, e, r) {
            if (3 === t) {
              var n = new ds(r, r.readVarint() + r.pos)
              n.length && (e[n.name] = n)
            }
          }
          ms.prototype.feature = function (t) {
            if (t < 0 || t >= this._features.length)
              throw new Error('feature index out of bounds')
            this._pbf.pos = this._features[t]
            var e = this._pbf.readVarint() + this._pbf.pos
            return new cs(this._pbf, e, this.extent, this._keys, this._values)
          }
          var gs = {
              VectorTile: function (t, e) {
                this.layers = t.readFields(vs, {}, e)
              },
              VectorTileFeature: cs,
              VectorTileLayer: ds,
            },
            _s = gs.VectorTileFeature.types,
            xs = Math.pow(2, 13)
          function bs(t, e, r, n, i, o, a, s) {
            t.emplaceBack(
              e,
              r,
              2 * Math.floor(n * xs) + a,
              i * xs * 2,
              o * xs * 2,
              Math.round(s)
            )
          }
          var ws = function (t) {
            ;(this.zoom = t.zoom),
              (this.overscaling = t.overscaling),
              (this.layers = t.layers),
              (this.layerIds = this.layers.map(function (t) {
                return t.id
              })),
              (this.index = t.index),
              (this.hasPattern = !1),
              (this.layoutVertexArray = new Oi()),
              (this.indexArray = new Ki()),
              (this.programConfigurations = new Bo(us, t.layers, t.zoom)),
              (this.segments = new co()),
              (this.stateDependentLayerIds = this.layers
                .filter(function (t) {
                  return t.isStateDependent()
                })
                .map(function (t) {
                  return t.id
                }))
          }
          function Es(t, e) {
            return (
              (t.x === e.x && (t.x < 0 || t.x > Ie)) ||
              (t.y === e.y && (t.y < 0 || t.y > Ie))
            )
          }
          ;(ws.prototype.populate = function (t, e, r) {
            ;(this.features = []),
              (this.hasPattern = ns('fill-extrusion', this.layers, e))
            for (var n = 0, i = t; n < i.length; n += 1) {
              var o = i[n],
                a = o.feature,
                s = o.id,
                l = o.index,
                u = o.sourceLayerIndex,
                c = this.layers[0]._featureFilter.needGeometry,
                p = {
                  type: a.type,
                  id: s,
                  properties: a.properties,
                  geometry: c ? Vo(a) : [],
                }
              if (
                this.layers[0]._featureFilter.filter(new pi(this.zoom), p, r)
              ) {
                var h = {
                  id: s,
                  sourceLayerIndex: u,
                  index: l,
                  geometry: c ? p.geometry : Vo(a),
                  properties: a.properties,
                  type: a.type,
                  patterns: {},
                }
                void 0 !== a.id && (h.id = a.id),
                  this.hasPattern
                    ? this.features.push(
                        is('fill-extrusion', this.layers, h, this.zoom, e)
                      )
                    : this.addFeature(h, h.geometry, l, r, {}),
                  e.featureIndex.insert(a, h.geometry, l, u, this.index, !0)
              }
            }
          }),
            (ws.prototype.addFeatures = function (t, e, r) {
              for (var n = 0, i = this.features; n < i.length; n += 1) {
                var o = i[n]
                this.addFeature(o, o.geometry, o.index, e, r)
              }
            }),
            (ws.prototype.update = function (t, e, r) {
              this.stateDependentLayers.length &&
                this.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.stateDependentLayers,
                  r
                )
            }),
            (ws.prototype.isEmpty = function () {
              return 0 === this.layoutVertexArray.length
            }),
            (ws.prototype.uploadPending = function () {
              return !this.uploaded || this.programConfigurations.needsUpload
            }),
            (ws.prototype.upload = function (t) {
              this.uploaded ||
                ((this.layoutVertexBuffer = t.createVertexBuffer(
                  this.layoutVertexArray,
                  us
                )),
                (this.indexBuffer = t.createIndexBuffer(this.indexArray))),
                this.programConfigurations.upload(t),
                (this.uploaded = !0)
            }),
            (ws.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.programConfigurations.destroy(),
                this.segments.destroy())
            }),
            (ws.prototype.addFeature = function (t, e, r, n, i) {
              for (var o = 0, a = es(e, 500); o < a.length; o += 1) {
                for (var s = a[o], l = 0, u = 0, c = s; u < c.length; u += 1)
                  l += c[u].length
                for (
                  var p = this.segments.prepareSegment(
                      4,
                      this.layoutVertexArray,
                      this.indexArray
                    ),
                    h = 0,
                    f = s;
                  h < f.length;
                  h += 1
                ) {
                  var d = f[h]
                  if (
                    0 !== d.length &&
                    !(
                      (L = d).every(function (t) {
                        return t.x < 0
                      }) ||
                      L.every(function (t) {
                        return t.x > Ie
                      }) ||
                      L.every(function (t) {
                        return t.y < 0
                      }) ||
                      L.every(function (t) {
                        return t.y > Ie
                      })
                    )
                  )
                    for (var m = 0, y = 0; y < d.length; y++) {
                      var v = d[y]
                      if (y >= 1) {
                        var g = d[y - 1]
                        if (!Es(v, g)) {
                          p.vertexLength + 4 > co.MAX_VERTEX_ARRAY_LENGTH &&
                            (p = this.segments.prepareSegment(
                              4,
                              this.layoutVertexArray,
                              this.indexArray
                            ))
                          var _ = v.sub(g)._perp()._unit(),
                            x = g.dist(v)
                          m + x > 32768 && (m = 0),
                            bs(
                              this.layoutVertexArray,
                              v.x,
                              v.y,
                              _.x,
                              _.y,
                              0,
                              0,
                              m
                            ),
                            bs(
                              this.layoutVertexArray,
                              v.x,
                              v.y,
                              _.x,
                              _.y,
                              0,
                              1,
                              m
                            ),
                            bs(
                              this.layoutVertexArray,
                              g.x,
                              g.y,
                              _.x,
                              _.y,
                              0,
                              0,
                              (m += x)
                            ),
                            bs(
                              this.layoutVertexArray,
                              g.x,
                              g.y,
                              _.x,
                              _.y,
                              0,
                              1,
                              m
                            )
                          var b = p.vertexLength
                          this.indexArray.emplaceBack(b, b + 2, b + 1),
                            this.indexArray.emplaceBack(b + 1, b + 2, b + 3),
                            (p.vertexLength += 4),
                            (p.primitiveLength += 2)
                        }
                      }
                    }
                }
                if (
                  (p.vertexLength + l > co.MAX_VERTEX_ARRAY_LENGTH &&
                    (p = this.segments.prepareSegment(
                      l,
                      this.layoutVertexArray,
                      this.indexArray
                    )),
                  'Polygon' === _s[t.type])
                ) {
                  for (
                    var w = [], E = [], S = p.vertexLength, T = 0, I = s;
                    T < I.length;
                    T += 1
                  ) {
                    var C = I[T]
                    if (0 !== C.length) {
                      C !== s[0] && E.push(w.length / 2)
                      for (var A = 0; A < C.length; A++) {
                        var k = C[A]
                        bs(this.layoutVertexArray, k.x, k.y, 0, 0, 1, 1, 0),
                          w.push(k.x),
                          w.push(k.y)
                      }
                    }
                  }
                  for (var P = Sa(w, E), M = 0; M < P.length; M += 3)
                    this.indexArray.emplaceBack(
                      S + P[M],
                      S + P[M + 2],
                      S + P[M + 1]
                    )
                  ;(p.primitiveLength += P.length / 3), (p.vertexLength += l)
                }
              }
              var L
              this.programConfigurations.populatePaintArrays(
                this.layoutVertexArray.length,
                t,
                r,
                i,
                n
              )
            }),
            Vn('FillExtrusionBucket', ws, { omit: ['layers', 'features'] })
          var Ss = {
              paint: new Ti({
                'fill-extrusion-opacity': new xi(
                  Ct['paint_fill-extrusion']['fill-extrusion-opacity']
                ),
                'fill-extrusion-color': new bi(
                  Ct['paint_fill-extrusion']['fill-extrusion-color']
                ),
                'fill-extrusion-translate': new xi(
                  Ct['paint_fill-extrusion']['fill-extrusion-translate']
                ),
                'fill-extrusion-translate-anchor': new xi(
                  Ct['paint_fill-extrusion']['fill-extrusion-translate-anchor']
                ),
                'fill-extrusion-pattern': new wi(
                  Ct['paint_fill-extrusion']['fill-extrusion-pattern']
                ),
                'fill-extrusion-height': new bi(
                  Ct['paint_fill-extrusion']['fill-extrusion-height']
                ),
                'fill-extrusion-base': new bi(
                  Ct['paint_fill-extrusion']['fill-extrusion-base']
                ),
                'fill-extrusion-vertical-gradient': new xi(
                  Ct['paint_fill-extrusion']['fill-extrusion-vertical-gradient']
                ),
              }),
            },
            Ts = (function (t) {
              function e(e) {
                t.call(this, e, Ss)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.createBucket = function (t) {
                  return new ws(t)
                }),
                (e.prototype.queryRadius = function () {
                  return na(this.paint.get('fill-extrusion-translate'))
                }),
                (e.prototype.is3D = function () {
                  return !0
                }),
                (e.prototype.queryIntersectsFeature = function (
                  t,
                  e,
                  r,
                  n,
                  o,
                  a,
                  s,
                  l
                ) {
                  var u = ia(
                      t,
                      this.paint.get('fill-extrusion-translate'),
                      this.paint.get('fill-extrusion-translate-anchor'),
                      a.angle,
                      s
                    ),
                    c = this.paint.get('fill-extrusion-height').evaluate(e, r),
                    p = this.paint.get('fill-extrusion-base').evaluate(e, r),
                    h = (function (t, e, r, n) {
                      for (var o = [], a = 0, s = t; a < s.length; a += 1) {
                        var l = s[a],
                          u = [l.x, l.y, 0, 1]
                        ua(u, u, e), o.push(new i(u[0] / u[3], u[1] / u[3]))
                      }
                      return o
                    })(u, l),
                    f = (function (t, e, r, n) {
                      for (
                        var o = [],
                          a = [],
                          s = n[8] * e,
                          l = n[9] * e,
                          u = n[10] * e,
                          c = n[11] * e,
                          p = n[8] * r,
                          h = n[9] * r,
                          f = n[10] * r,
                          d = n[11] * r,
                          m = 0,
                          y = t;
                        m < y.length;
                        m += 1
                      ) {
                        for (
                          var v = [], g = [], _ = 0, x = y[m];
                          _ < x.length;
                          _ += 1
                        ) {
                          var b = x[_],
                            w = b.x,
                            E = b.y,
                            S = n[0] * w + n[4] * E + n[12],
                            T = n[1] * w + n[5] * E + n[13],
                            I = n[2] * w + n[6] * E + n[14],
                            C = n[3] * w + n[7] * E + n[15],
                            A = I + u,
                            k = C + c,
                            P = S + p,
                            M = T + h,
                            L = I + f,
                            z = C + d,
                            O = new i((S + s) / k, (T + l) / k)
                          ;(O.z = A / k), v.push(O)
                          var D = new i(P / z, M / z)
                          ;(D.z = L / z), g.push(D)
                        }
                        o.push(v), a.push(g)
                      }
                      return [o, a]
                    })(n, p, c, l)
                  return (function (t, e, r) {
                    var n = 1 / 0
                    Xo(r, e) && (n = Cs(r, e[0]))
                    for (var i = 0; i < e.length; i++)
                      for (
                        var o = e[i], a = t[i], s = 0;
                        s < o.length - 1;
                        s++
                      ) {
                        var l = o[s],
                          u = [l, o[s + 1], a[s + 1], a[s], l]
                        $o(r, u) && (n = Math.min(n, Cs(r, u)))
                      }
                    return n !== 1 / 0 && n
                  })(f[0], f[1], h)
                }),
                e
              )
            })(Ii)
          function Is(t, e) {
            return t.x * e.x + t.y * e.y
          }
          function Cs(t, e) {
            if (1 === t.length) {
              for (var r, n, i = 0, o = e[i++]; !r || o.equals(r); )
                if (!(r = e[i++])) return 1 / 0
              for (; !n || o.equals(n) || r.equals(n); )
                if (!(n = e[i++])) return 1 / 0
              var a = t[0],
                s = r.sub(o),
                l = n.sub(o),
                u = a.sub(o),
                c = Is(s, s),
                p = Is(s, l),
                h = Is(l, l),
                f = Is(u, s),
                d = Is(u, l),
                m = c * h - p * p,
                y = (h * f - p * d) / m,
                v = (c * d - p * f) / m
              return o.z * (1 - y - v) + r.z * y + n.z * v
            }
            for (var g = 1 / 0, _ = 0, x = e; _ < x.length; _ += 1)
              g = Math.min(g, x[_].z)
            return g
          }
          var As = Pi(
              [
                { name: 'a_pos_normal', components: 2, type: 'Int16' },
                { name: 'a_data', components: 4, type: 'Uint8' },
              ],
              4
            ).members,
            ks = gs.VectorTileFeature.types,
            Ps = Math.cos((Math.PI / 180) * 37.5),
            Ms = Math.pow(2, 14) / 0.5,
            Ls = function (t) {
              ;(this.zoom = t.zoom),
                (this.overscaling = t.overscaling),
                (this.layers = t.layers),
                (this.layerIds = this.layers.map(function (t) {
                  return t.id
                })),
                (this.index = t.index),
                (this.hasPattern = !1),
                (this.patternFeatures = []),
                (this.layoutVertexArray = new Di()),
                (this.indexArray = new Ki()),
                (this.programConfigurations = new Bo(As, t.layers, t.zoom)),
                (this.segments = new co()),
                (this.stateDependentLayerIds = this.layers
                  .filter(function (t) {
                    return t.isStateDependent()
                  })
                  .map(function (t) {
                    return t.id
                  }))
            }
          ;(Ls.prototype.populate = function (t, e, r) {
            this.hasPattern = ns('line', this.layers, e)
            for (
              var n = this.layers[0].layout.get('line-sort-key'),
                i = [],
                o = 0,
                a = t;
              o < a.length;
              o += 1
            ) {
              var s = a[o],
                l = s.feature,
                u = s.id,
                c = s.index,
                p = s.sourceLayerIndex,
                h = this.layers[0]._featureFilter.needGeometry,
                f = {
                  type: l.type,
                  id: u,
                  properties: l.properties,
                  geometry: h ? Vo(l) : [],
                }
              if (
                this.layers[0]._featureFilter.filter(new pi(this.zoom), f, r)
              ) {
                h || (f.geometry = Vo(l))
                var d = n ? n.evaluate(f, {}, r) : void 0
                i.push({
                  id: u,
                  properties: l.properties,
                  type: l.type,
                  sourceLayerIndex: p,
                  index: c,
                  geometry: f.geometry,
                  patterns: {},
                  sortKey: d,
                })
              }
            }
            n &&
              i.sort(function (t, e) {
                return t.sortKey - e.sortKey
              })
            for (var m = 0, y = i; m < y.length; m += 1) {
              var v = y[m],
                g = v.geometry,
                _ = v.index,
                x = v.sourceLayerIndex
              if (this.hasPattern) {
                var b = is('line', this.layers, v, this.zoom, e)
                this.patternFeatures.push(b)
              } else this.addFeature(v, g, _, r, {})
              e.featureIndex.insert(t[_].feature, g, _, x, this.index)
            }
          }),
            (Ls.prototype.update = function (t, e, r) {
              this.stateDependentLayers.length &&
                this.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.stateDependentLayers,
                  r
                )
            }),
            (Ls.prototype.addFeatures = function (t, e, r) {
              for (var n = 0, i = this.patternFeatures; n < i.length; n += 1) {
                var o = i[n]
                this.addFeature(o, o.geometry, o.index, e, r)
              }
            }),
            (Ls.prototype.isEmpty = function () {
              return 0 === this.layoutVertexArray.length
            }),
            (Ls.prototype.uploadPending = function () {
              return !this.uploaded || this.programConfigurations.needsUpload
            }),
            (Ls.prototype.upload = function (t) {
              this.uploaded ||
                ((this.layoutVertexBuffer = t.createVertexBuffer(
                  this.layoutVertexArray,
                  As
                )),
                (this.indexBuffer = t.createIndexBuffer(this.indexArray))),
                this.programConfigurations.upload(t),
                (this.uploaded = !0)
            }),
            (Ls.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.programConfigurations.destroy(),
                this.segments.destroy())
            }),
            (Ls.prototype.addFeature = function (t, e, r, n, i) {
              for (
                var o = this.layers[0].layout,
                  a = o.get('line-join').evaluate(t, {}),
                  s = o.get('line-cap'),
                  l = o.get('line-miter-limit'),
                  u = o.get('line-round-limit'),
                  c = 0,
                  p = e;
                c < p.length;
                c += 1
              )
                this.addLine(p[c], t, a, s, l, u, r, n, i)
            }),
            (Ls.prototype.addLine = function (t, e, r, n, i, o, a, s, l) {
              if (
                ((this.distance = 0),
                (this.scaledDistance = 0),
                (this.totalDistance = 0),
                e.properties &&
                  e.properties.hasOwnProperty('mapbox_clip_start') &&
                  e.properties.hasOwnProperty('mapbox_clip_end'))
              ) {
                ;(this.clipStart = +e.properties.mapbox_clip_start),
                  (this.clipEnd = +e.properties.mapbox_clip_end)
                for (var u = 0; u < t.length - 1; u++)
                  this.totalDistance += t[u].dist(t[u + 1])
                this.updateScaledDistance()
              }
              for (
                var c = 'Polygon' === ks[e.type], p = t.length;
                p >= 2 && t[p - 1].equals(t[p - 2]);

              )
                p--
              for (var h = 0; h < p - 1 && t[h].equals(t[h + 1]); ) h++
              if (!(p < (c ? 3 : 2))) {
                'bevel' === r && (i = 1.05)
                var f,
                  d =
                    this.overscaling <= 16
                      ? (15 * Ie) / (512 * this.overscaling)
                      : 0,
                  m = this.segments.prepareSegment(
                    10 * p,
                    this.layoutVertexArray,
                    this.indexArray
                  ),
                  y = void 0,
                  v = void 0,
                  g = void 0,
                  _ = void 0
                ;(this.e1 = this.e2 = -1),
                  c &&
                    (_ = t[h]
                      .sub((f = t[p - 2]))
                      ._unit()
                      ._perp())
                for (var x = h; x < p; x++)
                  if (
                    !(v = x === p - 1 ? (c ? t[h + 1] : void 0) : t[x + 1]) ||
                    !t[x].equals(v)
                  ) {
                    _ && (g = _),
                      f && (y = f),
                      (f = t[x]),
                      (_ = v ? v.sub(f)._unit()._perp() : g)
                    var b = (g = g || _).add(_)
                    ;(0 === b.x && 0 === b.y) || b._unit()
                    var w = g.x * _.x + g.y * _.y,
                      E = b.x * _.x + b.y * _.y,
                      S = 0 !== E ? 1 / E : 1 / 0,
                      T = 2 * Math.sqrt(2 - 2 * E),
                      I = E < Ps && y && v,
                      C = g.x * _.y - g.y * _.x > 0
                    if (I && x > h) {
                      var A = f.dist(y)
                      if (A > 2 * d) {
                        var k = f.sub(
                          f
                            .sub(y)
                            ._mult(d / A)
                            ._round()
                        )
                        this.updateDistance(y, k),
                          this.addCurrentVertex(k, g, 0, 0, m),
                          (y = k)
                      }
                    }
                    var P = y && v,
                      M = P ? r : c ? 'butt' : n
                    if (
                      (P &&
                        'round' === M &&
                        (S < o ? (M = 'miter') : S <= 2 && (M = 'fakeround')),
                      'miter' === M && S > i && (M = 'bevel'),
                      'bevel' === M &&
                        (S > 2 && (M = 'flipbevel'), S < i && (M = 'miter')),
                      y && this.updateDistance(y, f),
                      'miter' === M)
                    )
                      b._mult(S), this.addCurrentVertex(f, b, 0, 0, m)
                    else if ('flipbevel' === M) {
                      if (S > 100) b = _.mult(-1)
                      else {
                        var L = (S * g.add(_).mag()) / g.sub(_).mag()
                        b._perp()._mult(L * (C ? -1 : 1))
                      }
                      this.addCurrentVertex(f, b, 0, 0, m),
                        this.addCurrentVertex(f, b.mult(-1), 0, 0, m)
                    } else if ('bevel' === M || 'fakeround' === M) {
                      var z = -Math.sqrt(S * S - 1),
                        O = C ? z : 0,
                        D = C ? 0 : z
                      if (
                        (y && this.addCurrentVertex(f, g, O, D, m),
                        'fakeround' === M)
                      )
                        for (
                          var R = Math.round((180 * T) / Math.PI / 20), F = 1;
                          F < R;
                          F++
                        ) {
                          var B = F / R
                          if (0.5 !== B) {
                            var N = B - 0.5
                            B +=
                              B *
                              N *
                              (B - 1) *
                              ((1.0904 +
                                w * (w * (3.55645 - 1.43519 * w) - 3.2452)) *
                                N *
                                N +
                                (0.848013 + w * (0.215638 * w - 1.06021)))
                          }
                          var U = _.sub(g)
                            ._mult(B)
                            ._add(g)
                            ._unit()
                            ._mult(C ? -1 : 1)
                          this.addHalfVertex(f, U.x, U.y, !1, C, 0, m)
                        }
                      v && this.addCurrentVertex(f, _, -O, -D, m)
                    } else if ('butt' === M)
                      this.addCurrentVertex(f, b, 0, 0, m)
                    else if ('square' === M) {
                      var j = y ? 1 : -1
                      this.addCurrentVertex(f, b, j, j, m)
                    } else
                      'round' === M &&
                        (y &&
                          (this.addCurrentVertex(f, g, 0, 0, m),
                          this.addCurrentVertex(f, g, 1, 1, m, !0)),
                        v &&
                          (this.addCurrentVertex(f, _, -1, -1, m, !0),
                          this.addCurrentVertex(f, _, 0, 0, m)))
                    if (I && x < p - 1) {
                      var V = f.dist(v)
                      if (V > 2 * d) {
                        var q = f.add(
                          v
                            .sub(f)
                            ._mult(d / V)
                            ._round()
                        )
                        this.updateDistance(f, q),
                          this.addCurrentVertex(q, _, 0, 0, m),
                          (f = q)
                      }
                    }
                  }
                this.programConfigurations.populatePaintArrays(
                  this.layoutVertexArray.length,
                  e,
                  a,
                  l,
                  s
                )
              }
            }),
            (Ls.prototype.addCurrentVertex = function (t, e, r, n, i, o) {
              void 0 === o && (o = !1)
              var a = e.y * n - e.x,
                s = -e.y - e.x * n
              this.addHalfVertex(t, e.x + e.y * r, e.y - e.x * r, o, !1, r, i),
                this.addHalfVertex(t, a, s, o, !0, -n, i),
                this.distance > Ms / 2 &&
                  0 === this.totalDistance &&
                  ((this.distance = 0), this.addCurrentVertex(t, e, r, n, i, o))
            }),
            (Ls.prototype.addHalfVertex = function (t, e, r, n, i, o, a) {
              var s = 0.5 * this.scaledDistance
              this.layoutVertexArray.emplaceBack(
                (t.x << 1) + (n ? 1 : 0),
                (t.y << 1) + (i ? 1 : 0),
                Math.round(63 * e) + 128,
                Math.round(63 * r) + 128,
                (1 + (0 === o ? 0 : o < 0 ? -1 : 1)) | ((63 & s) << 2),
                s >> 6
              )
              var l = a.vertexLength++
              this.e1 >= 0 &&
                this.e2 >= 0 &&
                (this.indexArray.emplaceBack(this.e1, this.e2, l),
                a.primitiveLength++),
                i ? (this.e2 = l) : (this.e1 = l)
            }),
            (Ls.prototype.updateScaledDistance = function () {
              this.scaledDistance =
                this.totalDistance > 0
                  ? (this.clipStart +
                      ((this.clipEnd - this.clipStart) * this.distance) /
                        this.totalDistance) *
                    (Ms - 1)
                  : this.distance
            }),
            (Ls.prototype.updateDistance = function (t, e) {
              ;(this.distance += t.dist(e)), this.updateScaledDistance()
            }),
            Vn('LineBucket', Ls, { omit: ['layers', 'patternFeatures'] })
          var zs = new Ti({
              'line-cap': new xi(Ct.layout_line['line-cap']),
              'line-join': new bi(Ct.layout_line['line-join']),
              'line-miter-limit': new xi(Ct.layout_line['line-miter-limit']),
              'line-round-limit': new xi(Ct.layout_line['line-round-limit']),
              'line-sort-key': new bi(Ct.layout_line['line-sort-key']),
            }),
            Os = {
              paint: new Ti({
                'line-opacity': new bi(Ct.paint_line['line-opacity']),
                'line-color': new bi(Ct.paint_line['line-color']),
                'line-translate': new xi(Ct.paint_line['line-translate']),
                'line-translate-anchor': new xi(
                  Ct.paint_line['line-translate-anchor']
                ),
                'line-width': new bi(Ct.paint_line['line-width']),
                'line-gap-width': new bi(Ct.paint_line['line-gap-width']),
                'line-offset': new bi(Ct.paint_line['line-offset']),
                'line-blur': new bi(Ct.paint_line['line-blur']),
                'line-dasharray': new Ei(Ct.paint_line['line-dasharray']),
                'line-pattern': new wi(Ct.paint_line['line-pattern']),
                'line-gradient': new Si(Ct.paint_line['line-gradient']),
              }),
              layout: zs,
            },
            Ds = new ((function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.possiblyEvaluate = function (e, r) {
                  return (
                    (r = new pi(Math.floor(r.zoom), {
                      now: r.now,
                      fadeDuration: r.fadeDuration,
                      zoomHistory: r.zoomHistory,
                      transition: r.transition,
                    })),
                    t.prototype.possiblyEvaluate.call(this, e, r)
                  )
                }),
                (e.prototype.evaluate = function (e, r, n, i) {
                  return (
                    (r = c({}, r, { zoom: Math.floor(r.zoom) })),
                    t.prototype.evaluate.call(this, e, r, n, i)
                  )
                }),
                e
              )
            })(bi))(Os.paint.properties['line-width'].specification)
          Ds.useIntegerZoom = !0
          var Rs = (function (t) {
            function e(e) {
              t.call(this, e, Os)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype._handleSpecialPaintPropertyUpdate = function (t) {
                'line-gradient' === t && this._updateGradient()
              }),
              (e.prototype._updateGradient = function () {
                ;(this.gradient = _a(
                  this._transitionablePaint._values['line-gradient'].value
                    .expression,
                  'lineProgress'
                )),
                  (this.gradientTexture = null)
              }),
              (e.prototype.recalculate = function (e, r) {
                t.prototype.recalculate.call(this, e, r),
                  (this.paint._values['line-floorwidth'] = Ds.possiblyEvaluate(
                    this._transitioningPaint._values['line-width'].value,
                    e
                  ))
              }),
              (e.prototype.createBucket = function (t) {
                return new Ls(t)
              }),
              (e.prototype.queryRadius = function (t) {
                var e = t,
                  r = Fs(
                    ra('line-width', this, e),
                    ra('line-gap-width', this, e)
                  ),
                  n = ra('line-offset', this, e)
                return (
                  r / 2 + Math.abs(n) + na(this.paint.get('line-translate'))
                )
              }),
              (e.prototype.queryIntersectsFeature = function (
                t,
                e,
                r,
                n,
                o,
                a,
                s
              ) {
                var l = ia(
                    t,
                    this.paint.get('line-translate'),
                    this.paint.get('line-translate-anchor'),
                    a.angle,
                    s
                  ),
                  u =
                    (s / 2) *
                    Fs(
                      this.paint.get('line-width').evaluate(e, r),
                      this.paint.get('line-gap-width').evaluate(e, r)
                    ),
                  c = this.paint.get('line-offset').evaluate(e, r)
                return (
                  c &&
                    (n = (function (t, e) {
                      for (
                        var r = [], n = new i(0, 0), o = 0;
                        o < t.length;
                        o++
                      ) {
                        for (var a = t[o], s = [], l = 0; l < a.length; l++) {
                          var u = a[l],
                            c = a[l + 1],
                            p =
                              0 === l
                                ? n
                                : u
                                    .sub(a[l - 1])
                                    ._unit()
                                    ._perp(),
                            h =
                              l === a.length - 1 ? n : c.sub(u)._unit()._perp(),
                            f = p._add(h)._unit()
                          f._mult(1 / (f.x * h.x + f.y * h.y)),
                            s.push(f._mult(e)._add(u))
                        }
                        r.push(s)
                      }
                      return r
                    })(n, c * s)),
                  (function (t, e, r) {
                    for (var n = 0; n < e.length; n++) {
                      var i = e[n]
                      if (t.length >= 3)
                        for (var o = 0; o < i.length; o++)
                          if (ta(t, i[o])) return !0
                      if (Ko(t, i, r)) return !0
                    }
                    return !1
                  })(l, n, u)
                )
              }),
              (e.prototype.isTileClipped = function () {
                return !0
              }),
              e
            )
          })(Ii)
          function Fs(t, e) {
            return e > 0 ? e + 2 * t : t
          }
          var Bs = Pi(
              [
                { name: 'a_pos_offset', components: 4, type: 'Int16' },
                { name: 'a_data', components: 4, type: 'Uint16' },
                { name: 'a_pixeloffset', components: 4, type: 'Int16' },
              ],
              4
            ),
            Ns = Pi(
              [{ name: 'a_projected_pos', components: 3, type: 'Float32' }],
              4
            ),
            Us =
              (Pi(
                [{ name: 'a_fade_opacity', components: 1, type: 'Uint32' }],
                4
              ),
              Pi([
                { name: 'a_placed', components: 2, type: 'Uint8' },
                { name: 'a_shift', components: 2, type: 'Float32' },
              ])),
            js =
              (Pi([
                { type: 'Int16', name: 'anchorPointX' },
                { type: 'Int16', name: 'anchorPointY' },
                { type: 'Int16', name: 'x1' },
                { type: 'Int16', name: 'y1' },
                { type: 'Int16', name: 'x2' },
                { type: 'Int16', name: 'y2' },
                { type: 'Uint32', name: 'featureIndex' },
                { type: 'Uint16', name: 'sourceLayerIndex' },
                { type: 'Uint16', name: 'bucketIndex' },
                { type: 'Int16', name: 'radius' },
                { type: 'Int16', name: 'signedDistanceFromAnchor' },
              ]),
              Pi(
                [
                  { name: 'a_pos', components: 2, type: 'Int16' },
                  { name: 'a_anchor_pos', components: 2, type: 'Int16' },
                  { name: 'a_extrude', components: 2, type: 'Int16' },
                ],
                4
              )),
            Vs = Pi(
              [
                { name: 'a_pos', components: 2, type: 'Int16' },
                { name: 'a_anchor_pos', components: 2, type: 'Int16' },
                { name: 'a_extrude', components: 2, type: 'Int16' },
              ],
              4
            )
          function qs(t, e, r) {
            return (
              t.sections.forEach(function (t) {
                t.text = (function (t, e, r) {
                  var n = e.layout.get('text-transform').evaluate(r, {})
                  return (
                    'uppercase' === n
                      ? (t = t.toLocaleUpperCase())
                      : 'lowercase' === n && (t = t.toLocaleLowerCase()),
                    ci.applyArabicShaping && (t = ci.applyArabicShaping(t)),
                    t
                  )
                })(t.text, e, r)
              }),
              t
            )
          }
          Pi([
            { type: 'Int16', name: 'anchorX' },
            { type: 'Int16', name: 'anchorY' },
            { type: 'Uint16', name: 'glyphStartIndex' },
            { type: 'Uint16', name: 'numGlyphs' },
            { type: 'Uint32', name: 'vertexStartIndex' },
            { type: 'Uint32', name: 'lineStartIndex' },
            { type: 'Uint32', name: 'lineLength' },
            { type: 'Uint16', name: 'segment' },
            { type: 'Uint16', name: 'lowerSize' },
            { type: 'Uint16', name: 'upperSize' },
            { type: 'Float32', name: 'lineOffsetX' },
            { type: 'Float32', name: 'lineOffsetY' },
            { type: 'Uint8', name: 'writingMode' },
            { type: 'Uint8', name: 'placedOrientation' },
            { type: 'Uint8', name: 'hidden' },
            { type: 'Uint32', name: 'crossTileID' },
            { type: 'Int16', name: 'associatedIconIndex' },
          ]),
            Pi([
              { type: 'Int16', name: 'anchorX' },
              { type: 'Int16', name: 'anchorY' },
              { type: 'Int16', name: 'rightJustifiedTextSymbolIndex' },
              { type: 'Int16', name: 'centerJustifiedTextSymbolIndex' },
              { type: 'Int16', name: 'leftJustifiedTextSymbolIndex' },
              { type: 'Int16', name: 'verticalPlacedTextSymbolIndex' },
              { type: 'Int16', name: 'placedIconSymbolIndex' },
              { type: 'Int16', name: 'verticalPlacedIconSymbolIndex' },
              { type: 'Uint16', name: 'key' },
              { type: 'Uint16', name: 'textBoxStartIndex' },
              { type: 'Uint16', name: 'textBoxEndIndex' },
              { type: 'Uint16', name: 'verticalTextBoxStartIndex' },
              { type: 'Uint16', name: 'verticalTextBoxEndIndex' },
              { type: 'Uint16', name: 'iconBoxStartIndex' },
              { type: 'Uint16', name: 'iconBoxEndIndex' },
              { type: 'Uint16', name: 'verticalIconBoxStartIndex' },
              { type: 'Uint16', name: 'verticalIconBoxEndIndex' },
              { type: 'Uint16', name: 'featureIndex' },
              { type: 'Uint16', name: 'numHorizontalGlyphVertices' },
              { type: 'Uint16', name: 'numVerticalGlyphVertices' },
              { type: 'Uint16', name: 'numIconVertices' },
              { type: 'Uint16', name: 'numVerticalIconVertices' },
              { type: 'Uint32', name: 'crossTileID' },
              { type: 'Float32', name: 'textBoxScale' },
              { type: 'Float32', components: 2, name: 'textOffset' },
            ]),
            Pi([{ type: 'Float32', name: 'offsetX' }]),
            Pi([
              { type: 'Int16', name: 'x' },
              { type: 'Int16', name: 'y' },
              { type: 'Int16', name: 'tileUnitDistanceFromAnchor' },
            ])
          var Gs = {
              '!': '︕',
              '#': '＃',
              $: '＄',
              '%': '％',
              '&': '＆',
              '(': '︵',
              ')': '︶',
              '*': '＊',
              '+': '＋',
              ',': '︐',
              '-': '︲',
              '.': '・',
              '/': '／',
              ':': '︓',
              ';': '︔',
              '<': '︿',
              '=': '＝',
              '>': '﹀',
              '?': '︖',
              '@': '＠',
              '[': '﹇',
              '\\': '＼',
              ']': '﹈',
              '^': '＾',
              _: '︳',
              '`': '｀',
              '{': '︷',
              '|': '―',
              '}': '︸',
              '~': '～',
              '¢': '￠',
              '£': '￡',
              '¥': '￥',
              '¦': '￤',
              '¬': '￢',
              '¯': '￣',
              '–': '︲',
              '—': '︱',
              '‘': '﹃',
              '’': '﹄',
              '“': '﹁',
              '”': '﹂',
              '…': '︙',
              '‧': '・',
              '₩': '￦',
              '、': '︑',
              '。': '︒',
              '〈': '︿',
              '〉': '﹀',
              '《': '︽',
              '》': '︾',
              '「': '﹁',
              '」': '﹂',
              '『': '﹃',
              '』': '﹄',
              '【': '︻',
              '】': '︼',
              '〔': '︹',
              '〕': '︺',
              '〖': '︗',
              '〗': '︘',
              '！': '︕',
              '（': '︵',
              '）': '︶',
              '，': '︐',
              '－': '︲',
              '．': '・',
              '：': '︓',
              '；': '︔',
              '＜': '︿',
              '＞': '﹀',
              '？': '︖',
              '［': '﹇',
              '］': '﹈',
              '＿': '︳',
              '｛': '︷',
              '｜': '―',
              '｝': '︸',
              '｟': '︵',
              '｠': '︶',
              '｡': '︒',
              '｢': '﹁',
              '｣': '﹂',
            },
            $s = function (t, e, r, n, i) {
              var o,
                a,
                s = 8 * i - n - 1,
                l = (1 << s) - 1,
                u = l >> 1,
                c = -7,
                p = r ? i - 1 : 0,
                h = r ? -1 : 1,
                f = t[e + p]
              for (
                p += h, o = f & ((1 << -c) - 1), f >>= -c, c += s;
                c > 0;
                o = 256 * o + t[e + p], p += h, c -= 8
              );
              for (
                a = o & ((1 << -c) - 1), o >>= -c, c += n;
                c > 0;
                a = 256 * a + t[e + p], p += h, c -= 8
              );
              if (0 === o) o = 1 - u
              else {
                if (o === l) return a ? NaN : (1 / 0) * (f ? -1 : 1)
                ;(a += Math.pow(2, n)), (o -= u)
              }
              return (f ? -1 : 1) * a * Math.pow(2, o - n)
            },
            Zs = function (t, e, r, n, i, o) {
              var a,
                s,
                l,
                u = 8 * o - i - 1,
                c = (1 << u) - 1,
                p = c >> 1,
                h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                f = n ? 0 : o - 1,
                d = n ? 1 : -1,
                m = e < 0 || (0 === e && 1 / e < 0) ? 1 : 0
              for (
                e = Math.abs(e),
                  isNaN(e) || e === 1 / 0
                    ? ((s = isNaN(e) ? 1 : 0), (a = c))
                    : ((a = Math.floor(Math.log(e) / Math.LN2)),
                      e * (l = Math.pow(2, -a)) < 1 && (a--, (l *= 2)),
                      (e += a + p >= 1 ? h / l : h * Math.pow(2, 1 - p)) * l >=
                        2 && (a++, (l /= 2)),
                      a + p >= c
                        ? ((s = 0), (a = c))
                        : a + p >= 1
                        ? ((s = (e * l - 1) * Math.pow(2, i)), (a += p))
                        : ((s = e * Math.pow(2, p - 1) * Math.pow(2, i)),
                          (a = 0)));
                i >= 8;
                t[r + f] = 255 & s, f += d, s /= 256, i -= 8
              );
              for (
                a = (a << i) | s, u += i;
                u > 0;
                t[r + f] = 255 & a, f += d, a /= 256, u -= 8
              );
              t[r + f - d] |= 128 * m
            },
            Xs = Ks
          function Ks(t) {
            ;(this.buf =
              ArrayBuffer.isView && ArrayBuffer.isView(t)
                ? t
                : new Uint8Array(t || 0)),
              (this.pos = 0),
              (this.type = 0),
              (this.length = this.buf.length)
          }
          ;(Ks.Varint = 0), (Ks.Fixed64 = 1), (Ks.Bytes = 2), (Ks.Fixed32 = 5)
          var Ws =
            'undefined' == typeof TextDecoder ? null : new TextDecoder('utf8')
          function Hs(t) {
            return t.type === Ks.Bytes ? t.readVarint() + t.pos : t.pos + 1
          }
          function Js(t, e, r) {
            return r
              ? 4294967296 * e + (t >>> 0)
              : 4294967296 * (e >>> 0) + (t >>> 0)
          }
          function Ys(t, e, r) {
            var n =
              e <= 16383
                ? 1
                : e <= 2097151
                ? 2
                : e <= 268435455
                ? 3
                : Math.floor(Math.log(e) / (7 * Math.LN2))
            r.realloc(n)
            for (var i = r.pos - 1; i >= t; i--) r.buf[i + n] = r.buf[i]
          }
          function Qs(t, e) {
            for (var r = 0; r < t.length; r++) e.writeVarint(t[r])
          }
          function tl(t, e) {
            for (var r = 0; r < t.length; r++) e.writeSVarint(t[r])
          }
          function el(t, e) {
            for (var r = 0; r < t.length; r++) e.writeFloat(t[r])
          }
          function rl(t, e) {
            for (var r = 0; r < t.length; r++) e.writeDouble(t[r])
          }
          function nl(t, e) {
            for (var r = 0; r < t.length; r++) e.writeBoolean(t[r])
          }
          function il(t, e) {
            for (var r = 0; r < t.length; r++) e.writeFixed32(t[r])
          }
          function ol(t, e) {
            for (var r = 0; r < t.length; r++) e.writeSFixed32(t[r])
          }
          function al(t, e) {
            for (var r = 0; r < t.length; r++) e.writeFixed64(t[r])
          }
          function sl(t, e) {
            for (var r = 0; r < t.length; r++) e.writeSFixed64(t[r])
          }
          function ll(t, e) {
            return (
              (t[e] | (t[e + 1] << 8) | (t[e + 2] << 16)) + 16777216 * t[e + 3]
            )
          }
          function ul(t, e, r) {
            ;(t[r] = e),
              (t[r + 1] = e >>> 8),
              (t[r + 2] = e >>> 16),
              (t[r + 3] = e >>> 24)
          }
          function cl(t, e) {
            return (
              (t[e] | (t[e + 1] << 8) | (t[e + 2] << 16)) + (t[e + 3] << 24)
            )
          }
          function pl(t, e, r) {
            1 === t && r.readMessage(hl, e)
          }
          function hl(t, e, r) {
            if (3 === t) {
              var n = r.readMessage(fl, {}),
                i = n.width,
                o = n.height,
                a = n.left,
                s = n.top,
                l = n.advance
              e.push({
                id: n.id,
                bitmap: new ya({ width: i + 6, height: o + 6 }, n.bitmap),
                metrics: { width: i, height: o, left: a, top: s, advance: l },
              })
            }
          }
          function fl(t, e, r) {
            1 === t
              ? (e.id = r.readVarint())
              : 2 === t
              ? (e.bitmap = r.readBytes())
              : 3 === t
              ? (e.width = r.readVarint())
              : 4 === t
              ? (e.height = r.readVarint())
              : 5 === t
              ? (e.left = r.readSVarint())
              : 6 === t
              ? (e.top = r.readSVarint())
              : 7 === t && (e.advance = r.readVarint())
          }
          function dl(t) {
            for (var e = 0, r = 0, n = 0, i = t; n < i.length; n += 1) {
              var o = i[n]
              ;(e += o.w * o.h), (r = Math.max(r, o.w))
            }
            t.sort(function (t, e) {
              return e.h - t.h
            })
            for (
              var a = [
                  {
                    x: 0,
                    y: 0,
                    w: Math.max(Math.ceil(Math.sqrt(e / 0.95)), r),
                    h: 1 / 0,
                  },
                ],
                s = 0,
                l = 0,
                u = 0,
                c = t;
              u < c.length;
              u += 1
            )
              for (var p = c[u], h = a.length - 1; h >= 0; h--) {
                var f = a[h]
                if (!(p.w > f.w || p.h > f.h)) {
                  if (
                    ((p.x = f.x),
                    (p.y = f.y),
                    (l = Math.max(l, p.y + p.h)),
                    (s = Math.max(s, p.x + p.w)),
                    p.w === f.w && p.h === f.h)
                  ) {
                    var d = a.pop()
                    h < a.length && (a[h] = d)
                  } else
                    p.h === f.h
                      ? ((f.x += p.w), (f.w -= p.w))
                      : p.w === f.w
                      ? ((f.y += p.h), (f.h -= p.h))
                      : (a.push({ x: f.x + p.w, y: f.y, w: f.w - p.w, h: p.h }),
                        (f.y += p.h),
                        (f.h -= p.h))
                  break
                }
              }
            return { w: s, h: l, fill: e / (s * l) || 0 }
          }
          Ks.prototype = {
            destroy: function () {
              this.buf = null
            },
            readFields: function (t, e, r) {
              for (r = r || this.length; this.pos < r; ) {
                var n = this.readVarint(),
                  i = n >> 3,
                  o = this.pos
                ;(this.type = 7 & n),
                  t(i, e, this),
                  this.pos === o && this.skip(n)
              }
              return e
            },
            readMessage: function (t, e) {
              return this.readFields(t, e, this.readVarint() + this.pos)
            },
            readFixed32: function () {
              var t = ll(this.buf, this.pos)
              return (this.pos += 4), t
            },
            readSFixed32: function () {
              var t = cl(this.buf, this.pos)
              return (this.pos += 4), t
            },
            readFixed64: function () {
              var t =
                ll(this.buf, this.pos) + 4294967296 * ll(this.buf, this.pos + 4)
              return (this.pos += 8), t
            },
            readSFixed64: function () {
              var t =
                ll(this.buf, this.pos) + 4294967296 * cl(this.buf, this.pos + 4)
              return (this.pos += 8), t
            },
            readFloat: function () {
              var t = $s(this.buf, this.pos, !0, 23, 4)
              return (this.pos += 4), t
            },
            readDouble: function () {
              var t = $s(this.buf, this.pos, !0, 52, 8)
              return (this.pos += 8), t
            },
            readVarint: function (t) {
              var e,
                r,
                n = this.buf
              return (
                (e = 127 & (r = n[this.pos++])),
                r < 128
                  ? e
                  : ((e |= (127 & (r = n[this.pos++])) << 7),
                    r < 128
                      ? e
                      : ((e |= (127 & (r = n[this.pos++])) << 14),
                        r < 128
                          ? e
                          : ((e |= (127 & (r = n[this.pos++])) << 21),
                            r < 128
                              ? e
                              : (function (t, e, r) {
                                  var n,
                                    i,
                                    o = r.buf
                                  if (
                                    ((n = (112 & (i = o[r.pos++])) >> 4),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  if (
                                    ((n |= (127 & (i = o[r.pos++])) << 3),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  if (
                                    ((n |= (127 & (i = o[r.pos++])) << 10),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  if (
                                    ((n |= (127 & (i = o[r.pos++])) << 17),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  if (
                                    ((n |= (127 & (i = o[r.pos++])) << 24),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  if (
                                    ((n |= (1 & (i = o[r.pos++])) << 31),
                                    i < 128)
                                  )
                                    return Js(t, n, e)
                                  throw new Error(
                                    'Expected varint not more than 10 bytes'
                                  )
                                })(
                                  (e |= (15 & (r = n[this.pos])) << 28),
                                  t,
                                  this
                                ))))
              )
            },
            readVarint64: function () {
              return this.readVarint(!0)
            },
            readSVarint: function () {
              var t = this.readVarint()
              return t % 2 == 1 ? (t + 1) / -2 : t / 2
            },
            readBoolean: function () {
              return Boolean(this.readVarint())
            },
            readString: function () {
              var t = this.readVarint() + this.pos,
                e = this.pos
              return (
                (this.pos = t),
                t - e >= 12 && Ws
                  ? (function (t, e, r) {
                      return Ws.decode(t.subarray(e, r))
                    })(this.buf, e, t)
                  : (function (t, e, r) {
                      for (var n = '', i = e; i < r; ) {
                        var o,
                          a,
                          s,
                          l = t[i],
                          u = null,
                          c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1
                        if (i + c > r) break
                        1 === c
                          ? l < 128 && (u = l)
                          : 2 === c
                          ? 128 == (192 & (o = t[i + 1])) &&
                            (u = ((31 & l) << 6) | (63 & o)) <= 127 &&
                            (u = null)
                          : 3 === c
                          ? ((a = t[i + 2]),
                            128 == (192 & (o = t[i + 1])) &&
                              128 == (192 & a) &&
                              ((u =
                                ((15 & l) << 12) |
                                ((63 & o) << 6) |
                                (63 & a)) <= 2047 ||
                                (u >= 55296 && u <= 57343)) &&
                              (u = null))
                          : 4 === c &&
                            ((a = t[i + 2]),
                            (s = t[i + 3]),
                            128 == (192 & (o = t[i + 1])) &&
                              128 == (192 & a) &&
                              128 == (192 & s) &&
                              ((u =
                                ((15 & l) << 18) |
                                ((63 & o) << 12) |
                                ((63 & a) << 6) |
                                (63 & s)) <= 65535 ||
                                u >= 1114112) &&
                              (u = null)),
                          null === u
                            ? ((u = 65533), (c = 1))
                            : u > 65535 &&
                              ((u -= 65536),
                              (n += String.fromCharCode(
                                ((u >>> 10) & 1023) | 55296
                              )),
                              (u = 56320 | (1023 & u))),
                          (n += String.fromCharCode(u)),
                          (i += c)
                      }
                      return n
                    })(this.buf, e, t)
              )
            },
            readBytes: function () {
              var t = this.readVarint() + this.pos,
                e = this.buf.subarray(this.pos, t)
              return (this.pos = t), e
            },
            readPackedVarint: function (t, e) {
              if (this.type !== Ks.Bytes) return t.push(this.readVarint(e))
              var r = Hs(this)
              for (t = t || []; this.pos < r; ) t.push(this.readVarint(e))
              return t
            },
            readPackedSVarint: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readSVarint())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readSVarint())
              return t
            },
            readPackedBoolean: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readBoolean())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readBoolean())
              return t
            },
            readPackedFloat: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readFloat())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readFloat())
              return t
            },
            readPackedDouble: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readDouble())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readDouble())
              return t
            },
            readPackedFixed32: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readFixed32())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readFixed32())
              return t
            },
            readPackedSFixed32: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readSFixed32())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readSFixed32())
              return t
            },
            readPackedFixed64: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readFixed64())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readFixed64())
              return t
            },
            readPackedSFixed64: function (t) {
              if (this.type !== Ks.Bytes) return t.push(this.readSFixed64())
              var e = Hs(this)
              for (t = t || []; this.pos < e; ) t.push(this.readSFixed64())
              return t
            },
            skip: function (t) {
              var e = 7 & t
              if (e === Ks.Varint) for (; this.buf[this.pos++] > 127; );
              else if (e === Ks.Bytes) this.pos = this.readVarint() + this.pos
              else if (e === Ks.Fixed32) this.pos += 4
              else {
                if (e !== Ks.Fixed64)
                  throw new Error('Unimplemented type: ' + e)
                this.pos += 8
              }
            },
            writeTag: function (t, e) {
              this.writeVarint((t << 3) | e)
            },
            realloc: function (t) {
              for (var e = this.length || 16; e < this.pos + t; ) e *= 2
              if (e !== this.length) {
                var r = new Uint8Array(e)
                r.set(this.buf), (this.buf = r), (this.length = e)
              }
            },
            finish: function () {
              return (
                (this.length = this.pos),
                (this.pos = 0),
                this.buf.subarray(0, this.length)
              )
            },
            writeFixed32: function (t) {
              this.realloc(4), ul(this.buf, t, this.pos), (this.pos += 4)
            },
            writeSFixed32: function (t) {
              this.realloc(4), ul(this.buf, t, this.pos), (this.pos += 4)
            },
            writeFixed64: function (t) {
              this.realloc(8),
                ul(this.buf, -1 & t, this.pos),
                ul(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4),
                (this.pos += 8)
            },
            writeSFixed64: function (t) {
              this.realloc(8),
                ul(this.buf, -1 & t, this.pos),
                ul(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4),
                (this.pos += 8)
            },
            writeVarint: function (t) {
              ;(t = +t || 0) > 268435455 || t < 0
                ? (function (t, e) {
                    var r, n
                    if (
                      (t >= 0
                        ? ((r = t % 4294967296 | 0), (n = (t / 4294967296) | 0))
                        : ((n = ~(-t / 4294967296)),
                          4294967295 ^ (r = ~(-t % 4294967296))
                            ? (r = (r + 1) | 0)
                            : ((r = 0), (n = (n + 1) | 0))),
                      t >= 0x10000000000000000 || t < -0x10000000000000000)
                    )
                      throw new Error("Given varint doesn't fit into 10 bytes")
                    e.realloc(10),
                      (function (t, e, r) {
                        ;(r.buf[r.pos++] = (127 & t) | 128),
                          (t >>>= 7),
                          (r.buf[r.pos++] = (127 & t) | 128),
                          (t >>>= 7),
                          (r.buf[r.pos++] = (127 & t) | 128),
                          (t >>>= 7),
                          (r.buf[r.pos++] = (127 & t) | 128),
                          (r.buf[r.pos] = 127 & (t >>>= 7))
                      })(r, 0, e),
                      (function (t, e) {
                        var r = (7 & t) << 4
                        ;(e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0)),
                          t &&
                            ((e.buf[e.pos++] =
                              (127 & t) | ((t >>>= 7) ? 128 : 0)),
                            t &&
                              ((e.buf[e.pos++] =
                                (127 & t) | ((t >>>= 7) ? 128 : 0)),
                              t &&
                                ((e.buf[e.pos++] =
                                  (127 & t) | ((t >>>= 7) ? 128 : 0)),
                                t &&
                                  ((e.buf[e.pos++] =
                                    (127 & t) | ((t >>>= 7) ? 128 : 0)),
                                  t && (e.buf[e.pos++] = 127 & t)))))
                      })(n, e)
                  })(t, this)
                : (this.realloc(4),
                  (this.buf[this.pos++] = (127 & t) | (t > 127 ? 128 : 0)),
                  t <= 127 ||
                    ((this.buf[this.pos++] =
                      (127 & (t >>>= 7)) | (t > 127 ? 128 : 0)),
                    t <= 127 ||
                      ((this.buf[this.pos++] =
                        (127 & (t >>>= 7)) | (t > 127 ? 128 : 0)),
                      t <= 127 || (this.buf[this.pos++] = (t >>> 7) & 127))))
            },
            writeSVarint: function (t) {
              this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t)
            },
            writeBoolean: function (t) {
              this.writeVarint(Boolean(t))
            },
            writeString: function (t) {
              ;(t = String(t)), this.realloc(4 * t.length), this.pos++
              var e = this.pos
              this.pos = (function (t, e, r) {
                for (var n, i, o = 0; o < e.length; o++) {
                  if ((n = e.charCodeAt(o)) > 55295 && n < 57344) {
                    if (!i) {
                      n > 56319 || o + 1 === e.length
                        ? ((t[r++] = 239), (t[r++] = 191), (t[r++] = 189))
                        : (i = n)
                      continue
                    }
                    if (n < 56320) {
                      ;(t[r++] = 239), (t[r++] = 191), (t[r++] = 189), (i = n)
                      continue
                    }
                    ;(n = ((i - 55296) << 10) | (n - 56320) | 65536), (i = null)
                  } else
                    i &&
                      ((t[r++] = 239),
                      (t[r++] = 191),
                      (t[r++] = 189),
                      (i = null))
                  n < 128
                    ? (t[r++] = n)
                    : (n < 2048
                        ? (t[r++] = (n >> 6) | 192)
                        : (n < 65536
                            ? (t[r++] = (n >> 12) | 224)
                            : ((t[r++] = (n >> 18) | 240),
                              (t[r++] = ((n >> 12) & 63) | 128)),
                          (t[r++] = ((n >> 6) & 63) | 128)),
                      (t[r++] = (63 & n) | 128))
                }
                return r
              })(this.buf, t, this.pos)
              var r = this.pos - e
              r >= 128 && Ys(e, r, this),
                (this.pos = e - 1),
                this.writeVarint(r),
                (this.pos += r)
            },
            writeFloat: function (t) {
              this.realloc(4),
                Zs(this.buf, t, this.pos, !0, 23, 4),
                (this.pos += 4)
            },
            writeDouble: function (t) {
              this.realloc(8),
                Zs(this.buf, t, this.pos, !0, 52, 8),
                (this.pos += 8)
            },
            writeBytes: function (t) {
              var e = t.length
              this.writeVarint(e), this.realloc(e)
              for (var r = 0; r < e; r++) this.buf[this.pos++] = t[r]
            },
            writeRawMessage: function (t, e) {
              this.pos++
              var r = this.pos
              t(e, this)
              var n = this.pos - r
              n >= 128 && Ys(r, n, this),
                (this.pos = r - 1),
                this.writeVarint(n),
                (this.pos += n)
            },
            writeMessage: function (t, e, r) {
              this.writeTag(t, Ks.Bytes), this.writeRawMessage(e, r)
            },
            writePackedVarint: function (t, e) {
              e.length && this.writeMessage(t, Qs, e)
            },
            writePackedSVarint: function (t, e) {
              e.length && this.writeMessage(t, tl, e)
            },
            writePackedBoolean: function (t, e) {
              e.length && this.writeMessage(t, nl, e)
            },
            writePackedFloat: function (t, e) {
              e.length && this.writeMessage(t, el, e)
            },
            writePackedDouble: function (t, e) {
              e.length && this.writeMessage(t, rl, e)
            },
            writePackedFixed32: function (t, e) {
              e.length && this.writeMessage(t, il, e)
            },
            writePackedSFixed32: function (t, e) {
              e.length && this.writeMessage(t, ol, e)
            },
            writePackedFixed64: function (t, e) {
              e.length && this.writeMessage(t, al, e)
            },
            writePackedSFixed64: function (t, e) {
              e.length && this.writeMessage(t, sl, e)
            },
            writeBytesField: function (t, e) {
              this.writeTag(t, Ks.Bytes), this.writeBytes(e)
            },
            writeFixed32Field: function (t, e) {
              this.writeTag(t, Ks.Fixed32), this.writeFixed32(e)
            },
            writeSFixed32Field: function (t, e) {
              this.writeTag(t, Ks.Fixed32), this.writeSFixed32(e)
            },
            writeFixed64Field: function (t, e) {
              this.writeTag(t, Ks.Fixed64), this.writeFixed64(e)
            },
            writeSFixed64Field: function (t, e) {
              this.writeTag(t, Ks.Fixed64), this.writeSFixed64(e)
            },
            writeVarintField: function (t, e) {
              this.writeTag(t, Ks.Varint), this.writeVarint(e)
            },
            writeSVarintField: function (t, e) {
              this.writeTag(t, Ks.Varint), this.writeSVarint(e)
            },
            writeStringField: function (t, e) {
              this.writeTag(t, Ks.Bytes), this.writeString(e)
            },
            writeFloatField: function (t, e) {
              this.writeTag(t, Ks.Fixed32), this.writeFloat(e)
            },
            writeDoubleField: function (t, e) {
              this.writeTag(t, Ks.Fixed64), this.writeDouble(e)
            },
            writeBooleanField: function (t, e) {
              this.writeVarintField(t, Boolean(e))
            },
          }
          var ml = function (t, e) {
              var r = e.pixelRatio,
                n = e.version,
                i = e.stretchX,
                o = e.stretchY,
                a = e.content
              ;(this.paddedRect = t),
                (this.pixelRatio = r),
                (this.stretchX = i),
                (this.stretchY = o),
                (this.content = a),
                (this.version = n)
            },
            yl = {
              tl: { configurable: !0 },
              br: { configurable: !0 },
              tlbr: { configurable: !0 },
              displaySize: { configurable: !0 },
            }
          ;(yl.tl.get = function () {
            return [this.paddedRect.x + 1, this.paddedRect.y + 1]
          }),
            (yl.br.get = function () {
              return [
                this.paddedRect.x + this.paddedRect.w - 1,
                this.paddedRect.y + this.paddedRect.h - 1,
              ]
            }),
            (yl.tlbr.get = function () {
              return this.tl.concat(this.br)
            }),
            (yl.displaySize.get = function () {
              return [
                (this.paddedRect.w - 2) / this.pixelRatio,
                (this.paddedRect.h - 2) / this.pixelRatio,
              ]
            }),
            Object.defineProperties(ml.prototype, yl)
          var vl = function (t, e) {
            var r = {},
              n = {}
            this.haveRenderCallbacks = []
            var i = []
            this.addImages(t, r, i), this.addImages(e, n, i)
            var o = dl(i),
              a = new va({ width: o.w || 1, height: o.h || 1 })
            for (var s in t) {
              var l = t[s],
                u = r[s].paddedRect
              va.copy(
                l.data,
                a,
                { x: 0, y: 0 },
                { x: u.x + 1, y: u.y + 1 },
                l.data
              )
            }
            for (var c in e) {
              var p = e[c],
                h = n[c].paddedRect,
                f = h.x + 1,
                d = h.y + 1,
                m = p.data.width,
                y = p.data.height
              va.copy(p.data, a, { x: 0, y: 0 }, { x: f, y: d }, p.data),
                va.copy(
                  p.data,
                  a,
                  { x: 0, y: y - 1 },
                  { x: f, y: d - 1 },
                  { width: m, height: 1 }
                ),
                va.copy(
                  p.data,
                  a,
                  { x: 0, y: 0 },
                  { x: f, y: d + y },
                  { width: m, height: 1 }
                ),
                va.copy(
                  p.data,
                  a,
                  { x: m - 1, y: 0 },
                  { x: f - 1, y: d },
                  { width: 1, height: y }
                ),
                va.copy(
                  p.data,
                  a,
                  { x: 0, y: 0 },
                  { x: f + m, y: d },
                  { width: 1, height: y }
                )
            }
            ;(this.image = a),
              (this.iconPositions = r),
              (this.patternPositions = n)
          }
          ;(vl.prototype.addImages = function (t, e, r) {
            for (var n in t) {
              var i = t[n],
                o = { x: 0, y: 0, w: i.data.width + 2, h: i.data.height + 2 }
              r.push(o),
                (e[n] = new ml(o, i)),
                i.hasRenderCallback && this.haveRenderCallbacks.push(n)
            }
          }),
            (vl.prototype.patchUpdatedImages = function (t, e) {
              for (var r in (t.dispatchRenderCallbacks(
                this.haveRenderCallbacks
              ),
              t.updatedImages))
                this.patchUpdatedImage(this.iconPositions[r], t.getImage(r), e),
                  this.patchUpdatedImage(
                    this.patternPositions[r],
                    t.getImage(r),
                    e
                  )
            }),
            (vl.prototype.patchUpdatedImage = function (t, e, r) {
              if (t && e && t.version !== e.version) {
                t.version = e.version
                var n = t.tl
                r.update(e.data, void 0, { x: n[0], y: n[1] })
              }
            }),
            Vn('ImagePosition', ml),
            Vn('ImageAtlas', vl)
          var gl = { horizontal: 1, vertical: 2, horizontalOnly: 3 },
            _l = function () {
              ;(this.scale = 1), (this.fontStack = ''), (this.imageName = null)
            }
          ;(_l.forText = function (t, e) {
            var r = new _l()
            return (r.scale = t || 1), (r.fontStack = e), r
          }),
            (_l.forImage = function (t) {
              var e = new _l()
              return (e.imageName = t), e
            })
          var xl = function () {
            ;(this.text = ''),
              (this.sectionIndex = []),
              (this.sections = []),
              (this.imageSectionID = null)
          }
          function bl(t, e, r, n, i, o, a, s, l, u, c, p, h, f, d, m) {
            var y,
              v = xl.fromFeature(t, i)
            p === gl.vertical && v.verticalizePunctuation()
            var g = ci.processBidirectionalText,
              _ = ci.processStyledBidirectionalText
            if (g && 1 === v.sections.length) {
              y = []
              for (
                var x = 0, b = g(v.toString(), Al(v, u, o, e, n, f, d));
                x < b.length;
                x += 1
              ) {
                var w = b[x],
                  E = new xl()
                ;(E.text = w), (E.sections = v.sections)
                for (var S = 0; S < w.length; S++) E.sectionIndex.push(0)
                y.push(E)
              }
            } else if (_) {
              y = []
              for (
                var T = 0,
                  I = _(v.text, v.sectionIndex, Al(v, u, o, e, n, f, d));
                T < I.length;
                T += 1
              ) {
                var C = I[T],
                  A = new xl()
                ;(A.text = C[0]),
                  (A.sectionIndex = C[1]),
                  (A.sections = v.sections),
                  y.push(A)
              }
            } else
              y = (function (t, e) {
                for (
                  var r = [], n = t.text, i = 0, o = 0, a = e;
                  o < a.length;
                  o += 1
                ) {
                  var s = a[o]
                  r.push(t.substring(i, s)), (i = s)
                }
                return i < n.length && r.push(t.substring(i, n.length)), r
              })(v, Al(v, u, o, e, n, f, d))
            var k = [],
              P = {
                positionedLines: k,
                text: v.toString(),
                top: c[1],
                bottom: c[1],
                left: c[0],
                right: c[0],
                writingMode: p,
                iconsInText: !1,
                verticalizable: !1,
              }
            return (
              (function (t, e, r, n, i, o, a, s, l, u, c, p) {
                for (
                  var h = 0,
                    f = -17,
                    d = 0,
                    m = 0,
                    y = 'right' === s ? 1 : 'left' === s ? 0 : 0.5,
                    v = 0,
                    g = 0,
                    _ = i;
                  g < _.length;
                  g += 1
                ) {
                  var x = _[g]
                  x.trim()
                  var b = x.getMaxScale(),
                    w = 24 * (b - 1),
                    E = { positionedGlyphs: [], lineOffset: 0 }
                  t.positionedLines[v] = E
                  var S = E.positionedGlyphs,
                    T = 0
                  if (x.length()) {
                    for (var I = 0; I < x.length(); I++) {
                      var C = x.getSection(I),
                        A = x.getSectionIndex(I),
                        k = x.getCharCode(I),
                        P = 0,
                        M = null,
                        L = null,
                        z = null,
                        O = 24,
                        D = !(
                          l === gl.horizontal ||
                          (!c && !Jn(k)) ||
                          (c &&
                            (wl[k] ||
                              ((G = k),
                              Wn.Arabic(G) ||
                                Wn['Arabic Supplement'](G) ||
                                Wn['Arabic Extended-A'](G) ||
                                Wn['Arabic Presentation Forms-A'](G) ||
                                Wn['Arabic Presentation Forms-B'](G))))
                        )
                      if (C.imageName) {
                        var R = n[C.imageName]
                        if (!R) continue
                        ;(z = C.imageName),
                          (t.iconsInText = t.iconsInText || !0),
                          (L = R.paddedRect)
                        var F = R.displaySize
                        ;(C.scale = (24 * C.scale) / p),
                          (P = w + (24 - F[1] * C.scale)),
                          (O = (M = {
                            width: F[0],
                            height: F[1],
                            left: 1,
                            top: -3,
                            advance: D ? F[1] : F[0],
                          }).advance)
                        var B = D
                          ? F[0] * C.scale - 24 * b
                          : F[1] * C.scale - 24 * b
                        B > 0 && B > T && (T = B)
                      } else {
                        var N = r[C.fontStack],
                          U = N && N[k]
                        if (U && U.rect) (L = U.rect), (M = U.metrics)
                        else {
                          var j = e[C.fontStack],
                            V = j && j[k]
                          if (!V) continue
                          M = V.metrics
                        }
                        P = 24 * (b - C.scale)
                      }
                      D
                        ? ((t.verticalizable = !0),
                          S.push({
                            glyph: k,
                            imageName: z,
                            x: h,
                            y: f + P,
                            vertical: D,
                            scale: C.scale,
                            fontStack: C.fontStack,
                            sectionIndex: A,
                            metrics: M,
                            rect: L,
                          }),
                          (h += O * C.scale + u))
                        : (S.push({
                            glyph: k,
                            imageName: z,
                            x: h,
                            y: f + P,
                            vertical: D,
                            scale: C.scale,
                            fontStack: C.fontStack,
                            sectionIndex: A,
                            metrics: M,
                            rect: L,
                          }),
                          (h += M.advance * C.scale + u))
                    }
                    0 !== S.length &&
                      ((d = Math.max(h - u, d)), Pl(S, 0, S.length - 1, y, T)),
                      (h = 0)
                    var q = o * b + T
                    ;(E.lineOffset = Math.max(T, w)),
                      (f += q),
                      (m = Math.max(q, m)),
                      ++v
                  } else (f += o), ++v
                }
                var G,
                  $ = f - -17,
                  Z = kl(a),
                  X = Z.horizontalAlign,
                  K = Z.verticalAlign
                ;(function (t, e, r, n, i, o, a, s, l) {
                  var u,
                    c = (e - r) * i
                  u = o !== a ? -s * n - -17 : (-n * l + 0.5) * a
                  for (var p = 0, h = t; p < h.length; p += 1)
                    for (
                      var f = 0, d = h[p].positionedGlyphs;
                      f < d.length;
                      f += 1
                    ) {
                      var m = d[f]
                      ;(m.x += c), (m.y += u)
                    }
                })(t.positionedLines, y, X, K, d, m, o, $, i.length),
                  (t.top += -K * $),
                  (t.bottom = t.top + $),
                  (t.left += -X * d),
                  (t.right = t.left + d)
              })(P, e, r, n, y, a, s, l, p, u, h, m),
              !(function (t) {
                for (var e = 0, r = t; e < r.length; e += 1)
                  if (0 !== r[e].positionedGlyphs.length) return !1
                return !0
              })(k) && P
            )
          }
          ;(xl.fromFeature = function (t, e) {
            for (var r = new xl(), n = 0; n < t.sections.length; n++) {
              var i = t.sections[n]
              i.image ? r.addImageSection(i) : r.addTextSection(i, e)
            }
            return r
          }),
            (xl.prototype.length = function () {
              return this.text.length
            }),
            (xl.prototype.getSection = function (t) {
              return this.sections[this.sectionIndex[t]]
            }),
            (xl.prototype.getSectionIndex = function (t) {
              return this.sectionIndex[t]
            }),
            (xl.prototype.getCharCode = function (t) {
              return this.text.charCodeAt(t)
            }),
            (xl.prototype.verticalizePunctuation = function () {
              this.text = (function (t) {
                for (var e = '', r = 0; r < t.length; r++) {
                  var n = t.charCodeAt(r + 1) || null,
                    i = t.charCodeAt(r - 1) || null
                  e +=
                    (n && Yn(n) && !Gs[t[r + 1]]) ||
                    (i && Yn(i) && !Gs[t[r - 1]]) ||
                    !Gs[t[r]]
                      ? t[r]
                      : Gs[t[r]]
                }
                return e
              })(this.text)
            }),
            (xl.prototype.trim = function () {
              for (
                var t = 0, e = 0;
                e < this.text.length && wl[this.text.charCodeAt(e)];
                e++
              )
                t++
              for (
                var r = this.text.length, n = this.text.length - 1;
                n >= 0 && n >= t && wl[this.text.charCodeAt(n)];
                n--
              )
                r--
              ;(this.text = this.text.substring(t, r)),
                (this.sectionIndex = this.sectionIndex.slice(t, r))
            }),
            (xl.prototype.substring = function (t, e) {
              var r = new xl()
              return (
                (r.text = this.text.substring(t, e)),
                (r.sectionIndex = this.sectionIndex.slice(t, e)),
                (r.sections = this.sections),
                r
              )
            }),
            (xl.prototype.toString = function () {
              return this.text
            }),
            (xl.prototype.getMaxScale = function () {
              var t = this
              return this.sectionIndex.reduce(function (e, r) {
                return Math.max(e, t.sections[r].scale)
              }, 0)
            }),
            (xl.prototype.addTextSection = function (t, e) {
              ;(this.text += t.text),
                this.sections.push(_l.forText(t.scale, t.fontStack || e))
              for (
                var r = this.sections.length - 1, n = 0;
                n < t.text.length;
                ++n
              )
                this.sectionIndex.push(r)
            }),
            (xl.prototype.addImageSection = function (t) {
              var e = t.image ? t.image.name : ''
              if (0 !== e.length) {
                var r = this.getNextImageSectionCharCode()
                r
                  ? ((this.text += String.fromCharCode(r)),
                    this.sections.push(_l.forImage(e)),
                    this.sectionIndex.push(this.sections.length - 1))
                  : b('Reached maximum number of images 6401')
              } else b("Can't add FormattedSection with an empty image.")
            }),
            (xl.prototype.getNextImageSectionCharCode = function () {
              return this.imageSectionID
                ? this.imageSectionID >= 63743
                  ? null
                  : ++this.imageSectionID
                : ((this.imageSectionID = 57344), this.imageSectionID)
            })
          var wl = { 9: !0, 10: !0, 11: !0, 12: !0, 13: !0, 32: !0 },
            El = {}
          function Sl(t, e, r, n, i, o) {
            if (e.imageName) {
              var a = n[e.imageName]
              return a ? (a.displaySize[0] * e.scale * 24) / o + i : 0
            }
            var s = r[e.fontStack],
              l = s && s[t]
            return l ? l.metrics.advance * e.scale + i : 0
          }
          function Tl(t, e, r, n) {
            var i = Math.pow(t - e, 2)
            return n ? (t < e ? i / 2 : 2 * i) : i + Math.abs(r) * r
          }
          function Il(t, e, r) {
            var n = 0
            return (
              10 === t && (n -= 1e4),
              r && (n += 150),
              (40 !== t && 65288 !== t) || (n += 50),
              (41 !== e && 65289 !== e) || (n += 50),
              n
            )
          }
          function Cl(t, e, r, n, i, o) {
            for (
              var a = null, s = Tl(e, r, i, o), l = 0, u = n;
              l < u.length;
              l += 1
            ) {
              var c = u[l],
                p = Tl(e - c.x, r, i, o) + c.badness
              p <= s && ((a = c), (s = p))
            }
            return { index: t, x: e, priorBreak: a, badness: s }
          }
          function Al(t, e, r, n, i, o, a) {
            if ('point' !== o) return []
            if (!t) return []
            for (
              var s,
                l = [],
                u = (function (t, e, r, n, i, o) {
                  for (var a = 0, s = 0; s < t.length(); s++) {
                    var l = t.getSection(s)
                    a += Sl(t.getCharCode(s), l, n, i, e, o)
                  }
                  return a / Math.max(1, Math.ceil(a / r))
                })(t, e, r, n, i, a),
                c = t.text.indexOf('​') >= 0,
                p = 0,
                h = 0;
              h < t.length();
              h++
            ) {
              var f = t.getSection(h),
                d = t.getCharCode(h)
              if ((wl[d] || (p += Sl(d, f, n, i, e, a)), h < t.length() - 1)) {
                var m = !(
                  (s = d) < 11904 ||
                  !(
                    Wn['Bopomofo Extended'](s) ||
                    Wn.Bopomofo(s) ||
                    Wn['CJK Compatibility Forms'](s) ||
                    Wn['CJK Compatibility Ideographs'](s) ||
                    Wn['CJK Compatibility'](s) ||
                    Wn['CJK Radicals Supplement'](s) ||
                    Wn['CJK Strokes'](s) ||
                    Wn['CJK Symbols and Punctuation'](s) ||
                    Wn['CJK Unified Ideographs Extension A'](s) ||
                    Wn['CJK Unified Ideographs'](s) ||
                    Wn['Enclosed CJK Letters and Months'](s) ||
                    Wn['Halfwidth and Fullwidth Forms'](s) ||
                    Wn.Hiragana(s) ||
                    Wn['Ideographic Description Characters'](s) ||
                    Wn['Kangxi Radicals'](s) ||
                    Wn['Katakana Phonetic Extensions'](s) ||
                    Wn.Katakana(s) ||
                    Wn['Vertical Forms'](s) ||
                    Wn['Yi Radicals'](s) ||
                    Wn['Yi Syllables'](s)
                  )
                )
                ;(El[d] || m || f.imageName) &&
                  l.push(
                    Cl(h + 1, p, u, l, Il(d, t.getCharCode(h + 1), m && c), !1)
                  )
              }
            }
            return (function t(e) {
              return e ? t(e.priorBreak).concat(e.index) : []
            })(Cl(t.length(), p, u, l, 0, !0))
          }
          function kl(t) {
            var e = 0.5,
              r = 0.5
            switch (t) {
              case 'right':
              case 'top-right':
              case 'bottom-right':
                e = 1
                break
              case 'left':
              case 'top-left':
              case 'bottom-left':
                e = 0
            }
            switch (t) {
              case 'bottom':
              case 'bottom-right':
              case 'bottom-left':
                r = 1
                break
              case 'top':
              case 'top-right':
              case 'top-left':
                r = 0
            }
            return { horizontalAlign: e, verticalAlign: r }
          }
          function Pl(t, e, r, n, i) {
            if (n || i)
              for (
                var o = t[r],
                  a = (t[r].x + o.metrics.advance * o.scale) * n,
                  s = e;
                s <= r;
                s++
              )
                (t[s].x -= a), (t[s].y += i)
          }
          function Ml(t, e, r, n, i, o) {
            var a,
              s = t.image
            if (s.content) {
              var l = s.content,
                u = s.pixelRatio || 1
              a = [
                l[0] / u,
                l[1] / u,
                s.displaySize[0] - l[2] / u,
                s.displaySize[1] - l[3] / u,
              ]
            }
            var c,
              p,
              h,
              f,
              d = e.left * o,
              m = e.right * o
            'width' === r || 'both' === r
              ? ((f = i[0] + d - n[3]), (p = i[0] + m + n[1]))
              : (p =
                  (f = i[0] + (d + m - s.displaySize[0]) / 2) +
                  s.displaySize[0])
            var y = e.top * o,
              v = e.bottom * o
            return (
              'height' === r || 'both' === r
                ? ((c = i[1] + y - n[0]), (h = i[1] + v + n[2]))
                : (h =
                    (c = i[1] + (y + v - s.displaySize[1]) / 2) +
                    s.displaySize[1]),
              {
                image: s,
                top: c,
                right: p,
                bottom: h,
                left: f,
                collisionPadding: a,
              }
            )
          }
          ;(El[10] = !0),
            (El[32] = !0),
            (El[38] = !0),
            (El[40] = !0),
            (El[41] = !0),
            (El[43] = !0),
            (El[45] = !0),
            (El[47] = !0),
            (El[173] = !0),
            (El[183] = !0),
            (El[8203] = !0),
            (El[8208] = !0),
            (El[8211] = !0),
            (El[8231] = !0)
          var Ll = (function (t) {
            function e(e, r, n, i) {
              t.call(this, e, r),
                (this.angle = n),
                void 0 !== i && (this.segment = i)
            }
            return (
              t && (e.__proto__ = t),
              ((e.prototype = Object.create(t && t.prototype)).constructor = e),
              (e.prototype.clone = function () {
                return new e(this.x, this.y, this.angle, this.segment)
              }),
              e
            )
          })(i)
          Vn('Anchor', Ll)
          var zl = 128
          function Ol(t, e) {
            var r = e.expression
            if ('constant' === r.kind)
              return { kind: 'constant', layoutSize: r.evaluate(new pi(t + 1)) }
            if ('source' === r.kind) return { kind: 'source' }
            for (
              var n = r.zoomStops, i = r.interpolationType, o = 0;
              o < n.length && n[o] <= t;

            )
              o++
            for (
              var a = (o = Math.max(0, o - 1));
              a < n.length && n[a] < t + 1;

            )
              a++
            a = Math.min(n.length - 1, a)
            var s = n[o],
              l = n[a]
            return 'composite' === r.kind
              ? {
                  kind: 'composite',
                  minZoom: s,
                  maxZoom: l,
                  interpolationType: i,
                }
              : {
                  kind: 'camera',
                  minZoom: s,
                  maxZoom: l,
                  minSize: r.evaluate(new pi(s)),
                  maxSize: r.evaluate(new pi(l)),
                  interpolationType: i,
                }
          }
          function Dl(t, e, r) {
            var n = e.uSize,
              i = r.lowerSize
            return 'source' === t.kind
              ? i / zl
              : 'composite' === t.kind
              ? We(i / zl, r.upperSize / zl, e.uSizeT)
              : n
          }
          function Rl(t, e) {
            var r = 0,
              n = 0
            if ('constant' === t.kind) n = t.layoutSize
            else if ('source' !== t.kind) {
              var i = t.interpolationType,
                o = i
                  ? l(pr.interpolationFactor(i, e, t.minZoom, t.maxZoom), 0, 1)
                  : 0
              'camera' === t.kind ? (n = We(t.minSize, t.maxSize, o)) : (r = o)
            }
            return { uSizeT: r, uSize: n }
          }
          var Fl = Object.freeze({
            __proto__: null,
            getSizeData: Ol,
            evaluateSizeForFeature: Dl,
            evaluateSizeForZoom: Rl,
            SIZE_PACK_FACTOR: zl,
          })
          function Bl(t, e, r, n, i) {
            if (void 0 === e.segment) return !0
            for (var o = e, a = e.segment + 1, s = 0; s > -r / 2; ) {
              if (--a < 0) return !1
              ;(s -= t[a].dist(o)), (o = t[a])
            }
            ;(s += t[a].dist(t[a + 1])), a++
            for (var l = [], u = 0; s < r / 2; ) {
              var c = t[a],
                p = t[a + 1]
              if (!p) return !1
              var h = t[a - 1].angleTo(c) - c.angleTo(p)
              for (
                h = Math.abs(((h + 3 * Math.PI) % (2 * Math.PI)) - Math.PI),
                  l.push({ distance: s, angleDelta: h }),
                  u += h;
                s - l[0].distance > n;

              )
                u -= l.shift().angleDelta
              if (u > i) return !1
              a++, (s += c.dist(p))
            }
            return !0
          }
          function Nl(t) {
            for (var e = 0, r = 0; r < t.length - 1; r++)
              e += t[r].dist(t[r + 1])
            return e
          }
          function Ul(t, e, r) {
            return t ? 0.6 * e * r : 0
          }
          function jl(t, e) {
            return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0)
          }
          function Vl(t, e, r, n, i, o) {
            for (
              var a = Ul(r, i, o),
                s = jl(r, n) * o,
                l = 0,
                u = Nl(t) / 2,
                c = 0;
              c < t.length - 1;
              c++
            ) {
              var p = t[c],
                h = t[c + 1],
                f = p.dist(h)
              if (l + f > u) {
                var d = (u - l) / f,
                  m = We(p.x, h.x, d),
                  y = We(p.y, h.y, d),
                  v = new Ll(m, y, h.angleTo(p), c)
                return v._round(), !a || Bl(t, v, s, a, e) ? v : void 0
              }
              l += f
            }
          }
          function ql(t, e, r, n, i, o, a, s, l) {
            var u = Ul(n, o, a),
              c = jl(n, i),
              p = c * a,
              h = 0 === t[0].x || t[0].x === l || 0 === t[0].y || t[0].y === l
            return (
              e - p < e / 4 && (e = p + e / 4),
              (function t(e, r, n, i, o, a, s, l, u) {
                for (
                  var c = a / 2, p = Nl(e), h = 0, f = r - n, d = [], m = 0;
                  m < e.length - 1;
                  m++
                ) {
                  for (
                    var y = e[m], v = e[m + 1], g = y.dist(v), _ = v.angleTo(y);
                    f + n < h + g;

                  ) {
                    var x = ((f += n) - h) / g,
                      b = We(y.x, v.x, x),
                      w = We(y.y, v.y, x)
                    if (
                      b >= 0 &&
                      b < u &&
                      w >= 0 &&
                      w < u &&
                      f - c >= 0 &&
                      f + c <= p
                    ) {
                      var E = new Ll(b, w, _, m)
                      E._round(), (i && !Bl(e, E, a, i, o)) || d.push(E)
                    }
                  }
                  h += g
                }
                return (
                  l || d.length || s || (d = t(e, h / 2, n, i, o, a, s, !0, u)),
                  d
                )
              })(
                t,
                h ? ((e / 2) * s) % e : ((c / 2 + 2 * o) * a * s) % e,
                e,
                u,
                r,
                p,
                h,
                !1,
                l
              )
            )
          }
          function Gl(t, e, r, n) {
            var o = [],
              a = t.image,
              s = a.pixelRatio,
              l = a.paddedRect.w - 2,
              u = a.paddedRect.h - 2,
              c = t.right - t.left,
              p = t.bottom - t.top,
              h = a.stretchX || [[0, l]],
              f = a.stretchY || [[0, u]],
              d = function (t, e) {
                return t + e[1] - e[0]
              },
              m = h.reduce(d, 0),
              y = f.reduce(d, 0),
              v = l - m,
              g = u - y,
              _ = 0,
              x = m,
              b = 0,
              w = y,
              E = 0,
              S = v,
              T = 0,
              I = g
            if (a.content && n) {
              var C = a.content
              ;(_ = $l(h, 0, C[0])),
                (b = $l(f, 0, C[1])),
                (x = $l(h, C[0], C[2])),
                (w = $l(f, C[1], C[3])),
                (E = C[0] - _),
                (T = C[1] - b),
                (S = C[2] - C[0] - x),
                (I = C[3] - C[1] - w)
            }
            var A = function (n, o, l, u) {
              var h = Xl(n.stretch - _, x, c, t.left),
                f = Kl(n.fixed - E, S, n.stretch, m),
                d = Xl(o.stretch - b, w, p, t.top),
                v = Kl(o.fixed - T, I, o.stretch, y),
                g = Xl(l.stretch - _, x, c, t.left),
                C = Kl(l.fixed - E, S, l.stretch, m),
                A = Xl(u.stretch - b, w, p, t.top),
                k = Kl(u.fixed - T, I, u.stretch, y),
                P = new i(h, d),
                M = new i(g, d),
                L = new i(g, A),
                z = new i(h, A),
                O = new i(f / s, v / s),
                D = new i(C / s, k / s),
                R = (e * Math.PI) / 180
              if (R) {
                var F = Math.sin(R),
                  B = Math.cos(R),
                  N = [B, -F, F, B]
                P._matMult(N), M._matMult(N), z._matMult(N), L._matMult(N)
              }
              var U = n.stretch + n.fixed,
                j = o.stretch + o.fixed
              return {
                tl: P,
                tr: M,
                bl: z,
                br: L,
                tex: {
                  x: a.paddedRect.x + 1 + U,
                  y: a.paddedRect.y + 1 + j,
                  w: l.stretch + l.fixed - U,
                  h: u.stretch + u.fixed - j,
                },
                writingMode: void 0,
                glyphOffset: [0, 0],
                sectionIndex: 0,
                pixelOffsetTL: O,
                pixelOffsetBR: D,
                minFontScaleX: S / s / c,
                minFontScaleY: I / s / p,
                isSDF: r,
              }
            }
            if (n && (a.stretchX || a.stretchY))
              for (
                var k = Zl(h, v, m), P = Zl(f, g, y), M = 0;
                M < k.length - 1;
                M++
              )
                for (var L = k[M], z = k[M + 1], O = 0; O < P.length - 1; O++)
                  o.push(A(L, P[O], z, P[O + 1]))
            else
              o.push(
                A(
                  { fixed: 0, stretch: -1 },
                  { fixed: 0, stretch: -1 },
                  { fixed: 0, stretch: l + 1 },
                  { fixed: 0, stretch: u + 1 }
                )
              )
            return o
          }
          function $l(t, e, r) {
            for (var n = 0, i = 0, o = t; i < o.length; i += 1) {
              var a = o[i]
              n +=
                Math.max(e, Math.min(r, a[1])) - Math.max(e, Math.min(r, a[0]))
            }
            return n
          }
          function Zl(t, e, r) {
            for (
              var n = [{ fixed: -1, stretch: 0 }], i = 0, o = t;
              i < o.length;
              i += 1
            ) {
              var a = o[i],
                s = a[0],
                l = a[1],
                u = n[n.length - 1]
              n.push({ fixed: s - u.stretch, stretch: u.stretch }),
                n.push({ fixed: s - u.stretch, stretch: u.stretch + (l - s) })
            }
            return n.push({ fixed: e + 1, stretch: r }), n
          }
          function Xl(t, e, r, n) {
            return (t / e) * r + n
          }
          function Kl(t, e, r, n) {
            return t - (e * r) / n
          }
          var Wl = function (t, e, r, n, o, a, s, l, u, c, p, h) {
            var f = s.top * l - u,
              d = s.bottom * l + u,
              m = s.left * l - u,
              y = s.right * l + u,
              v = s.collisionPadding
            if (
              (v &&
                ((m -= v[0] * l),
                (f -= v[1] * l),
                (y += v[2] * l),
                (d += v[3] * l)),
              (this.boxStartIndex = t.length),
              c)
            ) {
              var g = d - f,
                _ = y - m
              g > 0 &&
                ((g = Math.max(10 * l, g)),
                this._addLineCollisionCircles(
                  t,
                  e,
                  r,
                  r.segment,
                  _,
                  g,
                  n,
                  o,
                  a,
                  p
                ))
            } else {
              if (h) {
                var x = new i(m, f),
                  b = new i(y, f),
                  w = new i(m, d),
                  E = new i(y, d),
                  S = (h * Math.PI) / 180
                x._rotate(S),
                  b._rotate(S),
                  w._rotate(S),
                  E._rotate(S),
                  (m = Math.min(x.x, b.x, w.x, E.x)),
                  (y = Math.max(x.x, b.x, w.x, E.x)),
                  (f = Math.min(x.y, b.y, w.y, E.y)),
                  (d = Math.max(x.y, b.y, w.y, E.y))
              }
              t.emplaceBack(r.x, r.y, m, f, y, d, n, o, a, 0, 0)
            }
            this.boxEndIndex = t.length
          }
          Wl.prototype._addLineCollisionCircles = function (
            t,
            e,
            r,
            n,
            i,
            o,
            a,
            s,
            l,
            u
          ) {
            var c = o / 2,
              p = Math.floor(i / c) || 1,
              h = 1 + (0.4 * Math.log(u)) / Math.LN2,
              f = Math.floor((p * h) / 2),
              d = -o / 2,
              m = r,
              y = n + 1,
              v = d,
              g = -i / 2,
              _ = g - i / 4
            do {
              if (--y < 0) {
                if (v > g) return
                y = 0
                break
              }
              ;(v -= e[y].dist(m)), (m = e[y])
            } while (v > _)
            for (var x = e[y].dist(e[y + 1]), b = -f; b < p + f; b++) {
              var w = b * c,
                E = g + w
              if ((w < 0 && (E += w), w > i && (E += w - i), !(E < v))) {
                for (; v + x < E; ) {
                  if (((v += x), 1 + ++y >= e.length)) return
                  x = e[y].dist(e[y + 1])
                }
                var S = E - v,
                  T = e[y],
                  I = e[y + 1].sub(T)._unit()._mult(S)._add(T)._round(),
                  C = Math.abs(E - d) < c ? 0 : 0.8 * (E - d)
                t.emplaceBack(
                  I.x,
                  I.y,
                  -o / 2,
                  -o / 2,
                  o / 2,
                  o / 2,
                  a,
                  s,
                  l,
                  o / 2,
                  C
                )
              }
            }
          }
          var Hl = function (t, e) {
            if (
              (void 0 === t && (t = []),
              void 0 === e && (e = Jl),
              (this.data = t),
              (this.length = this.data.length),
              (this.compare = e),
              this.length > 0)
            )
              for (var r = (this.length >> 1) - 1; r >= 0; r--) this._down(r)
          }
          function Jl(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
          }
          function Yl(t, e, r) {
            void 0 === e && (e = 1), void 0 === r && (r = !1)
            for (
              var n = 1 / 0, o = 1 / 0, a = -1 / 0, s = -1 / 0, l = t[0], u = 0;
              u < l.length;
              u++
            ) {
              var c = l[u]
              ;(!u || c.x < n) && (n = c.x),
                (!u || c.y < o) && (o = c.y),
                (!u || c.x > a) && (a = c.x),
                (!u || c.y > s) && (s = c.y)
            }
            var p = Math.min(a - n, s - o),
              h = p / 2,
              f = new Hl([], Ql)
            if (0 === p) return new i(n, o)
            for (var d = n; d < a; d += p)
              for (var m = o; m < s; m += p) f.push(new tu(d + h, m + h, h, t))
            for (
              var y = (function (t) {
                  for (
                    var e = 0,
                      r = 0,
                      n = 0,
                      i = t[0],
                      o = 0,
                      a = i.length,
                      s = a - 1;
                    o < a;
                    s = o++
                  ) {
                    var l = i[o],
                      u = i[s],
                      c = l.x * u.y - u.x * l.y
                    ;(r += (l.x + u.x) * c),
                      (n += (l.y + u.y) * c),
                      (e += 3 * c)
                  }
                  return new tu(r / e, n / e, 0, t)
                })(t),
                v = f.length;
              f.length;

            ) {
              var g = f.pop()
              ;(g.d > y.d || !y.d) &&
                ((y = g),
                r &&
                  console.log(
                    'found best %d after %d probes',
                    Math.round(1e4 * g.d) / 1e4,
                    v
                  )),
                g.max - y.d <= e ||
                  (f.push(new tu(g.p.x - (h = g.h / 2), g.p.y - h, h, t)),
                  f.push(new tu(g.p.x + h, g.p.y - h, h, t)),
                  f.push(new tu(g.p.x - h, g.p.y + h, h, t)),
                  f.push(new tu(g.p.x + h, g.p.y + h, h, t)),
                  (v += 4))
            }
            return (
              r &&
                (console.log('num probes: ' + v),
                console.log('best distance: ' + y.d)),
              y.p
            )
          }
          function Ql(t, e) {
            return e.max - t.max
          }
          function tu(t, e, r, n) {
            ;(this.p = new i(t, e)),
              (this.h = r),
              (this.d = (function (t, e) {
                for (var r = !1, n = 1 / 0, i = 0; i < e.length; i++)
                  for (
                    var o = e[i], a = 0, s = o.length, l = s - 1;
                    a < s;
                    l = a++
                  ) {
                    var u = o[a],
                      c = o[l]
                    u.y > t.y != c.y > t.y &&
                      t.x < ((c.x - u.x) * (t.y - u.y)) / (c.y - u.y) + u.x &&
                      (r = !r),
                      (n = Math.min(n, Yo(t, u, c)))
                  }
                return (r ? 1 : -1) * Math.sqrt(n)
              })(this.p, n)),
              (this.max = this.d + this.h * Math.SQRT2)
          }
          ;(Hl.prototype.push = function (t) {
            this.data.push(t), this.length++, this._up(this.length - 1)
          }),
            (Hl.prototype.pop = function () {
              if (0 !== this.length) {
                var t = this.data[0],
                  e = this.data.pop()
                return (
                  this.length--,
                  this.length > 0 && ((this.data[0] = e), this._down(0)),
                  t
                )
              }
            }),
            (Hl.prototype.peek = function () {
              return this.data[0]
            }),
            (Hl.prototype._up = function (t) {
              for (var e = this.data, r = this.compare, n = e[t]; t > 0; ) {
                var i = (t - 1) >> 1,
                  o = e[i]
                if (r(n, o) >= 0) break
                ;(e[t] = o), (t = i)
              }
              e[t] = n
            }),
            (Hl.prototype._down = function (t) {
              for (
                var e = this.data,
                  r = this.compare,
                  n = this.length >> 1,
                  i = e[t];
                t < n;

              ) {
                var o = 1 + (t << 1),
                  a = e[o],
                  s = o + 1
                if (
                  (s < this.length && r(e[s], a) < 0 && ((o = s), (a = e[s])),
                  r(a, i) >= 0)
                )
                  break
                ;(e[t] = a), (t = o)
              }
              e[t] = i
            })
          var eu = Number.POSITIVE_INFINITY
          function ru(t, e) {
            return e[1] !== eu
              ? (function (t, e, r) {
                  var n = 0,
                    i = 0
                  switch (((e = Math.abs(e)), (r = Math.abs(r)), t)) {
                    case 'top-right':
                    case 'top-left':
                    case 'top':
                      i = r - 7
                      break
                    case 'bottom-right':
                    case 'bottom-left':
                    case 'bottom':
                      i = 7 - r
                  }
                  switch (t) {
                    case 'top-right':
                    case 'bottom-right':
                    case 'right':
                      n = -e
                      break
                    case 'top-left':
                    case 'bottom-left':
                    case 'left':
                      n = e
                  }
                  return [n, i]
                })(t, e[0], e[1])
              : (function (t, e) {
                  var r = 0,
                    n = 0
                  e < 0 && (e = 0)
                  var i = e / Math.sqrt(2)
                  switch (t) {
                    case 'top-right':
                    case 'top-left':
                      n = i - 7
                      break
                    case 'bottom-right':
                    case 'bottom-left':
                      n = 7 - i
                      break
                    case 'bottom':
                      n = 7 - e
                      break
                    case 'top':
                      n = e - 7
                  }
                  switch (t) {
                    case 'top-right':
                    case 'bottom-right':
                      r = -i
                      break
                    case 'top-left':
                    case 'bottom-left':
                      r = i
                      break
                    case 'left':
                      r = e
                      break
                    case 'right':
                      r = -e
                  }
                  return [r, n]
                })(t, e[0])
          }
          function nu(t) {
            switch (t) {
              case 'right':
              case 'top-right':
              case 'bottom-right':
                return 'right'
              case 'left':
              case 'top-left':
              case 'bottom-left':
                return 'left'
            }
            return 'center'
          }
          var iu = 32640
          function ou(t, e, r, n, o, a, s, l, u, c, p, h, f, d, m) {
            var y = (function (t, e, r, n, o, a, s, l) {
                for (
                  var u =
                      (n.layout.get('text-rotate').evaluate(a, {}) * Math.PI) /
                      180,
                    c = [],
                    p = 0,
                    h = e.positionedLines;
                  p < h.length;
                  p += 1
                )
                  for (
                    var f = h[p], d = 0, m = f.positionedGlyphs;
                    d < m.length;
                    d += 1
                  ) {
                    var y = m[d]
                    if (y.rect) {
                      var v = y.rect || {},
                        g = 4,
                        _ = !0,
                        x = 1,
                        b = 0,
                        w = (o || l) && y.vertical,
                        E = (y.metrics.advance * y.scale) / 2
                      if (
                        (l &&
                          e.verticalizable &&
                          (b =
                            f.lineOffset / 2 -
                            (y.imageName
                              ? -(24 - y.metrics.width * y.scale) / 2
                              : 24 * (y.scale - 1))),
                        y.imageName)
                      ) {
                        var S = s[y.imageName]
                        ;(_ = S.sdf), (g = 1 / (x = S.pixelRatio))
                      }
                      var T = o ? [y.x + E, y.y] : [0, 0],
                        I = o ? [0, 0] : [y.x + E + r[0], y.y + r[1] - b],
                        C = [0, 0]
                      w && ((C = I), (I = [0, 0]))
                      var A = (y.metrics.left - g) * y.scale - E + I[0],
                        k = (-y.metrics.top - g) * y.scale + I[1],
                        P = A + (v.w * y.scale) / x,
                        M = k + (v.h * y.scale) / x,
                        L = new i(A, k),
                        z = new i(P, k),
                        O = new i(A, M),
                        D = new i(P, M)
                      if (w) {
                        var R = new i(-E, E - -17),
                          F = -Math.PI / 2,
                          B = 12 - E,
                          N = new i(22 - B, -(y.imageName ? B : 0)),
                          U = new (Function.prototype.bind.apply(
                            i,
                            [null].concat(C)
                          ))()
                        L._rotateAround(F, R)._add(N)._add(U),
                          z._rotateAround(F, R)._add(N)._add(U),
                          O._rotateAround(F, R)._add(N)._add(U),
                          D._rotateAround(F, R)._add(N)._add(U)
                      }
                      if (u) {
                        var j = Math.sin(u),
                          V = Math.cos(u),
                          q = [V, -j, j, V]
                        L._matMult(q),
                          z._matMult(q),
                          O._matMult(q),
                          D._matMult(q)
                      }
                      var G = new i(0, 0),
                        $ = new i(0, 0)
                      c.push({
                        tl: L,
                        tr: z,
                        bl: O,
                        br: D,
                        tex: v,
                        writingMode: e.writingMode,
                        glyphOffset: T,
                        sectionIndex: y.sectionIndex,
                        isSDF: _,
                        pixelOffsetTL: G,
                        pixelOffsetBR: $,
                        minFontScaleX: 0,
                        minFontScaleY: 0,
                      })
                    }
                  }
                return c
              })(0, r, l, o, a, s, n, t.allowVerticalPlacement),
              v = t.textSizeData,
              g = null
            'source' === v.kind
              ? (g = [zl * o.layout.get('text-size').evaluate(s, {})])[0] >
                  iu &&
                b(
                  t.layerIds[0] +
                    ': Value for "text-size" is >= 255. Reduce your "text-size".'
                )
              : 'composite' === v.kind &&
                ((g = [
                  zl * d.compositeTextSizes[0].evaluate(s, {}, m),
                  zl * d.compositeTextSizes[1].evaluate(s, {}, m),
                ])[0] > iu ||
                  g[1] > iu) &&
                b(
                  t.layerIds[0] +
                    ': Value for "text-size" is >= 255. Reduce your "text-size".'
                ),
              t.addSymbols(
                t.text,
                y,
                g,
                l,
                a,
                s,
                c,
                e,
                u.lineStartIndex,
                u.lineLength,
                f,
                m
              )
            for (var _ = 0, x = p; _ < x.length; _ += 1)
              h[x[_]] = t.text.placedSymbolArray.length - 1
            return 4 * y.length
          }
          function au(t) {
            for (var e in t) return t[e]
            return null
          }
          function su(t, e, r, n) {
            var i = t.compareText
            if (e in i) {
              for (var o = i[e], a = o.length - 1; a >= 0; a--)
                if (n.dist(o[a]) < r) return !0
            } else i[e] = []
            return i[e].push(n), !1
          }
          var lu = gs.VectorTileFeature.types,
            uu = [
              {
                name: 'a_fade_opacity',
                components: 1,
                type: 'Uint8',
                offset: 0,
              },
            ]
          function cu(t, e, r, n, i, o, a, s, l, u, c, p, h) {
            var f = s ? Math.min(iu, Math.round(s[0])) : 0,
              d = s ? Math.min(iu, Math.round(s[1])) : 0
            t.emplaceBack(
              e,
              r,
              Math.round(32 * n),
              Math.round(32 * i),
              o,
              a,
              (f << 1) + (l ? 1 : 0),
              d,
              16 * u,
              16 * c,
              256 * p,
              256 * h
            )
          }
          function pu(t, e, r) {
            t.emplaceBack(e.x, e.y, r),
              t.emplaceBack(e.x, e.y, r),
              t.emplaceBack(e.x, e.y, r),
              t.emplaceBack(e.x, e.y, r)
          }
          function hu(t) {
            for (var e = 0, r = t.sections; e < r.length; e += 1)
              if (ei(r[e].text)) return !0
            return !1
          }
          var fu = function (t) {
            ;(this.layoutVertexArray = new Fi()),
              (this.indexArray = new Ki()),
              (this.programConfigurations = t),
              (this.segments = new co()),
              (this.dynamicLayoutVertexArray = new Bi()),
              (this.opacityVertexArray = new Ni()),
              (this.placedSymbolArray = new ro())
          }
          ;(fu.prototype.isEmpty = function () {
            return (
              0 === this.layoutVertexArray.length &&
              0 === this.indexArray.length &&
              0 === this.dynamicLayoutVertexArray.length &&
              0 === this.opacityVertexArray.length
            )
          }),
            (fu.prototype.upload = function (t, e, r, n) {
              this.isEmpty() ||
                (r &&
                  ((this.layoutVertexBuffer = t.createVertexBuffer(
                    this.layoutVertexArray,
                    Bs.members
                  )),
                  (this.indexBuffer = t.createIndexBuffer(this.indexArray, e)),
                  (this.dynamicLayoutVertexBuffer = t.createVertexBuffer(
                    this.dynamicLayoutVertexArray,
                    Ns.members,
                    !0
                  )),
                  (this.opacityVertexBuffer = t.createVertexBuffer(
                    this.opacityVertexArray,
                    uu,
                    !0
                  )),
                  (this.opacityVertexBuffer.itemSize = 1)),
                (r || n) && this.programConfigurations.upload(t))
            }),
            (fu.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.programConfigurations.destroy(),
                this.segments.destroy(),
                this.dynamicLayoutVertexBuffer.destroy(),
                this.opacityVertexBuffer.destroy())
            }),
            Vn('SymbolBuffers', fu)
          var du = function (t, e, r) {
            ;(this.layoutVertexArray = new t()),
              (this.layoutAttributes = e),
              (this.indexArray = new r()),
              (this.segments = new co()),
              (this.collisionVertexArray = new Vi())
          }
          ;(du.prototype.upload = function (t) {
            ;(this.layoutVertexBuffer = t.createVertexBuffer(
              this.layoutVertexArray,
              this.layoutAttributes
            )),
              (this.indexBuffer = t.createIndexBuffer(this.indexArray)),
              (this.collisionVertexBuffer = t.createVertexBuffer(
                this.collisionVertexArray,
                Us.members,
                !0
              ))
          }),
            (du.prototype.destroy = function () {
              this.layoutVertexBuffer &&
                (this.layoutVertexBuffer.destroy(),
                this.indexBuffer.destroy(),
                this.segments.destroy(),
                this.collisionVertexBuffer.destroy())
            }),
            Vn('CollisionBuffers', du)
          var mu = function (t) {
            ;(this.collisionBoxArray = t.collisionBoxArray),
              (this.zoom = t.zoom),
              (this.overscaling = t.overscaling),
              (this.layers = t.layers),
              (this.layerIds = this.layers.map(function (t) {
                return t.id
              })),
              (this.index = t.index),
              (this.pixelRatio = t.pixelRatio),
              (this.sourceLayerIndex = t.sourceLayerIndex),
              (this.hasPattern = !1),
              (this.hasRTLText = !1),
              (this.sortKeyRanges = [])
            var e = this.layers[0]._unevaluatedLayout._values
            ;(this.textSizeData = Ol(this.zoom, e['text-size'])),
              (this.iconSizeData = Ol(this.zoom, e['icon-size']))
            var r = this.layers[0].layout,
              n = r.get('symbol-sort-key'),
              i = r.get('symbol-z-order')
            ;(this.sortFeaturesByKey =
              'viewport-y' !== i && void 0 !== n.constantOr(1)),
              (this.sortFeaturesByY =
                ('viewport-y' === i ||
                  ('auto' === i && !this.sortFeaturesByKey)) &&
                (r.get('text-allow-overlap') ||
                  r.get('icon-allow-overlap') ||
                  r.get('text-ignore-placement') ||
                  r.get('icon-ignore-placement'))),
              'point' === r.get('symbol-placement') &&
                (this.writingModes = r
                  .get('text-writing-mode')
                  .map(function (t) {
                    return gl[t]
                  })),
              (this.stateDependentLayerIds = this.layers
                .filter(function (t) {
                  return t.isStateDependent()
                })
                .map(function (t) {
                  return t.id
                })),
              (this.sourceID = t.sourceID)
          }
          ;(mu.prototype.createArrays = function () {
            ;(this.text = new fu(
              new Bo(Bs.members, this.layers, this.zoom, function (t) {
                return /^text/.test(t)
              })
            )),
              (this.icon = new fu(
                new Bo(Bs.members, this.layers, this.zoom, function (t) {
                  return /^icon/.test(t)
                })
              )),
              (this.glyphOffsetArray = new oo()),
              (this.lineVertexArray = new ao()),
              (this.symbolInstances = new io())
          }),
            (mu.prototype.calculateGlyphDependencies = function (
              t,
              e,
              r,
              n,
              i
            ) {
              for (var o = 0; o < t.length; o++)
                if (((e[t.charCodeAt(o)] = !0), (r || n) && i)) {
                  var a = Gs[t.charAt(o)]
                  a && (e[a.charCodeAt(0)] = !0)
                }
            }),
            (mu.prototype.populate = function (t, e, r) {
              var n = this.layers[0],
                i = n.layout,
                o = i.get('text-font'),
                a = i.get('text-field'),
                s = i.get('icon-image'),
                l =
                  ('constant' !== a.value.kind ||
                    (a.value.value instanceof Qt && !a.value.value.isEmpty()) ||
                    a.value.value.toString().length > 0) &&
                  ('constant' !== o.value.kind || o.value.value.length > 0),
                u =
                  'constant' !== s.value.kind ||
                  !!s.value.value ||
                  Object.keys(s.parameters).length > 0,
                c = i.get('symbol-sort-key')
              if (((this.features = []), l || u)) {
                for (
                  var p = e.iconDependencies,
                    h = e.glyphDependencies,
                    f = e.availableImages,
                    d = new pi(this.zoom),
                    m = 0,
                    y = t;
                  m < y.length;
                  m += 1
                ) {
                  var v = y[m],
                    g = v.feature,
                    _ = v.id,
                    x = v.index,
                    b = v.sourceLayerIndex,
                    w = n._featureFilter.needGeometry,
                    E = {
                      type: g.type,
                      id: _,
                      properties: g.properties,
                      geometry: w ? Vo(g) : [],
                    }
                  if (n._featureFilter.filter(d, E, r)) {
                    w || (E.geometry = Vo(g))
                    var S = void 0
                    if (l) {
                      var T = n.getValueAndResolveTokens('text-field', E, r, f),
                        I = Qt.factory(T)
                      hu(I) && (this.hasRTLText = !0),
                        (!this.hasRTLText ||
                          'unavailable' === li() ||
                          (this.hasRTLText && ci.isParsed())) &&
                          (S = qs(I, n, E))
                    }
                    var C = void 0
                    if (u) {
                      var A = n.getValueAndResolveTokens('icon-image', E, r, f)
                      C = A instanceof te ? A : te.fromString(A)
                    }
                    if (S || C) {
                      var k = this.sortFeaturesByKey
                          ? c.evaluate(E, {}, r)
                          : void 0,
                        P = {
                          id: _,
                          text: S,
                          icon: C,
                          index: x,
                          sourceLayerIndex: b,
                          geometry: Vo(g),
                          properties: g.properties,
                          type: lu[g.type],
                          sortKey: k,
                        }
                      if ((this.features.push(P), C && (p[C.name] = !0), S)) {
                        var M = o.evaluate(E, {}, r).join(','),
                          L =
                            'map' === i.get('text-rotation-alignment') &&
                            'point' !== i.get('symbol-placement')
                        this.allowVerticalPlacement =
                          this.writingModes &&
                          this.writingModes.indexOf(gl.vertical) >= 0
                        for (var z = 0, O = S.sections; z < O.length; z += 1) {
                          var D = O[z]
                          if (D.image) p[D.image.name] = !0
                          else {
                            var R = Hn(S.toString()),
                              F = D.fontStack || M,
                              B = (h[F] = h[F] || {})
                            this.calculateGlyphDependencies(
                              D.text,
                              B,
                              L,
                              this.allowVerticalPlacement,
                              R
                            )
                          }
                        }
                      }
                    }
                  }
                }
                'line' === i.get('symbol-placement') &&
                  (this.features = (function (t) {
                    var e = {},
                      r = {},
                      n = [],
                      i = 0
                    function o(e) {
                      n.push(t[e]), i++
                    }
                    function a(t, e, i) {
                      var o = r[t]
                      return (
                        delete r[t],
                        (r[e] = o),
                        n[o].geometry[0].pop(),
                        (n[o].geometry[0] = n[o].geometry[0].concat(i[0])),
                        o
                      )
                    }
                    function s(t, r, i) {
                      var o = e[r]
                      return (
                        delete e[r],
                        (e[t] = o),
                        n[o].geometry[0].shift(),
                        (n[o].geometry[0] = i[0].concat(n[o].geometry[0])),
                        o
                      )
                    }
                    function l(t, e, r) {
                      var n = r ? e[0][e[0].length - 1] : e[0][0]
                      return t + ':' + n.x + ':' + n.y
                    }
                    for (var u = 0; u < t.length; u++) {
                      var c = t[u],
                        p = c.geometry,
                        h = c.text ? c.text.toString() : null
                      if (h) {
                        var f = l(h, p),
                          d = l(h, p, !0)
                        if (f in r && d in e && r[f] !== e[d]) {
                          var m = s(f, d, p),
                            y = a(f, d, n[m].geometry)
                          delete e[f],
                            delete r[d],
                            (r[l(h, n[y].geometry, !0)] = y),
                            (n[m].geometry = null)
                        } else
                          f in r
                            ? a(f, d, p)
                            : d in e
                            ? s(f, d, p)
                            : (o(u), (e[f] = i - 1), (r[d] = i - 1))
                      } else o(u)
                    }
                    return n.filter(function (t) {
                      return t.geometry
                    })
                  })(this.features)),
                  this.sortFeaturesByKey &&
                    this.features.sort(function (t, e) {
                      return t.sortKey - e.sortKey
                    })
              }
            }),
            (mu.prototype.update = function (t, e, r) {
              this.stateDependentLayers.length &&
                (this.text.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.layers,
                  r
                ),
                this.icon.programConfigurations.updatePaintArrays(
                  t,
                  e,
                  this.layers,
                  r
                ))
            }),
            (mu.prototype.isEmpty = function () {
              return 0 === this.symbolInstances.length && !this.hasRTLText
            }),
            (mu.prototype.uploadPending = function () {
              return (
                !this.uploaded ||
                this.text.programConfigurations.needsUpload ||
                this.icon.programConfigurations.needsUpload
              )
            }),
            (mu.prototype.upload = function (t) {
              !this.uploaded &&
                this.hasDebugData() &&
                (this.textCollisionBox.upload(t),
                this.iconCollisionBox.upload(t),
                this.textCollisionCircle.upload(t),
                this.iconCollisionCircle.upload(t)),
                this.text.upload(
                  t,
                  this.sortFeaturesByY,
                  !this.uploaded,
                  this.text.programConfigurations.needsUpload
                ),
                this.icon.upload(
                  t,
                  this.sortFeaturesByY,
                  !this.uploaded,
                  this.icon.programConfigurations.needsUpload
                ),
                (this.uploaded = !0)
            }),
            (mu.prototype.destroyDebugData = function () {
              this.textCollisionBox.destroy(),
                this.iconCollisionBox.destroy(),
                this.textCollisionCircle.destroy(),
                this.iconCollisionCircle.destroy()
            }),
            (mu.prototype.destroy = function () {
              this.text.destroy(),
                this.icon.destroy(),
                this.hasDebugData() && this.destroyDebugData()
            }),
            (mu.prototype.addToLineVertexArray = function (t, e) {
              var r = this.lineVertexArray.length
              if (void 0 !== t.segment) {
                for (
                  var n = t.dist(e[t.segment + 1]),
                    i = t.dist(e[t.segment]),
                    o = {},
                    a = t.segment + 1;
                  a < e.length;
                  a++
                )
                  (o[a] = {
                    x: e[a].x,
                    y: e[a].y,
                    tileUnitDistanceFromAnchor: n,
                  }),
                    a < e.length - 1 && (n += e[a + 1].dist(e[a]))
                for (var s = t.segment || 0; s >= 0; s--)
                  (o[s] = {
                    x: e[s].x,
                    y: e[s].y,
                    tileUnitDistanceFromAnchor: i,
                  }),
                    s > 0 && (i += e[s - 1].dist(e[s]))
                for (var l = 0; l < e.length; l++) {
                  var u = o[l]
                  this.lineVertexArray.emplaceBack(
                    u.x,
                    u.y,
                    u.tileUnitDistanceFromAnchor
                  )
                }
              }
              return {
                lineStartIndex: r,
                lineLength: this.lineVertexArray.length - r,
              }
            }),
            (mu.prototype.addSymbols = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u,
              c,
              p
            ) {
              for (
                var h = t.indexArray,
                  f = t.layoutVertexArray,
                  d = t.segments.prepareSegment(4 * e.length, f, h, o.sortKey),
                  m = this.glyphOffsetArray.length,
                  y = d.vertexLength,
                  v =
                    this.allowVerticalPlacement && a === gl.vertical
                      ? Math.PI / 2
                      : 0,
                  g = o.text && o.text.sections,
                  _ = 0;
                _ < e.length;
                _++
              ) {
                var x = e[_],
                  b = x.tl,
                  w = x.tr,
                  E = x.bl,
                  S = x.br,
                  T = x.tex,
                  I = x.pixelOffsetTL,
                  C = x.pixelOffsetBR,
                  A = x.minFontScaleX,
                  k = x.minFontScaleY,
                  P = x.glyphOffset,
                  M = x.isSDF,
                  L = x.sectionIndex,
                  z = d.vertexLength,
                  O = P[1]
                cu(f, s.x, s.y, b.x, O + b.y, T.x, T.y, r, M, I.x, I.y, A, k),
                  cu(
                    f,
                    s.x,
                    s.y,
                    w.x,
                    O + w.y,
                    T.x + T.w,
                    T.y,
                    r,
                    M,
                    C.x,
                    I.y,
                    A,
                    k
                  ),
                  cu(
                    f,
                    s.x,
                    s.y,
                    E.x,
                    O + E.y,
                    T.x,
                    T.y + T.h,
                    r,
                    M,
                    I.x,
                    C.y,
                    A,
                    k
                  ),
                  cu(
                    f,
                    s.x,
                    s.y,
                    S.x,
                    O + S.y,
                    T.x + T.w,
                    T.y + T.h,
                    r,
                    M,
                    C.x,
                    C.y,
                    A,
                    k
                  ),
                  pu(t.dynamicLayoutVertexArray, s, v),
                  h.emplaceBack(z, z + 1, z + 2),
                  h.emplaceBack(z + 1, z + 2, z + 3),
                  (d.vertexLength += 4),
                  (d.primitiveLength += 2),
                  this.glyphOffsetArray.emplaceBack(P[0]),
                  (_ !== e.length - 1 && L === e[_ + 1].sectionIndex) ||
                    t.programConfigurations.populatePaintArrays(
                      f.length,
                      o,
                      o.index,
                      {},
                      p,
                      g && g[L]
                    )
              }
              t.placedSymbolArray.emplaceBack(
                s.x,
                s.y,
                m,
                this.glyphOffsetArray.length - m,
                y,
                l,
                u,
                s.segment,
                r ? r[0] : 0,
                r ? r[1] : 0,
                n[0],
                n[1],
                a,
                0,
                !1,
                0,
                c
              )
            }),
            (mu.prototype._addCollisionDebugVertex = function (
              t,
              e,
              r,
              n,
              i,
              o
            ) {
              return (
                e.emplaceBack(0, 0),
                t.emplaceBack(r.x, r.y, n, i, Math.round(o.x), Math.round(o.y))
              )
            }),
            (mu.prototype.addCollisionDebugVertices = function (
              t,
              e,
              r,
              n,
              o,
              a,
              s,
              l
            ) {
              var u = o.segments.prepareSegment(
                  4,
                  o.layoutVertexArray,
                  o.indexArray
                ),
                c = u.vertexLength,
                p = o.layoutVertexArray,
                h = o.collisionVertexArray,
                f = s.anchorX,
                d = s.anchorY
              if (
                (this._addCollisionDebugVertex(p, h, a, f, d, new i(t, e)),
                this._addCollisionDebugVertex(p, h, a, f, d, new i(r, e)),
                this._addCollisionDebugVertex(p, h, a, f, d, new i(r, n)),
                this._addCollisionDebugVertex(p, h, a, f, d, new i(t, n)),
                (u.vertexLength += 4),
                l)
              ) {
                var m = o.indexArray
                m.emplaceBack(c, c + 1, c + 2),
                  m.emplaceBack(c, c + 2, c + 3),
                  (u.primitiveLength += 2)
              } else {
                var y = o.indexArray
                y.emplaceBack(c, c + 1),
                  y.emplaceBack(c + 1, c + 2),
                  y.emplaceBack(c + 2, c + 3),
                  y.emplaceBack(c + 3, c),
                  (u.primitiveLength += 4)
              }
            }),
            (mu.prototype.addDebugCollisionBoxes = function (t, e, r, n) {
              for (var i = t; i < e; i++) {
                var o = this.collisionBoxArray.get(i),
                  a = o.radius > 0
                this.addCollisionDebugVertices(
                  o.x1,
                  o.y1,
                  o.x2,
                  o.y2,
                  a
                    ? n
                      ? this.textCollisionCircle
                      : this.iconCollisionCircle
                    : n
                    ? this.textCollisionBox
                    : this.iconCollisionBox,
                  o.anchorPoint,
                  r,
                  a
                )
              }
            }),
            (mu.prototype.generateCollisionDebugBuffers = function () {
              this.hasDebugData() && this.destroyDebugData(),
                (this.textCollisionBox = new du(ji, js.members, Wi)),
                (this.iconCollisionBox = new du(ji, js.members, Wi)),
                (this.textCollisionCircle = new du(ji, Vs.members, Ki)),
                (this.iconCollisionCircle = new du(ji, Vs.members, Ki))
              for (var t = 0; t < this.symbolInstances.length; t++) {
                var e = this.symbolInstances.get(t)
                this.addDebugCollisionBoxes(
                  e.textBoxStartIndex,
                  e.textBoxEndIndex,
                  e,
                  !0
                ),
                  this.addDebugCollisionBoxes(
                    e.verticalTextBoxStartIndex,
                    e.verticalTextBoxEndIndex,
                    e,
                    !0
                  ),
                  this.addDebugCollisionBoxes(
                    e.iconBoxStartIndex,
                    e.iconBoxEndIndex,
                    e,
                    !1
                  ),
                  this.addDebugCollisionBoxes(
                    e.verticalIconBoxStartIndex,
                    e.verticalIconBoxEndIndex,
                    e,
                    !1
                  )
              }
            }),
            (mu.prototype._deserializeCollisionBoxesForSymbol = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l
            ) {
              for (var u = {}, c = e; c < r; c++) {
                var p = t.get(c)
                if (0 === p.radius) {
                  ;(u.textBox = {
                    x1: p.x1,
                    y1: p.y1,
                    x2: p.x2,
                    y2: p.y2,
                    anchorPointX: p.anchorPointX,
                    anchorPointY: p.anchorPointY,
                  }),
                    (u.textFeatureIndex = p.featureIndex)
                  break
                }
                u.textCircles ||
                  ((u.textCircles = []), (u.textFeatureIndex = p.featureIndex)),
                  u.textCircles.push(
                    p.anchorPointX,
                    p.anchorPointY,
                    p.radius,
                    p.signedDistanceFromAnchor,
                    1
                  )
              }
              for (var h = n; h < i; h++) {
                var f = t.get(h)
                if (0 === f.radius) {
                  ;(u.verticalTextBox = {
                    x1: f.x1,
                    y1: f.y1,
                    x2: f.x2,
                    y2: f.y2,
                    anchorPointX: f.anchorPointX,
                    anchorPointY: f.anchorPointY,
                  }),
                    (u.verticalTextFeatureIndex = f.featureIndex)
                  break
                }
              }
              for (var d = o; d < a; d++) {
                var m = t.get(d)
                if (0 === m.radius) {
                  ;(u.iconBox = {
                    x1: m.x1,
                    y1: m.y1,
                    x2: m.x2,
                    y2: m.y2,
                    anchorPointX: m.anchorPointX,
                    anchorPointY: m.anchorPointY,
                  }),
                    (u.iconFeatureIndex = m.featureIndex)
                  break
                }
              }
              for (var y = s; y < l; y++) {
                var v = t.get(y)
                if (0 === v.radius) {
                  ;(u.verticalIconBox = {
                    x1: v.x1,
                    y1: v.y1,
                    x2: v.x2,
                    y2: v.y2,
                    anchorPointX: v.anchorPointX,
                    anchorPointY: v.anchorPointY,
                  }),
                    (u.verticalIconFeatureIndex = v.featureIndex)
                  break
                }
              }
              return u
            }),
            (mu.prototype.deserializeCollisionBoxes = function (t) {
              this.collisionArrays = []
              for (var e = 0; e < this.symbolInstances.length; e++) {
                var r = this.symbolInstances.get(e)
                this.collisionArrays.push(
                  this._deserializeCollisionBoxesForSymbol(
                    t,
                    r.textBoxStartIndex,
                    r.textBoxEndIndex,
                    r.verticalTextBoxStartIndex,
                    r.verticalTextBoxEndIndex,
                    r.iconBoxStartIndex,
                    r.iconBoxEndIndex,
                    r.verticalIconBoxStartIndex,
                    r.verticalIconBoxEndIndex
                  )
                )
              }
            }),
            (mu.prototype.hasTextData = function () {
              return this.text.segments.get().length > 0
            }),
            (mu.prototype.hasIconData = function () {
              return this.icon.segments.get().length > 0
            }),
            (mu.prototype.hasDebugData = function () {
              return (
                this.textCollisionBox &&
                this.iconCollisionBox &&
                this.textCollisionCircle &&
                this.iconCollisionCircle
              )
            }),
            (mu.prototype.hasTextCollisionBoxData = function () {
              return (
                this.hasDebugData() &&
                this.textCollisionBox.segments.get().length > 0
              )
            }),
            (mu.prototype.hasIconCollisionBoxData = function () {
              return (
                this.hasDebugData() &&
                this.iconCollisionBox.segments.get().length > 0
              )
            }),
            (mu.prototype.hasTextCollisionCircleData = function () {
              return (
                this.hasDebugData() &&
                this.textCollisionCircle.segments.get().length > 0
              )
            }),
            (mu.prototype.hasIconCollisionCircleData = function () {
              return (
                this.hasDebugData() &&
                this.iconCollisionCircle.segments.get().length > 0
              )
            }),
            (mu.prototype.addIndicesForPlacedSymbol = function (t, e) {
              for (
                var r = t.placedSymbolArray.get(e),
                  n = r.vertexStartIndex + 4 * r.numGlyphs,
                  i = r.vertexStartIndex;
                i < n;
                i += 4
              )
                t.indexArray.emplaceBack(i, i + 1, i + 2),
                  t.indexArray.emplaceBack(i + 1, i + 2, i + 3)
            }),
            (mu.prototype.getSortedSymbolIndexes = function (t) {
              if (
                this.sortedAngle === t &&
                void 0 !== this.symbolInstanceIndexes
              )
                return this.symbolInstanceIndexes
              for (
                var e = Math.sin(t),
                  r = Math.cos(t),
                  n = [],
                  i = [],
                  o = [],
                  a = 0;
                a < this.symbolInstances.length;
                ++a
              ) {
                o.push(a)
                var s = this.symbolInstances.get(a)
                n.push(0 | Math.round(e * s.anchorX + r * s.anchorY)),
                  i.push(s.featureIndex)
              }
              return (
                o.sort(function (t, e) {
                  return n[t] - n[e] || i[e] - i[t]
                }),
                o
              )
            }),
            (mu.prototype.addToSortKeyRanges = function (t, e) {
              var r = this.sortKeyRanges[this.sortKeyRanges.length - 1]
              r && r.sortKey === e
                ? (r.symbolInstanceEnd = t + 1)
                : this.sortKeyRanges.push({
                    sortKey: e,
                    symbolInstanceStart: t,
                    symbolInstanceEnd: t + 1,
                  })
            }),
            (mu.prototype.sortFeatures = function (t) {
              var e = this
              if (
                this.sortFeaturesByY &&
                this.sortedAngle !== t &&
                !(
                  this.text.segments.get().length > 1 ||
                  this.icon.segments.get().length > 1
                )
              ) {
                ;(this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t)),
                  (this.sortedAngle = t),
                  this.text.indexArray.clear(),
                  this.icon.indexArray.clear(),
                  (this.featureSortOrder = [])
                for (
                  var r = 0, n = this.symbolInstanceIndexes;
                  r < n.length;
                  r += 1
                ) {
                  var i = this.symbolInstances.get(n[r])
                  this.featureSortOrder.push(i.featureIndex),
                    [
                      i.rightJustifiedTextSymbolIndex,
                      i.centerJustifiedTextSymbolIndex,
                      i.leftJustifiedTextSymbolIndex,
                    ].forEach(function (t, r, n) {
                      t >= 0 &&
                        n.indexOf(t) === r &&
                        e.addIndicesForPlacedSymbol(e.text, t)
                    }),
                    i.verticalPlacedTextSymbolIndex >= 0 &&
                      this.addIndicesForPlacedSymbol(
                        this.text,
                        i.verticalPlacedTextSymbolIndex
                      ),
                    i.placedIconSymbolIndex >= 0 &&
                      this.addIndicesForPlacedSymbol(
                        this.icon,
                        i.placedIconSymbolIndex
                      ),
                    i.verticalPlacedIconSymbolIndex >= 0 &&
                      this.addIndicesForPlacedSymbol(
                        this.icon,
                        i.verticalPlacedIconSymbolIndex
                      )
                }
                this.text.indexBuffer &&
                  this.text.indexBuffer.updateData(this.text.indexArray),
                  this.icon.indexBuffer &&
                    this.icon.indexBuffer.updateData(this.icon.indexArray)
              }
            }),
            Vn('SymbolBucket', mu, {
              omit: ['layers', 'collisionBoxArray', 'features', 'compareText'],
            }),
            (mu.MAX_GLYPHS = 65535),
            (mu.addDynamicAttributes = pu)
          var yu = new Ti({
              'symbol-placement': new xi(Ct.layout_symbol['symbol-placement']),
              'symbol-spacing': new xi(Ct.layout_symbol['symbol-spacing']),
              'symbol-avoid-edges': new xi(
                Ct.layout_symbol['symbol-avoid-edges']
              ),
              'symbol-sort-key': new bi(Ct.layout_symbol['symbol-sort-key']),
              'symbol-z-order': new xi(Ct.layout_symbol['symbol-z-order']),
              'icon-allow-overlap': new xi(
                Ct.layout_symbol['icon-allow-overlap']
              ),
              'icon-ignore-placement': new xi(
                Ct.layout_symbol['icon-ignore-placement']
              ),
              'icon-optional': new xi(Ct.layout_symbol['icon-optional']),
              'icon-rotation-alignment': new xi(
                Ct.layout_symbol['icon-rotation-alignment']
              ),
              'icon-size': new bi(Ct.layout_symbol['icon-size']),
              'icon-text-fit': new xi(Ct.layout_symbol['icon-text-fit']),
              'icon-text-fit-padding': new xi(
                Ct.layout_symbol['icon-text-fit-padding']
              ),
              'icon-image': new bi(Ct.layout_symbol['icon-image']),
              'icon-rotate': new bi(Ct.layout_symbol['icon-rotate']),
              'icon-padding': new xi(Ct.layout_symbol['icon-padding']),
              'icon-keep-upright': new xi(
                Ct.layout_symbol['icon-keep-upright']
              ),
              'icon-offset': new bi(Ct.layout_symbol['icon-offset']),
              'icon-anchor': new bi(Ct.layout_symbol['icon-anchor']),
              'icon-pitch-alignment': new xi(
                Ct.layout_symbol['icon-pitch-alignment']
              ),
              'text-pitch-alignment': new xi(
                Ct.layout_symbol['text-pitch-alignment']
              ),
              'text-rotation-alignment': new xi(
                Ct.layout_symbol['text-rotation-alignment']
              ),
              'text-field': new bi(Ct.layout_symbol['text-field']),
              'text-font': new bi(Ct.layout_symbol['text-font']),
              'text-size': new bi(Ct.layout_symbol['text-size']),
              'text-max-width': new bi(Ct.layout_symbol['text-max-width']),
              'text-line-height': new xi(Ct.layout_symbol['text-line-height']),
              'text-letter-spacing': new bi(
                Ct.layout_symbol['text-letter-spacing']
              ),
              'text-justify': new bi(Ct.layout_symbol['text-justify']),
              'text-radial-offset': new bi(
                Ct.layout_symbol['text-radial-offset']
              ),
              'text-variable-anchor': new xi(
                Ct.layout_symbol['text-variable-anchor']
              ),
              'text-anchor': new bi(Ct.layout_symbol['text-anchor']),
              'text-max-angle': new xi(Ct.layout_symbol['text-max-angle']),
              'text-writing-mode': new xi(
                Ct.layout_symbol['text-writing-mode']
              ),
              'text-rotate': new bi(Ct.layout_symbol['text-rotate']),
              'text-padding': new xi(Ct.layout_symbol['text-padding']),
              'text-keep-upright': new xi(
                Ct.layout_symbol['text-keep-upright']
              ),
              'text-transform': new bi(Ct.layout_symbol['text-transform']),
              'text-offset': new bi(Ct.layout_symbol['text-offset']),
              'text-allow-overlap': new xi(
                Ct.layout_symbol['text-allow-overlap']
              ),
              'text-ignore-placement': new xi(
                Ct.layout_symbol['text-ignore-placement']
              ),
              'text-optional': new xi(Ct.layout_symbol['text-optional']),
            }),
            vu = {
              paint: new Ti({
                'icon-opacity': new bi(Ct.paint_symbol['icon-opacity']),
                'icon-color': new bi(Ct.paint_symbol['icon-color']),
                'icon-halo-color': new bi(Ct.paint_symbol['icon-halo-color']),
                'icon-halo-width': new bi(Ct.paint_symbol['icon-halo-width']),
                'icon-halo-blur': new bi(Ct.paint_symbol['icon-halo-blur']),
                'icon-translate': new xi(Ct.paint_symbol['icon-translate']),
                'icon-translate-anchor': new xi(
                  Ct.paint_symbol['icon-translate-anchor']
                ),
                'text-opacity': new bi(Ct.paint_symbol['text-opacity']),
                'text-color': new bi(Ct.paint_symbol['text-color'], {
                  runtimeType: Nt,
                  getOverride: function (t) {
                    return t.textColor
                  },
                  hasOverride: function (t) {
                    return !!t.textColor
                  },
                }),
                'text-halo-color': new bi(Ct.paint_symbol['text-halo-color']),
                'text-halo-width': new bi(Ct.paint_symbol['text-halo-width']),
                'text-halo-blur': new bi(Ct.paint_symbol['text-halo-blur']),
                'text-translate': new xi(Ct.paint_symbol['text-translate']),
                'text-translate-anchor': new xi(
                  Ct.paint_symbol['text-translate-anchor']
                ),
              }),
              layout: yu,
            },
            gu = function (t) {
              ;(this.type = t.property.overrides
                ? t.property.overrides.runtimeType
                : Dt),
                (this.defaultValue = t)
            }
          ;(gu.prototype.evaluate = function (t) {
            if (t.formattedSection) {
              var e = this.defaultValue.property.overrides
              if (e && e.hasOverride(t.formattedSection))
                return e.getOverride(t.formattedSection)
            }
            return t.feature && t.featureState
              ? this.defaultValue.evaluate(t.feature, t.featureState)
              : this.defaultValue.property.specification.default
          }),
            (gu.prototype.eachChild = function (t) {
              this.defaultValue.isConstant() ||
                t(this.defaultValue.value._styleExpression.expression)
            }),
            (gu.prototype.outputDefined = function () {
              return !1
            }),
            (gu.prototype.serialize = function () {
              return null
            }),
            Vn('FormatSectionOverride', gu, { omit: ['defaultValue'] })
          var _u = (function (t) {
              function e(e) {
                t.call(this, e, vu)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.recalculate = function (e, r) {
                  if (
                    (t.prototype.recalculate.call(this, e, r),
                    'auto' === this.layout.get('icon-rotation-alignment') &&
                      (this.layout._values['icon-rotation-alignment'] =
                        'point' !== this.layout.get('symbol-placement')
                          ? 'map'
                          : 'viewport'),
                    'auto' === this.layout.get('text-rotation-alignment') &&
                      (this.layout._values['text-rotation-alignment'] =
                        'point' !== this.layout.get('symbol-placement')
                          ? 'map'
                          : 'viewport'),
                    'auto' === this.layout.get('text-pitch-alignment') &&
                      (this.layout._values[
                        'text-pitch-alignment'
                      ] = this.layout.get('text-rotation-alignment')),
                    'auto' === this.layout.get('icon-pitch-alignment') &&
                      (this.layout._values[
                        'icon-pitch-alignment'
                      ] = this.layout.get('icon-rotation-alignment')),
                    'point' === this.layout.get('symbol-placement'))
                  ) {
                    var n = this.layout.get('text-writing-mode')
                    if (n) {
                      for (var i = [], o = 0, a = n; o < a.length; o += 1) {
                        var s = a[o]
                        i.indexOf(s) < 0 && i.push(s)
                      }
                      this.layout._values['text-writing-mode'] = i
                    } else
                      this.layout._values['text-writing-mode'] = ['horizontal']
                  }
                  this._setPaintOverrides()
                }),
                (e.prototype.getValueAndResolveTokens = function (t, e, r, n) {
                  var i = this.layout.get(t).evaluate(e, {}, r, n),
                    o = this._unevaluatedLayout._values[t]
                  return o.isDataDriven() || Wr(o.value) || !i
                    ? i
                    : (function (t, e) {
                        return e.replace(/{([^{}]+)}/g, function (e, r) {
                          return r in t ? String(t[r]) : ''
                        })
                      })(e.properties, i)
                }),
                (e.prototype.createBucket = function (t) {
                  return new mu(t)
                }),
                (e.prototype.queryRadius = function () {
                  return 0
                }),
                (e.prototype.queryIntersectsFeature = function () {
                  return !1
                }),
                (e.prototype._setPaintOverrides = function () {
                  for (
                    var t = 0, r = vu.paint.overridableProperties;
                    t < r.length;
                    t += 1
                  ) {
                    var n = r[t]
                    if (e.hasPaintOverride(this.layout, n)) {
                      var i,
                        o = this.paint.get(n),
                        a = new gu(o),
                        s = new Kr(a, o.property.specification)
                      ;(i =
                        'constant' === o.value.kind || 'source' === o.value.kind
                          ? new Jr('source', s)
                          : new Yr(
                              'composite',
                              s,
                              o.value.zoomStops,
                              o.value._interpolationType
                            )),
                        (this.paint._values[n] = new gi(
                          o.property,
                          i,
                          o.parameters
                        ))
                    }
                  }
                }),
                (e.prototype._handleOverridablePaintPropertyUpdate = function (
                  t,
                  r,
                  n
                ) {
                  return (
                    !(!this.layout || r.isDataDriven() || n.isDataDriven()) &&
                    e.hasPaintOverride(this.layout, t)
                  )
                }),
                (e.hasPaintOverride = function (t, e) {
                  var r = t.get('text-field'),
                    n = vu.paint.properties[e],
                    i = !1,
                    o = function (t) {
                      for (var e = 0, r = t; e < r.length; e += 1)
                        if (n.overrides && n.overrides.hasOverride(r[e]))
                          return void (i = !0)
                    }
                  if (
                    'constant' === r.value.kind &&
                    r.value.value instanceof Qt
                  )
                    o(r.value.value.sections)
                  else if ('source' === r.value.kind) {
                    var a = function (t) {
                        i ||
                          (t instanceof oe && ne(t.value) === qt
                            ? o(t.value.sections)
                            : t instanceof ue
                            ? o(t.sections)
                            : t.eachChild(a))
                      },
                      s = r.value
                    s._styleExpression && a(s._styleExpression.expression)
                  }
                  return i
                }),
                e
              )
            })(Ii),
            xu = {
              paint: new Ti({
                'background-color': new xi(
                  Ct.paint_background['background-color']
                ),
                'background-pattern': new Ei(
                  Ct.paint_background['background-pattern']
                ),
                'background-opacity': new xi(
                  Ct.paint_background['background-opacity']
                ),
              }),
            },
            bu = (function (t) {
              function e(e) {
                t.call(this, e, xu)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                e
              )
            })(Ii),
            wu = {
              paint: new Ti({
                'raster-opacity': new xi(Ct.paint_raster['raster-opacity']),
                'raster-hue-rotate': new xi(
                  Ct.paint_raster['raster-hue-rotate']
                ),
                'raster-brightness-min': new xi(
                  Ct.paint_raster['raster-brightness-min']
                ),
                'raster-brightness-max': new xi(
                  Ct.paint_raster['raster-brightness-max']
                ),
                'raster-saturation': new xi(
                  Ct.paint_raster['raster-saturation']
                ),
                'raster-contrast': new xi(Ct.paint_raster['raster-contrast']),
                'raster-resampling': new xi(
                  Ct.paint_raster['raster-resampling']
                ),
                'raster-fade-duration': new xi(
                  Ct.paint_raster['raster-fade-duration']
                ),
              }),
            },
            Eu = (function (t) {
              function e(e) {
                t.call(this, e, wu)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                e
              )
            })(Ii),
            Su = (function (t) {
              function e(e) {
                t.call(this, e, {}), (this.implementation = e)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.is3D = function () {
                  return '3d' === this.implementation.renderingMode
                }),
                (e.prototype.hasOffscreenPass = function () {
                  return void 0 !== this.implementation.prerender
                }),
                (e.prototype.recalculate = function () {}),
                (e.prototype.updateTransitions = function () {}),
                (e.prototype.hasTransition = function () {}),
                (e.prototype.serialize = function () {}),
                (e.prototype.onAdd = function (t) {
                  this.implementation.onAdd &&
                    this.implementation.onAdd(t, t.painter.context.gl)
                }),
                (e.prototype.onRemove = function (t) {
                  this.implementation.onRemove &&
                    this.implementation.onRemove(t, t.painter.context.gl)
                }),
                e
              )
            })(Ii),
            Tu = {
              circle: ca,
              heatmap: xa,
              hillshade: wa,
              fill: ls,
              'fill-extrusion': Ts,
              line: Rs,
              symbol: _u,
              background: bu,
              raster: Eu,
            },
            Iu = self.HTMLImageElement,
            Cu = self.HTMLCanvasElement,
            Au = self.HTMLVideoElement,
            ku = self.ImageData,
            Pu = self.ImageBitmap,
            Mu = function (t, e, r, n) {
              ;(this.context = t),
                (this.format = r),
                (this.texture = t.gl.createTexture()),
                this.update(e, n)
            }
          ;(Mu.prototype.update = function (t, e, r) {
            var n = t.width,
              i = t.height,
              o = !(
                (this.size && this.size[0] === n && this.size[1] === i) ||
                r
              ),
              a = this.context,
              s = a.gl
            if (
              ((this.useMipmap = Boolean(e && e.useMipmap)),
              s.bindTexture(s.TEXTURE_2D, this.texture),
              a.pixelStoreUnpackFlipY.set(!1),
              a.pixelStoreUnpack.set(1),
              a.pixelStoreUnpackPremultiplyAlpha.set(
                this.format === s.RGBA && (!e || !1 !== e.premultiply)
              ),
              o)
            )
              (this.size = [n, i]),
                t instanceof Iu ||
                t instanceof Cu ||
                t instanceof Au ||
                t instanceof ku ||
                (Pu && t instanceof Pu)
                  ? s.texImage2D(
                      s.TEXTURE_2D,
                      0,
                      this.format,
                      this.format,
                      s.UNSIGNED_BYTE,
                      t
                    )
                  : s.texImage2D(
                      s.TEXTURE_2D,
                      0,
                      this.format,
                      n,
                      i,
                      0,
                      this.format,
                      s.UNSIGNED_BYTE,
                      t.data
                    )
            else {
              var l = r || { x: 0, y: 0 },
                u = l.x,
                c = l.y
              t instanceof Iu ||
              t instanceof Cu ||
              t instanceof Au ||
              t instanceof ku ||
              (Pu && t instanceof Pu)
                ? s.texSubImage2D(
                    s.TEXTURE_2D,
                    0,
                    u,
                    c,
                    s.RGBA,
                    s.UNSIGNED_BYTE,
                    t
                  )
                : s.texSubImage2D(
                    s.TEXTURE_2D,
                    0,
                    u,
                    c,
                    n,
                    i,
                    s.RGBA,
                    s.UNSIGNED_BYTE,
                    t.data
                  )
            }
            this.useMipmap &&
              this.isSizePowerOfTwo() &&
              s.generateMipmap(s.TEXTURE_2D)
          }),
            (Mu.prototype.bind = function (t, e, r) {
              var n = this.context.gl
              n.bindTexture(n.TEXTURE_2D, this.texture),
                r !== n.LINEAR_MIPMAP_NEAREST ||
                  this.isSizePowerOfTwo() ||
                  (r = n.LINEAR),
                t !== this.filter &&
                  (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, t),
                  n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, r || t),
                  (this.filter = t)),
                e !== this.wrap &&
                  (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, e),
                  n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, e),
                  (this.wrap = e))
            }),
            (Mu.prototype.isSizePowerOfTwo = function () {
              return (
                this.size[0] === this.size[1] &&
                (Math.log(this.size[0]) / Math.LN2) % 1 == 0
              )
            }),
            (Mu.prototype.destroy = function () {
              this.context.gl.deleteTexture(this.texture), (this.texture = null)
            })
          var Lu = function (t) {
            var e = this
            ;(this._callback = t),
              (this._triggered = !1),
              'undefined' != typeof MessageChannel &&
                ((this._channel = new MessageChannel()),
                (this._channel.port2.onmessage = function () {
                  ;(e._triggered = !1), e._callback()
                }))
          }
          ;(Lu.prototype.trigger = function () {
            var t = this
            this._triggered ||
              ((this._triggered = !0),
              this._channel
                ? this._channel.port1.postMessage(!0)
                : setTimeout(function () {
                    ;(t._triggered = !1), t._callback()
                  }, 0))
          }),
            (Lu.prototype.remove = function () {
              delete this._channel, (this._callback = function () {})
            })
          var zu = function (t, e, r) {
            ;(this.target = t),
              (this.parent = e),
              (this.mapId = r),
              (this.callbacks = {}),
              (this.tasks = {}),
              (this.taskQueue = []),
              (this.cancelCallbacks = {}),
              m(['receive', 'process'], this),
              (this.invoker = new Lu(this.process)),
              this.target.addEventListener('message', this.receive, !1),
              (this.globalScope = S() ? t : self)
          }
          function Ou(t, e, r) {
            var n = (2 * Math.PI * 6378137) / 256 / Math.pow(2, r)
            return [
              t * n - (2 * Math.PI * 6378137) / 2,
              e * n - (2 * Math.PI * 6378137) / 2,
            ]
          }
          ;(zu.prototype.send = function (t, e, r, n, i) {
            var o = this
            void 0 === i && (i = !1)
            var a = Math.round(1e18 * Math.random())
              .toString(36)
              .substring(0, 10)
            r && (this.callbacks[a] = r)
            var s = C(this.globalScope) ? void 0 : []
            return (
              this.target.postMessage(
                {
                  id: a,
                  type: t,
                  hasCallback: !!r,
                  targetMapId: n,
                  mustQueue: i,
                  sourceMapId: this.mapId,
                  data: Zn(e, s),
                },
                s
              ),
              {
                cancel: function () {
                  r && delete o.callbacks[a],
                    o.target.postMessage({
                      id: a,
                      type: '<cancel>',
                      targetMapId: n,
                      sourceMapId: o.mapId,
                    })
                },
              }
            )
          }),
            (zu.prototype.receive = function (t) {
              var e = t.data,
                r = e.id
              if (r && (!e.targetMapId || this.mapId === e.targetMapId))
                if ('<cancel>' === e.type) {
                  delete this.tasks[r]
                  var n = this.cancelCallbacks[r]
                  delete this.cancelCallbacks[r], n && n()
                } else
                  S() || e.mustQueue
                    ? ((this.tasks[r] = e),
                      this.taskQueue.push(r),
                      this.invoker.trigger())
                    : this.processTask(r, e)
            }),
            (zu.prototype.process = function () {
              if (this.taskQueue.length) {
                var t = this.taskQueue.shift(),
                  e = this.tasks[t]
                delete this.tasks[t],
                  this.taskQueue.length && this.invoker.trigger(),
                  e && this.processTask(t, e)
              }
            }),
            (zu.prototype.processTask = function (t, e) {
              var r = this
              if ('<response>' === e.type) {
                var n = this.callbacks[t]
                delete this.callbacks[t],
                  n && (e.error ? n(Xn(e.error)) : n(null, Xn(e.data)))
              } else {
                var i = !1,
                  o = C(this.globalScope) ? void 0 : [],
                  a = e.hasCallback
                    ? function (e, n) {
                        ;(i = !0),
                          delete r.cancelCallbacks[t],
                          r.target.postMessage(
                            {
                              id: t,
                              type: '<response>',
                              sourceMapId: r.mapId,
                              error: e ? Zn(e) : null,
                              data: Zn(n, o),
                            },
                            o
                          )
                      }
                    : function (t) {
                        i = !0
                      },
                  s = null,
                  l = Xn(e.data)
                if (this.parent[e.type])
                  s = this.parent[e.type](e.sourceMapId, l, a)
                else if (this.parent.getWorkerSource) {
                  var u = e.type.split('.')
                  s = this.parent
                    .getWorkerSource(e.sourceMapId, u[0], l.source)
                    [u[1]](l, a)
                } else a(new Error('Could not find function ' + e.type))
                !i && s && s.cancel && (this.cancelCallbacks[t] = s.cancel)
              }
            }),
            (zu.prototype.remove = function () {
              this.invoker.remove(),
                this.target.removeEventListener('message', this.receive, !1)
            })
          var Du = function (t, e, r) {
            ;(this.z = t),
              (this.x = e),
              (this.y = r),
              (this.key = Bu(0, t, t, e, r))
          }
          ;(Du.prototype.equals = function (t) {
            return this.z === t.z && this.x === t.x && this.y === t.y
          }),
            (Du.prototype.url = function (t, e) {
              var r,
                n,
                i,
                o,
                a,
                s =
                  ((n = this.y),
                  (i = this.z),
                  (o = Ou(
                    256 * (r = this.x),
                    256 * (n = Math.pow(2, i) - n - 1),
                    i
                  )),
                  (a = Ou(256 * (r + 1), 256 * (n + 1), i)),
                  o[0] + ',' + o[1] + ',' + a[0] + ',' + a[1]),
                l = (function (t, e, r) {
                  for (var n, i = '', o = t; o > 0; o--)
                    i += (e & (n = 1 << (o - 1)) ? 1 : 0) + (r & n ? 2 : 0)
                  return i
                })(this.z, this.x, this.y)
              return t[(this.x + this.y) % t.length]
                .replace(
                  '{prefix}',
                  (this.x % 16).toString(16) + (this.y % 16).toString(16)
                )
                .replace('{z}', String(this.z))
                .replace('{x}', String(this.x))
                .replace(
                  '{y}',
                  String(
                    'tms' === e ? Math.pow(2, this.z) - this.y - 1 : this.y
                  )
                )
                .replace('{quadkey}', l)
                .replace('{bbox-epsg-3857}', s)
            }),
            (Du.prototype.getTilePoint = function (t) {
              var e = Math.pow(2, this.z)
              return new i((t.x * e - this.x) * Ie, (t.y * e - this.y) * Ie)
            }),
            (Du.prototype.toString = function () {
              return this.z + '/' + this.x + '/' + this.y
            })
          var Ru = function (t, e) {
              ;(this.wrap = t),
                (this.canonical = e),
                (this.key = Bu(t, e.z, e.z, e.x, e.y))
            },
            Fu = function (t, e, r, n, i) {
              ;(this.overscaledZ = t),
                (this.wrap = e),
                (this.canonical = new Du(r, +n, +i)),
                (this.key = Bu(e, t, r, n, i))
            }
          function Bu(t, e, r, n, i) {
            ;(t *= 2) < 0 && (t = -1 * t - 1)
            var o = 1 << r
            return (
              (o * o * t + o * i + n).toString(36) +
              r.toString(36) +
              e.toString(36)
            )
          }
          ;(Fu.prototype.equals = function (t) {
            return (
              this.overscaledZ === t.overscaledZ &&
              this.wrap === t.wrap &&
              this.canonical.equals(t.canonical)
            )
          }),
            (Fu.prototype.scaledTo = function (t) {
              var e = this.canonical.z - t
              return t > this.canonical.z
                ? new Fu(
                    t,
                    this.wrap,
                    this.canonical.z,
                    this.canonical.x,
                    this.canonical.y
                  )
                : new Fu(
                    t,
                    this.wrap,
                    t,
                    this.canonical.x >> e,
                    this.canonical.y >> e
                  )
            }),
            (Fu.prototype.calculateScaledKey = function (t, e) {
              var r = this.canonical.z - t
              return t > this.canonical.z
                ? Bu(
                    this.wrap * +e,
                    t,
                    this.canonical.z,
                    this.canonical.x,
                    this.canonical.y
                  )
                : Bu(
                    this.wrap * +e,
                    t,
                    t,
                    this.canonical.x >> r,
                    this.canonical.y >> r
                  )
            }),
            (Fu.prototype.isChildOf = function (t) {
              if (t.wrap !== this.wrap) return !1
              var e = this.canonical.z - t.canonical.z
              return (
                0 === t.overscaledZ ||
                (t.overscaledZ < this.overscaledZ &&
                  t.canonical.x === this.canonical.x >> e &&
                  t.canonical.y === this.canonical.y >> e)
              )
            }),
            (Fu.prototype.children = function (t) {
              if (this.overscaledZ >= t)
                return [
                  new Fu(
                    this.overscaledZ + 1,
                    this.wrap,
                    this.canonical.z,
                    this.canonical.x,
                    this.canonical.y
                  ),
                ]
              var e = this.canonical.z + 1,
                r = 2 * this.canonical.x,
                n = 2 * this.canonical.y
              return [
                new Fu(e, this.wrap, e, r, n),
                new Fu(e, this.wrap, e, r + 1, n),
                new Fu(e, this.wrap, e, r, n + 1),
                new Fu(e, this.wrap, e, r + 1, n + 1),
              ]
            }),
            (Fu.prototype.isLessThan = function (t) {
              return (
                this.wrap < t.wrap ||
                (!(this.wrap > t.wrap) &&
                  (this.overscaledZ < t.overscaledZ ||
                    (!(this.overscaledZ > t.overscaledZ) &&
                      (this.canonical.x < t.canonical.x ||
                        (!(this.canonical.x > t.canonical.x) &&
                          this.canonical.y < t.canonical.y)))))
              )
            }),
            (Fu.prototype.wrapped = function () {
              return new Fu(
                this.overscaledZ,
                0,
                this.canonical.z,
                this.canonical.x,
                this.canonical.y
              )
            }),
            (Fu.prototype.unwrapTo = function (t) {
              return new Fu(
                this.overscaledZ,
                t,
                this.canonical.z,
                this.canonical.x,
                this.canonical.y
              )
            }),
            (Fu.prototype.overscaleFactor = function () {
              return Math.pow(2, this.overscaledZ - this.canonical.z)
            }),
            (Fu.prototype.toUnwrapped = function () {
              return new Ru(this.wrap, this.canonical)
            }),
            (Fu.prototype.toString = function () {
              return (
                this.overscaledZ +
                '/' +
                this.canonical.x +
                '/' +
                this.canonical.y
              )
            }),
            (Fu.prototype.getTilePoint = function (t) {
              return this.canonical.getTilePoint(new Te(t.x - this.wrap, t.y))
            }),
            Vn('CanonicalTileID', Du),
            Vn('OverscaledTileID', Fu, { omit: ['posMatrix'] })
          var Nu = function (t, e, r) {
            if (((this.uid = t), e.height !== e.width))
              throw new RangeError('DEM tiles must be square')
            if (r && 'mapbox' !== r && 'terrarium' !== r)
              return b(
                '"' +
                  r +
                  '" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'
              )
            this.stride = e.height
            var n = (this.dim = e.height - 2)
            ;(this.data = new Uint32Array(e.data.buffer)),
              (this.encoding = r || 'mapbox')
            for (var i = 0; i < n; i++)
              (this.data[this._idx(-1, i)] = this.data[this._idx(0, i)]),
                (this.data[this._idx(n, i)] = this.data[this._idx(n - 1, i)]),
                (this.data[this._idx(i, -1)] = this.data[this._idx(i, 0)]),
                (this.data[this._idx(i, n)] = this.data[this._idx(i, n - 1)])
            ;(this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)]),
              (this.data[this._idx(n, -1)] = this.data[this._idx(n - 1, 0)]),
              (this.data[this._idx(-1, n)] = this.data[this._idx(0, n - 1)]),
              (this.data[this._idx(n, n)] = this.data[this._idx(n - 1, n - 1)])
          }
          ;(Nu.prototype.get = function (t, e) {
            var r = new Uint8Array(this.data.buffer),
              n = 4 * this._idx(t, e)
            return ('terrarium' === this.encoding
              ? this._unpackTerrarium
              : this._unpackMapbox)(r[n], r[n + 1], r[n + 2])
          }),
            (Nu.prototype.getUnpackVector = function () {
              return 'terrarium' === this.encoding
                ? [256, 1, 1 / 256, 32768]
                : [6553.6, 25.6, 0.1, 1e4]
            }),
            (Nu.prototype._idx = function (t, e) {
              if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1)
                throw new RangeError(
                  'out of range source coordinates for DEM data'
                )
              return (e + 1) * this.stride + (t + 1)
            }),
            (Nu.prototype._unpackMapbox = function (t, e, r) {
              return (256 * t * 256 + 256 * e + r) / 10 - 1e4
            }),
            (Nu.prototype._unpackTerrarium = function (t, e, r) {
              return 256 * t + e + r / 256 - 32768
            }),
            (Nu.prototype.getPixels = function () {
              return new va(
                { width: this.stride, height: this.stride },
                new Uint8Array(this.data.buffer)
              )
            }),
            (Nu.prototype.backfillBorder = function (t, e, r) {
              if (this.dim !== t.dim) throw new Error('dem dimension mismatch')
              var n = e * this.dim,
                i = e * this.dim + this.dim,
                o = r * this.dim,
                a = r * this.dim + this.dim
              switch (e) {
                case -1:
                  n = i - 1
                  break
                case 1:
                  i = n + 1
              }
              switch (r) {
                case -1:
                  o = a - 1
                  break
                case 1:
                  a = o + 1
              }
              for (var s = -e * this.dim, l = -r * this.dim, u = o; u < a; u++)
                for (var c = n; c < i; c++)
                  this.data[this._idx(c, u)] = t.data[this._idx(c + s, u + l)]
            }),
            Vn('DEMData', Nu)
          var Uu = function (t) {
            ;(this._stringToNumber = {}), (this._numberToString = [])
            for (var e = 0; e < t.length; e++) {
              var r = t[e]
              ;(this._stringToNumber[r] = e), (this._numberToString[e] = r)
            }
          }
          ;(Uu.prototype.encode = function (t) {
            return this._stringToNumber[t]
          }),
            (Uu.prototype.decode = function (t) {
              return this._numberToString[t]
            })
          var ju = function (t, e, r, n, i) {
              ;(this.type = 'Feature'),
                (this._vectorTileFeature = t),
                (t._z = e),
                (t._x = r),
                (t._y = n),
                (this.properties = t.properties),
                (this.id = i)
            },
            Vu = { geometry: { configurable: !0 } }
          ;(Vu.geometry.get = function () {
            return (
              void 0 === this._geometry &&
                (this._geometry = this._vectorTileFeature.toGeoJSON(
                  this._vectorTileFeature._x,
                  this._vectorTileFeature._y,
                  this._vectorTileFeature._z
                ).geometry),
              this._geometry
            )
          }),
            (Vu.geometry.set = function (t) {
              this._geometry = t
            }),
            (ju.prototype.toJSON = function () {
              var t = { geometry: this.geometry }
              for (var e in this)
                '_geometry' !== e &&
                  '_vectorTileFeature' !== e &&
                  (t[e] = this[e])
              return t
            }),
            Object.defineProperties(ju.prototype, Vu)
          var qu = function () {
            ;(this.state = {}),
              (this.stateChanges = {}),
              (this.deletedStates = {})
          }
          ;(qu.prototype.updateState = function (t, e, r) {
            var n = String(e)
            if (
              ((this.stateChanges[t] = this.stateChanges[t] || {}),
              (this.stateChanges[t][n] = this.stateChanges[t][n] || {}),
              c(this.stateChanges[t][n], r),
              null === this.deletedStates[t])
            )
              for (var i in ((this.deletedStates[t] = {}), this.state[t]))
                i !== n && (this.deletedStates[t][i] = null)
            else if (this.deletedStates[t] && null === this.deletedStates[t][n])
              for (var o in ((this.deletedStates[t][n] = {}), this.state[t][n]))
                r[o] || (this.deletedStates[t][n][o] = null)
            else
              for (var a in r)
                this.deletedStates[t] &&
                  this.deletedStates[t][n] &&
                  null === this.deletedStates[t][n][a] &&
                  delete this.deletedStates[t][n][a]
          }),
            (qu.prototype.removeFeatureState = function (t, e, r) {
              if (null !== this.deletedStates[t]) {
                var n = String(e)
                if (
                  ((this.deletedStates[t] = this.deletedStates[t] || {}),
                  r && void 0 !== e)
                )
                  null !== this.deletedStates[t][n] &&
                    ((this.deletedStates[t][n] =
                      this.deletedStates[t][n] || {}),
                    (this.deletedStates[t][n][r] = null))
                else if (void 0 !== e)
                  if (this.stateChanges[t] && this.stateChanges[t][n])
                    for (r in ((this.deletedStates[t][n] = {}),
                    this.stateChanges[t][n]))
                      this.deletedStates[t][n][r] = null
                  else this.deletedStates[t][n] = null
                else this.deletedStates[t] = null
              }
            }),
            (qu.prototype.getState = function (t, e) {
              var r = String(e),
                n = c(
                  {},
                  (this.state[t] || {})[r],
                  (this.stateChanges[t] || {})[r]
                )
              if (null === this.deletedStates[t]) return {}
              if (this.deletedStates[t]) {
                var i = this.deletedStates[t][e]
                if (null === i) return {}
                for (var o in i) delete n[o]
              }
              return n
            }),
            (qu.prototype.initializeTileState = function (t, e) {
              t.setFeatureState(this.state, e)
            }),
            (qu.prototype.coalesceChanges = function (t, e) {
              var r = {}
              for (var n in this.stateChanges) {
                this.state[n] = this.state[n] || {}
                var i = {}
                for (var o in this.stateChanges[n])
                  this.state[n][o] || (this.state[n][o] = {}),
                    c(this.state[n][o], this.stateChanges[n][o]),
                    (i[o] = this.state[n][o])
                r[n] = i
              }
              for (var a in this.deletedStates) {
                this.state[a] = this.state[a] || {}
                var s = {}
                if (null === this.deletedStates[a])
                  for (var l in this.state[a])
                    (s[l] = {}), (this.state[a][l] = {})
                else
                  for (var u in this.deletedStates[a]) {
                    if (null === this.deletedStates[a][u]) this.state[a][u] = {}
                    else
                      for (
                        var p = 0, h = Object.keys(this.deletedStates[a][u]);
                        p < h.length;
                        p += 1
                      )
                        delete this.state[a][u][h[p]]
                    s[u] = this.state[a][u]
                  }
                ;(r[a] = r[a] || {}), c(r[a], s)
              }
              if (
                ((this.stateChanges = {}),
                (this.deletedStates = {}),
                0 !== Object.keys(r).length)
              )
                for (var f in t) t[f].setFeatureState(r, e)
            })
          var Gu = function (t, e) {
            ;(this.tileID = t),
              (this.x = t.canonical.x),
              (this.y = t.canonical.y),
              (this.z = t.canonical.z),
              (this.grid = new Fn(Ie, 16, 0)),
              (this.grid3D = new Fn(Ie, 16, 0)),
              (this.featureIndexArray = new lo()),
              (this.promoteId = e)
          }
          function $u(t, e, r, n, i) {
            return v(t, function (t, o) {
              var a = e instanceof _i ? e.get(o) : null
              return a && a.evaluate ? a.evaluate(r, n, i) : a
            })
          }
          function Zu(t) {
            for (
              var e = 1 / 0, r = 1 / 0, n = -1 / 0, i = -1 / 0, o = 0, a = t;
              o < a.length;
              o += 1
            ) {
              var s = a[o]
              ;(e = Math.min(e, s.x)),
                (r = Math.min(r, s.y)),
                (n = Math.max(n, s.x)),
                (i = Math.max(i, s.y))
            }
            return { minX: e, minY: r, maxX: n, maxY: i }
          }
          function Xu(t, e) {
            return e - t
          }
          ;(Gu.prototype.insert = function (t, e, r, n, i, o) {
            var a = this.featureIndexArray.length
            this.featureIndexArray.emplaceBack(r, n, i)
            for (
              var s = o ? this.grid3D : this.grid, l = 0;
              l < e.length;
              l++
            ) {
              for (
                var u = e[l], c = [1 / 0, 1 / 0, -1 / 0, -1 / 0], p = 0;
                p < u.length;
                p++
              ) {
                var h = u[p]
                ;(c[0] = Math.min(c[0], h.x)),
                  (c[1] = Math.min(c[1], h.y)),
                  (c[2] = Math.max(c[2], h.x)),
                  (c[3] = Math.max(c[3], h.y))
              }
              c[0] < Ie &&
                c[1] < Ie &&
                c[2] >= 0 &&
                c[3] >= 0 &&
                s.insert(a, c[0], c[1], c[2], c[3])
            }
          }),
            (Gu.prototype.loadVTLayers = function () {
              return (
                this.vtLayers ||
                  ((this.vtLayers = new gs.VectorTile(
                    new Xs(this.rawTileData)
                  ).layers),
                  (this.sourceLayerCoder = new Uu(
                    this.vtLayers
                      ? Object.keys(this.vtLayers).sort()
                      : ['_geojsonTileLayer']
                  ))),
                this.vtLayers
              )
            }),
            (Gu.prototype.query = function (t, e, r, n) {
              var o = this
              this.loadVTLayers()
              for (
                var a = t.params || {},
                  s = Ie / t.tileSize / t.scale,
                  l = cn(a.filter),
                  u = t.queryGeometry,
                  c = t.queryPadding * s,
                  p = Zu(u),
                  h = this.grid.query(
                    p.minX - c,
                    p.minY - c,
                    p.maxX + c,
                    p.maxY + c
                  ),
                  f = Zu(t.cameraQueryGeometry),
                  d = 0,
                  m = this.grid3D.query(
                    f.minX - c,
                    f.minY - c,
                    f.maxX + c,
                    f.maxY + c,
                    function (e, r, n, o) {
                      return (function (t, e, r, n, o) {
                        for (var a = 0, s = t; a < s.length; a += 1) {
                          var l = s[a]
                          if (e <= l.x && r <= l.y && n >= l.x && o >= l.y)
                            return !0
                        }
                        var u = [
                          new i(e, r),
                          new i(e, o),
                          new i(n, o),
                          new i(n, r),
                        ]
                        if (t.length > 2)
                          for (var c = 0, p = u; c < p.length; c += 1)
                            if (ta(t, p[c])) return !0
                        for (var h = 0; h < t.length - 1; h++)
                          if (ea(t[h], t[h + 1], u)) return !0
                        return !1
                      })(t.cameraQueryGeometry, e - c, r - c, n + c, o + c)
                    }
                  );
                d < m.length;
                d += 1
              )
                h.push(m[d])
              h.sort(Xu)
              for (
                var y,
                  v = {},
                  g = function (i) {
                    var c = h[i]
                    if (c !== y) {
                      y = c
                      var p = o.featureIndexArray.get(c),
                        f = null
                      o.loadMatchingFeature(
                        v,
                        p.bucketIndex,
                        p.sourceLayerIndex,
                        p.featureIndex,
                        l,
                        a.layers,
                        a.availableImages,
                        e,
                        r,
                        n,
                        function (e, r, n) {
                          return (
                            f || (f = Vo(e)),
                            r.queryIntersectsFeature(
                              u,
                              e,
                              n,
                              f,
                              o.z,
                              t.transform,
                              s,
                              t.pixelPosMatrix
                            )
                          )
                        }
                      )
                    }
                  },
                  _ = 0;
                _ < h.length;
                _++
              )
                g(_)
              return v
            }),
            (Gu.prototype.loadMatchingFeature = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u,
              c
            ) {
              var p = this.bucketLayerIDs[e]
              if (
                !o ||
                (function (t, e) {
                  for (var r = 0; r < t.length; r++)
                    if (e.indexOf(t[r]) >= 0) return !0
                  return !1
                })(o, p)
              ) {
                var h = this.sourceLayerCoder.decode(r),
                  f = this.vtLayers[h].feature(n)
                if (i.filter(new pi(this.tileID.overscaledZ), f))
                  for (var d = this.getId(f, h), m = 0; m < p.length; m++) {
                    var y = p[m]
                    if (!(o && o.indexOf(y) < 0)) {
                      var v = s[y]
                      if (v) {
                        var g = {}
                        void 0 !== d &&
                          u &&
                          (g = u.getState(
                            v.sourceLayer || '_geojsonTileLayer',
                            d
                          ))
                        var _ = l[y]
                        ;(_.paint = $u(_.paint, v.paint, f, g, a)),
                          (_.layout = $u(_.layout, v.layout, f, g, a))
                        var x = !c || c(f, v, g)
                        if (x) {
                          var b = new ju(f, this.z, this.x, this.y, d)
                          b.layer = _
                          var w = t[y]
                          void 0 === w && (w = t[y] = []),
                            w.push({
                              featureIndex: n,
                              feature: b,
                              intersectionZ: x,
                            })
                        }
                      }
                    }
                  }
              }
            }),
            (Gu.prototype.lookupSymbolFeatures = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s
            ) {
              var l = {}
              this.loadVTLayers()
              for (var u = cn(i), c = 0, p = t; c < p.length; c += 1)
                this.loadMatchingFeature(l, r, n, p[c], u, o, a, s, e)
              return l
            }),
            (Gu.prototype.hasLayer = function (t) {
              for (var e = 0, r = this.bucketLayerIDs; e < r.length; e += 1)
                for (var n = 0, i = r[e]; n < i.length; n += 1)
                  if (t === i[n]) return !0
              return !1
            }),
            (Gu.prototype.getId = function (t, e) {
              var r = t.id
              return (
                this.promoteId &&
                  'boolean' ==
                    typeof (r =
                      t.properties[
                        'string' == typeof this.promoteId
                          ? this.promoteId
                          : this.promoteId[e]
                      ]) &&
                  (r = Number(r)),
                r
              )
            }),
            Vn('FeatureIndex', Gu, {
              omit: ['rawTileData', 'sourceLayerCoder'],
            })
          var Ku = function (t, e) {
            ;(this.tileID = t),
              (this.uid = h()),
              (this.uses = 0),
              (this.tileSize = e),
              (this.buckets = {}),
              (this.expirationTime = null),
              (this.queryPadding = 0),
              (this.hasSymbolBuckets = !1),
              (this.hasRTLText = !1),
              (this.dependencies = {}),
              (this.expiredRequestCount = 0),
              (this.state = 'loading')
          }
          ;(Ku.prototype.registerFadeDuration = function (t) {
            var e = t + this.timeAdded
            e < R.now() ||
              (this.fadeEndTime && e < this.fadeEndTime) ||
              (this.fadeEndTime = e)
          }),
            (Ku.prototype.wasRequested = function () {
              return (
                'errored' === this.state ||
                'loaded' === this.state ||
                'reloading' === this.state
              )
            }),
            (Ku.prototype.loadVectorData = function (t, e, r) {
              if (
                (this.hasData() && this.unloadVectorData(),
                (this.state = 'loaded'),
                t)
              ) {
                for (var n in (t.featureIndex &&
                  ((this.latestFeatureIndex = t.featureIndex),
                  t.rawTileData
                    ? ((this.latestRawTileData = t.rawTileData),
                      (this.latestFeatureIndex.rawTileData = t.rawTileData))
                    : this.latestRawTileData &&
                      (this.latestFeatureIndex.rawTileData = this.latestRawTileData)),
                (this.collisionBoxArray = t.collisionBoxArray),
                (this.buckets = (function (t, e) {
                  var r = {}
                  if (!e) return r
                  for (
                    var n = function () {
                        var t = o[i],
                          n = t.layerIds
                            .map(function (t) {
                              return e.getLayer(t)
                            })
                            .filter(Boolean)
                        if (0 !== n.length) {
                          ;(t.layers = n),
                            t.stateDependentLayerIds &&
                              (t.stateDependentLayers = t.stateDependentLayerIds.map(
                                function (t) {
                                  return n.filter(function (e) {
                                    return e.id === t
                                  })[0]
                                }
                              ))
                          for (var a = 0, s = n; a < s.length; a += 1)
                            r[s[a].id] = t
                        }
                      },
                      i = 0,
                      o = t;
                    i < o.length;
                    i += 1
                  )
                    n()
                  return r
                })(t.buckets, e.style)),
                (this.hasSymbolBuckets = !1),
                this.buckets)) {
                  var i = this.buckets[n]
                  if (i instanceof mu) {
                    if (((this.hasSymbolBuckets = !0), !r)) break
                    i.justReloaded = !0
                  }
                }
                if (((this.hasRTLText = !1), this.hasSymbolBuckets))
                  for (var o in this.buckets) {
                    var a = this.buckets[o]
                    if (a instanceof mu && a.hasRTLText) {
                      ;(this.hasRTLText = !0),
                        ci.isLoading() ||
                          ci.isLoaded() ||
                          'deferred' !== li() ||
                          ui()
                      break
                    }
                  }
                for (var s in ((this.queryPadding = 0), this.buckets)) {
                  var l = this.buckets[s]
                  this.queryPadding = Math.max(
                    this.queryPadding,
                    e.style.getLayer(s).queryRadius(l)
                  )
                }
                t.imageAtlas && (this.imageAtlas = t.imageAtlas),
                  t.glyphAtlasImage &&
                    (this.glyphAtlasImage = t.glyphAtlasImage)
              } else this.collisionBoxArray = new to()
            }),
            (Ku.prototype.unloadVectorData = function () {
              for (var t in this.buckets) this.buckets[t].destroy()
              ;(this.buckets = {}),
                this.imageAtlasTexture && this.imageAtlasTexture.destroy(),
                this.imageAtlas && (this.imageAtlas = null),
                this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(),
                (this.latestFeatureIndex = null),
                (this.state = 'unloaded')
            }),
            (Ku.prototype.getBucket = function (t) {
              return this.buckets[t.id]
            }),
            (Ku.prototype.upload = function (t) {
              for (var e in this.buckets) {
                var r = this.buckets[e]
                r.uploadPending() && r.upload(t)
              }
              var n = t.gl
              this.imageAtlas &&
                !this.imageAtlas.uploaded &&
                ((this.imageAtlasTexture = new Mu(
                  t,
                  this.imageAtlas.image,
                  n.RGBA
                )),
                (this.imageAtlas.uploaded = !0)),
                this.glyphAtlasImage &&
                  ((this.glyphAtlasTexture = new Mu(
                    t,
                    this.glyphAtlasImage,
                    n.ALPHA
                  )),
                  (this.glyphAtlasImage = null))
            }),
            (Ku.prototype.prepare = function (t) {
              this.imageAtlas &&
                this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture)
            }),
            (Ku.prototype.queryRenderedFeatures = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u
            ) {
              return this.latestFeatureIndex &&
                this.latestFeatureIndex.rawTileData
                ? this.latestFeatureIndex.query(
                    {
                      queryGeometry: n,
                      cameraQueryGeometry: i,
                      scale: o,
                      tileSize: this.tileSize,
                      pixelPosMatrix: u,
                      transform: s,
                      params: a,
                      queryPadding: this.queryPadding * l,
                    },
                    t,
                    e,
                    r
                  )
                : {}
            }),
            (Ku.prototype.querySourceFeatures = function (t, e) {
              var r = this.latestFeatureIndex
              if (r && r.rawTileData) {
                var n = r.loadVTLayers(),
                  i = e ? e.sourceLayer : '',
                  o = n._geojsonTileLayer || n[i]
                if (o)
                  for (
                    var a = cn(e && e.filter),
                      s = this.tileID.canonical,
                      l = s.z,
                      u = s.x,
                      c = s.y,
                      p = { z: l, x: u, y: c },
                      h = 0;
                    h < o.length;
                    h++
                  ) {
                    var f = o.feature(h)
                    if (a.filter(new pi(this.tileID.overscaledZ), f)) {
                      var d = r.getId(f, i),
                        m = new ju(f, l, u, c, d)
                      ;(m.tile = p), t.push(m)
                    }
                  }
              }
            }),
            (Ku.prototype.hasData = function () {
              return (
                'loaded' === this.state ||
                'reloading' === this.state ||
                'expired' === this.state
              )
            }),
            (Ku.prototype.patternsLoaded = function () {
              return (
                this.imageAtlas &&
                !!Object.keys(this.imageAtlas.patternPositions).length
              )
            }),
            (Ku.prototype.setExpiryData = function (t) {
              var e = this.expirationTime
              if (t.cacheControl) {
                var r = T(t.cacheControl)
                r['max-age'] &&
                  (this.expirationTime = Date.now() + 1e3 * r['max-age'])
              } else
                t.expires &&
                  (this.expirationTime = new Date(t.expires).getTime())
              if (this.expirationTime) {
                var n = Date.now(),
                  i = !1
                if (this.expirationTime > n) i = !1
                else if (e)
                  if (this.expirationTime < e) i = !0
                  else {
                    var o = this.expirationTime - e
                    o ? (this.expirationTime = n + Math.max(o, 3e4)) : (i = !0)
                  }
                else i = !0
                i
                  ? (this.expiredRequestCount++, (this.state = 'expired'))
                  : (this.expiredRequestCount = 0)
              }
            }),
            (Ku.prototype.getExpiryTimeout = function () {
              if (this.expirationTime)
                return this.expiredRequestCount
                  ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31))
                  : Math.min(
                      this.expirationTime - new Date().getTime(),
                      Math.pow(2, 31) - 1
                    )
            }),
            (Ku.prototype.setFeatureState = function (t, e) {
              if (
                this.latestFeatureIndex &&
                this.latestFeatureIndex.rawTileData &&
                0 !== Object.keys(t).length
              ) {
                var r = this.latestFeatureIndex.loadVTLayers()
                for (var n in this.buckets)
                  if (e.style.hasLayer(n)) {
                    var i = this.buckets[n],
                      o = i.layers[0].sourceLayer || '_geojsonTileLayer',
                      a = r[o],
                      s = t[o]
                    a &&
                      s &&
                      0 !== Object.keys(s).length &&
                      (i.update(
                        s,
                        a,
                        (this.imageAtlas && this.imageAtlas.patternPositions) ||
                          {}
                      ),
                      e &&
                        e.style &&
                        (this.queryPadding = Math.max(
                          this.queryPadding,
                          e.style.getLayer(n).queryRadius(i)
                        )))
                  }
              }
            }),
            (Ku.prototype.holdingForFade = function () {
              return void 0 !== this.symbolFadeHoldUntil
            }),
            (Ku.prototype.symbolFadeFinished = function () {
              return (
                !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < R.now()
              )
            }),
            (Ku.prototype.clearFadeHold = function () {
              this.symbolFadeHoldUntil = void 0
            }),
            (Ku.prototype.setHoldDuration = function (t) {
              this.symbolFadeHoldUntil = R.now() + t
            }),
            (Ku.prototype.setDependencies = function (t, e) {
              for (var r = {}, n = 0, i = e; n < i.length; n += 1) r[i[n]] = !0
              this.dependencies[t] = r
            }),
            (Ku.prototype.hasDependency = function (t, e) {
              for (var r = 0, n = t; r < n.length; r += 1) {
                var i = this.dependencies[n[r]]
                if (i)
                  for (var o = 0, a = e; o < a.length; o += 1)
                    if (i[a[o]]) return !0
              }
              return !1
            })
          var Wu = self.performance,
            Hu = function (t) {
              ;(this._marks = {
                start: [t.url, 'start'].join('#'),
                end: [t.url, 'end'].join('#'),
                measure: t.url.toString(),
              }),
                Wu.mark(this._marks.start)
            }
          ;(Hu.prototype.finish = function () {
            Wu.mark(this._marks.end)
            var t = Wu.getEntriesByName(this._marks.measure)
            return (
              0 === t.length &&
                (Wu.measure(
                  this._marks.measure,
                  this._marks.start,
                  this._marks.end
                ),
                (t = Wu.getEntriesByName(this._marks.measure)),
                Wu.clearMarks(this._marks.start),
                Wu.clearMarks(this._marks.end),
                Wu.clearMeasures(this._marks.measure)),
              t
            )
          }),
            (t.Actor = zu),
            (t.AlphaImage = ya),
            (t.CanonicalTileID = Du),
            (t.CollisionBoxArray = to),
            (t.Color = Ht),
            (t.DEMData = Nu),
            (t.DataConstantProperty = xi),
            (t.DictionaryCoder = Uu),
            (t.EXTENT = Ie),
            (t.ErrorEvent = Tt),
            (t.EvaluationParameters = pi),
            (t.Event = St),
            (t.Evented = It),
            (t.FeatureIndex = Gu),
            (t.FillBucket = os),
            (t.FillExtrusionBucket = ws),
            (t.ImageAtlas = vl),
            (t.ImagePosition = ml),
            (t.LineBucket = Ls),
            (t.LngLat = ge),
            (t.LngLatBounds = ve),
            (t.MercatorCoordinate = Te),
            (t.ONE_EM = 24),
            (t.OverscaledTileID = Fu),
            (t.Point = i),
            (t.Point$1 = i),
            (t.Properties = Ti),
            (t.Protobuf = Xs),
            (t.RGBAImage = va),
            (t.RequestManager = q),
            (t.RequestPerformance = Hu),
            (t.ResourceType = ft),
            (t.SegmentVector = co),
            (t.SourceFeatureState = qu),
            (t.StructArrayLayout1ui2 = Hi),
            (t.StructArrayLayout2i4 = Li),
            (t.StructArrayLayout3ui6 = Ki),
            (t.StructArrayLayout4i8 = zi),
            (t.SymbolBucket = mu),
            (t.Texture = Mu),
            (t.Tile = Ku),
            (t.Transitionable = di),
            (t.Uniform1f = So),
            (t.Uniform1i = Eo),
            (t.Uniform2f = To),
            (t.Uniform3f = Io),
            (t.Uniform4f = Co),
            (t.UniformColor = Ao),
            (t.UniformMatrix4f = Po),
            (t.UnwrappedTileID = Ru),
            (t.ValidationError = At),
            (t.WritingMode = gl),
            (t.ZoomHistory = Kn),
            (t.add = function (t, e, r) {
              return (
                (t[0] = e[0] + r[0]),
                (t[1] = e[1] + r[1]),
                (t[2] = e[2] + r[2]),
                t
              )
            }),
            (t.addDynamicAttributes = pu),
            (t.asyncAll = function (t, e, r) {
              if (!t.length) return r(null, [])
              var n = t.length,
                i = new Array(t.length),
                o = null
              t.forEach(function (t, a) {
                e(t, function (t, e) {
                  t && (o = t), (i[a] = e), 0 == --n && r(o, i)
                })
              })
            }),
            (t.bezier = a),
            (t.bindAll = m),
            (t.browser = R),
            (t.cacheEntryPossiblyAdded = function (t) {
              ++pt > st &&
                (t.getActor().send('enforceCacheSizeLimit', at), (pt = 0))
            }),
            (t.clamp = l),
            (t.clearTileCache = function (t) {
              var e = self.caches.delete(ot)
              t &&
                e.catch(t).then(function () {
                  return t()
                })
            }),
            (t.clone = function (t) {
              var e = new la(16)
              return (
                (e[0] = t[0]),
                (e[1] = t[1]),
                (e[2] = t[2]),
                (e[3] = t[3]),
                (e[4] = t[4]),
                (e[5] = t[5]),
                (e[6] = t[6]),
                (e[7] = t[7]),
                (e[8] = t[8]),
                (e[9] = t[9]),
                (e[10] = t[10]),
                (e[11] = t[11]),
                (e[12] = t[12]),
                (e[13] = t[13]),
                (e[14] = t[14]),
                (e[15] = t[15]),
                e
              )
            }),
            (t.clone$1 = _),
            (t.clone$2 = function (t) {
              var e = new la(3)
              return (e[0] = t[0]), (e[1] = t[1]), (e[2] = t[2]), e
            }),
            (t.config = F),
            (t.create = function () {
              var t = new la(16)
              return (
                la != Float32Array &&
                  ((t[1] = 0),
                  (t[2] = 0),
                  (t[3] = 0),
                  (t[4] = 0),
                  (t[6] = 0),
                  (t[7] = 0),
                  (t[8] = 0),
                  (t[9] = 0),
                  (t[11] = 0),
                  (t[12] = 0),
                  (t[13] = 0),
                  (t[14] = 0)),
                (t[0] = 1),
                (t[5] = 1),
                (t[10] = 1),
                (t[15] = 1),
                t
              )
            }),
            (t.create$1 = function () {
              var t = new la(9)
              return (
                la != Float32Array &&
                  ((t[1] = 0),
                  (t[2] = 0),
                  (t[3] = 0),
                  (t[5] = 0),
                  (t[6] = 0),
                  (t[7] = 0)),
                (t[0] = 1),
                (t[4] = 1),
                (t[8] = 1),
                t
              )
            }),
            (t.create$2 = function () {
              var t = new la(4)
              return (
                la != Float32Array && ((t[1] = 0), (t[2] = 0)),
                (t[0] = 1),
                (t[3] = 1),
                t
              )
            }),
            (t.createCommonjsModule = e),
            (t.createExpression = Hr),
            (t.createLayout = Pi),
            (t.createStyleLayer = function (t) {
              return 'custom' === t.type ? new Su(t) : new Tu[t.type](t)
            }),
            (t.cross = function (t, e, r) {
              var n = e[0],
                i = e[1],
                o = e[2],
                a = r[0],
                s = r[1],
                l = r[2]
              return (
                (t[0] = i * l - o * s),
                (t[1] = o * a - n * l),
                (t[2] = n * s - i * a),
                t
              )
            }),
            (t.deepEqual = function t(e, r) {
              if (Array.isArray(e)) {
                if (!Array.isArray(r) || e.length !== r.length) return !1
                for (var n = 0; n < e.length; n++) if (!t(e[n], r[n])) return !1
                return !0
              }
              if ('object' == typeof e && null !== e && null !== r) {
                if ('object' != typeof r) return !1
                if (Object.keys(e).length !== Object.keys(r).length) return !1
                for (var i in e) if (!t(e[i], r[i])) return !1
                return !0
              }
              return e === r
            }),
            (t.dot = function (t, e) {
              return t[0] * e[0] + t[1] * e[1] + t[2] * e[2]
            }),
            (t.dot$1 = function (t, e) {
              return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] + t[3] * e[3]
            }),
            (t.ease = s),
            (t.emitValidationErrors = Rn),
            (t.endsWith = y),
            (t.enforceCacheSizeLimit = function (t) {
              lt(),
                Y &&
                  Y.then(function (e) {
                    e.keys().then(function (r) {
                      for (var n = 0; n < r.length - t; n++) e.delete(r[n])
                    })
                  })
            }),
            (t.evaluateSizeForFeature = Dl),
            (t.evaluateSizeForZoom = Rl),
            (t.evaluateVariableOffset = ru),
            (t.evented = si),
            (t.extend = c),
            (t.featureFilter = cn),
            (t.filterObject = g),
            (t.fromRotation = function (t, e) {
              var r = Math.sin(e),
                n = Math.cos(e)
              return (
                (t[0] = n),
                (t[1] = r),
                (t[2] = 0),
                (t[3] = -r),
                (t[4] = n),
                (t[5] = 0),
                (t[6] = 0),
                (t[7] = 0),
                (t[8] = 1),
                t
              )
            }),
            (t.getAnchorAlignment = kl),
            (t.getAnchorJustification = nu),
            (t.getArrayBuffer = _t),
            (t.getImage = bt),
            (t.getJSON = function (t, e) {
              return gt(c(t, { type: 'json' }), e)
            }),
            (t.getRTLTextPluginStatus = li),
            (t.getReferrer = vt),
            (t.getVideo = function (t, e) {
              var r,
                n,
                i = self.document.createElement('video')
              ;(i.muted = !0),
                (i.onloadstart = function () {
                  e(null, i)
                })
              for (var o = 0; o < t.length; o++) {
                var a = self.document.createElement('source')
                ;(r = t[o]),
                  (n = void 0),
                  ((n = self.document.createElement('a')).href = r),
                  (n.protocol !== self.document.location.protocol ||
                    n.host !== self.document.location.host) &&
                    (i.crossOrigin = 'Anonymous'),
                  (a.src = t[o]),
                  i.appendChild(a)
              }
              return { cancel: function () {} }
            }),
            (t.identity = function (t) {
              return (
                (t[0] = 1),
                (t[1] = 0),
                (t[2] = 0),
                (t[3] = 0),
                (t[4] = 0),
                (t[5] = 1),
                (t[6] = 0),
                (t[7] = 0),
                (t[8] = 0),
                (t[9] = 0),
                (t[10] = 1),
                (t[11] = 0),
                (t[12] = 0),
                (t[13] = 0),
                (t[14] = 0),
                (t[15] = 1),
                t
              )
            }),
            (t.invert = function (t, e) {
              var r = e[0],
                n = e[1],
                i = e[2],
                o = e[3],
                a = e[4],
                s = e[5],
                l = e[6],
                u = e[7],
                c = e[8],
                p = e[9],
                h = e[10],
                f = e[11],
                d = e[12],
                m = e[13],
                y = e[14],
                v = e[15],
                g = r * s - n * a,
                _ = r * l - i * a,
                x = r * u - o * a,
                b = n * l - i * s,
                w = n * u - o * s,
                E = i * u - o * l,
                S = c * m - p * d,
                T = c * y - h * d,
                I = c * v - f * d,
                C = p * y - h * m,
                A = p * v - f * m,
                k = h * v - f * y,
                P = g * k - _ * A + x * C + b * I - w * T + E * S
              return P
                ? ((t[0] = (s * k - l * A + u * C) * (P = 1 / P)),
                  (t[1] = (i * A - n * k - o * C) * P),
                  (t[2] = (m * E - y * w + v * b) * P),
                  (t[3] = (h * w - p * E - f * b) * P),
                  (t[4] = (l * I - a * k - u * T) * P),
                  (t[5] = (r * k - i * I + o * T) * P),
                  (t[6] = (y * x - d * E - v * _) * P),
                  (t[7] = (c * E - h * x + f * _) * P),
                  (t[8] = (a * A - s * I + u * S) * P),
                  (t[9] = (n * I - r * A - o * S) * P),
                  (t[10] = (d * w - m * x + v * g) * P),
                  (t[11] = (p * x - c * w - f * g) * P),
                  (t[12] = (s * T - a * C - l * S) * P),
                  (t[13] = (r * C - n * T + i * S) * P),
                  (t[14] = (m * _ - d * b - y * g) * P),
                  (t[15] = (c * b - p * _ + h * g) * P),
                  t)
                : null
            }),
            (t.isChar = Wn),
            (t.isMapboxURL = G),
            (t.keysDifference = function (t, e) {
              var r = []
              for (var n in t) n in e || r.push(n)
              return r
            }),
            (t.makeRequest = gt),
            (t.mapObject = v),
            (t.mercatorXfromLng = be),
            (t.mercatorYfromLat = we),
            (t.mercatorZfromAltitude = Ee),
            (t.multiply = function (t, e, r) {
              var n = e[0],
                i = e[1],
                o = e[2],
                a = e[3],
                s = e[4],
                l = e[5],
                u = e[6],
                c = e[7],
                p = e[8],
                h = e[9],
                f = e[10],
                d = e[11],
                m = e[12],
                y = e[13],
                v = e[14],
                g = e[15],
                _ = r[0],
                x = r[1],
                b = r[2],
                w = r[3]
              return (
                (t[0] = _ * n + x * s + b * p + w * m),
                (t[1] = _ * i + x * l + b * h + w * y),
                (t[2] = _ * o + x * u + b * f + w * v),
                (t[3] = _ * a + x * c + b * d + w * g),
                (t[4] =
                  (_ = r[4]) * n +
                  (x = r[5]) * s +
                  (b = r[6]) * p +
                  (w = r[7]) * m),
                (t[5] = _ * i + x * l + b * h + w * y),
                (t[6] = _ * o + x * u + b * f + w * v),
                (t[7] = _ * a + x * c + b * d + w * g),
                (t[8] =
                  (_ = r[8]) * n +
                  (x = r[9]) * s +
                  (b = r[10]) * p +
                  (w = r[11]) * m),
                (t[9] = _ * i + x * l + b * h + w * y),
                (t[10] = _ * o + x * u + b * f + w * v),
                (t[11] = _ * a + x * c + b * d + w * g),
                (t[12] =
                  (_ = r[12]) * n +
                  (x = r[13]) * s +
                  (b = r[14]) * p +
                  (w = r[15]) * m),
                (t[13] = _ * i + x * l + b * h + w * y),
                (t[14] = _ * o + x * u + b * f + w * v),
                (t[15] = _ * a + x * c + b * d + w * g),
                t
              )
            }),
            (t.mvt = gs),
            (t.normalize = function (t, e) {
              var r = e[0],
                n = e[1],
                i = e[2],
                o = r * r + n * n + i * i
              return (
                o > 0 && (o = 1 / Math.sqrt(o)),
                (t[0] = e[0] * o),
                (t[1] = e[1] * o),
                (t[2] = e[2] * o),
                t
              )
            }),
            (t.number = We),
            (t.offscreenCanvasSupported = ht),
            (t.ortho = function (t, e, r, n, i, o, a) {
              var s = 1 / (e - r),
                l = 1 / (n - i),
                u = 1 / (o - a)
              return (
                (t[0] = -2 * s),
                (t[1] = 0),
                (t[2] = 0),
                (t[3] = 0),
                (t[4] = 0),
                (t[5] = -2 * l),
                (t[6] = 0),
                (t[7] = 0),
                (t[8] = 0),
                (t[9] = 0),
                (t[10] = 2 * u),
                (t[11] = 0),
                (t[12] = (e + r) * s),
                (t[13] = (i + n) * l),
                (t[14] = (a + o) * u),
                (t[15] = 1),
                t
              )
            }),
            (t.parseGlyphPBF = function (t) {
              return new Xs(t).readFields(pl, [])
            }),
            (t.pbf = Xs),
            (t.performSymbolLayout = function (t, e, r, n, o, a, s) {
              t.createArrays(),
                (t.tilePixelRatio = Ie / (512 * t.overscaling)),
                (t.compareText = {}),
                (t.iconsNeedLinear = !1)
              var l = t.layers[0].layout,
                u = t.layers[0]._unevaluatedLayout._values,
                c = {}
              if ('composite' === t.textSizeData.kind) {
                var p = t.textSizeData,
                  h = p.maxZoom
                c.compositeTextSizes = [
                  u['text-size'].possiblyEvaluate(new pi(p.minZoom), s),
                  u['text-size'].possiblyEvaluate(new pi(h), s),
                ]
              }
              if ('composite' === t.iconSizeData.kind) {
                var f = t.iconSizeData,
                  d = f.maxZoom
                c.compositeIconSizes = [
                  u['icon-size'].possiblyEvaluate(new pi(f.minZoom), s),
                  u['icon-size'].possiblyEvaluate(new pi(d), s),
                ]
              }
              ;(c.layoutTextSize = u['text-size'].possiblyEvaluate(
                new pi(t.zoom + 1),
                s
              )),
                (c.layoutIconSize = u['icon-size'].possiblyEvaluate(
                  new pi(t.zoom + 1),
                  s
                )),
                (c.textMaxSize = u['text-size'].possiblyEvaluate(new pi(18)))
              for (
                var m = 24 * l.get('text-line-height'),
                  y =
                    'map' === l.get('text-rotation-alignment') &&
                    'point' !== l.get('symbol-placement'),
                  v = l.get('text-keep-upright'),
                  g = l.get('text-size'),
                  _ = function () {
                    var a = w[x],
                      u = l.get('text-font').evaluate(a, {}, s).join(','),
                      p = g.evaluate(a, {}, s),
                      h = c.layoutTextSize.evaluate(a, {}, s),
                      f = c.layoutIconSize.evaluate(a, {}, s),
                      d = { horizontal: {}, vertical: void 0 },
                      _ = a.text,
                      E = [0, 0]
                    if (_) {
                      var S = _.toString(),
                        T =
                          24 * l.get('text-letter-spacing').evaluate(a, {}, s),
                        I = (function (t) {
                          for (var e = 0, r = t; e < r.length; e += 1)
                            if (
                              ((n = r[e].charCodeAt(0)),
                              Wn.Arabic(n) ||
                                Wn['Arabic Supplement'](n) ||
                                Wn['Arabic Extended-A'](n) ||
                                Wn['Arabic Presentation Forms-A'](n) ||
                                Wn['Arabic Presentation Forms-B'](n))
                            )
                              return !1
                          var n
                          return !0
                        })(S)
                          ? T
                          : 0,
                        C = l.get('text-anchor').evaluate(a, {}, s),
                        A = l.get('text-variable-anchor')
                      if (!A) {
                        var k = l.get('text-radial-offset').evaluate(a, {}, s)
                        E = k
                          ? ru(C, [24 * k, eu])
                          : l
                              .get('text-offset')
                              .evaluate(a, {}, s)
                              .map(function (t) {
                                return 24 * t
                              })
                      }
                      var P = y
                          ? 'center'
                          : l.get('text-justify').evaluate(a, {}, s),
                        M = l.get('symbol-placement'),
                        L =
                          'point' === M
                            ? 24 * l.get('text-max-width').evaluate(a, {}, s)
                            : 0,
                        z = function () {
                          t.allowVerticalPlacement &&
                            Hn(S) &&
                            (d.vertical = bl(
                              _,
                              e,
                              r,
                              o,
                              u,
                              L,
                              m,
                              C,
                              'left',
                              I,
                              E,
                              gl.vertical,
                              !0,
                              M,
                              h,
                              p
                            ))
                        }
                      if (!y && A) {
                        for (
                          var O =
                              'auto' === P
                                ? A.map(function (t) {
                                    return nu(t)
                                  })
                                : [P],
                            D = !1,
                            R = 0;
                          R < O.length;
                          R++
                        ) {
                          var F = O[R]
                          if (!d.horizontal[F])
                            if (D) d.horizontal[F] = d.horizontal[0]
                            else {
                              var B = bl(
                                _,
                                e,
                                r,
                                o,
                                u,
                                L,
                                m,
                                'center',
                                F,
                                I,
                                E,
                                gl.horizontal,
                                !1,
                                M,
                                h,
                                p
                              )
                              B &&
                                ((d.horizontal[F] = B),
                                (D = 1 === B.positionedLines.length))
                            }
                        }
                        z()
                      } else {
                        'auto' === P && (P = nu(C))
                        var N = bl(
                          _,
                          e,
                          r,
                          o,
                          u,
                          L,
                          m,
                          C,
                          P,
                          I,
                          E,
                          gl.horizontal,
                          !1,
                          M,
                          h,
                          p
                        )
                        N && (d.horizontal[P] = N),
                          z(),
                          Hn(S) &&
                            y &&
                            v &&
                            (d.vertical = bl(
                              _,
                              e,
                              r,
                              o,
                              u,
                              L,
                              m,
                              C,
                              P,
                              I,
                              E,
                              gl.vertical,
                              !1,
                              M,
                              h,
                              p
                            ))
                      }
                    }
                    var U = void 0,
                      j = !1
                    if (a.icon && a.icon.name) {
                      var V = n[a.icon.name]
                      V &&
                        ((U = (function (t, e, r) {
                          var n = kl(r),
                            i = e[0] - t.displaySize[0] * n.horizontalAlign,
                            o = e[1] - t.displaySize[1] * n.verticalAlign
                          return {
                            image: t,
                            top: o,
                            bottom: o + t.displaySize[1],
                            left: i,
                            right: i + t.displaySize[0],
                          }
                        })(
                          o[a.icon.name],
                          l.get('icon-offset').evaluate(a, {}, s),
                          l.get('icon-anchor').evaluate(a, {}, s)
                        )),
                        (j = V.sdf),
                        void 0 === t.sdfIcons
                          ? (t.sdfIcons = V.sdf)
                          : t.sdfIcons !== V.sdf &&
                            b(
                              'Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer'
                            ),
                        (V.pixelRatio !== t.pixelRatio ||
                          0 !== l.get('icon-rotate').constantOr(1)) &&
                          (t.iconsNeedLinear = !0))
                    }
                    var q = au(d.horizontal) || d.vertical
                    ;(t.iconsInText = !!q && q.iconsInText),
                      (q || U) &&
                        (function (t, e, r, n, o, a, s, l, u, c, p) {
                          var h = a.textMaxSize.evaluate(e, {})
                          void 0 === h && (h = s)
                          var f,
                            d = t.layers[0].layout,
                            m = d.get('icon-offset').evaluate(e, {}, p),
                            y = au(r.horizontal),
                            v = s / 24,
                            g = t.tilePixelRatio * v,
                            _ = (t.tilePixelRatio * h) / 24,
                            x = t.tilePixelRatio * l,
                            w = t.tilePixelRatio * d.get('symbol-spacing'),
                            E = d.get('text-padding') * t.tilePixelRatio,
                            S = d.get('icon-padding') * t.tilePixelRatio,
                            T = (d.get('text-max-angle') / 180) * Math.PI,
                            I =
                              'map' === d.get('text-rotation-alignment') &&
                              'point' !== d.get('symbol-placement'),
                            C =
                              'map' === d.get('icon-rotation-alignment') &&
                              'point' !== d.get('symbol-placement'),
                            A = d.get('symbol-placement'),
                            k = w / 2,
                            P = d.get('icon-text-fit')
                          n &&
                            'none' !== P &&
                            (t.allowVerticalPlacement &&
                              r.vertical &&
                              (f = Ml(
                                n,
                                r.vertical,
                                P,
                                d.get('icon-text-fit-padding'),
                                m,
                                v
                              )),
                            y &&
                              (n = Ml(
                                n,
                                y,
                                P,
                                d.get('icon-text-fit-padding'),
                                m,
                                v
                              )))
                          var M = function (i, s) {
                            s.x < 0 ||
                              s.x >= Ie ||
                              s.y < 0 ||
                              s.y >= Ie ||
                              (function (
                                t,
                                e,
                                r,
                                n,
                                i,
                                o,
                                a,
                                s,
                                l,
                                u,
                                c,
                                p,
                                h,
                                f,
                                d,
                                m,
                                y,
                                v,
                                g,
                                _,
                                x,
                                w,
                                E,
                                S
                              ) {
                                var T,
                                  I,
                                  C,
                                  A,
                                  k,
                                  P = t.addToLineVertexArray(e, r),
                                  M = 0,
                                  L = 0,
                                  z = 0,
                                  O = 0,
                                  D = -1,
                                  R = -1,
                                  F = {},
                                  B = yo(''),
                                  N = 0,
                                  U = 0
                                if (
                                  (void 0 ===
                                  s._unevaluatedLayout.getValue(
                                    'text-radial-offset'
                                  )
                                    ? ((N = (T = s.layout
                                        .get('text-offset')
                                        .evaluate(x, {}, S)
                                        .map(function (t) {
                                          return 24 * t
                                        }))[0]),
                                      (U = T[1]))
                                    : ((N =
                                        24 *
                                        s.layout
                                          .get('text-radial-offset')
                                          .evaluate(x, {}, S)),
                                      (U = eu)),
                                  t.allowVerticalPlacement && n.vertical)
                                ) {
                                  var j =
                                    s.layout
                                      .get('text-rotate')
                                      .evaluate(x, {}, S) + 90
                                  ;(A = new Wl(
                                    l,
                                    r,
                                    e,
                                    u,
                                    c,
                                    p,
                                    n.vertical,
                                    h,
                                    f,
                                    d,
                                    t.overscaling,
                                    j
                                  )),
                                    a &&
                                      (k = new Wl(
                                        l,
                                        r,
                                        e,
                                        u,
                                        c,
                                        p,
                                        a,
                                        y,
                                        v,
                                        d,
                                        t.overscaling,
                                        j
                                      ))
                                }
                                if (i) {
                                  var V = s.layout
                                      .get('icon-rotate')
                                      .evaluate(x, {}),
                                    q =
                                      'none' !== s.layout.get('icon-text-fit'),
                                    G = Gl(i, V, E, q),
                                    $ = a ? Gl(a, V, E, q) : void 0
                                  ;(C = new Wl(
                                    l,
                                    r,
                                    e,
                                    u,
                                    c,
                                    p,
                                    i,
                                    y,
                                    v,
                                    !1,
                                    t.overscaling,
                                    V
                                  )),
                                    (M = 4 * G.length)
                                  var Z = t.iconSizeData,
                                    X = null
                                  'source' === Z.kind
                                    ? (X = [
                                        zl *
                                          s.layout
                                            .get('icon-size')
                                            .evaluate(x, {}),
                                      ])[0] > iu &&
                                      b(
                                        t.layerIds[0] +
                                          ': Value for "icon-size" is >= 255. Reduce your "icon-size".'
                                      )
                                    : 'composite' === Z.kind &&
                                      ((X = [
                                        zl *
                                          w.compositeIconSizes[0].evaluate(
                                            x,
                                            {},
                                            S
                                          ),
                                        zl *
                                          w.compositeIconSizes[1].evaluate(
                                            x,
                                            {},
                                            S
                                          ),
                                      ])[0] > iu ||
                                        X[1] > iu) &&
                                      b(
                                        t.layerIds[0] +
                                          ': Value for "icon-size" is >= 255. Reduce your "icon-size".'
                                      ),
                                    t.addSymbols(
                                      t.icon,
                                      G,
                                      X,
                                      _,
                                      g,
                                      x,
                                      !1,
                                      e,
                                      P.lineStartIndex,
                                      P.lineLength,
                                      -1,
                                      S
                                    ),
                                    (D = t.icon.placedSymbolArray.length - 1),
                                    $ &&
                                      ((L = 4 * $.length),
                                      t.addSymbols(
                                        t.icon,
                                        $,
                                        X,
                                        _,
                                        g,
                                        x,
                                        gl.vertical,
                                        e,
                                        P.lineStartIndex,
                                        P.lineLength,
                                        -1,
                                        S
                                      ),
                                      (R = t.icon.placedSymbolArray.length - 1))
                                }
                                for (var K in n.horizontal) {
                                  var W = n.horizontal[K]
                                  if (!I) {
                                    B = yo(W.text)
                                    var H = s.layout
                                      .get('text-rotate')
                                      .evaluate(x, {}, S)
                                    I = new Wl(
                                      l,
                                      r,
                                      e,
                                      u,
                                      c,
                                      p,
                                      W,
                                      h,
                                      f,
                                      d,
                                      t.overscaling,
                                      H
                                    )
                                  }
                                  var J = 1 === W.positionedLines.length
                                  if (
                                    ((z += ou(
                                      t,
                                      e,
                                      W,
                                      o,
                                      s,
                                      d,
                                      x,
                                      m,
                                      P,
                                      n.vertical
                                        ? gl.horizontal
                                        : gl.horizontalOnly,
                                      J ? Object.keys(n.horizontal) : [K],
                                      F,
                                      D,
                                      w,
                                      S
                                    )),
                                    J)
                                  )
                                    break
                                }
                                n.vertical &&
                                  (O += ou(
                                    t,
                                    e,
                                    n.vertical,
                                    o,
                                    s,
                                    d,
                                    x,
                                    m,
                                    P,
                                    gl.vertical,
                                    ['vertical'],
                                    F,
                                    R,
                                    w,
                                    S
                                  ))
                                var Y = I
                                    ? I.boxStartIndex
                                    : t.collisionBoxArray.length,
                                  Q = I
                                    ? I.boxEndIndex
                                    : t.collisionBoxArray.length,
                                  tt = A
                                    ? A.boxStartIndex
                                    : t.collisionBoxArray.length,
                                  et = A
                                    ? A.boxEndIndex
                                    : t.collisionBoxArray.length,
                                  rt = C
                                    ? C.boxStartIndex
                                    : t.collisionBoxArray.length,
                                  nt = C
                                    ? C.boxEndIndex
                                    : t.collisionBoxArray.length,
                                  it = k
                                    ? k.boxStartIndex
                                    : t.collisionBoxArray.length,
                                  ot = k
                                    ? k.boxEndIndex
                                    : t.collisionBoxArray.length
                                t.glyphOffsetArray.length >= mu.MAX_GLYPHS &&
                                  b(
                                    'Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907'
                                  ),
                                  void 0 !== x.sortKey &&
                                    t.addToSortKeyRanges(
                                      t.symbolInstances.length,
                                      x.sortKey
                                    ),
                                  t.symbolInstances.emplaceBack(
                                    e.x,
                                    e.y,
                                    F.right >= 0 ? F.right : -1,
                                    F.center >= 0 ? F.center : -1,
                                    F.left >= 0 ? F.left : -1,
                                    F.vertical || -1,
                                    D,
                                    R,
                                    B,
                                    Y,
                                    Q,
                                    tt,
                                    et,
                                    rt,
                                    nt,
                                    it,
                                    ot,
                                    u,
                                    z,
                                    O,
                                    M,
                                    L,
                                    0,
                                    h,
                                    N,
                                    U
                                  )
                              })(
                                t,
                                s,
                                i,
                                r,
                                n,
                                o,
                                f,
                                t.layers[0],
                                t.collisionBoxArray,
                                e.index,
                                e.sourceLayerIndex,
                                t.index,
                                g,
                                E,
                                I,
                                u,
                                x,
                                S,
                                C,
                                m,
                                e,
                                a,
                                c,
                                p
                              )
                          }
                          if ('line' === A)
                            for (
                              var L = 0,
                                z = (function (t, e, r, n, o) {
                                  for (var a = [], s = 0; s < t.length; s++)
                                    for (
                                      var l = t[s], u = void 0, c = 0;
                                      c < l.length - 1;
                                      c++
                                    ) {
                                      var p = l[c],
                                        h = l[c + 1]
                                      ;(p.x < 0 && h.x < 0) ||
                                        (p.x < 0
                                          ? (p = new i(
                                              0,
                                              p.y +
                                                ((0 - p.x) / (h.x - p.x)) *
                                                  (h.y - p.y)
                                            )._round())
                                          : h.x < 0 &&
                                            (h = new i(
                                              0,
                                              p.y +
                                                ((0 - p.x) / (h.x - p.x)) *
                                                  (h.y - p.y)
                                            )._round()),
                                        (p.y < 0 && h.y < 0) ||
                                          (p.y < 0
                                            ? (p = new i(
                                                p.x +
                                                  ((0 - p.y) / (h.y - p.y)) *
                                                    (h.x - p.x),
                                                0
                                              )._round())
                                            : h.y < 0 &&
                                              (h = new i(
                                                p.x +
                                                  ((0 - p.y) / (h.y - p.y)) *
                                                    (h.x - p.x),
                                                0
                                              )._round()),
                                          (p.x >= n && h.x >= n) ||
                                            (p.x >= n
                                              ? (p = new i(
                                                  n,
                                                  p.y +
                                                    ((n - p.x) / (h.x - p.x)) *
                                                      (h.y - p.y)
                                                )._round())
                                              : h.x >= n &&
                                                (h = new i(
                                                  n,
                                                  p.y +
                                                    ((n - p.x) / (h.x - p.x)) *
                                                      (h.y - p.y)
                                                )._round()),
                                            (p.y >= o && h.y >= o) ||
                                              (p.y >= o
                                                ? (p = new i(
                                                    p.x +
                                                      ((o - p.y) /
                                                        (h.y - p.y)) *
                                                        (h.x - p.x),
                                                    o
                                                  )._round())
                                                : h.y >= o &&
                                                  (h = new i(
                                                    p.x +
                                                      ((o - p.y) /
                                                        (h.y - p.y)) *
                                                        (h.x - p.x),
                                                    o
                                                  )._round()),
                                              (u &&
                                                p.equals(u[u.length - 1])) ||
                                                a.push((u = [p])),
                                              u.push(h)))))
                                    }
                                  return a
                                })(e.geometry, 0, 0, Ie, Ie);
                              L < z.length;
                              L += 1
                            )
                              for (
                                var O = z[L],
                                  D = 0,
                                  R = ql(
                                    O,
                                    w,
                                    T,
                                    r.vertical || y,
                                    n,
                                    24,
                                    _,
                                    t.overscaling,
                                    Ie
                                  );
                                D < R.length;
                                D += 1
                              ) {
                                var F = R[D]
                                ;(y && su(t, y.text, k, F)) || M(O, F)
                              }
                          else if ('line-center' === A)
                            for (
                              var B = 0, N = e.geometry;
                              B < N.length;
                              B += 1
                            ) {
                              var U = N[B]
                              if (U.length > 1) {
                                var j = Vl(U, T, r.vertical || y, n, 24, _)
                                j && M(U, j)
                              }
                            }
                          else if ('Polygon' === e.type)
                            for (
                              var V = 0, q = es(e.geometry, 0);
                              V < q.length;
                              V += 1
                            ) {
                              var G = q[V],
                                $ = Yl(G, 16)
                              M(G[0], new Ll($.x, $.y, 0))
                            }
                          else if ('LineString' === e.type)
                            for (
                              var Z = 0, X = e.geometry;
                              Z < X.length;
                              Z += 1
                            ) {
                              var K = X[Z]
                              M(K, new Ll(K[0].x, K[0].y, 0))
                            }
                          else if ('Point' === e.type)
                            for (
                              var W = 0, H = e.geometry;
                              W < H.length;
                              W += 1
                            )
                              for (var J = 0, Y = H[W]; J < Y.length; J += 1) {
                                var Q = Y[J]
                                M([Q], new Ll(Q.x, Q.y, 0))
                              }
                        })(t, a, d, U, n, c, h, f, E, j, s)
                  },
                  x = 0,
                  w = t.features;
                x < w.length;
                x += 1
              )
                _()
              a && t.generateCollisionDebugBuffers()
            }),
            (t.perspective = function (t, e, r, n, i) {
              var o,
                a = 1 / Math.tan(e / 2)
              return (
                (t[0] = a / r),
                (t[1] = 0),
                (t[2] = 0),
                (t[3] = 0),
                (t[4] = 0),
                (t[5] = a),
                (t[6] = 0),
                (t[7] = 0),
                (t[8] = 0),
                (t[9] = 0),
                (t[11] = -1),
                (t[12] = 0),
                (t[13] = 0),
                (t[15] = 0),
                null != i && i !== 1 / 0
                  ? ((t[10] = (i + n) * (o = 1 / (n - i))),
                    (t[14] = 2 * i * n * o))
                  : ((t[10] = -1), (t[14] = -2 * n)),
                t
              )
            }),
            (t.pick = function (t, e) {
              for (var r = {}, n = 0; n < e.length; n++) {
                var i = e[n]
                i in t && (r[i] = t[i])
              }
              return r
            }),
            (t.plugin = ci),
            (t.polygonIntersectsPolygon = $o),
            (t.postMapLoadEvent = it),
            (t.postTurnstileEvent = rt),
            (t.potpack = dl),
            (t.refProperties = [
              'type',
              'source',
              'source-layer',
              'minzoom',
              'maxzoom',
              'filter',
              'layout',
            ]),
            (t.register = Vn),
            (t.registerForPluginStateChange = function (t) {
              return (
                t({ pluginStatus: ni, pluginURL: ii }),
                si.on('pluginStateChange', t),
                t
              )
            }),
            (t.rotate = function (t, e, r) {
              var n = e[0],
                i = e[1],
                o = e[2],
                a = e[3],
                s = Math.sin(r),
                l = Math.cos(r)
              return (
                (t[0] = n * l + o * s),
                (t[1] = i * l + a * s),
                (t[2] = n * -s + o * l),
                (t[3] = i * -s + a * l),
                t
              )
            }),
            (t.rotateX = function (t, e, r) {
              var n = Math.sin(r),
                i = Math.cos(r),
                o = e[4],
                a = e[5],
                s = e[6],
                l = e[7],
                u = e[8],
                c = e[9],
                p = e[10],
                h = e[11]
              return (
                e !== t &&
                  ((t[0] = e[0]),
                  (t[1] = e[1]),
                  (t[2] = e[2]),
                  (t[3] = e[3]),
                  (t[12] = e[12]),
                  (t[13] = e[13]),
                  (t[14] = e[14]),
                  (t[15] = e[15])),
                (t[4] = o * i + u * n),
                (t[5] = a * i + c * n),
                (t[6] = s * i + p * n),
                (t[7] = l * i + h * n),
                (t[8] = u * i - o * n),
                (t[9] = c * i - a * n),
                (t[10] = p * i - s * n),
                (t[11] = h * i - l * n),
                t
              )
            }),
            (t.rotateZ = function (t, e, r) {
              var n = Math.sin(r),
                i = Math.cos(r),
                o = e[0],
                a = e[1],
                s = e[2],
                l = e[3],
                u = e[4],
                c = e[5],
                p = e[6],
                h = e[7]
              return (
                e !== t &&
                  ((t[8] = e[8]),
                  (t[9] = e[9]),
                  (t[10] = e[10]),
                  (t[11] = e[11]),
                  (t[12] = e[12]),
                  (t[13] = e[13]),
                  (t[14] = e[14]),
                  (t[15] = e[15])),
                (t[0] = o * i + u * n),
                (t[1] = a * i + c * n),
                (t[2] = s * i + p * n),
                (t[3] = l * i + h * n),
                (t[4] = u * i - o * n),
                (t[5] = c * i - a * n),
                (t[6] = p * i - s * n),
                (t[7] = h * i - l * n),
                t
              )
            }),
            (t.scale = function (t, e, r) {
              var n = r[0],
                i = r[1],
                o = r[2]
              return (
                (t[0] = e[0] * n),
                (t[1] = e[1] * n),
                (t[2] = e[2] * n),
                (t[3] = e[3] * n),
                (t[4] = e[4] * i),
                (t[5] = e[5] * i),
                (t[6] = e[6] * i),
                (t[7] = e[7] * i),
                (t[8] = e[8] * o),
                (t[9] = e[9] * o),
                (t[10] = e[10] * o),
                (t[11] = e[11] * o),
                (t[12] = e[12]),
                (t[13] = e[13]),
                (t[14] = e[14]),
                (t[15] = e[15]),
                t
              )
            }),
            (t.scale$1 = function (t, e, r) {
              return (
                (t[0] = e[0] * r),
                (t[1] = e[1] * r),
                (t[2] = e[2] * r),
                (t[3] = e[3] * r),
                t
              )
            }),
            (t.scale$2 = function (t, e, r) {
              return (t[0] = e[0] * r), (t[1] = e[1] * r), (t[2] = e[2] * r), t
            }),
            (t.setCacheLimits = function (t, e) {
              ;(at = t), (st = e)
            }),
            (t.setRTLTextPlugin = function (t, e, r) {
              if (
                (void 0 === r && (r = !1),
                'deferred' === ni || 'loading' === ni || 'loaded' === ni)
              )
                throw new Error(
                  'setRTLTextPlugin cannot be called multiple times.'
                )
              ;(ii = R.resolveURL(t)),
                (ni = 'deferred'),
                (ri = e),
                ai(),
                r || ui()
            }),
            (t.sphericalToCartesian = function (t) {
              var e = t[0],
                r = t[1],
                n = t[2]
              return (
                (r += 90),
                (r *= Math.PI / 180),
                (n *= Math.PI / 180),
                {
                  x: e * Math.cos(r) * Math.sin(n),
                  y: e * Math.sin(r) * Math.sin(n),
                  z: e * Math.cos(n),
                }
              )
            }),
            (t.sqrLen = function (t) {
              var e = t[0],
                r = t[1]
              return e * e + r * r
            }),
            (t.styleSpec = Ct),
            (t.sub = function (t, e, r) {
              return (
                (t[0] = e[0] - r[0]),
                (t[1] = e[1] - r[1]),
                (t[2] = e[2] - r[2]),
                t
              )
            }),
            (t.symbolSize = Fl),
            (t.transformMat3 = function (t, e, r) {
              var n = e[0],
                i = e[1],
                o = e[2]
              return (
                (t[0] = n * r[0] + i * r[3] + o * r[6]),
                (t[1] = n * r[1] + i * r[4] + o * r[7]),
                (t[2] = n * r[2] + i * r[5] + o * r[8]),
                t
              )
            }),
            (t.transformMat4 = ua),
            (t.translate = function (t, e, r) {
              var n,
                i,
                o,
                a,
                s,
                l,
                u,
                c,
                p,
                h,
                f,
                d,
                m = r[0],
                y = r[1],
                v = r[2]
              return (
                e === t
                  ? ((t[12] = e[0] * m + e[4] * y + e[8] * v + e[12]),
                    (t[13] = e[1] * m + e[5] * y + e[9] * v + e[13]),
                    (t[14] = e[2] * m + e[6] * y + e[10] * v + e[14]),
                    (t[15] = e[3] * m + e[7] * y + e[11] * v + e[15]))
                  : ((i = e[1]),
                    (o = e[2]),
                    (a = e[3]),
                    (s = e[4]),
                    (l = e[5]),
                    (u = e[6]),
                    (c = e[7]),
                    (p = e[8]),
                    (h = e[9]),
                    (f = e[10]),
                    (d = e[11]),
                    (t[0] = n = e[0]),
                    (t[1] = i),
                    (t[2] = o),
                    (t[3] = a),
                    (t[4] = s),
                    (t[5] = l),
                    (t[6] = u),
                    (t[7] = c),
                    (t[8] = p),
                    (t[9] = h),
                    (t[10] = f),
                    (t[11] = d),
                    (t[12] = n * m + s * y + p * v + e[12]),
                    (t[13] = i * m + l * y + h * v + e[13]),
                    (t[14] = o * m + u * y + f * v + e[14]),
                    (t[15] = a * m + c * y + d * v + e[15])),
                t
              )
            }),
            (t.triggerPluginCompletionEvent = oi),
            (t.uniqueId = h),
            (t.validateCustomStyleLayer = function (t) {
              var e = [],
                r = t.id
              return (
                void 0 === r &&
                  e.push({
                    message: 'layers.' + r + ': missing required property "id"',
                  }),
                void 0 === t.render &&
                  e.push({
                    message:
                      'layers.' + r + ': missing required method "render"',
                  }),
                t.renderingMode &&
                  '2d' !== t.renderingMode &&
                  '3d' !== t.renderingMode &&
                  e.push({
                    message:
                      'layers.' +
                      r +
                      ': property "renderingMode" must be either "2d" or "3d"',
                  }),
                e
              )
            }),
            (t.validateLight = zn),
            (t.validateStyle = Ln),
            (t.values = function (t) {
              var e = []
              for (var r in t) e.push(t[r])
              return e
            }),
            (t.vectorTile = gs),
            (t.version = '1.9.1'),
            (t.warnOnce = b),
            (t.webpSupported = B),
            (t.window = self),
            (t.wrap = u)
        }),
        n(0, function (t) {
          function e(t) {
            var r = typeof t
            if (
              'number' === r ||
              'boolean' === r ||
              'string' === r ||
              null == t
            )
              return JSON.stringify(t)
            if (Array.isArray(t)) {
              for (var n = '[', i = 0, o = t; i < o.length; i += 1)
                n += e(o[i]) + ','
              return n + ']'
            }
            for (
              var a = Object.keys(t).sort(), s = '{', l = 0;
              l < a.length;
              l++
            )
              s += JSON.stringify(a[l]) + ':' + e(t[a[l]]) + ','
            return s + '}'
          }
          function r(r) {
            for (var n = '', i = 0, o = t.refProperties; i < o.length; i += 1)
              n += '/' + e(r[o[i]])
            return n
          }
          var n = function (t) {
            ;(this.keyCache = {}), t && this.replace(t)
          }
          ;(n.prototype.replace = function (t) {
            ;(this._layerConfigs = {}), (this._layers = {}), this.update(t, [])
          }),
            (n.prototype.update = function (e, n) {
              for (var i = this, o = 0, a = e; o < a.length; o += 1) {
                var s = a[o]
                this._layerConfigs[s.id] = s
                var l = (this._layers[s.id] = t.createStyleLayer(s))
                ;(l._featureFilter = t.featureFilter(l.filter)),
                  this.keyCache[s.id] && delete this.keyCache[s.id]
              }
              for (var u = 0, c = n; u < c.length; u += 1) {
                var p = c[u]
                delete this.keyCache[p],
                  delete this._layerConfigs[p],
                  delete this._layers[p]
              }
              this.familiesBySource = {}
              for (
                var h = 0,
                  f = (function (t, e) {
                    for (var n = {}, i = 0; i < t.length; i++) {
                      var o = (e && e[t[i].id]) || r(t[i])
                      e && (e[t[i].id] = o)
                      var a = n[o]
                      a || (a = n[o] = []), a.push(t[i])
                    }
                    var s = []
                    for (var l in n) s.push(n[l])
                    return s
                  })(t.values(this._layerConfigs), this.keyCache);
                h < f.length;
                h += 1
              ) {
                var d = f[h].map(function (t) {
                    return i._layers[t.id]
                  }),
                  m = d[0]
                if ('none' !== m.visibility) {
                  var y = m.source || '',
                    v = this.familiesBySource[y]
                  v || (v = this.familiesBySource[y] = {})
                  var g = m.sourceLayer || '_geojsonTileLayer',
                    _ = v[g]
                  _ || (_ = v[g] = []), _.push(d)
                }
              }
            })
          var i = function (e) {
            var r = {},
              n = []
            for (var i in e) {
              var o = e[i],
                a = (r[i] = {})
              for (var s in o) {
                var l = o[+s]
                if (l && 0 !== l.bitmap.width && 0 !== l.bitmap.height) {
                  var u = {
                    x: 0,
                    y: 0,
                    w: l.bitmap.width + 2,
                    h: l.bitmap.height + 2,
                  }
                  n.push(u), (a[s] = { rect: u, metrics: l.metrics })
                }
              }
            }
            var c = t.potpack(n),
              p = new t.AlphaImage({ width: c.w || 1, height: c.h || 1 })
            for (var h in e) {
              var f = e[h]
              for (var d in f) {
                var m = f[+d]
                if (m && 0 !== m.bitmap.width && 0 !== m.bitmap.height) {
                  var y = r[h][d].rect
                  t.AlphaImage.copy(
                    m.bitmap,
                    p,
                    { x: 0, y: 0 },
                    { x: y.x + 1, y: y.y + 1 },
                    m.bitmap
                  )
                }
              }
            }
            ;(this.image = p), (this.positions = r)
          }
          t.register('GlyphAtlas', i)
          var o = function (e) {
            ;(this.tileID = new t.OverscaledTileID(
              e.tileID.overscaledZ,
              e.tileID.wrap,
              e.tileID.canonical.z,
              e.tileID.canonical.x,
              e.tileID.canonical.y
            )),
              (this.uid = e.uid),
              (this.zoom = e.zoom),
              (this.pixelRatio = e.pixelRatio),
              (this.tileSize = e.tileSize),
              (this.source = e.source),
              (this.overscaling = this.tileID.overscaleFactor()),
              (this.showCollisionBoxes = e.showCollisionBoxes),
              (this.collectResourceTiming = !!e.collectResourceTiming),
              (this.returnDependencies = !!e.returnDependencies),
              (this.promoteId = e.promoteId)
          }
          function a(e, r, n) {
            for (
              var i = new t.EvaluationParameters(r), o = 0, a = e;
              o < a.length;
              o += 1
            )
              a[o].recalculate(i, n)
          }
          function s(e, r) {
            var n = t.getArrayBuffer(e.request, function (e, n, i, o) {
              e
                ? r(e)
                : n &&
                  r(null, {
                    vectorTile: new t.vectorTile.VectorTile(new t.pbf(n)),
                    rawData: n,
                    cacheControl: i,
                    expires: o,
                  })
            })
            return function () {
              n.cancel(), r()
            }
          }
          o.prototype.parse = function (e, r, n, o, s) {
            var l = this
            ;(this.status = 'parsing'),
              (this.data = e),
              (this.collisionBoxArray = new t.CollisionBoxArray())
            var u = new t.DictionaryCoder(Object.keys(e.layers).sort()),
              c = new t.FeatureIndex(this.tileID, this.promoteId)
            c.bucketLayerIDs = []
            var p,
              h,
              f,
              d,
              m = {},
              y = {
                featureIndex: c,
                iconDependencies: {},
                patternDependencies: {},
                glyphDependencies: {},
                availableImages: n,
              },
              v = r.familiesBySource[this.source]
            for (var g in v) {
              var _ = e.layers[g]
              if (_) {
                1 === _.version &&
                  t.warnOnce(
                    'Vector tile source "' +
                      this.source +
                      '" layer "' +
                      g +
                      '" does not use vector tile spec v2 and therefore may have some rendering errors.'
                  )
                for (var x = u.encode(g), b = [], w = 0; w < _.length; w++) {
                  var E = _.feature(w),
                    S = c.getId(E, g)
                  b.push({ feature: E, id: S, index: w, sourceLayerIndex: x })
                }
                for (var T = 0, I = v[g]; T < I.length; T += 1) {
                  var C = I[T],
                    A = C[0]
                  ;(A.minzoom && this.zoom < Math.floor(A.minzoom)) ||
                    (A.maxzoom && this.zoom >= A.maxzoom) ||
                    ('none' !== A.visibility &&
                      (a(C, this.zoom, n),
                      (m[A.id] = A.createBucket({
                        index: c.bucketLayerIDs.length,
                        layers: C,
                        zoom: this.zoom,
                        pixelRatio: this.pixelRatio,
                        overscaling: this.overscaling,
                        collisionBoxArray: this.collisionBoxArray,
                        sourceLayerIndex: x,
                        sourceID: this.source,
                      })).populate(b, y, this.tileID.canonical),
                      c.bucketLayerIDs.push(
                        C.map(function (t) {
                          return t.id
                        })
                      )))
                }
              }
            }
            var k = t.mapObject(y.glyphDependencies, function (t) {
              return Object.keys(t).map(Number)
            })
            Object.keys(k).length
              ? o.send('getGlyphs', { uid: this.uid, stacks: k }, function (
                  t,
                  e
                ) {
                  p || ((p = t), (h = e), L.call(l))
                })
              : (h = {})
            var P = Object.keys(y.iconDependencies)
            P.length
              ? o.send(
                  'getImages',
                  {
                    icons: P,
                    source: this.source,
                    tileID: this.tileID,
                    type: 'icons',
                  },
                  function (t, e) {
                    p || ((p = t), (f = e), L.call(l))
                  }
                )
              : (f = {})
            var M = Object.keys(y.patternDependencies)
            function L() {
              if (p) return s(p)
              if (h && f && d) {
                var e = new i(h),
                  r = new t.ImageAtlas(f, d)
                for (var o in m) {
                  var l = m[o]
                  l instanceof t.SymbolBucket
                    ? (a(l.layers, this.zoom, n),
                      t.performSymbolLayout(
                        l,
                        h,
                        e.positions,
                        f,
                        r.iconPositions,
                        this.showCollisionBoxes,
                        this.tileID.canonical
                      ))
                    : l.hasPattern &&
                      (l instanceof t.LineBucket ||
                        l instanceof t.FillBucket ||
                        l instanceof t.FillExtrusionBucket) &&
                      (a(l.layers, this.zoom, n),
                      l.addFeatures(
                        y,
                        this.tileID.canonical,
                        r.patternPositions
                      ))
                }
                ;(this.status = 'done'),
                  s(null, {
                    buckets: t.values(m).filter(function (t) {
                      return !t.isEmpty()
                    }),
                    featureIndex: c,
                    collisionBoxArray: this.collisionBoxArray,
                    glyphAtlasImage: e.image,
                    imageAtlas: r,
                    glyphMap: this.returnDependencies ? h : null,
                    iconMap: this.returnDependencies ? f : null,
                    glyphPositions: this.returnDependencies
                      ? e.positions
                      : null,
                  })
              }
            }
            M.length
              ? o.send(
                  'getImages',
                  {
                    icons: M,
                    source: this.source,
                    tileID: this.tileID,
                    type: 'patterns',
                  },
                  function (t, e) {
                    p || ((p = t), (d = e), L.call(l))
                  }
                )
              : (d = {}),
              L.call(this)
          }
          var l = function (t, e, r, n) {
            ;(this.actor = t),
              (this.layerIndex = e),
              (this.availableImages = r),
              (this.loadVectorData = n || s),
              (this.loading = {}),
              (this.loaded = {})
          }
          ;(l.prototype.loadTile = function (e, r) {
            var n = this,
              i = e.uid
            this.loading || (this.loading = {})
            var a =
                !!(e && e.request && e.request.collectResourceTiming) &&
                new t.RequestPerformance(e.request),
              s = (this.loading[i] = new o(e))
            s.abort = this.loadVectorData(e, function (e, o) {
              if ((delete n.loading[i], e || !o))
                return (s.status = 'done'), (n.loaded[i] = s), r(e)
              var l = o.rawData,
                u = {}
              o.expires && (u.expires = o.expires),
                o.cacheControl && (u.cacheControl = o.cacheControl)
              var c = {}
              if (a) {
                var p = a.finish()
                p && (c.resourceTiming = JSON.parse(JSON.stringify(p)))
              }
              ;(s.vectorTile = o.vectorTile),
                s.parse(
                  o.vectorTile,
                  n.layerIndex,
                  n.availableImages,
                  n.actor,
                  function (e, n) {
                    if (e || !n) return r(e)
                    r(null, t.extend({ rawTileData: l.slice(0) }, n, u, c))
                  }
                ),
                (n.loaded = n.loaded || {}),
                (n.loaded[i] = s)
            })
          }),
            (l.prototype.reloadTile = function (t, e) {
              var r = this,
                n = this.loaded,
                i = t.uid,
                o = this
              if (n && n[i]) {
                var a = n[i]
                a.showCollisionBoxes = t.showCollisionBoxes
                var s = function (t, n) {
                  var i = a.reloadCallback
                  i &&
                    (delete a.reloadCallback,
                    a.parse(
                      a.vectorTile,
                      o.layerIndex,
                      r.availableImages,
                      o.actor,
                      i
                    )),
                    e(t, n)
                }
                'parsing' === a.status
                  ? (a.reloadCallback = s)
                  : 'done' === a.status &&
                    (a.vectorTile
                      ? a.parse(
                          a.vectorTile,
                          this.layerIndex,
                          this.availableImages,
                          this.actor,
                          s
                        )
                      : s())
              }
            }),
            (l.prototype.abortTile = function (t, e) {
              var r = this.loading,
                n = t.uid
              r && r[n] && r[n].abort && (r[n].abort(), delete r[n]), e()
            }),
            (l.prototype.removeTile = function (t, e) {
              var r = this.loaded,
                n = t.uid
              r && r[n] && delete r[n], e()
            })
          var u = t.window.ImageBitmap,
            c = function () {
              this.loaded = {}
            }
          ;(c.prototype.loadTile = function (e, r) {
            var n = e.uid,
              i = e.encoding,
              o = e.rawImageData,
              a = u && o instanceof u ? this.getImageData(o) : o,
              s = new t.DEMData(n, a, i)
            ;(this.loaded = this.loaded || {}), (this.loaded[n] = s), r(null, s)
          }),
            (c.prototype.getImageData = function (e) {
              ;(this.offscreenCanvas && this.offscreenCanvasContext) ||
                ((this.offscreenCanvas = new OffscreenCanvas(
                  e.width,
                  e.height
                )),
                (this.offscreenCanvasContext = this.offscreenCanvas.getContext(
                  '2d'
                ))),
                (this.offscreenCanvas.width = e.width),
                (this.offscreenCanvas.height = e.height),
                this.offscreenCanvasContext.drawImage(
                  e,
                  0,
                  0,
                  e.width,
                  e.height
                )
              var r = this.offscreenCanvasContext.getImageData(
                -1,
                -1,
                e.width + 2,
                e.height + 2
              )
              return (
                this.offscreenCanvasContext.clearRect(
                  0,
                  0,
                  this.offscreenCanvas.width,
                  this.offscreenCanvas.height
                ),
                new t.RGBAImage({ width: r.width, height: r.height }, r.data)
              )
            }),
            (c.prototype.removeTile = function (t) {
              var e = this.loaded,
                r = t.uid
              e && e[r] && delete e[r]
            })
          var p = 6378137
          function h(t) {
            var e = 0
            if (t && t.length > 0) {
              e += Math.abs(f(t[0]))
              for (var r = 1; r < t.length; r++) e -= Math.abs(f(t[r]))
            }
            return e
          }
          function f(t) {
            var e,
              r,
              n,
              i,
              o,
              a,
              s = 0,
              l = t.length
            if (l > 2) {
              for (a = 0; a < l; a++)
                a === l - 2
                  ? ((n = l - 2), (i = l - 1), (o = 0))
                  : a === l - 1
                  ? ((n = l - 1), (i = 0), (o = 1))
                  : ((n = a), (i = a + 1), (o = a + 2)),
                  (e = t[n]),
                  (r = t[i]),
                  (s += (d(t[o][0]) - d(e[0])) * Math.sin(d(r[1])))
              s = (s * p * p) / 2
            }
            return s
          }
          function d(t) {
            return (t * Math.PI) / 180
          }
          var m = {
            geometry: function t(e) {
              var r,
                n = 0
              switch (e.type) {
                case 'Polygon':
                  return h(e.coordinates)
                case 'MultiPolygon':
                  for (r = 0; r < e.coordinates.length; r++)
                    n += h(e.coordinates[r])
                  return n
                case 'Point':
                case 'MultiPoint':
                case 'LineString':
                case 'MultiLineString':
                  return 0
                case 'GeometryCollection':
                  for (r = 0; r < e.geometries.length; r++)
                    n += t(e.geometries[r])
                  return n
              }
            },
            ring: f,
          }
          function y(t, e) {
            return function (r) {
              return t(r, e)
            }
          }
          function v(t, e) {
            t[0] = g(t[0], (e = !!e))
            for (var r = 1; r < t.length; r++) t[r] = g(t[r], !e)
            return t
          }
          function g(t, e) {
            return (function (t) {
              return m.ring(t) >= 0
            })(t) === e
              ? t
              : t.reverse()
          }
          var _ = t.vectorTile.VectorTileFeature.prototype.toGeoJSON,
            x = function (e) {
              ;(this._feature = e),
                (this.extent = t.EXTENT),
                (this.type = e.type),
                (this.properties = e.tags),
                'id' in e && !isNaN(e.id) && (this.id = parseInt(e.id, 10))
            }
          ;(x.prototype.loadGeometry = function () {
            if (1 === this._feature.type) {
              for (
                var e = [], r = 0, n = this._feature.geometry;
                r < n.length;
                r += 1
              ) {
                var i = n[r]
                e.push([new t.Point$1(i[0], i[1])])
              }
              return e
            }
            for (
              var o = [], a = 0, s = this._feature.geometry;
              a < s.length;
              a += 1
            ) {
              for (var l = [], u = 0, c = s[a]; u < c.length; u += 1) {
                var p = c[u]
                l.push(new t.Point$1(p[0], p[1]))
              }
              o.push(l)
            }
            return o
          }),
            (x.prototype.toGeoJSON = function (t, e, r) {
              return _.call(this, t, e, r)
            })
          var b = function (e) {
            ;(this.layers = { _geojsonTileLayer: this }),
              (this.name = '_geojsonTileLayer'),
              (this.extent = t.EXTENT),
              (this.length = e.length),
              (this._features = e)
          }
          b.prototype.feature = function (t) {
            return new x(this._features[t])
          }
          var w = t.vectorTile.VectorTileFeature,
            E = S
          function S(t, e) {
            ;(this.options = e || {}),
              (this.features = t),
              (this.length = t.length)
          }
          function T(t, e) {
            ;(this.id = 'number' == typeof t.id ? t.id : void 0),
              (this.type = t.type),
              (this.rawGeometry = 1 === t.type ? [t.geometry] : t.geometry),
              (this.properties = t.tags),
              (this.extent = e || 4096)
          }
          ;(S.prototype.feature = function (t) {
            return new T(this.features[t], this.options.extent)
          }),
            (T.prototype.loadGeometry = function () {
              var e = this.rawGeometry
              this.geometry = []
              for (var r = 0; r < e.length; r++) {
                for (var n = e[r], i = [], o = 0; o < n.length; o++)
                  i.push(new t.Point$1(n[o][0], n[o][1]))
                this.geometry.push(i)
              }
              return this.geometry
            }),
            (T.prototype.bbox = function () {
              this.geometry || this.loadGeometry()
              for (
                var t = this.geometry,
                  e = 1 / 0,
                  r = -1 / 0,
                  n = 1 / 0,
                  i = -1 / 0,
                  o = 0;
                o < t.length;
                o++
              )
                for (var a = t[o], s = 0; s < a.length; s++) {
                  var l = a[s]
                  ;(e = Math.min(e, l.x)),
                    (r = Math.max(r, l.x)),
                    (n = Math.min(n, l.y)),
                    (i = Math.max(i, l.y))
                }
              return [e, n, r, i]
            }),
            (T.prototype.toGeoJSON = w.prototype.toGeoJSON)
          var I = A,
            C = E
          function A(e) {
            var r = new t.pbf()
            return (
              (function (t, e) {
                for (var r in t.layers) e.writeMessage(3, k, t.layers[r])
              })(e, r),
              r.finish()
            )
          }
          function k(t, e) {
            var r
            e.writeVarintField(15, t.version || 1),
              e.writeStringField(1, t.name || ''),
              e.writeVarintField(5, t.extent || 4096)
            var n = { keys: [], values: [], keycache: {}, valuecache: {} }
            for (r = 0; r < t.length; r++)
              (n.feature = t.feature(r)), e.writeMessage(2, P, n)
            var i = n.keys
            for (r = 0; r < i.length; r++) e.writeStringField(3, i[r])
            var o = n.values
            for (r = 0; r < o.length; r++) e.writeMessage(4, D, o[r])
          }
          function P(t, e) {
            var r = t.feature
            void 0 !== r.id && e.writeVarintField(1, r.id),
              e.writeMessage(2, M, t),
              e.writeVarintField(3, r.type),
              e.writeMessage(4, O, r)
          }
          function M(t, e) {
            var r = t.feature,
              n = t.keys,
              i = t.values,
              o = t.keycache,
              a = t.valuecache
            for (var s in r.properties) {
              var l = o[s]
              void 0 === l && (n.push(s), (o[s] = l = n.length - 1)),
                e.writeVarint(l)
              var u = r.properties[s],
                c = typeof u
              'string' !== c &&
                'boolean' !== c &&
                'number' !== c &&
                (u = JSON.stringify(u))
              var p = c + ':' + u,
                h = a[p]
              void 0 === h && (i.push(u), (a[p] = h = i.length - 1)),
                e.writeVarint(h)
            }
          }
          function L(t, e) {
            return (e << 3) + (7 & t)
          }
          function z(t) {
            return (t << 1) ^ (t >> 31)
          }
          function O(t, e) {
            for (
              var r = t.loadGeometry(),
                n = t.type,
                i = 0,
                o = 0,
                a = r.length,
                s = 0;
              s < a;
              s++
            ) {
              var l = r[s],
                u = 1
              1 === n && (u = l.length), e.writeVarint(L(1, u))
              for (
                var c = 3 === n ? l.length - 1 : l.length, p = 0;
                p < c;
                p++
              ) {
                1 === p && 1 !== n && e.writeVarint(L(2, c - 1))
                var h = l[p].x - i,
                  f = l[p].y - o
                e.writeVarint(z(h)), e.writeVarint(z(f)), (i += h), (o += f)
              }
              3 === n && e.writeVarint(L(7, 1))
            }
          }
          function D(t, e) {
            var r = typeof t
            'string' === r
              ? e.writeStringField(1, t)
              : 'boolean' === r
              ? e.writeBooleanField(7, t)
              : 'number' === r &&
                (t % 1 != 0
                  ? e.writeDoubleField(3, t)
                  : t < 0
                  ? e.writeSVarintField(6, t)
                  : e.writeVarintField(5, t))
          }
          function R(t, e, r, n) {
            F(t, r, n), F(e, 2 * r, 2 * n), F(e, 2 * r + 1, 2 * n + 1)
          }
          function F(t, e, r) {
            var n = t[e]
            ;(t[e] = t[r]), (t[r] = n)
          }
          function B(t, e, r, n) {
            var i = t - r,
              o = e - n
            return i * i + o * o
          }
          ;(I.fromVectorTileJs = A),
            (I.fromGeojsonVt = function (t, e) {
              e = e || {}
              var r = {}
              for (var n in t)
                (r[n] = new E(t[n].features, e)),
                  (r[n].name = n),
                  (r[n].version = e.version),
                  (r[n].extent = e.extent)
              return A({ layers: r })
            }),
            (I.GeoJSONWrapper = C)
          var N = function (t) {
              return t[0]
            },
            U = function (t) {
              return t[1]
            },
            j = function (t, e, r, n, i) {
              void 0 === e && (e = N),
                void 0 === r && (r = U),
                void 0 === n && (n = 64),
                void 0 === i && (i = Float64Array),
                (this.nodeSize = n),
                (this.points = t)
              for (
                var o = t.length < 65536 ? Uint16Array : Uint32Array,
                  a = (this.ids = new o(t.length)),
                  s = (this.coords = new i(2 * t.length)),
                  l = 0;
                l < t.length;
                l++
              )
                (a[l] = l), (s[2 * l] = e(t[l])), (s[2 * l + 1] = r(t[l]))
              !(function t(e, r, n, i, o, a) {
                if (!(o - i <= n)) {
                  var s = (i + o) >> 1
                  !(function t(e, r, n, i, o, a) {
                    for (; o > i; ) {
                      if (o - i > 600) {
                        var s = o - i + 1,
                          l = n - i + 1,
                          u = Math.log(s),
                          c = 0.5 * Math.exp((2 * u) / 3),
                          p =
                            0.5 *
                            Math.sqrt((u * c * (s - c)) / s) *
                            (l - s / 2 < 0 ? -1 : 1)
                        t(
                          e,
                          r,
                          n,
                          Math.max(i, Math.floor(n - (l * c) / s + p)),
                          Math.min(o, Math.floor(n + ((s - l) * c) / s + p)),
                          a
                        )
                      }
                      var h = r[2 * n + a],
                        f = i,
                        d = o
                      for (
                        R(e, r, i, n), r[2 * o + a] > h && R(e, r, i, o);
                        f < d;

                      ) {
                        for (R(e, r, f, d), f++, d--; r[2 * f + a] < h; ) f++
                        for (; r[2 * d + a] > h; ) d--
                      }
                      r[2 * i + a] === h ? R(e, r, i, d) : R(e, r, ++d, o),
                        d <= n && (i = d + 1),
                        n <= d && (o = d - 1)
                    }
                  })(e, r, s, i, o, a % 2),
                    t(e, r, n, i, s - 1, a + 1),
                    t(e, r, n, s + 1, o, a + 1)
                }
              })(a, s, n, 0, a.length - 1, 0)
            }
          ;(j.prototype.range = function (t, e, r, n) {
            return (function (t, e, r, n, i, o, a) {
              for (var s, l, u = [0, t.length - 1, 0], c = []; u.length; ) {
                var p = u.pop(),
                  h = u.pop(),
                  f = u.pop()
                if (h - f <= a)
                  for (var d = f; d <= h; d++)
                    (l = e[2 * d + 1]),
                      (s = e[2 * d]) >= r &&
                        s <= i &&
                        l >= n &&
                        l <= o &&
                        c.push(t[d])
                else {
                  var m = Math.floor((f + h) / 2)
                  ;(l = e[2 * m + 1]),
                    (s = e[2 * m]) >= r &&
                      s <= i &&
                      l >= n &&
                      l <= o &&
                      c.push(t[m])
                  var y = (p + 1) % 2
                  ;(0 === p ? r <= s : n <= l) &&
                    (u.push(f), u.push(m - 1), u.push(y)),
                    (0 === p ? i >= s : o >= l) &&
                      (u.push(m + 1), u.push(h), u.push(y))
                }
              }
              return c
            })(this.ids, this.coords, t, e, r, n, this.nodeSize)
          }),
            (j.prototype.within = function (t, e, r) {
              return (function (t, e, r, n, i, o) {
                for (
                  var a = [0, t.length - 1, 0], s = [], l = i * i;
                  a.length;

                ) {
                  var u = a.pop(),
                    c = a.pop(),
                    p = a.pop()
                  if (c - p <= o)
                    for (var h = p; h <= c; h++)
                      B(e[2 * h], e[2 * h + 1], r, n) <= l && s.push(t[h])
                  else {
                    var f = Math.floor((p + c) / 2),
                      d = e[2 * f],
                      m = e[2 * f + 1]
                    B(d, m, r, n) <= l && s.push(t[f])
                    var y = (u + 1) % 2
                    ;(0 === u ? r - i <= d : n - i <= m) &&
                      (a.push(p), a.push(f - 1), a.push(y)),
                      (0 === u ? r + i >= d : n + i >= m) &&
                        (a.push(f + 1), a.push(c), a.push(y))
                  }
                }
                return s
              })(this.ids, this.coords, t, e, r, this.nodeSize)
            })
          var V = {
              minZoom: 0,
              maxZoom: 16,
              radius: 40,
              extent: 512,
              nodeSize: 64,
              log: !1,
              generateId: !1,
              reduce: null,
              map: function (t) {
                return t
              },
            },
            q = function (t) {
              ;(this.options = H(Object.create(V), t)),
                (this.trees = new Array(this.options.maxZoom + 1))
            }
          function G(t, e, r, n, i) {
            return {
              x: t,
              y: e,
              zoom: 1 / 0,
              id: r,
              parentId: -1,
              numPoints: n,
              properties: i,
            }
          }
          function $(t, e) {
            var r = t.geometry.coordinates,
              n = r[1]
            return { x: K(r[0]), y: W(n), zoom: 1 / 0, index: e, parentId: -1 }
          }
          function Z(t) {
            return {
              type: 'Feature',
              id: t.id,
              properties: X(t),
              geometry: {
                type: 'Point',
                coordinates: [
                  ((n = t.x), 360 * (n - 0.5)),
                  ((e = t.y),
                  (r = ((180 - 360 * e) * Math.PI) / 180),
                  (360 * Math.atan(Math.exp(r))) / Math.PI - 90),
                ],
              },
            }
            var e, r, n
          }
          function X(t) {
            var e = t.numPoints,
              r =
                e >= 1e4
                  ? Math.round(e / 1e3) + 'k'
                  : e >= 1e3
                  ? Math.round(e / 100) / 10 + 'k'
                  : e
            return H(H({}, t.properties), {
              cluster: !0,
              cluster_id: t.id,
              point_count: e,
              point_count_abbreviated: r,
            })
          }
          function K(t) {
            return t / 360 + 0.5
          }
          function W(t) {
            var e = Math.sin((t * Math.PI) / 180),
              r = 0.5 - (0.25 * Math.log((1 + e) / (1 - e))) / Math.PI
            return r < 0 ? 0 : r > 1 ? 1 : r
          }
          function H(t, e) {
            for (var r in e) t[r] = e[r]
            return t
          }
          function J(t) {
            return t.x
          }
          function Y(t) {
            return t.y
          }
          function Q(t, e, r, n, i, o) {
            var a = i - r,
              s = o - n
            if (0 !== a || 0 !== s) {
              var l = ((t - r) * a + (e - n) * s) / (a * a + s * s)
              l > 1 ? ((r = i), (n = o)) : l > 0 && ((r += a * l), (n += s * l))
            }
            return (a = t - r) * a + (s = e - n) * s
          }
          function tt(t, e, r, n) {
            var i = {
              id: void 0 === t ? null : t,
              type: e,
              geometry: r,
              tags: n,
              minX: 1 / 0,
              minY: 1 / 0,
              maxX: -1 / 0,
              maxY: -1 / 0,
            }
            return (
              (function (t) {
                var e = t.geometry,
                  r = t.type
                if ('Point' === r || 'MultiPoint' === r || 'LineString' === r)
                  et(t, e)
                else if ('Polygon' === r || 'MultiLineString' === r)
                  for (var n = 0; n < e.length; n++) et(t, e[n])
                else if ('MultiPolygon' === r)
                  for (n = 0; n < e.length; n++)
                    for (var i = 0; i < e[n].length; i++) et(t, e[n][i])
              })(i),
              i
            )
          }
          function et(t, e) {
            for (var r = 0; r < e.length; r += 3)
              (t.minX = Math.min(t.minX, e[r])),
                (t.minY = Math.min(t.minY, e[r + 1])),
                (t.maxX = Math.max(t.maxX, e[r])),
                (t.maxY = Math.max(t.maxY, e[r + 1]))
          }
          function rt(t, e, r, n) {
            if (e.geometry) {
              var i = e.geometry.coordinates,
                o = e.geometry.type,
                a = Math.pow(r.tolerance / ((1 << r.maxZoom) * r.extent), 2),
                s = [],
                l = e.id
              if (
                (r.promoteId
                  ? (l = e.properties[r.promoteId])
                  : r.generateId && (l = n || 0),
                'Point' === o)
              )
                nt(i, s)
              else if ('MultiPoint' === o)
                for (var u = 0; u < i.length; u++) nt(i[u], s)
              else if ('LineString' === o) it(i, s, a, !1)
              else if ('MultiLineString' === o) {
                if (r.lineMetrics) {
                  for (u = 0; u < i.length; u++)
                    it(i[u], (s = []), a, !1),
                      t.push(tt(l, 'LineString', s, e.properties))
                  return
                }
                ot(i, s, a, !1)
              } else if ('Polygon' === o) ot(i, s, a, !0)
              else {
                if ('MultiPolygon' !== o) {
                  if ('GeometryCollection' === o) {
                    for (u = 0; u < e.geometry.geometries.length; u++)
                      rt(
                        t,
                        {
                          id: l,
                          geometry: e.geometry.geometries[u],
                          properties: e.properties,
                        },
                        r,
                        n
                      )
                    return
                  }
                  throw new Error('Input data is not a valid GeoJSON object.')
                }
                for (u = 0; u < i.length; u++) {
                  var c = []
                  ot(i[u], c, a, !0), s.push(c)
                }
              }
              t.push(tt(l, o, s, e.properties))
            }
          }
          function nt(t, e) {
            e.push(at(t[0])), e.push(st(t[1])), e.push(0)
          }
          function it(t, e, r, n) {
            for (var i, o, a = 0, s = 0; s < t.length; s++) {
              var l = at(t[s][0]),
                u = st(t[s][1])
              e.push(l),
                e.push(u),
                e.push(0),
                s > 0 &&
                  (a += n
                    ? (i * u - l * o) / 2
                    : Math.sqrt(Math.pow(l - i, 2) + Math.pow(u - o, 2))),
                (i = l),
                (o = u)
            }
            var c = e.length - 3
            ;(e[2] = 1),
              (function t(e, r, n, i) {
                for (
                  var o,
                    a = i,
                    s = (n - r) >> 1,
                    l = n - r,
                    u = e[r],
                    c = e[r + 1],
                    p = e[n],
                    h = e[n + 1],
                    f = r + 3;
                  f < n;
                  f += 3
                ) {
                  var d = Q(e[f], e[f + 1], u, c, p, h)
                  if (d > a) (o = f), (a = d)
                  else if (d === a) {
                    var m = Math.abs(f - s)
                    m < l && ((o = f), (l = m))
                  }
                }
                a > i &&
                  (o - r > 3 && t(e, r, o, i),
                  (e[o + 2] = a),
                  n - o > 3 && t(e, o, n, i))
              })(e, 0, c, r),
              (e[c + 2] = 1),
              (e.size = Math.abs(a)),
              (e.start = 0),
              (e.end = e.size)
          }
          function ot(t, e, r, n) {
            for (var i = 0; i < t.length; i++) {
              var o = []
              it(t[i], o, r, n), e.push(o)
            }
          }
          function at(t) {
            return t / 360 + 0.5
          }
          function st(t) {
            var e = Math.sin((t * Math.PI) / 180),
              r = 0.5 - (0.25 * Math.log((1 + e) / (1 - e))) / Math.PI
            return r < 0 ? 0 : r > 1 ? 1 : r
          }
          function lt(t, e, r, n, i, o, a, s) {
            if (((n /= e), o >= (r /= e) && a < n)) return t
            if (a < r || o >= n) return null
            for (var l = [], u = 0; u < t.length; u++) {
              var c = t[u],
                p = c.geometry,
                h = c.type,
                f = 0 === i ? c.minX : c.minY,
                d = 0 === i ? c.maxX : c.maxY
              if (f >= r && d < n) l.push(c)
              else if (!(d < r || f >= n)) {
                var m = []
                if ('Point' === h || 'MultiPoint' === h) ut(p, m, r, n, i)
                else if ('LineString' === h)
                  ct(p, m, r, n, i, !1, s.lineMetrics)
                else if ('MultiLineString' === h) ht(p, m, r, n, i, !1)
                else if ('Polygon' === h) ht(p, m, r, n, i, !0)
                else if ('MultiPolygon' === h)
                  for (var y = 0; y < p.length; y++) {
                    var v = []
                    ht(p[y], v, r, n, i, !0), v.length && m.push(v)
                  }
                if (m.length) {
                  if (s.lineMetrics && 'LineString' === h) {
                    for (y = 0; y < m.length; y++)
                      l.push(tt(c.id, h, m[y], c.tags))
                    continue
                  }
                  ;('LineString' !== h && 'MultiLineString' !== h) ||
                    (1 === m.length
                      ? ((h = 'LineString'), (m = m[0]))
                      : (h = 'MultiLineString')),
                    ('Point' !== h && 'MultiPoint' !== h) ||
                      (h = 3 === m.length ? 'Point' : 'MultiPoint'),
                    l.push(tt(c.id, h, m, c.tags))
                }
              }
            }
            return l.length ? l : null
          }
          function ut(t, e, r, n, i) {
            for (var o = 0; o < t.length; o += 3) {
              var a = t[o + i]
              a >= r &&
                a <= n &&
                (e.push(t[o]), e.push(t[o + 1]), e.push(t[o + 2]))
            }
          }
          function ct(t, e, r, n, i, o, a) {
            for (
              var s, l, u = pt(t), c = 0 === i ? dt : mt, p = t.start, h = 0;
              h < t.length - 3;
              h += 3
            ) {
              var f = t[h],
                d = t[h + 1],
                m = t[h + 2],
                y = t[h + 3],
                v = t[h + 4],
                g = 0 === i ? f : d,
                _ = 0 === i ? y : v,
                x = !1
              a && (s = Math.sqrt(Math.pow(f - y, 2) + Math.pow(d - v, 2))),
                g < r
                  ? _ > r &&
                    ((l = c(u, f, d, y, v, r)), a && (u.start = p + s * l))
                  : g > n
                  ? _ < n &&
                    ((l = c(u, f, d, y, v, n)), a && (u.start = p + s * l))
                  : ft(u, f, d, m),
                _ < r && g >= r && ((l = c(u, f, d, y, v, r)), (x = !0)),
                _ > n && g <= n && ((l = c(u, f, d, y, v, n)), (x = !0)),
                !o && x && (a && (u.end = p + s * l), e.push(u), (u = pt(t))),
                a && (p += s)
            }
            var b = t.length - 3
            ;(f = t[b]),
              (d = t[b + 1]),
              (m = t[b + 2]),
              (g = 0 === i ? f : d) >= r && g <= n && ft(u, f, d, m),
              (b = u.length - 3),
              o &&
                b >= 3 &&
                (u[b] !== u[0] || u[b + 1] !== u[1]) &&
                ft(u, u[0], u[1], u[2]),
              u.length && e.push(u)
          }
          function pt(t) {
            var e = []
            return (e.size = t.size), (e.start = t.start), (e.end = t.end), e
          }
          function ht(t, e, r, n, i, o) {
            for (var a = 0; a < t.length; a++) ct(t[a], e, r, n, i, o, !1)
          }
          function ft(t, e, r, n) {
            t.push(e), t.push(r), t.push(n)
          }
          function dt(t, e, r, n, i, o) {
            var a = (o - e) / (n - e)
            return t.push(o), t.push(r + (i - r) * a), t.push(1), a
          }
          function mt(t, e, r, n, i, o) {
            var a = (o - r) / (i - r)
            return t.push(e + (n - e) * a), t.push(o), t.push(1), a
          }
          function yt(t, e) {
            for (var r = [], n = 0; n < t.length; n++) {
              var i,
                o = t[n],
                a = o.type
              if ('Point' === a || 'MultiPoint' === a || 'LineString' === a)
                i = vt(o.geometry, e)
              else if ('MultiLineString' === a || 'Polygon' === a) {
                i = []
                for (var s = 0; s < o.geometry.length; s++)
                  i.push(vt(o.geometry[s], e))
              } else if ('MultiPolygon' === a)
                for (i = [], s = 0; s < o.geometry.length; s++) {
                  for (var l = [], u = 0; u < o.geometry[s].length; u++)
                    l.push(vt(o.geometry[s][u], e))
                  i.push(l)
                }
              r.push(tt(o.id, a, i, o.tags))
            }
            return r
          }
          function vt(t, e) {
            var r = []
            ;(r.size = t.size),
              void 0 !== t.start && ((r.start = t.start), (r.end = t.end))
            for (var n = 0; n < t.length; n += 3)
              r.push(t[n] + e, t[n + 1], t[n + 2])
            return r
          }
          function gt(t, e) {
            if (t.transformed) return t
            var r,
              n,
              i,
              o = 1 << t.z,
              a = t.x,
              s = t.y
            for (r = 0; r < t.features.length; r++) {
              var l = t.features[r],
                u = l.geometry,
                c = l.type
              if (((l.geometry = []), 1 === c))
                for (n = 0; n < u.length; n += 2)
                  l.geometry.push(_t(u[n], u[n + 1], e, o, a, s))
              else
                for (n = 0; n < u.length; n++) {
                  var p = []
                  for (i = 0; i < u[n].length; i += 2)
                    p.push(_t(u[n][i], u[n][i + 1], e, o, a, s))
                  l.geometry.push(p)
                }
            }
            return (t.transformed = !0), t
          }
          function _t(t, e, r, n, i, o) {
            return [Math.round(r * (t * n - i)), Math.round(r * (e * n - o))]
          }
          function xt(t, e, r, n, i) {
            for (
              var o = e === i.maxZoom ? 0 : i.tolerance / ((1 << e) * i.extent),
                a = {
                  features: [],
                  numPoints: 0,
                  numSimplified: 0,
                  numFeatures: 0,
                  source: null,
                  x: r,
                  y: n,
                  z: e,
                  transformed: !1,
                  minX: 2,
                  minY: 1,
                  maxX: -1,
                  maxY: 0,
                },
                s = 0;
              s < t.length;
              s++
            ) {
              a.numFeatures++, bt(a, t[s], o, i)
              var l = t[s].minX,
                u = t[s].minY,
                c = t[s].maxX,
                p = t[s].maxY
              l < a.minX && (a.minX = l),
                u < a.minY && (a.minY = u),
                c > a.maxX && (a.maxX = c),
                p > a.maxY && (a.maxY = p)
            }
            return a
          }
          function bt(t, e, r, n) {
            var i = e.geometry,
              o = e.type,
              a = []
            if ('Point' === o || 'MultiPoint' === o)
              for (var s = 0; s < i.length; s += 3)
                a.push(i[s]), a.push(i[s + 1]), t.numPoints++, t.numSimplified++
            else if ('LineString' === o) wt(a, i, t, r, !1, !1)
            else if ('MultiLineString' === o || 'Polygon' === o)
              for (s = 0; s < i.length; s++)
                wt(a, i[s], t, r, 'Polygon' === o, 0 === s)
            else if ('MultiPolygon' === o)
              for (var l = 0; l < i.length; l++) {
                var u = i[l]
                for (s = 0; s < u.length; s++) wt(a, u[s], t, r, !0, 0 === s)
              }
            if (a.length) {
              var c = e.tags || null
              if ('LineString' === o && n.lineMetrics) {
                for (var p in ((c = {}), e.tags)) c[p] = e.tags[p]
                ;(c.mapbox_clip_start = i.start / i.size),
                  (c.mapbox_clip_end = i.end / i.size)
              }
              var h = {
                geometry: a,
                type:
                  'Polygon' === o || 'MultiPolygon' === o
                    ? 3
                    : 'LineString' === o || 'MultiLineString' === o
                    ? 2
                    : 1,
                tags: c,
              }
              null !== e.id && (h.id = e.id), t.features.push(h)
            }
          }
          function wt(t, e, r, n, i, o) {
            var a = n * n
            if (n > 0 && e.size < (i ? a : n)) r.numPoints += e.length / 3
            else {
              for (var s = [], l = 0; l < e.length; l += 3)
                (0 === n || e[l + 2] > a) &&
                  (r.numSimplified++, s.push(e[l]), s.push(e[l + 1])),
                  r.numPoints++
              i &&
                (function (t, e) {
                  for (
                    var r = 0, n = 0, i = t.length, o = i - 2;
                    n < i;
                    o = n, n += 2
                  )
                    r += (t[n] - t[o]) * (t[n + 1] + t[o + 1])
                  if (r > 0 === e)
                    for (n = 0, i = t.length; n < i / 2; n += 2) {
                      var a = t[n],
                        s = t[n + 1]
                      ;(t[n] = t[i - 2 - n]),
                        (t[n + 1] = t[i - 1 - n]),
                        (t[i - 2 - n] = a),
                        (t[i - 1 - n] = s)
                    }
                })(s, o),
                t.push(s)
            }
          }
          function Et(t, e) {
            var r = (e = this.options = (function (t, e) {
              for (var r in e) t[r] = e[r]
              return t
            })(Object.create(this.options), e)).debug
            if (
              (r && console.time('preprocess data'),
              e.maxZoom < 0 || e.maxZoom > 24)
            )
              throw new Error('maxZoom should be in the 0-24 range')
            if (e.promoteId && e.generateId)
              throw new Error(
                'promoteId and generateId cannot be used together.'
              )
            var n = (function (t, e) {
              var r = []
              if ('FeatureCollection' === t.type)
                for (var n = 0; n < t.features.length; n++)
                  rt(r, t.features[n], e, n)
              else rt(r, 'Feature' === t.type ? t : { geometry: t }, e)
              return r
            })(t, e)
            ;(this.tiles = {}),
              (this.tileCoords = []),
              r &&
                (console.timeEnd('preprocess data'),
                console.log(
                  'index: maxZoom: %d, maxPoints: %d',
                  e.indexMaxZoom,
                  e.indexMaxPoints
                ),
                console.time('generate tiles'),
                (this.stats = {}),
                (this.total = 0)),
              (n = (function (t, e) {
                var r = e.buffer / e.extent,
                  n = t,
                  i = lt(t, 1, -1 - r, r, 0, -1, 2, e),
                  o = lt(t, 1, 1 - r, 2 + r, 0, -1, 2, e)
                return (
                  (i || o) &&
                    ((n = lt(t, 1, -r, 1 + r, 0, -1, 2, e) || []),
                    i && (n = yt(i, 1).concat(n)),
                    o && (n = n.concat(yt(o, -1)))),
                  n
                )
              })(n, e)).length && this.splitTile(n, 0, 0, 0),
              r &&
                (n.length &&
                  console.log(
                    'features: %d, points: %d',
                    this.tiles[0].numFeatures,
                    this.tiles[0].numPoints
                  ),
                console.timeEnd('generate tiles'),
                console.log(
                  'tiles generated:',
                  this.total,
                  JSON.stringify(this.stats)
                ))
          }
          function St(t, e, r) {
            return 32 * ((1 << t) * r + e) + t
          }
          function Tt(t, e) {
            var r = t.tileID.canonical
            if (!this._geoJSONIndex) return e(null, null)
            var n = this._geoJSONIndex.getTile(r.z, r.x, r.y)
            if (!n) return e(null, null)
            var i = new b(n.features),
              o = I(i)
            ;(0 === o.byteOffset && o.byteLength === o.buffer.byteLength) ||
              (o = new Uint8Array(o)),
              e(null, { vectorTile: i, rawData: o.buffer })
          }
          ;(q.prototype.load = function (t) {
            var e = this.options,
              r = e.log,
              n = e.minZoom,
              i = e.maxZoom,
              o = e.nodeSize
            r && console.time('total time')
            var a = 'prepare ' + t.length + ' points'
            r && console.time(a), (this.points = t)
            for (var s = [], l = 0; l < t.length; l++)
              t[l].geometry && s.push($(t[l], l))
            ;(this.trees[i + 1] = new j(s, J, Y, o, Float32Array)),
              r && console.timeEnd(a)
            for (var u = i; u >= n; u--) {
              var c = +Date.now()
              ;(s = this._cluster(s, u)),
                (this.trees[u] = new j(s, J, Y, o, Float32Array)),
                r &&
                  console.log(
                    'z%d: %d clusters in %dms',
                    u,
                    s.length,
                    +Date.now() - c
                  )
            }
            return r && console.timeEnd('total time'), this
          }),
            (q.prototype.getClusters = function (t, e) {
              var r = ((((t[0] + 180) % 360) + 360) % 360) - 180,
                n = Math.max(-90, Math.min(90, t[1])),
                i =
                  180 === t[2]
                    ? 180
                    : ((((t[2] + 180) % 360) + 360) % 360) - 180,
                o = Math.max(-90, Math.min(90, t[3]))
              if (t[2] - t[0] >= 360) (r = -180), (i = 180)
              else if (r > i) {
                var a = this.getClusters([r, n, 180, o], e),
                  s = this.getClusters([-180, n, i, o], e)
                return a.concat(s)
              }
              for (
                var l = this.trees[this._limitZoom(e)],
                  u = [],
                  c = 0,
                  p = l.range(K(r), W(o), K(i), W(n));
                c < p.length;
                c += 1
              ) {
                var h = l.points[p[c]]
                u.push(h.numPoints ? Z(h) : this.points[h.index])
              }
              return u
            }),
            (q.prototype.getChildren = function (t) {
              var e = this._getOriginId(t),
                r = this._getOriginZoom(t),
                n = 'No cluster with the specified id.',
                i = this.trees[r]
              if (!i) throw new Error(n)
              var o = i.points[e]
              if (!o) throw new Error(n)
              for (
                var a =
                    this.options.radius /
                    (this.options.extent * Math.pow(2, r - 1)),
                  s = [],
                  l = 0,
                  u = i.within(o.x, o.y, a);
                l < u.length;
                l += 1
              ) {
                var c = i.points[u[l]]
                c.parentId === t &&
                  s.push(c.numPoints ? Z(c) : this.points[c.index])
              }
              if (0 === s.length) throw new Error(n)
              return s
            }),
            (q.prototype.getLeaves = function (t, e, r) {
              var n = []
              return this._appendLeaves(n, t, (e = e || 10), (r = r || 0), 0), n
            }),
            (q.prototype.getTile = function (t, e, r) {
              var n = this.trees[this._limitZoom(t)],
                i = Math.pow(2, t),
                o = this.options,
                a = o.radius / o.extent,
                s = (r - a) / i,
                l = (r + 1 + a) / i,
                u = { features: [] }
              return (
                this._addTileFeatures(
                  n.range((e - a) / i, s, (e + 1 + a) / i, l),
                  n.points,
                  e,
                  r,
                  i,
                  u
                ),
                0 === e &&
                  this._addTileFeatures(
                    n.range(1 - a / i, s, 1, l),
                    n.points,
                    i,
                    r,
                    i,
                    u
                  ),
                e === i - 1 &&
                  this._addTileFeatures(
                    n.range(0, s, a / i, l),
                    n.points,
                    -1,
                    r,
                    i,
                    u
                  ),
                u.features.length ? u : null
              )
            }),
            (q.prototype.getClusterExpansionZoom = function (t) {
              for (
                var e = this._getOriginZoom(t) - 1;
                e <= this.options.maxZoom;

              ) {
                var r = this.getChildren(t)
                if ((e++, 1 !== r.length)) break
                t = r[0].properties.cluster_id
              }
              return e
            }),
            (q.prototype._appendLeaves = function (t, e, r, n, i) {
              for (var o = 0, a = this.getChildren(e); o < a.length; o += 1) {
                var s = a[o],
                  l = s.properties
                if (
                  (l && l.cluster
                    ? i + l.point_count <= n
                      ? (i += l.point_count)
                      : (i = this._appendLeaves(t, l.cluster_id, r, n, i))
                    : i < n
                    ? i++
                    : t.push(s),
                  t.length === r)
                )
                  break
              }
              return i
            }),
            (q.prototype._addTileFeatures = function (t, e, r, n, i, o) {
              for (var a = 0, s = t; a < s.length; a += 1) {
                var l = e[s[a]],
                  u = l.numPoints,
                  c = {
                    type: 1,
                    geometry: [
                      [
                        Math.round(this.options.extent * (l.x * i - r)),
                        Math.round(this.options.extent * (l.y * i - n)),
                      ],
                    ],
                    tags: u ? X(l) : this.points[l.index].properties,
                  },
                  p = void 0
                u
                  ? (p = l.id)
                  : this.options.generateId
                  ? (p = l.index)
                  : this.points[l.index].id && (p = this.points[l.index].id),
                  void 0 !== p && (c.id = p),
                  o.features.push(c)
              }
            }),
            (q.prototype._limitZoom = function (t) {
              return Math.max(
                this.options.minZoom,
                Math.min(t, this.options.maxZoom + 1)
              )
            }),
            (q.prototype._cluster = function (t, e) {
              for (
                var r = [],
                  n = this.options,
                  i = n.reduce,
                  o = n.radius / (n.extent * Math.pow(2, e)),
                  a = 0;
                a < t.length;
                a++
              ) {
                var s = t[a]
                if (!(s.zoom <= e)) {
                  s.zoom = e
                  for (
                    var l = this.trees[e + 1],
                      u = l.within(s.x, s.y, o),
                      c = s.numPoints || 1,
                      p = s.x * c,
                      h = s.y * c,
                      f = i && c > 1 ? this._map(s, !0) : null,
                      d = (a << 5) + (e + 1) + this.points.length,
                      m = 0,
                      y = u;
                    m < y.length;
                    m += 1
                  ) {
                    var v = l.points[y[m]]
                    if (!(v.zoom <= e)) {
                      v.zoom = e
                      var g = v.numPoints || 1
                      ;(p += v.x * g),
                        (h += v.y * g),
                        (c += g),
                        (v.parentId = d),
                        i && (f || (f = this._map(s, !0)), i(f, this._map(v)))
                    }
                  }
                  1 === c
                    ? r.push(s)
                    : ((s.parentId = d), r.push(G(p / c, h / c, d, c, f)))
                }
              }
              return r
            }),
            (q.prototype._getOriginId = function (t) {
              return (t - this.points.length) >> 5
            }),
            (q.prototype._getOriginZoom = function (t) {
              return (t - this.points.length) % 32
            }),
            (q.prototype._map = function (t, e) {
              if (t.numPoints) return e ? H({}, t.properties) : t.properties
              var r = this.points[t.index].properties,
                n = this.options.map(r)
              return e && n === r ? H({}, n) : n
            }),
            (Et.prototype.options = {
              maxZoom: 14,
              indexMaxZoom: 5,
              indexMaxPoints: 1e5,
              tolerance: 3,
              extent: 4096,
              buffer: 64,
              lineMetrics: !1,
              promoteId: null,
              generateId: !1,
              debug: 0,
            }),
            (Et.prototype.splitTile = function (t, e, r, n, i, o, a) {
              for (
                var s = [t, e, r, n], l = this.options, u = l.debug;
                s.length;

              ) {
                ;(n = s.pop()), (r = s.pop()), (e = s.pop()), (t = s.pop())
                var c = 1 << e,
                  p = St(e, r, n),
                  h = this.tiles[p]
                if (
                  !h &&
                  (u > 1 && console.time('creation'),
                  (h = this.tiles[p] = xt(t, e, r, n, l)),
                  this.tileCoords.push({ z: e, x: r, y: n }),
                  u)
                ) {
                  u > 1 &&
                    (console.log(
                      'tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',
                      e,
                      r,
                      n,
                      h.numFeatures,
                      h.numPoints,
                      h.numSimplified
                    ),
                    console.timeEnd('creation'))
                  var f = 'z' + e
                  ;(this.stats[f] = (this.stats[f] || 0) + 1), this.total++
                }
                if (((h.source = t), i)) {
                  if (e === l.maxZoom || e === i) continue
                  var d = 1 << (i - e)
                  if (r !== Math.floor(o / d) || n !== Math.floor(a / d))
                    continue
                } else if (
                  e === l.indexMaxZoom ||
                  h.numPoints <= l.indexMaxPoints
                )
                  continue
                if (((h.source = null), 0 !== t.length)) {
                  u > 1 && console.time('clipping')
                  var m,
                    y,
                    v,
                    g,
                    _,
                    x,
                    b = (0.5 * l.buffer) / l.extent,
                    w = 0.5 - b,
                    E = 0.5 + b,
                    S = 1 + b
                  ;(m = y = v = g = null),
                    (_ = lt(t, c, r - b, r + E, 0, h.minX, h.maxX, l)),
                    (x = lt(t, c, r + w, r + S, 0, h.minX, h.maxX, l)),
                    (t = null),
                    _ &&
                      ((m = lt(_, c, n - b, n + E, 1, h.minY, h.maxY, l)),
                      (y = lt(_, c, n + w, n + S, 1, h.minY, h.maxY, l)),
                      (_ = null)),
                    x &&
                      ((v = lt(x, c, n - b, n + E, 1, h.minY, h.maxY, l)),
                      (g = lt(x, c, n + w, n + S, 1, h.minY, h.maxY, l)),
                      (x = null)),
                    u > 1 && console.timeEnd('clipping'),
                    s.push(m || [], e + 1, 2 * r, 2 * n),
                    s.push(y || [], e + 1, 2 * r, 2 * n + 1),
                    s.push(v || [], e + 1, 2 * r + 1, 2 * n),
                    s.push(g || [], e + 1, 2 * r + 1, 2 * n + 1)
                }
              }
            }),
            (Et.prototype.getTile = function (t, e, r) {
              var n = this.options,
                i = n.extent,
                o = n.debug
              if (t < 0 || t > 24) return null
              var a = 1 << t,
                s = St(t, (e = ((e % a) + a) % a), r)
              if (this.tiles[s]) return gt(this.tiles[s], i)
              o > 1 && console.log('drilling down to z%d-%d-%d', t, e, r)
              for (var l, u = t, c = e, p = r; !l && u > 0; )
                u--,
                  (c = Math.floor(c / 2)),
                  (p = Math.floor(p / 2)),
                  (l = this.tiles[St(u, c, p)])
              return l && l.source
                ? (o > 1 && console.log('found parent tile z%d-%d-%d', u, c, p),
                  o > 1 && console.time('drilling down'),
                  this.splitTile(l.source, u, c, p, t, e, r),
                  o > 1 && console.timeEnd('drilling down'),
                  this.tiles[s] ? gt(this.tiles[s], i) : null)
                : null
            })
          var It = (function (e) {
              function r(t, r, n, i) {
                e.call(this, t, r, n, Tt), i && (this.loadGeoJSON = i)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.loadData = function (t, e) {
                  this._pendingCallback &&
                    this._pendingCallback(null, { abandoned: !0 }),
                    (this._pendingCallback = e),
                    (this._pendingLoadDataParams = t),
                    this._state && 'Idle' !== this._state
                      ? (this._state = 'NeedsLoadData')
                      : ((this._state = 'Coalescing'), this._loadData())
                }),
                (r.prototype._loadData = function () {
                  var e = this
                  if (this._pendingCallback && this._pendingLoadDataParams) {
                    var r = this._pendingCallback,
                      n = this._pendingLoadDataParams
                    delete this._pendingCallback,
                      delete this._pendingLoadDataParams
                    var i =
                      !!(n && n.request && n.request.collectResourceTiming) &&
                      new t.RequestPerformance(n.request)
                    this.loadGeoJSON(n, function (o, a) {
                      if (o || !a) return r(o)
                      if ('object' != typeof a)
                        return r(
                          new Error(
                            "Input data given to '" +
                              n.source +
                              "' is not a valid GeoJSON object."
                          )
                        )
                      !(function t(e, r) {
                        switch ((e && e.type) || null) {
                          case 'FeatureCollection':
                            return (e.features = e.features.map(y(t, r))), e
                          case 'GeometryCollection':
                            return (e.geometries = e.geometries.map(y(t, r))), e
                          case 'Feature':
                            return (e.geometry = t(e.geometry, r)), e
                          case 'Polygon':
                          case 'MultiPolygon':
                            return (function (t, e) {
                              return (
                                'Polygon' === t.type
                                  ? (t.coordinates = v(t.coordinates, e))
                                  : 'MultiPolygon' === t.type &&
                                    (t.coordinates = t.coordinates.map(
                                      y(v, e)
                                    )),
                                t
                              )
                            })(e, r)
                          default:
                            return e
                        }
                      })(a, !0)
                      try {
                        e._geoJSONIndex = n.cluster
                          ? new q(
                              (function (e) {
                                var r = e.superclusterOptions,
                                  n = e.clusterProperties
                                if (!n || !r) return r
                                for (
                                  var i = {},
                                    o = {},
                                    a = { accumulated: null, zoom: 0 },
                                    s = { properties: null },
                                    l = Object.keys(n),
                                    u = 0,
                                    c = l;
                                  u < c.length;
                                  u += 1
                                ) {
                                  var p = c[u],
                                    h = n[p],
                                    f = h[0],
                                    d = t.createExpression(h[1]),
                                    m = t.createExpression(
                                      'string' == typeof f
                                        ? [f, ['accumulated'], ['get', p]]
                                        : f
                                    )
                                  ;(i[p] = d.value), (o[p] = m.value)
                                }
                                return (
                                  (r.map = function (t) {
                                    s.properties = t
                                    for (
                                      var e = {}, r = 0, n = l;
                                      r < n.length;
                                      r += 1
                                    ) {
                                      var o = n[r]
                                      e[o] = i[o].evaluate(a, s)
                                    }
                                    return e
                                  }),
                                  (r.reduce = function (t, e) {
                                    s.properties = e
                                    for (
                                      var r = 0, n = l;
                                      r < n.length;
                                      r += 1
                                    ) {
                                      var i = n[r]
                                      ;(a.accumulated = t[i]),
                                        (t[i] = o[i].evaluate(a, s))
                                    }
                                  }),
                                  r
                                )
                              })(n)
                            ).load(a.features)
                          : (function (t, e) {
                              return new Et(t, e)
                            })(a, n.geojsonVtOptions)
                      } catch (o) {
                        return r(o)
                      }
                      e.loaded = {}
                      var s = {}
                      if (i) {
                        var l = i.finish()
                        l &&
                          ((s.resourceTiming = {}),
                          (s.resourceTiming[n.source] = JSON.parse(
                            JSON.stringify(l)
                          )))
                      }
                      r(null, s)
                    })
                  }
                }),
                (r.prototype.coalesce = function () {
                  'Coalescing' === this._state
                    ? (this._state = 'Idle')
                    : 'NeedsLoadData' === this._state &&
                      ((this._state = 'Coalescing'), this._loadData())
                }),
                (r.prototype.reloadTile = function (t, r) {
                  var n = this.loaded
                  return n && n[t.uid]
                    ? e.prototype.reloadTile.call(this, t, r)
                    : this.loadTile(t, r)
                }),
                (r.prototype.loadGeoJSON = function (e, r) {
                  if (e.request) t.getJSON(e.request, r)
                  else {
                    if ('string' != typeof e.data)
                      return r(
                        new Error(
                          "Input data given to '" +
                            e.source +
                            "' is not a valid GeoJSON object."
                        )
                      )
                    try {
                      return r(null, JSON.parse(e.data))
                    } catch (t) {
                      return r(
                        new Error(
                          "Input data given to '" +
                            e.source +
                            "' is not a valid GeoJSON object."
                        )
                      )
                    }
                  }
                }),
                (r.prototype.removeSource = function (t, e) {
                  this._pendingCallback &&
                    this._pendingCallback(null, { abandoned: !0 }),
                    e()
                }),
                (r.prototype.getClusterExpansionZoom = function (t, e) {
                  try {
                    e(
                      null,
                      this._geoJSONIndex.getClusterExpansionZoom(t.clusterId)
                    )
                  } catch (t) {
                    e(t)
                  }
                }),
                (r.prototype.getClusterChildren = function (t, e) {
                  try {
                    e(null, this._geoJSONIndex.getChildren(t.clusterId))
                  } catch (t) {
                    e(t)
                  }
                }),
                (r.prototype.getClusterLeaves = function (t, e) {
                  try {
                    e(
                      null,
                      this._geoJSONIndex.getLeaves(
                        t.clusterId,
                        t.limit,
                        t.offset
                      )
                    )
                  } catch (t) {
                    e(t)
                  }
                }),
                r
              )
            })(l),
            Ct = function (e) {
              var r = this
              ;(this.self = e),
                (this.actor = new t.Actor(e, this)),
                (this.layerIndexes = {}),
                (this.availableImages = {}),
                (this.workerSourceTypes = { vector: l, geojson: It }),
                (this.workerSources = {}),
                (this.demWorkerSources = {}),
                (this.self.registerWorkerSource = function (t, e) {
                  if (r.workerSourceTypes[t])
                    throw new Error(
                      'Worker source with name "' + t + '" already registered.'
                    )
                  r.workerSourceTypes[t] = e
                }),
                (this.self.registerRTLTextPlugin = function (e) {
                  if (t.plugin.isParsed())
                    throw new Error('RTL text plugin already registered.')
                  ;(t.plugin.applyArabicShaping = e.applyArabicShaping),
                    (t.plugin.processBidirectionalText =
                      e.processBidirectionalText),
                    (t.plugin.processStyledBidirectionalText =
                      e.processStyledBidirectionalText)
                })
            }
          return (
            (Ct.prototype.setReferrer = function (t, e) {
              this.referrer = e
            }),
            (Ct.prototype.setImages = function (t, e, r) {
              ;(this.availableImages[t] = e), r()
            }),
            (Ct.prototype.setLayers = function (t, e, r) {
              this.getLayerIndex(t).replace(e), r()
            }),
            (Ct.prototype.updateLayers = function (t, e, r) {
              this.getLayerIndex(t).update(e.layers, e.removedIds), r()
            }),
            (Ct.prototype.loadTile = function (t, e, r) {
              this.getWorkerSource(t, e.type, e.source).loadTile(e, r)
            }),
            (Ct.prototype.loadDEMTile = function (t, e, r) {
              this.getDEMWorkerSource(t, e.source).loadTile(e, r)
            }),
            (Ct.prototype.reloadTile = function (t, e, r) {
              this.getWorkerSource(t, e.type, e.source).reloadTile(e, r)
            }),
            (Ct.prototype.abortTile = function (t, e, r) {
              this.getWorkerSource(t, e.type, e.source).abortTile(e, r)
            }),
            (Ct.prototype.removeTile = function (t, e, r) {
              this.getWorkerSource(t, e.type, e.source).removeTile(e, r)
            }),
            (Ct.prototype.removeDEMTile = function (t, e) {
              this.getDEMWorkerSource(t, e.source).removeTile(e)
            }),
            (Ct.prototype.removeSource = function (t, e, r) {
              if (
                this.workerSources[t] &&
                this.workerSources[t][e.type] &&
                this.workerSources[t][e.type][e.source]
              ) {
                var n = this.workerSources[t][e.type][e.source]
                delete this.workerSources[t][e.type][e.source],
                  void 0 !== n.removeSource ? n.removeSource(e, r) : r()
              }
            }),
            (Ct.prototype.loadWorkerSource = function (t, e, r) {
              try {
                this.self.importScripts(e.url), r()
              } catch (t) {
                r(t.toString())
              }
            }),
            (Ct.prototype.syncRTLPluginState = function (e, r, n) {
              try {
                t.plugin.setState(r)
                var i = t.plugin.getPluginURL()
                if (t.plugin.isLoaded() && !t.plugin.isParsed() && null != i) {
                  this.self.importScripts(i)
                  var o = t.plugin.isParsed()
                  n(
                    o
                      ? void 0
                      : new Error(
                          'RTL Text Plugin failed to import scripts from ' + i
                        ),
                    o
                  )
                }
              } catch (t) {
                n(t.toString())
              }
            }),
            (Ct.prototype.getAvailableImages = function (t) {
              var e = this.availableImages[t]
              return e || (e = []), e
            }),
            (Ct.prototype.getLayerIndex = function (t) {
              var e = this.layerIndexes[t]
              return e || (e = this.layerIndexes[t] = new n()), e
            }),
            (Ct.prototype.getWorkerSource = function (t, e, r) {
              var n = this
              return (
                this.workerSources[t] || (this.workerSources[t] = {}),
                this.workerSources[t][e] || (this.workerSources[t][e] = {}),
                this.workerSources[t][e][r] ||
                  (this.workerSources[t][e][r] = new this.workerSourceTypes[e](
                    {
                      send: function (e, r, i) {
                        n.actor.send(e, r, i, t)
                      },
                    },
                    this.getLayerIndex(t),
                    this.getAvailableImages(t)
                  )),
                this.workerSources[t][e][r]
              )
            }),
            (Ct.prototype.getDEMWorkerSource = function (t, e) {
              return (
                this.demWorkerSources[t] || (this.demWorkerSources[t] = {}),
                this.demWorkerSources[t][e] ||
                  (this.demWorkerSources[t][e] = new c()),
                this.demWorkerSources[t][e]
              )
            }),
            (Ct.prototype.enforceCacheSizeLimit = function (e, r) {
              t.enforceCacheSizeLimit(r)
            }),
            'undefined' != typeof WorkerGlobalScope &&
              void 0 !== t.window &&
              t.window instanceof WorkerGlobalScope &&
              (t.window.worker = new Ct(t.window)),
            Ct
          )
        }),
        n(0, function (t) {
          var e = t.createCommonjsModule(function (t) {
              function e(t) {
                return !!(
                  'undefined' != typeof window &&
                  'undefined' != typeof document &&
                  Array.prototype &&
                  Array.prototype.every &&
                  Array.prototype.filter &&
                  Array.prototype.forEach &&
                  Array.prototype.indexOf &&
                  Array.prototype.lastIndexOf &&
                  Array.prototype.map &&
                  Array.prototype.some &&
                  Array.prototype.reduce &&
                  Array.prototype.reduceRight &&
                  Array.isArray &&
                  Function.prototype &&
                  Function.prototype.bind &&
                  Object.keys &&
                  Object.create &&
                  Object.getPrototypeOf &&
                  Object.getOwnPropertyNames &&
                  Object.isSealed &&
                  Object.isFrozen &&
                  Object.isExtensible &&
                  Object.getOwnPropertyDescriptor &&
                  Object.defineProperty &&
                  Object.defineProperties &&
                  Object.seal &&
                  Object.freeze &&
                  Object.preventExtensions &&
                  'JSON' in window &&
                  'parse' in JSON &&
                  'stringify' in JSON &&
                  (function () {
                    if (
                      !(
                        'Worker' in window &&
                        'Blob' in window &&
                        'URL' in window
                      )
                    )
                      return !1
                    var t,
                      e,
                      r = new Blob([''], { type: 'text/javascript' }),
                      n = URL.createObjectURL(r)
                    try {
                      ;(e = new Worker(n)), (t = !0)
                    } catch (e) {
                      t = !1
                    }
                    return e && e.terminate(), URL.revokeObjectURL(n), t
                  })() &&
                  'Uint8ClampedArray' in window &&
                  ArrayBuffer.isView &&
                  ((n = t && t.failIfMajorPerformanceCaveat),
                  void 0 === r[n] &&
                    (r[n] = (function (t) {
                      var r = document.createElement('canvas'),
                        n = Object.create(e.webGLContextAttributes)
                      return (
                        (n.failIfMajorPerformanceCaveat = t),
                        r.probablySupportsContext
                          ? r.probablySupportsContext('webgl', n) ||
                            r.probablySupportsContext('experimental-webgl', n)
                          : r.supportsContext
                          ? r.supportsContext('webgl', n) ||
                            r.supportsContext('experimental-webgl', n)
                          : r.getContext('webgl', n) ||
                            r.getContext('experimental-webgl', n)
                      )
                    })(n)),
                  r[n])
                )
                var n
              }
              t.exports
                ? (t.exports = e)
                : window &&
                  ((window.mapboxgl = window.mapboxgl || {}),
                  (window.mapboxgl.supported = e))
              var r = {}
              e.webGLContextAttributes = {
                antialias: !1,
                alpha: !0,
                stencil: !0,
                depth: !0,
              }
            }),
            r = {
              create: function (e, r, n) {
                var i = t.window.document.createElement(e)
                return (
                  void 0 !== r && (i.className = r), n && n.appendChild(i), i
                )
              },
              createNS: function (e, r) {
                return t.window.document.createElementNS(e, r)
              },
            },
            n = t.window.document.documentElement.style
          function i(t) {
            if (!n) return t[0]
            for (var e = 0; e < t.length; e++) if (t[e] in n) return t[e]
            return t[0]
          }
          var o,
            a = i([
              'userSelect',
              'MozUserSelect',
              'WebkitUserSelect',
              'msUserSelect',
            ])
          ;(r.disableDrag = function () {
            n && a && ((o = n[a]), (n[a] = 'none'))
          }),
            (r.enableDrag = function () {
              n && a && (n[a] = o)
            })
          var s = i(['transform', 'WebkitTransform'])
          r.setTransform = function (t, e) {
            t.style[s] = e
          }
          var l = !1
          try {
            var u = Object.defineProperty({}, 'passive', {
              get: function () {
                l = !0
              },
            })
            t.window.addEventListener('test', u, u),
              t.window.removeEventListener('test', u, u)
          } catch (t) {
            l = !1
          }
          ;(r.addEventListener = function (t, e, r, n) {
            void 0 === n && (n = {}),
              t.addEventListener(e, r, 'passive' in n && l ? n : n.capture)
          }),
            (r.removeEventListener = function (t, e, r, n) {
              void 0 === n && (n = {}),
                t.removeEventListener(e, r, 'passive' in n && l ? n : n.capture)
            })
          var c = function (e) {
            e.preventDefault(),
              e.stopPropagation(),
              t.window.removeEventListener('click', c, !0)
          }
          function p(t) {
            var e = t.userImage
            return (
              !!(e && e.render && e.render()) &&
              (t.data.replace(new Uint8Array(e.data.buffer)), !0)
            )
          }
          ;(r.suppressClick = function () {
            t.window.addEventListener('click', c, !0),
              t.window.setTimeout(function () {
                t.window.removeEventListener('click', c, !0)
              }, 0)
          }),
            (r.mousePos = function (e, r) {
              var n = e.getBoundingClientRect(),
                i =
                  t.window.TouchEvent && r instanceof t.window.TouchEvent
                    ? r.touches[0]
                    : r
              return new t.Point(
                i.clientX - n.left - e.clientLeft,
                i.clientY - n.top - e.clientTop
              )
            }),
            (r.touchPos = function (e, r) {
              for (
                var n = e.getBoundingClientRect(),
                  i = [],
                  o = 'touchend' === r.type ? r.changedTouches : r.touches,
                  a = 0;
                a < o.length;
                a++
              )
                i.push(
                  new t.Point(
                    o[a].clientX - n.left - e.clientLeft,
                    o[a].clientY - n.top - e.clientTop
                  )
                )
              return i
            }),
            (r.mouseButton = function (e) {
              return void 0 !== t.window.InstallTrigger &&
                2 === e.button &&
                e.ctrlKey &&
                t.window.navigator.platform.toUpperCase().indexOf('MAC') >= 0
                ? 0
                : e.button
            }),
            (r.remove = function (t) {
              t.parentNode && t.parentNode.removeChild(t)
            })
          var h = (function (e) {
              function r() {
                e.call(this),
                  (this.images = {}),
                  (this.updatedImages = {}),
                  (this.callbackDispatchedThisFrame = {}),
                  (this.loaded = !1),
                  (this.requestors = []),
                  (this.patterns = {}),
                  (this.atlasImage = new t.RGBAImage({ width: 1, height: 1 })),
                  (this.dirty = !0)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.isLoaded = function () {
                  return this.loaded
                }),
                (r.prototype.setLoaded = function (t) {
                  if (this.loaded !== t && ((this.loaded = t), t)) {
                    for (var e = 0, r = this.requestors; e < r.length; e += 1) {
                      var n = r[e]
                      this._notify(n.ids, n.callback)
                    }
                    this.requestors = []
                  }
                }),
                (r.prototype.getImage = function (t) {
                  return this.images[t]
                }),
                (r.prototype.addImage = function (t, e) {
                  this._validate(t, e) && (this.images[t] = e)
                }),
                (r.prototype._validate = function (e, r) {
                  var n = !0
                  return (
                    this._validateStretch(r.stretchX, r.data && r.data.width) ||
                      (this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Image "' + e + '" has invalid "stretchX" value'
                          )
                        )
                      ),
                      (n = !1)),
                    this._validateStretch(
                      r.stretchY,
                      r.data && r.data.height
                    ) ||
                      (this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Image "' + e + '" has invalid "stretchY" value'
                          )
                        )
                      ),
                      (n = !1)),
                    this._validateContent(r.content, r) ||
                      (this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Image "' + e + '" has invalid "content" value'
                          )
                        )
                      ),
                      (n = !1)),
                    n
                  )
                }),
                (r.prototype._validateStretch = function (t, e) {
                  if (!t) return !0
                  for (var r = 0, n = 0, i = t; n < i.length; n += 1) {
                    var o = i[n]
                    if (o[0] < r || o[1] < o[0] || e < o[1]) return !1
                    r = o[1]
                  }
                  return !0
                }),
                (r.prototype._validateContent = function (t, e) {
                  return !(
                    t &&
                    (4 !== t.length ||
                      t[0] < 0 ||
                      e.data.width < t[0] ||
                      t[1] < 0 ||
                      e.data.height < t[1] ||
                      t[2] < 0 ||
                      e.data.width < t[2] ||
                      t[3] < 0 ||
                      e.data.height < t[3] ||
                      t[2] < t[0] ||
                      t[3] < t[1])
                  )
                }),
                (r.prototype.updateImage = function (t, e) {
                  ;(e.version = this.images[t].version + 1),
                    (this.images[t] = e),
                    (this.updatedImages[t] = !0)
                }),
                (r.prototype.removeImage = function (t) {
                  var e = this.images[t]
                  delete this.images[t],
                    delete this.patterns[t],
                    e.userImage &&
                      e.userImage.onRemove &&
                      e.userImage.onRemove()
                }),
                (r.prototype.listImages = function () {
                  return Object.keys(this.images)
                }),
                (r.prototype.getImages = function (t, e) {
                  var r = !0
                  if (!this.isLoaded())
                    for (var n = 0, i = t; n < i.length; n += 1)
                      this.images[i[n]] || (r = !1)
                  this.isLoaded() || r
                    ? this._notify(t, e)
                    : this.requestors.push({ ids: t, callback: e })
                }),
                (r.prototype._notify = function (e, r) {
                  for (var n = {}, i = 0, o = e; i < o.length; i += 1) {
                    var a = o[i]
                    this.images[a] ||
                      this.fire(new t.Event('styleimagemissing', { id: a }))
                    var s = this.images[a]
                    s
                      ? (n[a] = {
                          data: s.data.clone(),
                          pixelRatio: s.pixelRatio,
                          sdf: s.sdf,
                          version: s.version,
                          stretchX: s.stretchX,
                          stretchY: s.stretchY,
                          content: s.content,
                          hasRenderCallback: Boolean(
                            s.userImage && s.userImage.render
                          ),
                        })
                      : t.warnOnce(
                          'Image "' +
                            a +
                            '" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'
                        )
                  }
                  r(null, n)
                }),
                (r.prototype.getPixelSize = function () {
                  var t = this.atlasImage
                  return { width: t.width, height: t.height }
                }),
                (r.prototype.getPattern = function (e) {
                  var r = this.patterns[e],
                    n = this.getImage(e)
                  if (!n) return null
                  if (r && r.position.version === n.version) return r.position
                  if (r) r.position.version = n.version
                  else {
                    var i = {
                        w: n.data.width + 2,
                        h: n.data.height + 2,
                        x: 0,
                        y: 0,
                      },
                      o = new t.ImagePosition(i, n)
                    this.patterns[e] = { bin: i, position: o }
                  }
                  return this._updatePatternAtlas(), this.patterns[e].position
                }),
                (r.prototype.bind = function (e) {
                  var r = e.gl
                  this.atlasTexture
                    ? this.dirty &&
                      (this.atlasTexture.update(this.atlasImage),
                      (this.dirty = !1))
                    : (this.atlasTexture = new t.Texture(
                        e,
                        this.atlasImage,
                        r.RGBA
                      )),
                    this.atlasTexture.bind(r.LINEAR, r.CLAMP_TO_EDGE)
                }),
                (r.prototype._updatePatternAtlas = function () {
                  var e = []
                  for (var r in this.patterns) e.push(this.patterns[r].bin)
                  var n = t.potpack(e),
                    i = n.w,
                    o = n.h,
                    a = this.atlasImage
                  for (var s in (a.resize({ width: i || 1, height: o || 1 }),
                  this.patterns)) {
                    var l = this.patterns[s].bin,
                      u = l.x + 1,
                      c = l.y + 1,
                      p = this.images[s].data,
                      h = p.width,
                      f = p.height
                    t.RGBAImage.copy(
                      p,
                      a,
                      { x: 0, y: 0 },
                      { x: u, y: c },
                      { width: h, height: f }
                    ),
                      t.RGBAImage.copy(
                        p,
                        a,
                        { x: 0, y: f - 1 },
                        { x: u, y: c - 1 },
                        { width: h, height: 1 }
                      ),
                      t.RGBAImage.copy(
                        p,
                        a,
                        { x: 0, y: 0 },
                        { x: u, y: c + f },
                        { width: h, height: 1 }
                      ),
                      t.RGBAImage.copy(
                        p,
                        a,
                        { x: h - 1, y: 0 },
                        { x: u - 1, y: c },
                        { width: 1, height: f }
                      ),
                      t.RGBAImage.copy(
                        p,
                        a,
                        { x: 0, y: 0 },
                        { x: u + h, y: c },
                        { width: 1, height: f }
                      )
                  }
                  this.dirty = !0
                }),
                (r.prototype.beginFrame = function () {
                  this.callbackDispatchedThisFrame = {}
                }),
                (r.prototype.dispatchRenderCallbacks = function (t) {
                  for (var e = 0, r = t; e < r.length; e += 1) {
                    var n = r[e]
                    if (!this.callbackDispatchedThisFrame[n]) {
                      this.callbackDispatchedThisFrame[n] = !0
                      var i = this.images[n]
                      p(i) && this.updateImage(n, i)
                    }
                  }
                }),
                r
              )
            })(t.Evented),
            f = y,
            d = y,
            m = 1e20
          function y(t, e, r, n, i, o) {
            ;(this.fontSize = t || 24),
              (this.buffer = void 0 === e ? 3 : e),
              (this.cutoff = n || 0.25),
              (this.fontFamily = i || 'sans-serif'),
              (this.fontWeight = o || 'normal'),
              (this.radius = r || 8)
            var a = (this.size = this.fontSize + 2 * this.buffer)
            ;(this.canvas = document.createElement('canvas')),
              (this.canvas.width = this.canvas.height = a),
              (this.ctx = this.canvas.getContext('2d')),
              (this.ctx.font =
                this.fontWeight +
                ' ' +
                this.fontSize +
                'px ' +
                this.fontFamily),
              (this.ctx.textBaseline = 'middle'),
              (this.ctx.fillStyle = 'black'),
              (this.gridOuter = new Float64Array(a * a)),
              (this.gridInner = new Float64Array(a * a)),
              (this.f = new Float64Array(a)),
              (this.d = new Float64Array(a)),
              (this.z = new Float64Array(a + 1)),
              (this.v = new Int16Array(a)),
              (this.middle = Math.round(
                (a / 2) * (navigator.userAgent.indexOf('Gecko/') >= 0 ? 1.2 : 1)
              ))
          }
          function v(t, e, r, n, i, o, a) {
            for (var s = 0; s < e; s++) {
              for (var l = 0; l < r; l++) n[l] = t[l * e + s]
              for (g(n, i, o, a, r), l = 0; l < r; l++) t[l * e + s] = i[l]
            }
            for (l = 0; l < r; l++) {
              for (s = 0; s < e; s++) n[s] = t[l * e + s]
              for (g(n, i, o, a, e), s = 0; s < e; s++)
                t[l * e + s] = Math.sqrt(i[s])
            }
          }
          function g(t, e, r, n, i) {
            ;(r[0] = 0), (n[0] = -m), (n[1] = +m)
            for (var o = 1, a = 0; o < i; o++) {
              for (
                var s =
                  (t[o] + o * o - (t[r[a]] + r[a] * r[a])) / (2 * o - 2 * r[a]);
                s <= n[a];

              )
                s =
                  (t[o] + o * o - (t[r[--a]] + r[a] * r[a])) /
                  (2 * o - 2 * r[a])
              ;(r[++a] = o), (n[a] = s), (n[a + 1] = +m)
            }
            for (o = 0, a = 0; o < i; o++) {
              for (; n[a + 1] < o; ) a++
              e[o] = (o - r[a]) * (o - r[a]) + t[r[a]]
            }
          }
          ;(y.prototype.draw = function (t) {
            this.ctx.clearRect(0, 0, this.size, this.size),
              this.ctx.fillText(t, this.buffer, this.middle)
            for (
              var e = this.ctx.getImageData(0, 0, this.size, this.size),
                r = new Uint8ClampedArray(this.size * this.size),
                n = 0;
              n < this.size * this.size;
              n++
            ) {
              var i = e.data[4 * n + 3] / 255
              ;(this.gridOuter[n] =
                1 === i ? 0 : 0 === i ? m : Math.pow(Math.max(0, 0.5 - i), 2)),
                (this.gridInner[n] =
                  1 === i ? m : 0 === i ? 0 : Math.pow(Math.max(0, i - 0.5), 2))
            }
            for (
              v(
                this.gridOuter,
                this.size,
                this.size,
                this.f,
                this.d,
                this.v,
                this.z
              ),
                v(
                  this.gridInner,
                  this.size,
                  this.size,
                  this.f,
                  this.d,
                  this.v,
                  this.z
                ),
                n = 0;
              n < this.size * this.size;
              n++
            )
              r[n] = Math.max(
                0,
                Math.min(
                  255,
                  Math.round(
                    255 -
                      255 *
                        ((this.gridOuter[n] - this.gridInner[n]) / this.radius +
                          this.cutoff)
                  )
                )
              )
            return r
          }),
            (f.default = d)
          var _ = function (t, e) {
            ;(this.requestManager = t),
              (this.localIdeographFontFamily = e),
              (this.entries = {})
          }
          ;(_.prototype.setURL = function (t) {
            this.url = t
          }),
            (_.prototype.getGlyphs = function (e, r) {
              var n = this,
                i = []
              for (var o in e)
                for (var a = 0, s = e[o]; a < s.length; a += 1)
                  i.push({ stack: o, id: s[a] })
              t.asyncAll(
                i,
                function (t, e) {
                  var r = t.stack,
                    i = t.id,
                    o = n.entries[r]
                  o || (o = n.entries[r] = { glyphs: {}, requests: {} })
                  var a = o.glyphs[i]
                  if (void 0 === a) {
                    if ((a = n._tinySDF(o, r, i)))
                      return (
                        (o.glyphs[i] = a),
                        void e(null, { stack: r, id: i, glyph: a })
                      )
                    var s = Math.floor(i / 256)
                    if (256 * s > 65535)
                      e(new Error('glyphs > 65535 not supported'))
                    else {
                      var l = o.requests[s]
                      l ||
                        ((l = o.requests[s] = []),
                        _.loadGlyphRange(
                          r,
                          s,
                          n.url,
                          n.requestManager,
                          function (t, e) {
                            if (e)
                              for (var r in e)
                                n._doesCharSupportLocalGlyph(+r) ||
                                  (o.glyphs[+r] = e[+r])
                            for (var i = 0, a = l; i < a.length; i += 1)
                              (0, a[i])(t, e)
                            delete o.requests[s]
                          }
                        )),
                        l.push(function (t, n) {
                          t
                            ? e(t)
                            : n &&
                              e(null, { stack: r, id: i, glyph: n[i] || null })
                        })
                    }
                  } else e(null, { stack: r, id: i, glyph: a })
                },
                function (t, e) {
                  if (t) r(t)
                  else if (e) {
                    for (var n = {}, i = 0, o = e; i < o.length; i += 1) {
                      var a = o[i],
                        s = a.stack,
                        l = a.id,
                        u = a.glyph
                      ;(n[s] || (n[s] = {}))[l] = u && {
                        id: u.id,
                        bitmap: u.bitmap.clone(),
                        metrics: u.metrics,
                      }
                    }
                    r(null, n)
                  }
                }
              )
            }),
            (_.prototype._doesCharSupportLocalGlyph = function (e) {
              return (
                !!this.localIdeographFontFamily &&
                (t.isChar['CJK Unified Ideographs'](e) ||
                  t.isChar['Hangul Syllables'](e) ||
                  t.isChar.Hiragana(e) ||
                  t.isChar.Katakana(e))
              )
            }),
            (_.prototype._tinySDF = function (e, r, n) {
              var i = this.localIdeographFontFamily
              if (i && this._doesCharSupportLocalGlyph(n)) {
                var o = e.tinySDF
                if (!o) {
                  var a = '400'
                  ;/bold/i.test(r)
                    ? (a = '900')
                    : /medium/i.test(r)
                    ? (a = '500')
                    : /light/i.test(r) && (a = '200'),
                    (o = e.tinySDF = new _.TinySDF(24, 3, 8, 0.25, i, a))
                }
                return {
                  id: n,
                  bitmap: new t.AlphaImage(
                    { width: 30, height: 30 },
                    o.draw(String.fromCharCode(n))
                  ),
                  metrics: {
                    width: 24,
                    height: 24,
                    left: 0,
                    top: -8,
                    advance: 24,
                  },
                }
              }
            }),
            (_.loadGlyphRange = function (e, r, n, i, o) {
              var a = 256 * r,
                s = a + 255,
                l = i.transformRequest(
                  i
                    .normalizeGlyphsURL(n)
                    .replace('{fontstack}', e)
                    .replace('{range}', a + '-' + s),
                  t.ResourceType.Glyphs
                )
              t.getArrayBuffer(l, function (e, r) {
                if (e) o(e)
                else if (r) {
                  for (
                    var n = {}, i = 0, a = t.parseGlyphPBF(r);
                    i < a.length;
                    i += 1
                  ) {
                    var s = a[i]
                    n[s.id] = s
                  }
                  o(null, n)
                }
              })
            }),
            (_.TinySDF = f)
          var x = function () {
            this.specification = t.styleSpec.light.position
          }
          ;(x.prototype.possiblyEvaluate = function (e, r) {
            return t.sphericalToCartesian(e.expression.evaluate(r))
          }),
            (x.prototype.interpolate = function (e, r, n) {
              return {
                x: t.number(e.x, r.x, n),
                y: t.number(e.y, r.y, n),
                z: t.number(e.z, r.z, n),
              }
            })
          var b = new t.Properties({
              anchor: new t.DataConstantProperty(t.styleSpec.light.anchor),
              position: new x(),
              color: new t.DataConstantProperty(t.styleSpec.light.color),
              intensity: new t.DataConstantProperty(
                t.styleSpec.light.intensity
              ),
            }),
            w = (function (e) {
              function r(r) {
                e.call(this),
                  (this._transitionable = new t.Transitionable(b)),
                  this.setLight(r),
                  (this._transitioning = this._transitionable.untransitioned())
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.getLight = function () {
                  return this._transitionable.serialize()
                }),
                (r.prototype.setLight = function (e, r) {
                  if (
                    (void 0 === r && (r = {}),
                    !this._validate(t.validateLight, e, r))
                  )
                    for (var n in e) {
                      var i = e[n]
                      t.endsWith(n, '-transition')
                        ? this._transitionable.setTransition(
                            n.slice(0, -'-transition'.length),
                            i
                          )
                        : this._transitionable.setValue(n, i)
                    }
                }),
                (r.prototype.updateTransitions = function (t) {
                  this._transitioning = this._transitionable.transitioned(
                    t,
                    this._transitioning
                  )
                }),
                (r.prototype.hasTransition = function () {
                  return this._transitioning.hasTransition()
                }),
                (r.prototype.recalculate = function (t) {
                  this.properties = this._transitioning.possiblyEvaluate(t)
                }),
                (r.prototype._validate = function (e, r, n) {
                  return (
                    (!n || !1 !== n.validate) &&
                    t.emitValidationErrors(
                      this,
                      e.call(
                        t.validateStyle,
                        t.extend({
                          value: r,
                          style: { glyphs: !0, sprite: !0 },
                          styleSpec: t.styleSpec,
                        })
                      )
                    )
                  )
                }),
                r
              )
            })(t.Evented),
            E = function (t, e) {
              ;(this.width = t),
                (this.height = e),
                (this.nextRow = 0),
                (this.data = new Uint8Array(this.width * this.height)),
                (this.dashEntry = {})
            }
          ;(E.prototype.getDash = function (t, e) {
            var r = t.join(',') + String(e)
            return (
              this.dashEntry[r] || (this.dashEntry[r] = this.addDash(t, e)),
              this.dashEntry[r]
            )
          }),
            (E.prototype.getDashRanges = function (t, e, r) {
              var n = [],
                i = t.length % 2 == 1 ? -t[t.length - 1] * r : 0,
                o = t[0] * r,
                a = !0
              n.push({ left: i, right: o, isDash: a, zeroLength: 0 === t[0] })
              for (var s = t[0], l = 1; l < t.length; l++) {
                var u = t[l]
                n.push({
                  left: (i = s * r),
                  right: (o = (s += u) * r),
                  isDash: (a = !a),
                  zeroLength: 0 === u,
                })
              }
              return n
            }),
            (E.prototype.addRoundDash = function (t, e, r) {
              for (var n = e / 2, i = -r; i <= r; i++)
                for (
                  var o = this.width * (this.nextRow + r + i),
                    a = 0,
                    s = t[a],
                    l = 0;
                  l < this.width;
                  l++
                ) {
                  l / s.right > 1 && (s = t[++a])
                  var u = Math.abs(l - s.left),
                    c = Math.abs(l - s.right),
                    p = Math.min(u, c),
                    h = void 0,
                    f = (i / r) * (n + 1)
                  if (s.isDash) {
                    var d = n - Math.abs(f)
                    h = Math.sqrt(p * p + d * d)
                  } else h = n - Math.sqrt(p * p + f * f)
                  this.data[o + l] = Math.max(0, Math.min(255, h + 128))
                }
            }),
            (E.prototype.addRegularDash = function (t) {
              for (var e = t.length - 1; e >= 0; --e) {
                var r = t[e],
                  n = t[e + 1]
                r.zeroLength
                  ? t.splice(e, 1)
                  : n &&
                    n.isDash === r.isDash &&
                    ((n.left = r.left), t.splice(e, 1))
              }
              var i = t[0],
                o = t[t.length - 1]
              i.isDash === o.isDash &&
                ((i.left = o.left - this.width),
                (o.right = i.right + this.width))
              for (
                var a = this.width * this.nextRow, s = 0, l = t[s], u = 0;
                u < this.width;
                u++
              ) {
                u / l.right > 1 && (l = t[++s])
                var c = Math.abs(u - l.left),
                  p = Math.abs(u - l.right),
                  h = Math.min(c, p)
                this.data[a + u] = Math.max(
                  0,
                  Math.min(255, (l.isDash ? h : -h) + 128)
                )
              }
            }),
            (E.prototype.addDash = function (e, r) {
              var n = r ? 7 : 0,
                i = 2 * n + 1
              if (this.nextRow + i > this.height)
                return t.warnOnce('LineAtlas out of space'), null
              for (var o = 0, a = 0; a < e.length; a++) o += e[a]
              if (0 !== o) {
                var s = this.width / o,
                  l = this.getDashRanges(e, this.width, s)
                r ? this.addRoundDash(l, s, n) : this.addRegularDash(l)
              }
              var u = {
                y: (this.nextRow + n + 0.5) / this.height,
                height: (2 * n) / this.height,
                width: o,
              }
              return (this.nextRow += i), (this.dirty = !0), u
            }),
            (E.prototype.bind = function (t) {
              var e = t.gl
              this.texture
                ? (e.bindTexture(e.TEXTURE_2D, this.texture),
                  this.dirty &&
                    ((this.dirty = !1),
                    e.texSubImage2D(
                      e.TEXTURE_2D,
                      0,
                      0,
                      0,
                      this.width,
                      this.height,
                      e.ALPHA,
                      e.UNSIGNED_BYTE,
                      this.data
                    )))
                : ((this.texture = e.createTexture()),
                  e.bindTexture(e.TEXTURE_2D, this.texture),
                  e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT),
                  e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT),
                  e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR),
                  e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR),
                  e.texImage2D(
                    e.TEXTURE_2D,
                    0,
                    e.ALPHA,
                    this.width,
                    this.height,
                    0,
                    e.ALPHA,
                    e.UNSIGNED_BYTE,
                    this.data
                  ))
            })
          var S = function e(r, n) {
            ;(this.workerPool = r),
              (this.actors = []),
              (this.currentActor = 0),
              (this.id = t.uniqueId())
            for (
              var i = this.workerPool.acquire(this.id), o = 0;
              o < i.length;
              o++
            ) {
              var a = new e.Actor(i[o], n, this.id)
              ;(a.name = 'Worker ' + o), this.actors.push(a)
            }
          }
          function T(e, r, n) {
            var i = function (i, o) {
              if (i) return n(i)
              if (o) {
                var a = t.pick(t.extend(o, e), [
                  'tiles',
                  'minzoom',
                  'maxzoom',
                  'attribution',
                  'mapbox_logo',
                  'bounds',
                  'scheme',
                  'tileSize',
                  'encoding',
                ])
                o.vector_layers &&
                  ((a.vectorLayers = o.vector_layers),
                  (a.vectorLayerIds = a.vectorLayers.map(function (t) {
                    return t.id
                  }))),
                  (a.tiles = r.canonicalizeTileset(a, e.url)),
                  n(null, a)
              }
            }
            return e.url
              ? t.getJSON(
                  r.transformRequest(
                    r.normalizeSourceURL(e.url),
                    t.ResourceType.Source
                  ),
                  i
                )
              : t.browser.frame(function () {
                  return i(null, e)
                })
          }
          ;(S.prototype.broadcast = function (e, r, n) {
            t.asyncAll(
              this.actors,
              function (t, n) {
                t.send(e, r, n)
              },
              (n = n || function () {})
            )
          }),
            (S.prototype.getActor = function () {
              return (
                (this.currentActor =
                  (this.currentActor + 1) % this.actors.length),
                this.actors[this.currentActor]
              )
            }),
            (S.prototype.remove = function () {
              this.actors.forEach(function (t) {
                t.remove()
              }),
                (this.actors = []),
                this.workerPool.release(this.id)
            }),
            (S.Actor = t.Actor)
          var I = function (e, r, n) {
            ;(this.bounds = t.LngLatBounds.convert(this.validateBounds(e))),
              (this.minzoom = r || 0),
              (this.maxzoom = n || 24)
          }
          ;(I.prototype.validateBounds = function (t) {
            return Array.isArray(t) && 4 === t.length
              ? [
                  Math.max(-180, t[0]),
                  Math.max(-90, t[1]),
                  Math.min(180, t[2]),
                  Math.min(90, t[3]),
                ]
              : [-180, -90, 180, 90]
          }),
            (I.prototype.contains = function (e) {
              var r = Math.pow(2, e.z),
                n = Math.floor(t.mercatorXfromLng(this.bounds.getWest()) * r),
                i = Math.floor(t.mercatorYfromLat(this.bounds.getNorth()) * r),
                o = Math.ceil(t.mercatorXfromLng(this.bounds.getEast()) * r),
                a = Math.ceil(t.mercatorYfromLat(this.bounds.getSouth()) * r)
              return e.x >= n && e.x < o && e.y >= i && e.y < a
            })
          var C = (function (e) {
              function r(r, n, i, o) {
                if (
                  (e.call(this),
                  (this.id = r),
                  (this.dispatcher = i),
                  (this.type = 'vector'),
                  (this.minzoom = 0),
                  (this.maxzoom = 22),
                  (this.scheme = 'xyz'),
                  (this.tileSize = 512),
                  (this.reparseOverscaled = !0),
                  (this.isTileClipped = !0),
                  (this._loaded = !1),
                  t.extend(
                    this,
                    t.pick(n, ['url', 'scheme', 'tileSize', 'promoteId'])
                  ),
                  (this._options = t.extend({ type: 'vector' }, n)),
                  (this._collectResourceTiming = n.collectResourceTiming),
                  512 !== this.tileSize)
                )
                  throw new Error(
                    'vector tile sources must have a tileSize of 512'
                  )
                this.setEventedParent(o)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function () {
                  var e = this
                  ;(this._loaded = !1),
                    this.fire(
                      new t.Event('dataloading', { dataType: 'source' })
                    ),
                    (this._tileJSONRequest = T(
                      this._options,
                      this.map._requestManager,
                      function (r, n) {
                        ;(e._tileJSONRequest = null),
                          (e._loaded = !0),
                          r
                            ? e.fire(new t.ErrorEvent(r))
                            : n &&
                              (t.extend(e, n),
                              n.bounds &&
                                (e.tileBounds = new I(
                                  n.bounds,
                                  e.minzoom,
                                  e.maxzoom
                                )),
                              t.postTurnstileEvent(
                                n.tiles,
                                e.map._requestManager._customAccessToken
                              ),
                              t.postMapLoadEvent(
                                n.tiles,
                                e.map._getMapId(),
                                e.map._requestManager._skuToken,
                                e.map._requestManager._customAccessToken
                              ),
                              e.fire(
                                new t.Event('data', {
                                  dataType: 'source',
                                  sourceDataType: 'metadata',
                                })
                              ),
                              e.fire(
                                new t.Event('data', {
                                  dataType: 'source',
                                  sourceDataType: 'content',
                                })
                              ))
                      }
                    ))
                }),
                (r.prototype.loaded = function () {
                  return this._loaded
                }),
                (r.prototype.hasTile = function (t) {
                  return (
                    !this.tileBounds || this.tileBounds.contains(t.canonical)
                  )
                }),
                (r.prototype.onAdd = function (t) {
                  ;(this.map = t), this.load()
                }),
                (r.prototype.onRemove = function () {
                  this._tileJSONRequest &&
                    (this._tileJSONRequest.cancel(),
                    (this._tileJSONRequest = null))
                }),
                (r.prototype.serialize = function () {
                  return t.extend({}, this._options)
                }),
                (r.prototype.loadTile = function (e, r) {
                  var n = this.map._requestManager.normalizeTileURL(
                      e.tileID.canonical.url(this.tiles, this.scheme)
                    ),
                    i = {
                      request: this.map._requestManager.transformRequest(
                        n,
                        t.ResourceType.Tile
                      ),
                      uid: e.uid,
                      tileID: e.tileID,
                      zoom: e.tileID.overscaledZ,
                      tileSize: this.tileSize * e.tileID.overscaleFactor(),
                      type: this.type,
                      source: this.id,
                      pixelRatio: t.browser.devicePixelRatio,
                      showCollisionBoxes: this.map.showCollisionBoxes,
                      promoteId: this.promoteId,
                    }
                  function o(n, i) {
                    return (
                      delete e.request,
                      e.aborted
                        ? r(null)
                        : n && 404 !== n.status
                        ? r(n)
                        : (i &&
                            i.resourceTiming &&
                            (e.resourceTiming = i.resourceTiming),
                          this.map._refreshExpiredTiles &&
                            i &&
                            e.setExpiryData(i),
                          e.loadVectorData(i, this.map.painter),
                          t.cacheEntryPossiblyAdded(this.dispatcher),
                          r(null),
                          void (
                            e.reloadCallback &&
                            (this.loadTile(e, e.reloadCallback),
                            (e.reloadCallback = null))
                          ))
                    )
                  }
                  ;(i.request.collectResourceTiming = this._collectResourceTiming),
                    e.actor && 'expired' !== e.state
                      ? 'loading' === e.state
                        ? (e.reloadCallback = r)
                        : (e.request = e.actor.send(
                            'reloadTile',
                            i,
                            o.bind(this)
                          ))
                      : ((e.actor = this.dispatcher.getActor()),
                        (e.request = e.actor.send('loadTile', i, o.bind(this))))
                }),
                (r.prototype.abortTile = function (t) {
                  t.request && (t.request.cancel(), delete t.request),
                    t.actor &&
                      t.actor.send(
                        'abortTile',
                        { uid: t.uid, type: this.type, source: this.id },
                        void 0
                      )
                }),
                (r.prototype.unloadTile = function (t) {
                  t.unloadVectorData(),
                    t.actor &&
                      t.actor.send(
                        'removeTile',
                        { uid: t.uid, type: this.type, source: this.id },
                        void 0
                      )
                }),
                (r.prototype.hasTransition = function () {
                  return !1
                }),
                r
              )
            })(t.Evented),
            A = (function (e) {
              function r(r, n, i, o) {
                e.call(this),
                  (this.id = r),
                  (this.dispatcher = i),
                  this.setEventedParent(o),
                  (this.type = 'raster'),
                  (this.minzoom = 0),
                  (this.maxzoom = 22),
                  (this.roundZoom = !0),
                  (this.scheme = 'xyz'),
                  (this.tileSize = 512),
                  (this._loaded = !1),
                  (this._options = t.extend({ type: 'raster' }, n)),
                  t.extend(this, t.pick(n, ['url', 'scheme', 'tileSize']))
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function () {
                  var e = this
                  ;(this._loaded = !1),
                    this.fire(
                      new t.Event('dataloading', { dataType: 'source' })
                    ),
                    (this._tileJSONRequest = T(
                      this._options,
                      this.map._requestManager,
                      function (r, n) {
                        ;(e._tileJSONRequest = null),
                          (e._loaded = !0),
                          r
                            ? e.fire(new t.ErrorEvent(r))
                            : n &&
                              (t.extend(e, n),
                              n.bounds &&
                                (e.tileBounds = new I(
                                  n.bounds,
                                  e.minzoom,
                                  e.maxzoom
                                )),
                              t.postTurnstileEvent(n.tiles),
                              t.postMapLoadEvent(
                                n.tiles,
                                e.map._getMapId(),
                                e.map._requestManager._skuToken
                              ),
                              e.fire(
                                new t.Event('data', {
                                  dataType: 'source',
                                  sourceDataType: 'metadata',
                                })
                              ),
                              e.fire(
                                new t.Event('data', {
                                  dataType: 'source',
                                  sourceDataType: 'content',
                                })
                              ))
                      }
                    ))
                }),
                (r.prototype.loaded = function () {
                  return this._loaded
                }),
                (r.prototype.onAdd = function (t) {
                  ;(this.map = t), this.load()
                }),
                (r.prototype.onRemove = function () {
                  this._tileJSONRequest &&
                    (this._tileJSONRequest.cancel(),
                    (this._tileJSONRequest = null))
                }),
                (r.prototype.serialize = function () {
                  return t.extend({}, this._options)
                }),
                (r.prototype.hasTile = function (t) {
                  return (
                    !this.tileBounds || this.tileBounds.contains(t.canonical)
                  )
                }),
                (r.prototype.loadTile = function (e, r) {
                  var n = this,
                    i = this.map._requestManager.normalizeTileURL(
                      e.tileID.canonical.url(this.tiles, this.scheme),
                      this.tileSize
                    )
                  e.request = t.getImage(
                    this.map._requestManager.transformRequest(
                      i,
                      t.ResourceType.Tile
                    ),
                    function (i, o) {
                      if ((delete e.request, e.aborted))
                        (e.state = 'unloaded'), r(null)
                      else if (i) (e.state = 'errored'), r(i)
                      else if (o) {
                        n.map._refreshExpiredTiles && e.setExpiryData(o),
                          delete o.cacheControl,
                          delete o.expires
                        var a = n.map.painter.context,
                          s = a.gl
                        ;(e.texture = n.map.painter.getTileTexture(o.width)),
                          e.texture
                            ? e.texture.update(o, { useMipmap: !0 })
                            : ((e.texture = new t.Texture(a, o, s.RGBA, {
                                useMipmap: !0,
                              })),
                              e.texture.bind(
                                s.LINEAR,
                                s.CLAMP_TO_EDGE,
                                s.LINEAR_MIPMAP_NEAREST
                              ),
                              a.extTextureFilterAnisotropic &&
                                s.texParameterf(
                                  s.TEXTURE_2D,
                                  a.extTextureFilterAnisotropic
                                    .TEXTURE_MAX_ANISOTROPY_EXT,
                                  a.extTextureFilterAnisotropicMax
                                )),
                          (e.state = 'loaded'),
                          t.cacheEntryPossiblyAdded(n.dispatcher),
                          r(null)
                      }
                    }
                  )
                }),
                (r.prototype.abortTile = function (t, e) {
                  t.request && (t.request.cancel(), delete t.request), e()
                }),
                (r.prototype.unloadTile = function (t, e) {
                  t.texture && this.map.painter.saveTileTexture(t.texture), e()
                }),
                (r.prototype.hasTransition = function () {
                  return !1
                }),
                r
              )
            })(t.Evented),
            k = (function (e) {
              function r(r, n, i, o) {
                e.call(this, r, n, i, o),
                  (this.type = 'raster-dem'),
                  (this.maxzoom = 22),
                  (this._options = t.extend({ type: 'raster-dem' }, n)),
                  (this.encoding = n.encoding || 'mapbox')
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.serialize = function () {
                  return {
                    type: 'raster-dem',
                    url: this.url,
                    tileSize: this.tileSize,
                    tiles: this.tiles,
                    bounds: this.bounds,
                    encoding: this.encoding,
                  }
                }),
                (r.prototype.loadTile = function (e, r) {
                  var n = this.map._requestManager.normalizeTileURL(
                    e.tileID.canonical.url(this.tiles, this.scheme),
                    this.tileSize
                  )
                  function i(t, n) {
                    t && ((e.state = 'errored'), r(t)),
                      n &&
                        ((e.dem = n),
                        (e.needsHillshadePrepare = !0),
                        (e.state = 'loaded'),
                        r(null))
                  }
                  ;(e.request = t.getImage(
                    this.map._requestManager.transformRequest(
                      n,
                      t.ResourceType.Tile
                    ),
                    function (n, o) {
                      if ((delete e.request, e.aborted))
                        (e.state = 'unloaded'), r(null)
                      else if (n) (e.state = 'errored'), r(n)
                      else if (o) {
                        this.map._refreshExpiredTiles && e.setExpiryData(o),
                          delete o.cacheControl,
                          delete o.expires
                        var a =
                            t.window.ImageBitmap &&
                            o instanceof t.window.ImageBitmap &&
                            t.offscreenCanvasSupported()
                              ? o
                              : t.browser.getImageData(o, 1),
                          s = {
                            uid: e.uid,
                            coord: e.tileID,
                            source: this.id,
                            rawImageData: a,
                            encoding: this.encoding,
                          }
                        ;(e.actor && 'expired' !== e.state) ||
                          ((e.actor = this.dispatcher.getActor()),
                          e.actor.send('loadDEMTile', s, i.bind(this)))
                      }
                    }.bind(this)
                  )),
                    (e.neighboringTiles = this._getNeighboringTiles(e.tileID))
                }),
                (r.prototype._getNeighboringTiles = function (e) {
                  var r = e.canonical,
                    n = Math.pow(2, r.z),
                    i = (r.x - 1 + n) % n,
                    o = 0 === r.x ? e.wrap - 1 : e.wrap,
                    a = (r.x + 1 + n) % n,
                    s = r.x + 1 === n ? e.wrap + 1 : e.wrap,
                    l = {}
                  return (
                    (l[
                      new t.OverscaledTileID(e.overscaledZ, o, r.z, i, r.y).key
                    ] = { backfilled: !1 }),
                    (l[
                      new t.OverscaledTileID(e.overscaledZ, s, r.z, a, r.y).key
                    ] = { backfilled: !1 }),
                    r.y > 0 &&
                      ((l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          o,
                          r.z,
                          i,
                          r.y - 1
                        ).key
                      ] = { backfilled: !1 }),
                      (l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          e.wrap,
                          r.z,
                          r.x,
                          r.y - 1
                        ).key
                      ] = { backfilled: !1 }),
                      (l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          s,
                          r.z,
                          a,
                          r.y - 1
                        ).key
                      ] = { backfilled: !1 })),
                    r.y + 1 < n &&
                      ((l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          o,
                          r.z,
                          i,
                          r.y + 1
                        ).key
                      ] = { backfilled: !1 }),
                      (l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          e.wrap,
                          r.z,
                          r.x,
                          r.y + 1
                        ).key
                      ] = { backfilled: !1 }),
                      (l[
                        new t.OverscaledTileID(
                          e.overscaledZ,
                          s,
                          r.z,
                          a,
                          r.y + 1
                        ).key
                      ] = { backfilled: !1 })),
                    l
                  )
                }),
                (r.prototype.unloadTile = function (t) {
                  t.demTexture &&
                    this.map.painter.saveTileTexture(t.demTexture),
                    t.fbo && (t.fbo.destroy(), delete t.fbo),
                    t.dem && delete t.dem,
                    delete t.neighboringTiles,
                    (t.state = 'unloaded'),
                    t.actor &&
                      t.actor.send('removeDEMTile', {
                        uid: t.uid,
                        source: this.id,
                      })
                }),
                r
              )
            })(A),
            P = (function (e) {
              function r(r, n, i, o) {
                e.call(this),
                  (this.id = r),
                  (this.type = 'geojson'),
                  (this.minzoom = 0),
                  (this.maxzoom = 18),
                  (this.tileSize = 512),
                  (this.isTileClipped = !0),
                  (this.reparseOverscaled = !0),
                  (this._removed = !1),
                  (this._loaded = !1),
                  (this.actor = i.getActor()),
                  this.setEventedParent(o),
                  (this._data = n.data),
                  (this._options = t.extend({}, n)),
                  (this._collectResourceTiming = n.collectResourceTiming),
                  (this._resourceTiming = []),
                  void 0 !== n.maxzoom && (this.maxzoom = n.maxzoom),
                  n.type && (this.type = n.type),
                  n.attribution && (this.attribution = n.attribution),
                  (this.promoteId = n.promoteId)
                var a = t.EXTENT / this.tileSize
                this.workerOptions = t.extend(
                  {
                    source: this.id,
                    cluster: n.cluster || !1,
                    geojsonVtOptions: {
                      buffer: (void 0 !== n.buffer ? n.buffer : 128) * a,
                      tolerance:
                        (void 0 !== n.tolerance ? n.tolerance : 0.375) * a,
                      extent: t.EXTENT,
                      maxZoom: this.maxzoom,
                      lineMetrics: n.lineMetrics || !1,
                      generateId: n.generateId || !1,
                    },
                    superclusterOptions: {
                      maxZoom:
                        void 0 !== n.clusterMaxZoom
                          ? Math.min(n.clusterMaxZoom, this.maxzoom - 1)
                          : this.maxzoom - 1,
                      extent: t.EXTENT,
                      radius: (n.clusterRadius || 50) * a,
                      log: !1,
                      generateId: n.generateId || !1,
                    },
                    clusterProperties: n.clusterProperties,
                  },
                  n.workerOptions
                )
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function () {
                  var e = this
                  this.fire(new t.Event('dataloading', { dataType: 'source' })),
                    this._updateWorkerData(function (r) {
                      if (r) e.fire(new t.ErrorEvent(r))
                      else {
                        var n = {
                          dataType: 'source',
                          sourceDataType: 'metadata',
                        }
                        e._collectResourceTiming &&
                          e._resourceTiming &&
                          e._resourceTiming.length > 0 &&
                          ((n.resourceTiming = e._resourceTiming),
                          (e._resourceTiming = [])),
                          e.fire(new t.Event('data', n))
                      }
                    })
                }),
                (r.prototype.onAdd = function (t) {
                  ;(this.map = t), this.load()
                }),
                (r.prototype.setData = function (e) {
                  var r = this
                  return (
                    (this._data = e),
                    this.fire(
                      new t.Event('dataloading', { dataType: 'source' })
                    ),
                    this._updateWorkerData(function (e) {
                      if (e) r.fire(new t.ErrorEvent(e))
                      else {
                        var n = {
                          dataType: 'source',
                          sourceDataType: 'content',
                        }
                        r._collectResourceTiming &&
                          r._resourceTiming &&
                          r._resourceTiming.length > 0 &&
                          ((n.resourceTiming = r._resourceTiming),
                          (r._resourceTiming = [])),
                          r.fire(new t.Event('data', n))
                      }
                    }),
                    this
                  )
                }),
                (r.prototype.getClusterExpansionZoom = function (t, e) {
                  return (
                    this.actor.send(
                      'geojson.getClusterExpansionZoom',
                      { clusterId: t, source: this.id },
                      e
                    ),
                    this
                  )
                }),
                (r.prototype.getClusterChildren = function (t, e) {
                  return (
                    this.actor.send(
                      'geojson.getClusterChildren',
                      { clusterId: t, source: this.id },
                      e
                    ),
                    this
                  )
                }),
                (r.prototype.getClusterLeaves = function (t, e, r, n) {
                  return (
                    this.actor.send(
                      'geojson.getClusterLeaves',
                      { source: this.id, clusterId: t, limit: e, offset: r },
                      n
                    ),
                    this
                  )
                }),
                (r.prototype._updateWorkerData = function (e) {
                  var r = this
                  this._loaded = !1
                  var n = t.extend({}, this.workerOptions),
                    i = this._data
                  'string' == typeof i
                    ? ((n.request = this.map._requestManager.transformRequest(
                        t.browser.resolveURL(i),
                        t.ResourceType.Source
                      )),
                      (n.request.collectResourceTiming = this._collectResourceTiming))
                    : (n.data = JSON.stringify(i)),
                    this.actor.send(this.type + '.loadData', n, function (
                      t,
                      i
                    ) {
                      r._removed ||
                        (i && i.abandoned) ||
                        ((r._loaded = !0),
                        i &&
                          i.resourceTiming &&
                          i.resourceTiming[r.id] &&
                          (r._resourceTiming = i.resourceTiming[r.id].slice(0)),
                        r.actor.send(
                          r.type + '.coalesce',
                          { source: n.source },
                          null
                        ),
                        e(t))
                    })
                }),
                (r.prototype.loaded = function () {
                  return this._loaded
                }),
                (r.prototype.loadTile = function (e, r) {
                  var n = this,
                    i = e.actor ? 'reloadTile' : 'loadTile'
                  ;(e.actor = this.actor),
                    (e.request = this.actor.send(
                      i,
                      {
                        type: this.type,
                        uid: e.uid,
                        tileID: e.tileID,
                        zoom: e.tileID.overscaledZ,
                        maxZoom: this.maxzoom,
                        tileSize: this.tileSize,
                        source: this.id,
                        pixelRatio: t.browser.devicePixelRatio,
                        showCollisionBoxes: this.map.showCollisionBoxes,
                        promoteId: this.promoteId,
                      },
                      function (t, o) {
                        return (
                          delete e.request,
                          e.unloadVectorData(),
                          e.aborted
                            ? r(null)
                            : t
                            ? r(t)
                            : (e.loadVectorData(
                                o,
                                n.map.painter,
                                'reloadTile' === i
                              ),
                              r(null))
                        )
                      }
                    ))
                }),
                (r.prototype.abortTile = function (t) {
                  t.request && (t.request.cancel(), delete t.request),
                    (t.aborted = !0)
                }),
                (r.prototype.unloadTile = function (t) {
                  t.unloadVectorData(),
                    this.actor.send('removeTile', {
                      uid: t.uid,
                      type: this.type,
                      source: this.id,
                    })
                }),
                (r.prototype.onRemove = function () {
                  ;(this._removed = !0),
                    this.actor.send('removeSource', {
                      type: this.type,
                      source: this.id,
                    })
                }),
                (r.prototype.serialize = function () {
                  return t.extend({}, this._options, {
                    type: this.type,
                    data: this._data,
                  })
                }),
                (r.prototype.hasTransition = function () {
                  return !1
                }),
                r
              )
            })(t.Evented),
            M = t.createLayout([
              { name: 'a_pos', type: 'Int16', components: 2 },
              { name: 'a_texture_pos', type: 'Int16', components: 2 },
            ]),
            L = (function (e) {
              function r(t, r, n, i) {
                e.call(this),
                  (this.id = t),
                  (this.dispatcher = n),
                  (this.coordinates = r.coordinates),
                  (this.type = 'image'),
                  (this.minzoom = 0),
                  (this.maxzoom = 22),
                  (this.tileSize = 512),
                  (this.tiles = {}),
                  (this._loaded = !1),
                  this.setEventedParent(i),
                  (this.options = r)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function (e, r) {
                  var n = this
                  ;(this._loaded = !1),
                    this.fire(
                      new t.Event('dataloading', { dataType: 'source' })
                    ),
                    (this.url = this.options.url),
                    t.getImage(
                      this.map._requestManager.transformRequest(
                        this.url,
                        t.ResourceType.Image
                      ),
                      function (i, o) {
                        ;(n._loaded = !0),
                          i
                            ? n.fire(new t.ErrorEvent(i))
                            : o &&
                              ((n.image = o),
                              e && (n.coordinates = e),
                              r && r(),
                              n._finishLoading())
                      }
                    )
                }),
                (r.prototype.loaded = function () {
                  return this._loaded
                }),
                (r.prototype.updateImage = function (t) {
                  var e = this
                  return this.image && t.url
                    ? ((this.options.url = t.url),
                      this.load(t.coordinates, function () {
                        e.texture = null
                      }),
                      this)
                    : this
                }),
                (r.prototype._finishLoading = function () {
                  this.map &&
                    (this.setCoordinates(this.coordinates),
                    this.fire(
                      new t.Event('data', {
                        dataType: 'source',
                        sourceDataType: 'metadata',
                      })
                    ))
                }),
                (r.prototype.onAdd = function (t) {
                  ;(this.map = t), this.load()
                }),
                (r.prototype.setCoordinates = function (e) {
                  var r = this
                  this.coordinates = e
                  var n = e.map(t.MercatorCoordinate.fromLngLat)
                  ;(this.tileID = (function (e) {
                    for (
                      var r = 1 / 0,
                        n = 1 / 0,
                        i = -1 / 0,
                        o = -1 / 0,
                        a = 0,
                        s = e;
                      a < s.length;
                      a += 1
                    ) {
                      var l = s[a]
                      ;(r = Math.min(r, l.x)),
                        (n = Math.min(n, l.y)),
                        (i = Math.max(i, l.x)),
                        (o = Math.max(o, l.y))
                    }
                    var u = Math.max(i - r, o - n),
                      c = Math.max(0, Math.floor(-Math.log(u) / Math.LN2)),
                      p = Math.pow(2, c)
                    return new t.CanonicalTileID(
                      c,
                      Math.floor(((r + i) / 2) * p),
                      Math.floor(((n + o) / 2) * p)
                    )
                  })(n)),
                    (this.minzoom = this.maxzoom = this.tileID.z)
                  var i = n.map(function (t) {
                    return r.tileID.getTilePoint(t)._round()
                  })
                  return (
                    (this._boundsArray = new t.StructArrayLayout4i8()),
                    this._boundsArray.emplaceBack(i[0].x, i[0].y, 0, 0),
                    this._boundsArray.emplaceBack(i[1].x, i[1].y, t.EXTENT, 0),
                    this._boundsArray.emplaceBack(i[3].x, i[3].y, 0, t.EXTENT),
                    this._boundsArray.emplaceBack(
                      i[2].x,
                      i[2].y,
                      t.EXTENT,
                      t.EXTENT
                    ),
                    this.boundsBuffer &&
                      (this.boundsBuffer.destroy(), delete this.boundsBuffer),
                    this.fire(
                      new t.Event('data', {
                        dataType: 'source',
                        sourceDataType: 'content',
                      })
                    ),
                    this
                  )
                }),
                (r.prototype.prepare = function () {
                  if (0 !== Object.keys(this.tiles).length && this.image) {
                    var e = this.map.painter.context,
                      r = e.gl
                    for (var n in (this.boundsBuffer ||
                      (this.boundsBuffer = e.createVertexBuffer(
                        this._boundsArray,
                        M.members
                      )),
                    this.boundsSegments ||
                      (this.boundsSegments = t.SegmentVector.simpleSegment(
                        0,
                        0,
                        4,
                        2
                      )),
                    this.texture ||
                      ((this.texture = new t.Texture(e, this.image, r.RGBA)),
                      this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE)),
                    this.tiles)) {
                      var i = this.tiles[n]
                      'loaded' !== i.state &&
                        ((i.state = 'loaded'), (i.texture = this.texture))
                    }
                  }
                }),
                (r.prototype.loadTile = function (t, e) {
                  this.tileID && this.tileID.equals(t.tileID.canonical)
                    ? ((this.tiles[String(t.tileID.wrap)] = t),
                      (t.buckets = {}),
                      e(null))
                    : ((t.state = 'errored'), e(null))
                }),
                (r.prototype.serialize = function () {
                  return {
                    type: 'image',
                    url: this.options.url,
                    coordinates: this.coordinates,
                  }
                }),
                (r.prototype.hasTransition = function () {
                  return !1
                }),
                r
              )
            })(t.Evented),
            z = (function (e) {
              function r(t, r, n, i) {
                e.call(this, t, r, n, i),
                  (this.roundZoom = !0),
                  (this.type = 'video'),
                  (this.options = r)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function () {
                  var e = this
                  this._loaded = !1
                  var r = this.options
                  this.urls = []
                  for (var n = 0, i = r.urls; n < i.length; n += 1)
                    this.urls.push(
                      this.map._requestManager.transformRequest(
                        i[n],
                        t.ResourceType.Source
                      ).url
                    )
                  t.getVideo(this.urls, function (r, n) {
                    ;(e._loaded = !0),
                      r
                        ? e.fire(new t.ErrorEvent(r))
                        : n &&
                          ((e.video = n),
                          (e.video.loop = !0),
                          e.video.addEventListener('playing', function () {
                            e.map.triggerRepaint()
                          }),
                          e.map && e.video.play(),
                          e._finishLoading())
                  })
                }),
                (r.prototype.pause = function () {
                  this.video && this.video.pause()
                }),
                (r.prototype.play = function () {
                  this.video && this.video.play()
                }),
                (r.prototype.seek = function (e) {
                  if (this.video) {
                    var r = this.video.seekable
                    e < r.start(0) || e > r.end(0)
                      ? this.fire(
                          new t.ErrorEvent(
                            new t.ValidationError(
                              'sources.' + this.id,
                              null,
                              'Playback for this video can be set only between the ' +
                                r.start(0) +
                                ' and ' +
                                r.end(0) +
                                '-second mark.'
                            )
                          )
                        )
                      : (this.video.currentTime = e)
                  }
                }),
                (r.prototype.getVideo = function () {
                  return this.video
                }),
                (r.prototype.onAdd = function (t) {
                  this.map ||
                    ((this.map = t),
                    this.load(),
                    this.video &&
                      (this.video.play(),
                      this.setCoordinates(this.coordinates)))
                }),
                (r.prototype.prepare = function () {
                  if (
                    !(
                      0 === Object.keys(this.tiles).length ||
                      this.video.readyState < 2
                    )
                  ) {
                    var e = this.map.painter.context,
                      r = e.gl
                    for (var n in (this.boundsBuffer ||
                      (this.boundsBuffer = e.createVertexBuffer(
                        this._boundsArray,
                        M.members
                      )),
                    this.boundsSegments ||
                      (this.boundsSegments = t.SegmentVector.simpleSegment(
                        0,
                        0,
                        4,
                        2
                      )),
                    this.texture
                      ? this.video.paused ||
                        (this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE),
                        r.texSubImage2D(
                          r.TEXTURE_2D,
                          0,
                          0,
                          0,
                          r.RGBA,
                          r.UNSIGNED_BYTE,
                          this.video
                        ))
                      : ((this.texture = new t.Texture(e, this.video, r.RGBA)),
                        this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE)),
                    this.tiles)) {
                      var i = this.tiles[n]
                      'loaded' !== i.state &&
                        ((i.state = 'loaded'), (i.texture = this.texture))
                    }
                  }
                }),
                (r.prototype.serialize = function () {
                  return {
                    type: 'video',
                    urls: this.urls,
                    coordinates: this.coordinates,
                  }
                }),
                (r.prototype.hasTransition = function () {
                  return this.video && !this.video.paused
                }),
                r
              )
            })(L),
            O = (function (e) {
              function r(r, n, i, o) {
                e.call(this, r, n, i, o),
                  n.coordinates
                    ? (Array.isArray(n.coordinates) &&
                        4 === n.coordinates.length &&
                        !n.coordinates.some(function (t) {
                          return (
                            !Array.isArray(t) ||
                            2 !== t.length ||
                            t.some(function (t) {
                              return 'number' != typeof t
                            })
                          )
                        })) ||
                      this.fire(
                        new t.ErrorEvent(
                          new t.ValidationError(
                            'sources.' + r,
                            null,
                            '"coordinates" property must be an array of 4 longitude/latitude array pairs'
                          )
                        )
                      )
                    : this.fire(
                        new t.ErrorEvent(
                          new t.ValidationError(
                            'sources.' + r,
                            null,
                            'missing required property "coordinates"'
                          )
                        )
                      ),
                  n.animate &&
                    'boolean' != typeof n.animate &&
                    this.fire(
                      new t.ErrorEvent(
                        new t.ValidationError(
                          'sources.' + r,
                          null,
                          'optional "animate" property must be a boolean value'
                        )
                      )
                    ),
                  n.canvas
                    ? 'string' == typeof n.canvas ||
                      n.canvas instanceof t.window.HTMLCanvasElement ||
                      this.fire(
                        new t.ErrorEvent(
                          new t.ValidationError(
                            'sources.' + r,
                            null,
                            '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'
                          )
                        )
                      )
                    : this.fire(
                        new t.ErrorEvent(
                          new t.ValidationError(
                            'sources.' + r,
                            null,
                            'missing required property "canvas"'
                          )
                        )
                      ),
                  (this.options = n),
                  (this.animate = void 0 === n.animate || n.animate)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.load = function () {
                  ;(this._loaded = !0),
                    this.canvas ||
                      (this.canvas =
                        this.options.canvas instanceof
                        t.window.HTMLCanvasElement
                          ? this.options.canvas
                          : t.window.document.getElementById(
                              this.options.canvas
                            )),
                    (this.width = this.canvas.width),
                    (this.height = this.canvas.height),
                    this._hasInvalidDimensions()
                      ? this.fire(
                          new t.ErrorEvent(
                            new Error(
                              'Canvas dimensions cannot be less than or equal to zero.'
                            )
                          )
                        )
                      : ((this.play = function () {
                          ;(this._playing = !0), this.map.triggerRepaint()
                        }),
                        (this.pause = function () {
                          this._playing &&
                            (this.prepare(), (this._playing = !1))
                        }),
                        this._finishLoading())
                }),
                (r.prototype.getCanvas = function () {
                  return this.canvas
                }),
                (r.prototype.onAdd = function (t) {
                  ;(this.map = t),
                    this.load(),
                    this.canvas && this.animate && this.play()
                }),
                (r.prototype.onRemove = function () {
                  this.pause()
                }),
                (r.prototype.prepare = function () {
                  var e = !1
                  if (
                    (this.canvas.width !== this.width &&
                      ((this.width = this.canvas.width), (e = !0)),
                    this.canvas.height !== this.height &&
                      ((this.height = this.canvas.height), (e = !0)),
                    !this._hasInvalidDimensions() &&
                      0 !== Object.keys(this.tiles).length)
                  ) {
                    var r = this.map.painter.context,
                      n = r.gl
                    for (var i in (this.boundsBuffer ||
                      (this.boundsBuffer = r.createVertexBuffer(
                        this._boundsArray,
                        M.members
                      )),
                    this.boundsSegments ||
                      (this.boundsSegments = t.SegmentVector.simpleSegment(
                        0,
                        0,
                        4,
                        2
                      )),
                    this.texture
                      ? (e || this._playing) &&
                        this.texture.update(this.canvas, { premultiply: !0 })
                      : (this.texture = new t.Texture(r, this.canvas, n.RGBA, {
                          premultiply: !0,
                        })),
                    this.tiles)) {
                      var o = this.tiles[i]
                      'loaded' !== o.state &&
                        ((o.state = 'loaded'), (o.texture = this.texture))
                    }
                  }
                }),
                (r.prototype.serialize = function () {
                  return { type: 'canvas', coordinates: this.coordinates }
                }),
                (r.prototype.hasTransition = function () {
                  return this._playing
                }),
                (r.prototype._hasInvalidDimensions = function () {
                  for (
                    var t = 0, e = [this.canvas.width, this.canvas.height];
                    t < e.length;
                    t += 1
                  ) {
                    var r = e[t]
                    if (isNaN(r) || r <= 0) return !0
                  }
                  return !1
                }),
                r
              )
            })(L),
            D = {
              vector: C,
              raster: A,
              'raster-dem': k,
              geojson: P,
              video: z,
              image: L,
              canvas: O,
            }
          function R(e, r) {
            var n = t.identity([])
            return (
              t.translate(n, n, [1, 1, 0]),
              t.scale(n, n, [0.5 * e.width, 0.5 * e.height, 1]),
              t.multiply(n, n, e.calculatePosMatrix(r.toUnwrapped()))
            )
          }
          function F(t, e, r, n, i, o) {
            var a = (function (t, e, r) {
                if (t)
                  for (var n = 0, i = t; n < i.length; n += 1) {
                    var o = e[i[n]]
                    if (o && o.source === r && 'fill-extrusion' === o.type)
                      return !0
                  }
                else
                  for (var a in e) {
                    var s = e[a]
                    if (s.source === r && 'fill-extrusion' === s.type) return !0
                  }
                return !1
              })(i && i.layers, e, t.id),
              s = o.maxPitchScaleFactor(),
              l = t.tilesIn(n, s, a)
            l.sort(B)
            for (var u = [], c = 0, p = l; c < p.length; c += 1) {
              var h = p[c]
              u.push({
                wrappedTileID: h.tileID.wrapped().key,
                queryResults: h.tile.queryRenderedFeatures(
                  e,
                  r,
                  t._state,
                  h.queryGeometry,
                  h.cameraQueryGeometry,
                  h.scale,
                  i,
                  o,
                  s,
                  R(t.transform, h.tileID)
                ),
              })
            }
            var f = (function (t) {
              for (var e = {}, r = {}, n = 0, i = t; n < i.length; n += 1) {
                var o = i[n],
                  a = o.queryResults,
                  s = o.wrappedTileID,
                  l = (r[s] = r[s] || {})
                for (var u in a)
                  for (
                    var c = a[u],
                      p = (l[u] = l[u] || {}),
                      h = (e[u] = e[u] || []),
                      f = 0,
                      d = c;
                    f < d.length;
                    f += 1
                  ) {
                    var m = d[f]
                    p[m.featureIndex] || ((p[m.featureIndex] = !0), h.push(m))
                  }
              }
              return e
            })(u)
            for (var d in f)
              f[d].forEach(function (e) {
                var r = e.feature,
                  n = t.getFeatureState(r.layer['source-layer'], r.id)
                ;(r.source = r.layer.source),
                  r.layer['source-layer'] &&
                    (r.sourceLayer = r.layer['source-layer']),
                  (r.state = n)
              })
            return f
          }
          function B(t, e) {
            var r = t.tileID,
              n = e.tileID
            return (
              r.overscaledZ - n.overscaledZ ||
              r.canonical.y - n.canonical.y ||
              r.wrap - n.wrap ||
              r.canonical.x - n.canonical.x
            )
          }
          var N = function (t, e) {
            ;(this.max = t), (this.onRemove = e), this.reset()
          }
          ;(N.prototype.reset = function () {
            for (var t in this.data)
              for (var e = 0, r = this.data[t]; e < r.length; e += 1) {
                var n = r[e]
                n.timeout && clearTimeout(n.timeout), this.onRemove(n.value)
              }
            return (this.data = {}), (this.order = []), this
          }),
            (N.prototype.add = function (t, e, r) {
              var n = this,
                i = t.wrapped().key
              void 0 === this.data[i] && (this.data[i] = [])
              var o = { value: e, timeout: void 0 }
              if (
                (void 0 !== r &&
                  (o.timeout = setTimeout(function () {
                    n.remove(t, o)
                  }, r)),
                this.data[i].push(o),
                this.order.push(i),
                this.order.length > this.max)
              ) {
                var a = this._getAndRemoveByKey(this.order[0])
                a && this.onRemove(a)
              }
              return this
            }),
            (N.prototype.has = function (t) {
              return t.wrapped().key in this.data
            }),
            (N.prototype.getAndRemove = function (t) {
              return this.has(t)
                ? this._getAndRemoveByKey(t.wrapped().key)
                : null
            }),
            (N.prototype._getAndRemoveByKey = function (t) {
              var e = this.data[t].shift()
              return (
                e.timeout && clearTimeout(e.timeout),
                0 === this.data[t].length && delete this.data[t],
                this.order.splice(this.order.indexOf(t), 1),
                e.value
              )
            }),
            (N.prototype.getByKey = function (t) {
              var e = this.data[t]
              return e ? e[0].value : null
            }),
            (N.prototype.get = function (t) {
              return this.has(t) ? this.data[t.wrapped().key][0].value : null
            }),
            (N.prototype.remove = function (t, e) {
              if (!this.has(t)) return this
              var r = t.wrapped().key,
                n = void 0 === e ? 0 : this.data[r].indexOf(e),
                i = this.data[r][n]
              return (
                this.data[r].splice(n, 1),
                i.timeout && clearTimeout(i.timeout),
                0 === this.data[r].length && delete this.data[r],
                this.onRemove(i.value),
                this.order.splice(this.order.indexOf(r), 1),
                this
              )
            }),
            (N.prototype.setMaxSize = function (t) {
              for (this.max = t; this.order.length > this.max; ) {
                var e = this._getAndRemoveByKey(this.order[0])
                e && this.onRemove(e)
              }
              return this
            }),
            (N.prototype.filter = function (t) {
              var e = []
              for (var r in this.data)
                for (var n = 0, i = this.data[r]; n < i.length; n += 1) {
                  var o = i[n]
                  t(o.value) || e.push(o)
                }
              for (var a = 0, s = e; a < s.length; a += 1) {
                var l = s[a]
                this.remove(l.value.tileID, l)
              }
            })
          var U = function (t, e, r) {
            this.context = t
            var n = t.gl
            ;(this.buffer = n.createBuffer()),
              (this.dynamicDraw = Boolean(r)),
              this.context.unbindVAO(),
              t.bindElementBuffer.set(this.buffer),
              n.bufferData(
                n.ELEMENT_ARRAY_BUFFER,
                e.arrayBuffer,
                this.dynamicDraw ? n.DYNAMIC_DRAW : n.STATIC_DRAW
              ),
              this.dynamicDraw || delete e.arrayBuffer
          }
          ;(U.prototype.bind = function () {
            this.context.bindElementBuffer.set(this.buffer)
          }),
            (U.prototype.updateData = function (t) {
              var e = this.context.gl
              this.context.unbindVAO(),
                this.bind(),
                e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer)
            }),
            (U.prototype.destroy = function () {
              this.buffer &&
                (this.context.gl.deleteBuffer(this.buffer), delete this.buffer)
            })
          var j = {
              Int8: 'BYTE',
              Uint8: 'UNSIGNED_BYTE',
              Int16: 'SHORT',
              Uint16: 'UNSIGNED_SHORT',
              Int32: 'INT',
              Uint32: 'UNSIGNED_INT',
              Float32: 'FLOAT',
            },
            V = function (t, e, r, n) {
              ;(this.length = e.length),
                (this.attributes = r),
                (this.itemSize = e.bytesPerElement),
                (this.dynamicDraw = n),
                (this.context = t)
              var i = t.gl
              ;(this.buffer = i.createBuffer()),
                t.bindVertexBuffer.set(this.buffer),
                i.bufferData(
                  i.ARRAY_BUFFER,
                  e.arrayBuffer,
                  this.dynamicDraw ? i.DYNAMIC_DRAW : i.STATIC_DRAW
                ),
                this.dynamicDraw || delete e.arrayBuffer
            }
          ;(V.prototype.bind = function () {
            this.context.bindVertexBuffer.set(this.buffer)
          }),
            (V.prototype.updateData = function (t) {
              var e = this.context.gl
              this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer)
            }),
            (V.prototype.enableAttributes = function (t, e) {
              for (var r = 0; r < this.attributes.length; r++) {
                var n = e.attributes[this.attributes[r].name]
                void 0 !== n && t.enableVertexAttribArray(n)
              }
            }),
            (V.prototype.setVertexAttribPointers = function (t, e, r) {
              for (var n = 0; n < this.attributes.length; n++) {
                var i = this.attributes[n],
                  o = e.attributes[i.name]
                void 0 !== o &&
                  t.vertexAttribPointer(
                    o,
                    i.components,
                    t[j[i.type]],
                    !1,
                    this.itemSize,
                    i.offset + this.itemSize * (r || 0)
                  )
              }
            }),
            (V.prototype.destroy = function () {
              this.buffer &&
                (this.context.gl.deleteBuffer(this.buffer), delete this.buffer)
            })
          var q = function (t) {
            ;(this.gl = t.gl),
              (this.default = this.getDefault()),
              (this.current = this.default),
              (this.dirty = !1)
          }
          ;(q.prototype.get = function () {
            return this.current
          }),
            (q.prototype.set = function (t) {}),
            (q.prototype.getDefault = function () {
              return this.default
            }),
            (q.prototype.setDefault = function () {
              this.set(this.default)
            })
          var G = (function (e) {
              function r() {
                e.apply(this, arguments)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.getDefault = function () {
                  return t.Color.transparent
                }),
                (r.prototype.set = function (t) {
                  var e = this.current
                  ;(t.r !== e.r ||
                    t.g !== e.g ||
                    t.b !== e.b ||
                    t.a !== e.a ||
                    this.dirty) &&
                    (this.gl.clearColor(t.r, t.g, t.b, t.a),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                r
              )
            })(q),
            $ = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return 1
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.clearDepth(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            Z = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return 0
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.clearStencil(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            X = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return [!0, !0, !0, !0]
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t[0] !== e[0] ||
                    t[1] !== e[1] ||
                    t[2] !== e[2] ||
                    t[3] !== e[3] ||
                    this.dirty) &&
                    (this.gl.colorMask(t[0], t[1], t[2], t[3]),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            K = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !0
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.depthMask(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            W = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return 255
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.stencilMask(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            H = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return { func: this.gl.ALWAYS, ref: 0, mask: 255 }
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t.func !== e.func ||
                    t.ref !== e.ref ||
                    t.mask !== e.mask ||
                    this.dirty) &&
                    (this.gl.stencilFunc(t.func, t.ref, t.mask),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            J = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  var t = this.gl
                  return [t.KEEP, t.KEEP, t.KEEP]
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t[0] !== e[0] ||
                    t[1] !== e[1] ||
                    t[2] !== e[2] ||
                    this.dirty) &&
                    (this.gl.stencilOp(t[0], t[1], t[2]),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            Y = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            Q = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return [0, 1]
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t[0] !== e[0] || t[1] !== e[1] || this.dirty) &&
                    (this.gl.depthRange(t[0], t[1]),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            tt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            et = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return this.gl.LESS
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.depthFunc(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            rt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    t ? e.enable(e.BLEND) : e.disable(e.BLEND),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            nt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  var t = this.gl
                  return [t.ONE, t.ZERO]
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t[0] !== e[0] || t[1] !== e[1] || this.dirty) &&
                    (this.gl.blendFunc(t[0], t[1]),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            it = (function (e) {
              function r() {
                e.apply(this, arguments)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.getDefault = function () {
                  return t.Color.transparent
                }),
                (r.prototype.set = function (t) {
                  var e = this.current
                  ;(t.r !== e.r ||
                    t.g !== e.g ||
                    t.b !== e.b ||
                    t.a !== e.a ||
                    this.dirty) &&
                    (this.gl.blendColor(t.r, t.g, t.b, t.a),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                r
              )
            })(q),
            ot = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return this.gl.FUNC_ADD
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.blendEquation(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            at = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            st = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return this.gl.BACK
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.cullFace(t), (this.current = t), (this.dirty = !1))
                }),
                e
              )
            })(q),
            lt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return this.gl.CCW
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.frontFace(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            ut = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.useProgram(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            ct = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return this.gl.TEXTURE0
                }),
                (e.prototype.set = function (t) {
                  ;(t !== this.current || this.dirty) &&
                    (this.gl.activeTexture(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            pt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  var t = this.gl
                  return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight]
                }),
                (e.prototype.set = function (t) {
                  var e = this.current
                  ;(t[0] !== e[0] ||
                    t[1] !== e[1] ||
                    t[2] !== e[2] ||
                    t[3] !== e[3] ||
                    this.dirty) &&
                    (this.gl.viewport(t[0], t[1], t[2], t[3]),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            ht = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.bindFramebuffer(e.FRAMEBUFFER, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            ft = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.bindRenderbuffer(e.RENDERBUFFER, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            dt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.bindTexture(e.TEXTURE_2D, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            mt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.bindBuffer(e.ARRAY_BUFFER, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            yt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  var e = this.gl
                  e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t),
                    (this.current = t),
                    (this.dirty = !1)
                }),
                e
              )
            })(q),
            vt = (function (t) {
              function e(e) {
                t.call(this, e), (this.vao = e.extVertexArrayObject)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                (e.prototype.set = function (t) {
                  this.vao &&
                    (t !== this.current || this.dirty) &&
                    (this.vao.bindVertexArrayOES(t),
                    (this.current = t),
                    (this.dirty = !1))
                }),
                e
              )
            })(q),
            gt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return 4
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.pixelStorei(e.UNPACK_ALIGNMENT, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            _t = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            xt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return !1
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    var e = this.gl
                    e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(q),
            bt = (function (t) {
              function e(e, r) {
                t.call(this, e), (this.context = e), (this.parent = r)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.getDefault = function () {
                  return null
                }),
                e
              )
            })(q),
            wt = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.setDirty = function () {
                  this.dirty = !0
                }),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    this.context.bindFramebuffer.set(this.parent)
                    var e = this.gl
                    e.framebufferTexture2D(
                      e.FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0,
                      e.TEXTURE_2D,
                      t,
                      0
                    ),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(bt),
            Et = (function (t) {
              function e() {
                t.apply(this, arguments)
              }
              return (
                t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e),
                (e.prototype.set = function (t) {
                  if (t !== this.current || this.dirty) {
                    this.context.bindFramebuffer.set(this.parent)
                    var e = this.gl
                    e.framebufferRenderbuffer(
                      e.FRAMEBUFFER,
                      e.DEPTH_ATTACHMENT,
                      e.RENDERBUFFER,
                      t
                    ),
                      (this.current = t),
                      (this.dirty = !1)
                  }
                }),
                e
              )
            })(bt),
            St = function (t, e, r, n) {
              ;(this.context = t), (this.width = e), (this.height = r)
              var i = (this.framebuffer = t.gl.createFramebuffer())
              ;(this.colorAttachment = new wt(t, i)),
                n && (this.depthAttachment = new Et(t, i))
            }
          St.prototype.destroy = function () {
            var t = this.context.gl,
              e = this.colorAttachment.get()
            if ((e && t.deleteTexture(e), this.depthAttachment)) {
              var r = this.depthAttachment.get()
              r && t.deleteRenderbuffer(r)
            }
            t.deleteFramebuffer(this.framebuffer)
          }
          var Tt = function (t, e, r) {
            ;(this.func = t), (this.mask = e), (this.range = r)
          }
          ;(Tt.ReadOnly = !1),
            (Tt.ReadWrite = !0),
            (Tt.disabled = new Tt(519, Tt.ReadOnly, [0, 1]))
          var It = function (t, e, r, n, i, o) {
            ;(this.test = t),
              (this.ref = e),
              (this.mask = r),
              (this.fail = n),
              (this.depthFail = i),
              (this.pass = o)
          }
          It.disabled = new It({ func: 519, mask: 0 }, 0, 0, 7680, 7680, 7680)
          var Ct = function (t, e, r) {
            ;(this.blendFunction = t), (this.blendColor = e), (this.mask = r)
          }
          ;(Ct.disabled = new Ct((Ct.Replace = [1, 0]), t.Color.transparent, [
            !1,
            !1,
            !1,
            !1,
          ])),
            (Ct.unblended = new Ct(Ct.Replace, t.Color.transparent, [
              !0,
              !0,
              !0,
              !0,
            ])),
            (Ct.alphaBlended = new Ct([1, 771], t.Color.transparent, [
              !0,
              !0,
              !0,
              !0,
            ]))
          var At = function (t, e, r) {
            ;(this.enable = t), (this.mode = e), (this.frontFace = r)
          }
          ;(At.disabled = new At(!1, 1029, 2305)),
            (At.backCCW = new At(!0, 1029, 2305))
          var kt = function (t) {
            ;(this.gl = t),
              (this.extVertexArrayObject = this.gl.getExtension(
                'OES_vertex_array_object'
              )),
              (this.clearColor = new G(this)),
              (this.clearDepth = new $(this)),
              (this.clearStencil = new Z(this)),
              (this.colorMask = new X(this)),
              (this.depthMask = new K(this)),
              (this.stencilMask = new W(this)),
              (this.stencilFunc = new H(this)),
              (this.stencilOp = new J(this)),
              (this.stencilTest = new Y(this)),
              (this.depthRange = new Q(this)),
              (this.depthTest = new tt(this)),
              (this.depthFunc = new et(this)),
              (this.blend = new rt(this)),
              (this.blendFunc = new nt(this)),
              (this.blendColor = new it(this)),
              (this.blendEquation = new ot(this)),
              (this.cullFace = new at(this)),
              (this.cullFaceSide = new st(this)),
              (this.frontFace = new lt(this)),
              (this.program = new ut(this)),
              (this.activeTexture = new ct(this)),
              (this.viewport = new pt(this)),
              (this.bindFramebuffer = new ht(this)),
              (this.bindRenderbuffer = new ft(this)),
              (this.bindTexture = new dt(this)),
              (this.bindVertexBuffer = new mt(this)),
              (this.bindElementBuffer = new yt(this)),
              (this.bindVertexArrayOES =
                this.extVertexArrayObject && new vt(this)),
              (this.pixelStoreUnpack = new gt(this)),
              (this.pixelStoreUnpackPremultiplyAlpha = new _t(this)),
              (this.pixelStoreUnpackFlipY = new xt(this)),
              (this.extTextureFilterAnisotropic =
                t.getExtension('EXT_texture_filter_anisotropic') ||
                t.getExtension('MOZ_EXT_texture_filter_anisotropic') ||
                t.getExtension('WEBKIT_EXT_texture_filter_anisotropic')),
              this.extTextureFilterAnisotropic &&
                (this.extTextureFilterAnisotropicMax = t.getParameter(
                  this.extTextureFilterAnisotropic
                    .MAX_TEXTURE_MAX_ANISOTROPY_EXT
                )),
              (this.extTextureHalfFloat = t.getExtension(
                'OES_texture_half_float'
              )),
              this.extTextureHalfFloat &&
                t.getExtension('OES_texture_half_float_linear'),
              (this.extTimerQuery = t.getExtension('EXT_disjoint_timer_query'))
          }
          ;(kt.prototype.setDefault = function () {
            this.unbindVAO(),
              this.clearColor.setDefault(),
              this.clearDepth.setDefault(),
              this.clearStencil.setDefault(),
              this.colorMask.setDefault(),
              this.depthMask.setDefault(),
              this.stencilMask.setDefault(),
              this.stencilFunc.setDefault(),
              this.stencilOp.setDefault(),
              this.stencilTest.setDefault(),
              this.depthRange.setDefault(),
              this.depthTest.setDefault(),
              this.depthFunc.setDefault(),
              this.blend.setDefault(),
              this.blendFunc.setDefault(),
              this.blendColor.setDefault(),
              this.blendEquation.setDefault(),
              this.cullFace.setDefault(),
              this.cullFaceSide.setDefault(),
              this.frontFace.setDefault(),
              this.program.setDefault(),
              this.activeTexture.setDefault(),
              this.bindFramebuffer.setDefault(),
              this.pixelStoreUnpack.setDefault(),
              this.pixelStoreUnpackPremultiplyAlpha.setDefault(),
              this.pixelStoreUnpackFlipY.setDefault()
          }),
            (kt.prototype.setDirty = function () {
              ;(this.clearColor.dirty = !0),
                (this.clearDepth.dirty = !0),
                (this.clearStencil.dirty = !0),
                (this.colorMask.dirty = !0),
                (this.depthMask.dirty = !0),
                (this.stencilMask.dirty = !0),
                (this.stencilFunc.dirty = !0),
                (this.stencilOp.dirty = !0),
                (this.stencilTest.dirty = !0),
                (this.depthRange.dirty = !0),
                (this.depthTest.dirty = !0),
                (this.depthFunc.dirty = !0),
                (this.blend.dirty = !0),
                (this.blendFunc.dirty = !0),
                (this.blendColor.dirty = !0),
                (this.blendEquation.dirty = !0),
                (this.cullFace.dirty = !0),
                (this.cullFaceSide.dirty = !0),
                (this.frontFace.dirty = !0),
                (this.program.dirty = !0),
                (this.activeTexture.dirty = !0),
                (this.viewport.dirty = !0),
                (this.bindFramebuffer.dirty = !0),
                (this.bindRenderbuffer.dirty = !0),
                (this.bindTexture.dirty = !0),
                (this.bindVertexBuffer.dirty = !0),
                (this.bindElementBuffer.dirty = !0),
                this.extVertexArrayObject &&
                  (this.bindVertexArrayOES.dirty = !0),
                (this.pixelStoreUnpack.dirty = !0),
                (this.pixelStoreUnpackPremultiplyAlpha.dirty = !0),
                (this.pixelStoreUnpackFlipY.dirty = !0)
            }),
            (kt.prototype.createIndexBuffer = function (t, e) {
              return new U(this, t, e)
            }),
            (kt.prototype.createVertexBuffer = function (t, e, r) {
              return new V(this, t, e, r)
            }),
            (kt.prototype.createRenderbuffer = function (t, e, r) {
              var n = this.gl,
                i = n.createRenderbuffer()
              return (
                this.bindRenderbuffer.set(i),
                n.renderbufferStorage(n.RENDERBUFFER, t, e, r),
                this.bindRenderbuffer.set(null),
                i
              )
            }),
            (kt.prototype.createFramebuffer = function (t, e, r) {
              return new St(this, t, e, r)
            }),
            (kt.prototype.clear = function (t) {
              var e = t.color,
                r = t.depth,
                n = this.gl,
                i = 0
              e &&
                ((i |= n.COLOR_BUFFER_BIT),
                this.clearColor.set(e),
                this.colorMask.set([!0, !0, !0, !0])),
                void 0 !== r &&
                  ((i |= n.DEPTH_BUFFER_BIT),
                  this.depthRange.set([0, 1]),
                  this.clearDepth.set(r),
                  this.depthMask.set(!0)),
                n.clear(i)
            }),
            (kt.prototype.setCullFace = function (t) {
              !1 === t.enable
                ? this.cullFace.set(!1)
                : (this.cullFace.set(!0),
                  this.cullFaceSide.set(t.mode),
                  this.frontFace.set(t.frontFace))
            }),
            (kt.prototype.setDepthMode = function (t) {
              t.func !== this.gl.ALWAYS || t.mask
                ? (this.depthTest.set(!0),
                  this.depthFunc.set(t.func),
                  this.depthMask.set(t.mask),
                  this.depthRange.set(t.range))
                : this.depthTest.set(!1)
            }),
            (kt.prototype.setStencilMode = function (t) {
              t.test.func !== this.gl.ALWAYS || t.mask
                ? (this.stencilTest.set(!0),
                  this.stencilMask.set(t.mask),
                  this.stencilOp.set([t.fail, t.depthFail, t.pass]),
                  this.stencilFunc.set({
                    func: t.test.func,
                    ref: t.ref,
                    mask: t.test.mask,
                  }))
                : this.stencilTest.set(!1)
            }),
            (kt.prototype.setColorMode = function (e) {
              t.deepEqual(e.blendFunction, Ct.Replace)
                ? this.blend.set(!1)
                : (this.blend.set(!0),
                  this.blendFunc.set(e.blendFunction),
                  this.blendColor.set(e.blendColor)),
                this.colorMask.set(e.mask)
            }),
            (kt.prototype.unbindVAO = function () {
              this.extVertexArrayObject && this.bindVertexArrayOES.set(null)
            })
          var Pt = (function (e) {
            function r(r, n, i) {
              var o = this
              e.call(this),
                (this.id = r),
                (this.dispatcher = i),
                this.on('data', function (t) {
                  'source' === t.dataType &&
                    'metadata' === t.sourceDataType &&
                    (o._sourceLoaded = !0),
                    o._sourceLoaded &&
                      !o._paused &&
                      'source' === t.dataType &&
                      'content' === t.sourceDataType &&
                      (o.reload(), o.transform && o.update(o.transform))
                }),
                this.on('error', function () {
                  o._sourceErrored = !0
                }),
                (this._source = (function (e, r, n, i) {
                  var o = new D[r.type](e, r, n, i)
                  if (o.id !== e)
                    throw new Error(
                      'Expected Source id to be ' + e + ' instead of ' + o.id
                    )
                  return (
                    t.bindAll(
                      ['load', 'abort', 'unload', 'serialize', 'prepare'],
                      o
                    ),
                    o
                  )
                })(r, n, i, this)),
                (this._tiles = {}),
                (this._cache = new N(0, this._unloadTile.bind(this))),
                (this._timers = {}),
                (this._cacheTimers = {}),
                (this._maxTileCacheSize = null),
                (this._loadedParentTiles = {}),
                (this._coveredTiles = {}),
                (this._state = new t.SourceFeatureState())
            }
            return (
              e && (r.__proto__ = e),
              ((r.prototype = Object.create(e && e.prototype)).constructor = r),
              (r.prototype.onAdd = function (t) {
                ;(this.map = t),
                  (this._maxTileCacheSize = t ? t._maxTileCacheSize : null),
                  this._source && this._source.onAdd && this._source.onAdd(t)
              }),
              (r.prototype.onRemove = function (t) {
                this._source &&
                  this._source.onRemove &&
                  this._source.onRemove(t)
              }),
              (r.prototype.loaded = function () {
                if (this._sourceErrored) return !0
                if (!this._sourceLoaded) return !1
                if (!this._source.loaded()) return !1
                for (var t in this._tiles) {
                  var e = this._tiles[t]
                  if ('loaded' !== e.state && 'errored' !== e.state) return !1
                }
                return !0
              }),
              (r.prototype.getSource = function () {
                return this._source
              }),
              (r.prototype.pause = function () {
                this._paused = !0
              }),
              (r.prototype.resume = function () {
                if (this._paused) {
                  var t = this._shouldReloadOnResume
                  ;(this._paused = !1),
                    (this._shouldReloadOnResume = !1),
                    t && this.reload(),
                    this.transform && this.update(this.transform)
                }
              }),
              (r.prototype._loadTile = function (t, e) {
                return this._source.loadTile(t, e)
              }),
              (r.prototype._unloadTile = function (t) {
                if (this._source.unloadTile)
                  return this._source.unloadTile(t, function () {})
              }),
              (r.prototype._abortTile = function (t) {
                if (this._source.abortTile)
                  return this._source.abortTile(t, function () {})
              }),
              (r.prototype.serialize = function () {
                return this._source.serialize()
              }),
              (r.prototype.prepare = function (t) {
                for (var e in (this._source.prepare && this._source.prepare(),
                this._state.coalesceChanges(
                  this._tiles,
                  this.map ? this.map.painter : null
                ),
                this._tiles)) {
                  var r = this._tiles[e]
                  r.upload(t), r.prepare(this.map.style.imageManager)
                }
              }),
              (r.prototype.getIds = function () {
                return t
                  .values(this._tiles)
                  .map(function (t) {
                    return t.tileID
                  })
                  .sort(Mt)
                  .map(function (t) {
                    return t.key
                  })
              }),
              (r.prototype.getRenderableIds = function (e) {
                var r = this,
                  n = []
                for (var i in this._tiles)
                  this._isIdRenderable(i, e) && n.push(this._tiles[i])
                return e
                  ? n
                      .sort(function (e, n) {
                        var i = e.tileID,
                          o = n.tileID,
                          a = new t.Point(i.canonical.x, i.canonical.y)._rotate(
                            r.transform.angle
                          ),
                          s = new t.Point(o.canonical.x, o.canonical.y)._rotate(
                            r.transform.angle
                          )
                        return (
                          i.overscaledZ - o.overscaledZ ||
                          s.y - a.y ||
                          s.x - a.x
                        )
                      })
                      .map(function (t) {
                        return t.tileID.key
                      })
                  : n
                      .map(function (t) {
                        return t.tileID
                      })
                      .sort(Mt)
                      .map(function (t) {
                        return t.key
                      })
              }),
              (r.prototype.hasRenderableParent = function (t) {
                var e = this.findLoadedParent(t, 0)
                return !!e && this._isIdRenderable(e.tileID.key)
              }),
              (r.prototype._isIdRenderable = function (t, e) {
                return (
                  this._tiles[t] &&
                  this._tiles[t].hasData() &&
                  !this._coveredTiles[t] &&
                  (e || !this._tiles[t].holdingForFade())
                )
              }),
              (r.prototype.reload = function () {
                if (this._paused) this._shouldReloadOnResume = !0
                else
                  for (var t in (this._cache.reset(), this._tiles))
                    'errored' !== this._tiles[t].state &&
                      this._reloadTile(t, 'reloading')
              }),
              (r.prototype._reloadTile = function (t, e) {
                var r = this._tiles[t]
                r &&
                  ('loading' !== r.state && (r.state = e),
                  this._loadTile(r, this._tileLoaded.bind(this, r, t, e)))
              }),
              (r.prototype._tileLoaded = function (e, r, n, i) {
                if (i)
                  return (
                    (e.state = 'errored'),
                    void (404 !== i.status
                      ? this._source.fire(new t.ErrorEvent(i, { tile: e }))
                      : this.update(this.transform))
                  )
                ;(e.timeAdded = t.browser.now()),
                  'expired' === n && (e.refreshedUponExpiration = !0),
                  this._setTileReloadTimer(r, e),
                  'raster-dem' === this.getSource().type &&
                    e.dem &&
                    this._backfillDEM(e),
                  this._state.initializeTileState(
                    e,
                    this.map ? this.map.painter : null
                  ),
                  this._source.fire(
                    new t.Event('data', {
                      dataType: 'source',
                      tile: e,
                      coord: e.tileID,
                    })
                  )
              }),
              (r.prototype._backfillDEM = function (t) {
                for (
                  var e = this.getRenderableIds(), r = 0;
                  r < e.length;
                  r++
                ) {
                  var n = e[r]
                  if (t.neighboringTiles && t.neighboringTiles[n]) {
                    var i = this.getTileByID(n)
                    o(t, i), o(i, t)
                  }
                }
                function o(t, e) {
                  t.needsHillshadePrepare = !0
                  var r = e.tileID.canonical.x - t.tileID.canonical.x,
                    n = e.tileID.canonical.y - t.tileID.canonical.y,
                    i = Math.pow(2, t.tileID.canonical.z),
                    o = e.tileID.key
                  ;(0 === r && 0 === n) ||
                    Math.abs(n) > 1 ||
                    (Math.abs(r) > 1 &&
                      (1 === Math.abs(r + i)
                        ? (r += i)
                        : 1 === Math.abs(r - i) && (r -= i)),
                    e.dem &&
                      t.dem &&
                      (t.dem.backfillBorder(e.dem, r, n),
                      t.neighboringTiles &&
                        t.neighboringTiles[o] &&
                        (t.neighboringTiles[o].backfilled = !0)))
                }
              }),
              (r.prototype.getTile = function (t) {
                return this.getTileByID(t.key)
              }),
              (r.prototype.getTileByID = function (t) {
                return this._tiles[t]
              }),
              (r.prototype._retainLoadedChildren = function (t, e, r, n) {
                for (var i in this._tiles) {
                  var o = this._tiles[i]
                  if (
                    !(
                      n[i] ||
                      !o.hasData() ||
                      o.tileID.overscaledZ <= e ||
                      o.tileID.overscaledZ > r
                    )
                  ) {
                    for (
                      var a = o.tileID;
                      o && o.tileID.overscaledZ > e + 1;

                    ) {
                      var s = o.tileID.scaledTo(o.tileID.overscaledZ - 1)
                      ;(o = this._tiles[s.key]) && o.hasData() && (a = s)
                    }
                    for (var l = a; l.overscaledZ > e; )
                      if (t[(l = l.scaledTo(l.overscaledZ - 1)).key]) {
                        n[a.key] = a
                        break
                      }
                  }
                }
              }),
              (r.prototype.findLoadedParent = function (t, e) {
                if (t.key in this._loadedParentTiles) {
                  var r = this._loadedParentTiles[t.key]
                  return r && r.tileID.overscaledZ >= e ? r : null
                }
                for (var n = t.overscaledZ - 1; n >= e; n--) {
                  var i = t.scaledTo(n),
                    o = this._getLoadedTile(i)
                  if (o) return o
                }
              }),
              (r.prototype._getLoadedTile = function (t) {
                var e = this._tiles[t.key]
                return e && e.hasData()
                  ? e
                  : this._cache.getByKey(t.wrapped().key)
              }),
              (r.prototype.updateCacheSize = function (t) {
                var e = Math.ceil(t.width / this._source.tileSize) + 1,
                  r = Math.ceil(t.height / this._source.tileSize) + 1,
                  n = Math.floor(e * r * 5),
                  i =
                    'number' == typeof this._maxTileCacheSize
                      ? Math.min(this._maxTileCacheSize, n)
                      : n
                this._cache.setMaxSize(i)
              }),
              (r.prototype.handleWrapJump = function (t) {
                var e = Math.round(
                  (t - (void 0 === this._prevLng ? t : this._prevLng)) / 360
                )
                if (((this._prevLng = t), e)) {
                  var r = {}
                  for (var n in this._tiles) {
                    var i = this._tiles[n]
                    ;(i.tileID = i.tileID.unwrapTo(i.tileID.wrap + e)),
                      (r[i.tileID.key] = i)
                  }
                  for (var o in ((this._tiles = r), this._timers))
                    clearTimeout(this._timers[o]), delete this._timers[o]
                  for (var a in this._tiles)
                    this._setTileReloadTimer(a, this._tiles[a])
                }
              }),
              (r.prototype.update = function (e) {
                var n = this
                if (
                  ((this.transform = e), this._sourceLoaded && !this._paused)
                ) {
                  var i
                  this.updateCacheSize(e),
                    this.handleWrapJump(this.transform.center.lng),
                    (this._coveredTiles = {}),
                    this.used
                      ? this._source.tileID
                        ? (i = e
                            .getVisibleUnwrappedCoordinates(this._source.tileID)
                            .map(function (e) {
                              return new t.OverscaledTileID(
                                e.canonical.z,
                                e.wrap,
                                e.canonical.z,
                                e.canonical.x,
                                e.canonical.y
                              )
                            }))
                        : ((i = e.coveringTiles({
                            tileSize: this._source.tileSize,
                            minzoom: this._source.minzoom,
                            maxzoom: this._source.maxzoom,
                            roundZoom: this._source.roundZoom,
                            reparseOverscaled: this._source.reparseOverscaled,
                          })),
                          this._source.hasTile &&
                            (i = i.filter(function (t) {
                              return n._source.hasTile(t)
                            })))
                      : (i = [])
                  var o = e.coveringZoomLevel(this._source),
                    a = Math.max(o - r.maxOverzooming, this._source.minzoom),
                    s = Math.max(o + r.maxUnderzooming, this._source.minzoom),
                    l = this._updateRetainedTiles(i, o)
                  if (Lt(this._source.type)) {
                    for (
                      var u = {}, c = {}, p = 0, h = Object.keys(l);
                      p < h.length;
                      p += 1
                    ) {
                      var f = h[p],
                        d = l[f],
                        m = this._tiles[f]
                      if (
                        m &&
                        !(m.fadeEndTime && m.fadeEndTime <= t.browser.now())
                      ) {
                        var y = this.findLoadedParent(d, a)
                        y &&
                          (this._addTile(y.tileID),
                          (u[y.tileID.key] = y.tileID)),
                          (c[f] = d)
                      }
                    }
                    for (var v in (this._retainLoadedChildren(c, o, s, l), u))
                      l[v] || ((this._coveredTiles[v] = !0), (l[v] = u[v]))
                  }
                  for (var g in l) this._tiles[g].clearFadeHold()
                  for (
                    var _ = 0, x = t.keysDifference(this._tiles, l);
                    _ < x.length;
                    _ += 1
                  ) {
                    var b = x[_],
                      w = this._tiles[b]
                    w.hasSymbolBuckets && !w.holdingForFade()
                      ? w.setHoldDuration(this.map._fadeDuration)
                      : (w.hasSymbolBuckets && !w.symbolFadeFinished()) ||
                        this._removeTile(b)
                  }
                  this._updateLoadedParentTileCache()
                }
              }),
              (r.prototype.releaseSymbolFadeTiles = function () {
                for (var t in this._tiles)
                  this._tiles[t].holdingForFade() && this._removeTile(t)
              }),
              (r.prototype._updateRetainedTiles = function (t, e) {
                for (
                  var n = {},
                    i = {},
                    o = Math.max(e - r.maxOverzooming, this._source.minzoom),
                    a = Math.max(e + r.maxUnderzooming, this._source.minzoom),
                    s = {},
                    l = 0,
                    u = t;
                  l < u.length;
                  l += 1
                ) {
                  var c = u[l],
                    p = this._addTile(c)
                  ;(n[c.key] = c),
                    p.hasData() || (e < this._source.maxzoom && (s[c.key] = c))
                }
                this._retainLoadedChildren(s, e, a, n)
                for (var h = 0, f = t; h < f.length; h += 1) {
                  var d = f[h],
                    m = this._tiles[d.key]
                  if (!m.hasData()) {
                    if (e + 1 > this._source.maxzoom) {
                      var y = d.children(this._source.maxzoom)[0],
                        v = this.getTile(y)
                      if (v && v.hasData()) {
                        n[y.key] = y
                        continue
                      }
                    } else {
                      var g = d.children(this._source.maxzoom)
                      if (
                        n[g[0].key] &&
                        n[g[1].key] &&
                        n[g[2].key] &&
                        n[g[3].key]
                      )
                        continue
                    }
                    for (
                      var _ = m.wasRequested(), x = d.overscaledZ - 1;
                      x >= o;
                      --x
                    ) {
                      var b = d.scaledTo(x)
                      if (i[b.key]) break
                      if (
                        ((i[b.key] = !0),
                        !(m = this.getTile(b)) && _ && (m = this._addTile(b)),
                        m &&
                          ((n[b.key] = b), (_ = m.wasRequested()), m.hasData()))
                      )
                        break
                    }
                  }
                }
                return n
              }),
              (r.prototype._updateLoadedParentTileCache = function () {
                for (var t in ((this._loadedParentTiles = {}), this._tiles)) {
                  for (
                    var e = [], r = void 0, n = this._tiles[t].tileID;
                    n.overscaledZ > 0;

                  ) {
                    if (n.key in this._loadedParentTiles) {
                      r = this._loadedParentTiles[n.key]
                      break
                    }
                    e.push(n.key)
                    var i = n.scaledTo(n.overscaledZ - 1)
                    if ((r = this._getLoadedTile(i))) break
                    n = i
                  }
                  for (var o = 0, a = e; o < a.length; o += 1)
                    this._loadedParentTiles[a[o]] = r
                }
              }),
              (r.prototype._addTile = function (e) {
                var r = this._tiles[e.key]
                if (r) return r
                ;(r = this._cache.getAndRemove(e)) &&
                  (this._setTileReloadTimer(e.key, r),
                  (r.tileID = e),
                  this._state.initializeTileState(
                    r,
                    this.map ? this.map.painter : null
                  ),
                  this._cacheTimers[e.key] &&
                    (clearTimeout(this._cacheTimers[e.key]),
                    delete this._cacheTimers[e.key],
                    this._setTileReloadTimer(e.key, r)))
                var n = Boolean(r)
                return (
                  n ||
                    ((r = new t.Tile(
                      e,
                      this._source.tileSize * e.overscaleFactor()
                    )),
                    this._loadTile(
                      r,
                      this._tileLoaded.bind(this, r, e.key, r.state)
                    )),
                  r
                    ? (r.uses++,
                      (this._tiles[e.key] = r),
                      n ||
                        this._source.fire(
                          new t.Event('dataloading', {
                            tile: r,
                            coord: r.tileID,
                            dataType: 'source',
                          })
                        ),
                      r)
                    : null
                )
              }),
              (r.prototype._setTileReloadTimer = function (t, e) {
                var r = this
                t in this._timers &&
                  (clearTimeout(this._timers[t]), delete this._timers[t])
                var n = e.getExpiryTimeout()
                n &&
                  (this._timers[t] = setTimeout(function () {
                    r._reloadTile(t, 'expired'), delete r._timers[t]
                  }, n))
              }),
              (r.prototype._removeTile = function (t) {
                var e = this._tiles[t]
                e &&
                  (e.uses--,
                  delete this._tiles[t],
                  this._timers[t] &&
                    (clearTimeout(this._timers[t]), delete this._timers[t]),
                  e.uses > 0 ||
                    (e.hasData() && 'reloading' !== e.state
                      ? this._cache.add(e.tileID, e, e.getExpiryTimeout())
                      : ((e.aborted = !0),
                        this._abortTile(e),
                        this._unloadTile(e))))
              }),
              (r.prototype.clearTiles = function () {
                for (var t in ((this._shouldReloadOnResume = !1),
                (this._paused = !1),
                this._tiles))
                  this._removeTile(t)
                this._cache.reset()
              }),
              (r.prototype.tilesIn = function (e, r, n) {
                var i = this,
                  o = [],
                  a = this.transform
                if (!a) return o
                for (
                  var s = n ? a.getCameraQueryGeometry(e) : e,
                    l = e.map(function (t) {
                      return a.pointCoordinate(t)
                    }),
                    u = s.map(function (t) {
                      return a.pointCoordinate(t)
                    }),
                    c = this.getIds(),
                    p = 1 / 0,
                    h = 1 / 0,
                    f = -1 / 0,
                    d = -1 / 0,
                    m = 0,
                    y = u;
                  m < y.length;
                  m += 1
                ) {
                  var v = y[m]
                  ;(p = Math.min(p, v.x)),
                    (h = Math.min(h, v.y)),
                    (f = Math.max(f, v.x)),
                    (d = Math.max(d, v.y))
                }
                for (
                  var g = function (e) {
                      var n = i._tiles[c[e]]
                      if (!n.holdingForFade()) {
                        var s = n.tileID,
                          m = Math.pow(2, a.zoom - n.tileID.overscaledZ),
                          y = (r * n.queryPadding * t.EXTENT) / n.tileSize / m,
                          v = [
                            s.getTilePoint(new t.MercatorCoordinate(p, h)),
                            s.getTilePoint(new t.MercatorCoordinate(f, d)),
                          ]
                        if (
                          v[0].x - y < t.EXTENT &&
                          v[0].y - y < t.EXTENT &&
                          v[1].x + y >= 0 &&
                          v[1].y + y >= 0
                        ) {
                          var g = l.map(function (t) {
                              return s.getTilePoint(t)
                            }),
                            _ = u.map(function (t) {
                              return s.getTilePoint(t)
                            })
                          o.push({
                            tile: n,
                            tileID: s,
                            queryGeometry: g,
                            cameraQueryGeometry: _,
                            scale: m,
                          })
                        }
                      }
                    },
                    _ = 0;
                  _ < c.length;
                  _++
                )
                  g(_)
                return o
              }),
              (r.prototype.getVisibleCoordinates = function (t) {
                for (
                  var e = this,
                    r = this.getRenderableIds(t).map(function (t) {
                      return e._tiles[t].tileID
                    }),
                    n = 0,
                    i = r;
                  n < i.length;
                  n += 1
                ) {
                  var o = i[n]
                  o.posMatrix = this.transform.calculatePosMatrix(
                    o.toUnwrapped()
                  )
                }
                return r
              }),
              (r.prototype.hasTransition = function () {
                if (this._source.hasTransition()) return !0
                if (Lt(this._source.type))
                  for (var e in this._tiles) {
                    var r = this._tiles[e]
                    if (
                      void 0 !== r.fadeEndTime &&
                      r.fadeEndTime >= t.browser.now()
                    )
                      return !0
                  }
                return !1
              }),
              (r.prototype.setFeatureState = function (t, e, r) {
                this._state.updateState((t = t || '_geojsonTileLayer'), e, r)
              }),
              (r.prototype.removeFeatureState = function (t, e, r) {
                this._state.removeFeatureState(
                  (t = t || '_geojsonTileLayer'),
                  e,
                  r
                )
              }),
              (r.prototype.getFeatureState = function (t, e) {
                return this._state.getState((t = t || '_geojsonTileLayer'), e)
              }),
              (r.prototype.setDependencies = function (t, e, r) {
                var n = this._tiles[t]
                n && n.setDependencies(e, r)
              }),
              (r.prototype.reloadTilesForDependencies = function (t, e) {
                for (var r in this._tiles)
                  this._tiles[r].hasDependency(t, e) &&
                    this._reloadTile(r, 'reloading')
                this._cache.filter(function (r) {
                  return !r.hasDependency(t, e)
                })
              }),
              r
            )
          })(t.Evented)
          function Mt(t, e) {
            var r = Math.abs(2 * t.wrap) - +(t.wrap < 0),
              n = Math.abs(2 * e.wrap) - +(e.wrap < 0)
            return (
              t.overscaledZ - e.overscaledZ ||
              n - r ||
              e.canonical.y - t.canonical.y ||
              e.canonical.x - t.canonical.x
            )
          }
          function Lt(t) {
            return 'raster' === t || 'image' === t || 'video' === t
          }
          function zt() {
            return new t.window.Worker(hi.workerUrl)
          }
          ;(Pt.maxOverzooming = 10), (Pt.maxUnderzooming = 3)
          var Ot = function () {
            this.active = {}
          }
          ;(Ot.prototype.acquire = function (t) {
            if (!this.workers)
              for (this.workers = []; this.workers.length < Ot.workerCount; )
                this.workers.push(new zt())
            return (this.active[t] = !0), this.workers.slice()
          }),
            (Ot.prototype.release = function (t) {
              delete this.active[t],
                0 === Object.keys(this.active).length &&
                  (this.workers.forEach(function (t) {
                    t.terminate()
                  }),
                  (this.workers = null))
            })
          var Dt,
            Rt = Math.floor(t.browser.hardwareConcurrency / 2)
          function Ft(e, r) {
            var n = {}
            for (var i in e) 'ref' !== i && (n[i] = e[i])
            return (
              t.refProperties.forEach(function (t) {
                t in r && (n[t] = r[t])
              }),
              n
            )
          }
          function Bt(t) {
            t = t.slice()
            for (var e = Object.create(null), r = 0; r < t.length; r++)
              e[t[r].id] = t[r]
            for (var n = 0; n < t.length; n++)
              'ref' in t[n] && (t[n] = Ft(t[n], e[t[n].ref]))
            return t
          }
          Ot.workerCount = Math.max(Math.min(Rt, 6), 1)
          var Nt = {
            setStyle: 'setStyle',
            addLayer: 'addLayer',
            removeLayer: 'removeLayer',
            setPaintProperty: 'setPaintProperty',
            setLayoutProperty: 'setLayoutProperty',
            setFilter: 'setFilter',
            addSource: 'addSource',
            removeSource: 'removeSource',
            setGeoJSONSourceData: 'setGeoJSONSourceData',
            setLayerZoomRange: 'setLayerZoomRange',
            setLayerProperty: 'setLayerProperty',
            setCenter: 'setCenter',
            setZoom: 'setZoom',
            setBearing: 'setBearing',
            setPitch: 'setPitch',
            setSprite: 'setSprite',
            setGlyphs: 'setGlyphs',
            setTransition: 'setTransition',
            setLight: 'setLight',
          }
          function Ut(t, e, r) {
            r.push({ command: Nt.addSource, args: [t, e[t]] })
          }
          function jt(t, e, r) {
            e.push({ command: Nt.removeSource, args: [t] }), (r[t] = !0)
          }
          function Vt(t, e, r, n) {
            jt(t, r, n), Ut(t, e, r)
          }
          function qt(e, r, n) {
            var i
            for (i in e[n])
              if (
                e[n].hasOwnProperty(i) &&
                'data' !== i &&
                !t.deepEqual(e[n][i], r[n][i])
              )
                return !1
            for (i in r[n])
              if (
                r[n].hasOwnProperty(i) &&
                'data' !== i &&
                !t.deepEqual(e[n][i], r[n][i])
              )
                return !1
            return !0
          }
          function Gt(e, r, n, i, o, a) {
            var s
            for (s in ((r = r || {}), (e = e || {})))
              e.hasOwnProperty(s) &&
                (t.deepEqual(e[s], r[s]) ||
                  n.push({ command: a, args: [i, s, r[s], o] }))
            for (s in r)
              r.hasOwnProperty(s) &&
                !e.hasOwnProperty(s) &&
                (t.deepEqual(e[s], r[s]) ||
                  n.push({ command: a, args: [i, s, r[s], o] }))
          }
          function $t(t) {
            return t.id
          }
          function Zt(t, e) {
            return (t[e.id] = e), t
          }
          var Xt = function (t, e, r) {
            var n = (this.boxCells = []),
              i = (this.circleCells = [])
            ;(this.xCellCount = Math.ceil(t / r)),
              (this.yCellCount = Math.ceil(e / r))
            for (var o = 0; o < this.xCellCount * this.yCellCount; o++)
              n.push([]), i.push([])
            ;(this.circleKeys = []),
              (this.boxKeys = []),
              (this.bboxes = []),
              (this.circles = []),
              (this.width = t),
              (this.height = e),
              (this.xScale = this.xCellCount / t),
              (this.yScale = this.yCellCount / e),
              (this.boxUid = 0),
              (this.circleUid = 0)
          }
          function Kt(e, r, n, i, o) {
            var a = t.create()
            return (
              r
                ? (t.scale(a, a, [1 / o, 1 / o, 1]),
                  n || t.rotateZ(a, a, i.angle))
                : t.multiply(a, i.labelPlaneMatrix, e),
              a
            )
          }
          function Wt(e, r, n, i, o) {
            if (r) {
              var a = t.clone(e)
              return t.scale(a, a, [o, o, 1]), n || t.rotateZ(a, a, -i.angle), a
            }
            return i.glCoordMatrix
          }
          function Ht(e, r) {
            var n = [e.x, e.y, 0, 1]
            ae(n, n, r)
            var i = n[3]
            return {
              point: new t.Point(n[0] / i, n[1] / i),
              signedDistanceFromCamera: i,
            }
          }
          function Jt(t, e) {
            var r = t[0] / t[3],
              n = t[1] / t[3]
            return r >= -e[0] && r <= e[0] && n >= -e[1] && n <= e[1]
          }
          function Yt(e, r, n, i, o, a, s, l) {
            var u = i ? e.textSizeData : e.iconSizeData,
              c = t.evaluateSizeForZoom(u, n.transform.zoom),
              p = [(256 / n.width) * 2 + 1, (256 / n.height) * 2 + 1],
              h = i
                ? e.text.dynamicLayoutVertexArray
                : e.icon.dynamicLayoutVertexArray
            h.clear()
            for (
              var f = e.lineVertexArray,
                d = i ? e.text.placedSymbolArray : e.icon.placedSymbolArray,
                m = n.transform.width / n.transform.height,
                y = !1,
                v = 0;
              v < d.length;
              v++
            ) {
              var g = d.get(v)
              if (g.hidden || (g.writingMode === t.WritingMode.vertical && !y))
                oe(g.numGlyphs, h)
              else {
                y = !1
                var _ = [g.anchorX, g.anchorY, 0, 1]
                if ((t.transformMat4(_, _, r), Jt(_, p))) {
                  var x =
                      0.5 + (_[3] / n.transform.cameraToCenterDistance) * 0.5,
                    b = t.evaluateSizeForFeature(u, c, g),
                    w = s ? b * x : b / x,
                    E = new t.Point(g.anchorX, g.anchorY),
                    S = Ht(E, o).point,
                    T = {},
                    I = ee(
                      g,
                      w,
                      !1,
                      l,
                      r,
                      o,
                      a,
                      e.glyphOffsetArray,
                      f,
                      h,
                      S,
                      E,
                      T,
                      m
                    )
                  ;(y = I.useVertical),
                    (I.notEnoughRoom ||
                      y ||
                      (I.needsFlipping &&
                        ee(
                          g,
                          w,
                          !0,
                          l,
                          r,
                          o,
                          a,
                          e.glyphOffsetArray,
                          f,
                          h,
                          S,
                          E,
                          T,
                          m
                        ).notEnoughRoom)) &&
                      oe(g.numGlyphs, h)
                } else oe(g.numGlyphs, h)
              }
            }
            i
              ? e.text.dynamicLayoutVertexBuffer.updateData(h)
              : e.icon.dynamicLayoutVertexBuffer.updateData(h)
          }
          function Qt(t, e, r, n, i, o, a, s, l, u, c, p) {
            var h = s.glyphStartIndex + s.numGlyphs,
              f = s.lineStartIndex,
              d = s.lineStartIndex + s.lineLength,
              m = e.getoffsetX(s.glyphStartIndex),
              y = e.getoffsetX(h - 1),
              v = ne(t * m, r, n, i, o, a, s.segment, f, d, l, u, c, p)
            if (!v) return null
            var g = ne(t * y, r, n, i, o, a, s.segment, f, d, l, u, c, p)
            return g ? { first: v, last: g } : null
          }
          function te(e, r, n, i) {
            return e === t.WritingMode.horizontal &&
              Math.abs(n.y - r.y) > Math.abs(n.x - r.x) * i
              ? { useVertical: !0 }
              : (e === t.WritingMode.vertical ? r.y < n.y : r.x > n.x)
              ? { needsFlipping: !0 }
              : null
          }
          function ee(e, r, n, i, o, a, s, l, u, c, p, h, f, d) {
            var m,
              y = r / 24,
              v = e.lineOffsetX * y,
              g = e.lineOffsetY * y
            if (e.numGlyphs > 1) {
              var _ = e.glyphStartIndex + e.numGlyphs,
                x = e.lineStartIndex,
                b = e.lineStartIndex + e.lineLength,
                w = Qt(y, l, v, g, n, p, h, e, u, a, f, !1)
              if (!w) return { notEnoughRoom: !0 }
              var E = Ht(w.first.point, s).point,
                S = Ht(w.last.point, s).point
              if (i && !n) {
                var T = te(e.writingMode, E, S, d)
                if (T) return T
              }
              m = [w.first]
              for (var I = e.glyphStartIndex + 1; I < _ - 1; I++)
                m.push(
                  ne(
                    y * l.getoffsetX(I),
                    v,
                    g,
                    n,
                    p,
                    h,
                    e.segment,
                    x,
                    b,
                    u,
                    a,
                    f,
                    !1
                  )
                )
              m.push(w.last)
            } else {
              if (i && !n) {
                var C = Ht(h, o).point,
                  A = e.lineStartIndex + e.segment + 1,
                  k = new t.Point(u.getx(A), u.gety(A)),
                  P = Ht(k, o),
                  M =
                    P.signedDistanceFromCamera > 0
                      ? P.point
                      : re(h, k, C, 1, o),
                  L = te(e.writingMode, C, M, d)
                if (L) return L
              }
              var z = ne(
                y * l.getoffsetX(e.glyphStartIndex),
                v,
                g,
                n,
                p,
                h,
                e.segment,
                e.lineStartIndex,
                e.lineStartIndex + e.lineLength,
                u,
                a,
                f,
                !1
              )
              if (!z) return { notEnoughRoom: !0 }
              m = [z]
            }
            for (var O = 0, D = m; O < D.length; O += 1) {
              var R = D[O]
              t.addDynamicAttributes(c, R.point, R.angle)
            }
            return {}
          }
          function re(t, e, r, n, i) {
            var o = Ht(t.add(t.sub(e)._unit()), i).point,
              a = r.sub(o)
            return r.add(a._mult(n / a.mag()))
          }
          function ne(e, r, n, i, o, a, s, l, u, c, p, h, f) {
            var d = i ? e - r : e + r,
              m = d > 0 ? 1 : -1,
              y = 0
            i && ((m *= -1), (y = Math.PI)), m < 0 && (y += Math.PI)
            for (
              var v = m > 0 ? l + s : l + s + 1,
                g = v,
                _ = o,
                x = o,
                b = 0,
                w = 0,
                E = Math.abs(d);
              b + w <= E;

            ) {
              if ((v += m) < l || v >= u) return null
              if (((x = _), void 0 === (_ = h[v]))) {
                var S = new t.Point(c.getx(v), c.gety(v)),
                  T = Ht(S, p)
                if (T.signedDistanceFromCamera > 0) _ = h[v] = T.point
                else {
                  var I = v - m
                  _ = re(
                    0 === b ? a : new t.Point(c.getx(I), c.gety(I)),
                    S,
                    x,
                    E - b + 1,
                    p
                  )
                }
              }
              ;(b += w), (w = x.dist(_))
            }
            var C = (E - b) / w,
              A = _.sub(x),
              k = A.mult(C)._add(x)
            return (
              k._add(
                A._unit()
                  ._perp()
                  ._mult(n * m)
              ),
              {
                point: k,
                angle: y + Math.atan2(_.y - x.y, _.x - x.x),
                tileDistance: f
                  ? {
                      prevTileDistance:
                        v - m === g
                          ? 0
                          : c.gettileUnitDistanceFromAnchor(v - m),
                      lastSegmentViewportDistance: E - b,
                    }
                  : null,
              }
            )
          }
          ;(Xt.prototype.keysLength = function () {
            return this.boxKeys.length + this.circleKeys.length
          }),
            (Xt.prototype.insert = function (t, e, r, n, i) {
              this._forEachCell(e, r, n, i, this._insertBoxCell, this.boxUid++),
                this.boxKeys.push(t),
                this.bboxes.push(e),
                this.bboxes.push(r),
                this.bboxes.push(n),
                this.bboxes.push(i)
            }),
            (Xt.prototype.insertCircle = function (t, e, r, n) {
              this._forEachCell(
                e - n,
                r - n,
                e + n,
                r + n,
                this._insertCircleCell,
                this.circleUid++
              ),
                this.circleKeys.push(t),
                this.circles.push(e),
                this.circles.push(r),
                this.circles.push(n)
            }),
            (Xt.prototype._insertBoxCell = function (t, e, r, n, i, o) {
              this.boxCells[i].push(o)
            }),
            (Xt.prototype._insertCircleCell = function (t, e, r, n, i, o) {
              this.circleCells[i].push(o)
            }),
            (Xt.prototype._query = function (t, e, r, n, i, o) {
              if (r < 0 || t > this.width || n < 0 || e > this.height)
                return !i && []
              var a = []
              if (t <= 0 && e <= 0 && this.width <= r && this.height <= n) {
                if (i) return !0
                for (var s = 0; s < this.boxKeys.length; s++)
                  a.push({
                    key: this.boxKeys[s],
                    x1: this.bboxes[4 * s],
                    y1: this.bboxes[4 * s + 1],
                    x2: this.bboxes[4 * s + 2],
                    y2: this.bboxes[4 * s + 3],
                  })
                for (var l = 0; l < this.circleKeys.length; l++) {
                  var u = this.circles[3 * l],
                    c = this.circles[3 * l + 1],
                    p = this.circles[3 * l + 2]
                  a.push({
                    key: this.circleKeys[l],
                    x1: u - p,
                    y1: c - p,
                    x2: u + p,
                    y2: c + p,
                  })
                }
                return o ? a.filter(o) : a
              }
              return (
                this._forEachCell(
                  t,
                  e,
                  r,
                  n,
                  this._queryCell,
                  a,
                  { hitTest: i, seenUids: { box: {}, circle: {} } },
                  o
                ),
                i ? a.length > 0 : a
              )
            }),
            (Xt.prototype._queryCircle = function (t, e, r, n, i) {
              var o = t - r,
                a = t + r,
                s = e - r,
                l = e + r
              if (a < 0 || o > this.width || l < 0 || s > this.height)
                return !n && []
              var u = []
              return (
                this._forEachCell(
                  o,
                  s,
                  a,
                  l,
                  this._queryCellCircle,
                  u,
                  {
                    hitTest: n,
                    circle: { x: t, y: e, radius: r },
                    seenUids: { box: {}, circle: {} },
                  },
                  i
                ),
                n ? u.length > 0 : u
              )
            }),
            (Xt.prototype.query = function (t, e, r, n, i) {
              return this._query(t, e, r, n, !1, i)
            }),
            (Xt.prototype.hitTest = function (t, e, r, n, i) {
              return this._query(t, e, r, n, !0, i)
            }),
            (Xt.prototype.hitTestCircle = function (t, e, r, n) {
              return this._queryCircle(t, e, r, !0, n)
            }),
            (Xt.prototype._queryCell = function (t, e, r, n, i, o, a, s) {
              var l = a.seenUids,
                u = this.boxCells[i]
              if (null !== u)
                for (var c = this.bboxes, p = 0, h = u; p < h.length; p += 1) {
                  var f = h[p]
                  if (!l.box[f]) {
                    l.box[f] = !0
                    var d = 4 * f
                    if (
                      t <= c[d + 2] &&
                      e <= c[d + 3] &&
                      r >= c[d + 0] &&
                      n >= c[d + 1] &&
                      (!s || s(this.boxKeys[f]))
                    ) {
                      if (a.hitTest) return o.push(!0), !0
                      o.push({
                        key: this.boxKeys[f],
                        x1: c[d],
                        y1: c[d + 1],
                        x2: c[d + 2],
                        y2: c[d + 3],
                      })
                    }
                  }
                }
              var m = this.circleCells[i]
              if (null !== m)
                for (var y = this.circles, v = 0, g = m; v < g.length; v += 1) {
                  var _ = g[v]
                  if (!l.circle[_]) {
                    l.circle[_] = !0
                    var x = 3 * _
                    if (
                      this._circleAndRectCollide(
                        y[x],
                        y[x + 1],
                        y[x + 2],
                        t,
                        e,
                        r,
                        n
                      ) &&
                      (!s || s(this.circleKeys[_]))
                    ) {
                      if (a.hitTest) return o.push(!0), !0
                      var b = y[x],
                        w = y[x + 1],
                        E = y[x + 2]
                      o.push({
                        key: this.circleKeys[_],
                        x1: b - E,
                        y1: w - E,
                        x2: b + E,
                        y2: w + E,
                      })
                    }
                  }
                }
            }),
            (Xt.prototype._queryCellCircle = function (t, e, r, n, i, o, a, s) {
              var l = a.circle,
                u = a.seenUids,
                c = this.boxCells[i]
              if (null !== c)
                for (var p = this.bboxes, h = 0, f = c; h < f.length; h += 1) {
                  var d = f[h]
                  if (!u.box[d]) {
                    u.box[d] = !0
                    var m = 4 * d
                    if (
                      this._circleAndRectCollide(
                        l.x,
                        l.y,
                        l.radius,
                        p[m + 0],
                        p[m + 1],
                        p[m + 2],
                        p[m + 3]
                      ) &&
                      (!s || s(this.boxKeys[d]))
                    )
                      return o.push(!0), !0
                  }
                }
              var y = this.circleCells[i]
              if (null !== y)
                for (var v = this.circles, g = 0, _ = y; g < _.length; g += 1) {
                  var x = _[g]
                  if (!u.circle[x]) {
                    u.circle[x] = !0
                    var b = 3 * x
                    if (
                      this._circlesCollide(
                        v[b],
                        v[b + 1],
                        v[b + 2],
                        l.x,
                        l.y,
                        l.radius
                      ) &&
                      (!s || s(this.circleKeys[x]))
                    )
                      return o.push(!0), !0
                  }
                }
            }),
            (Xt.prototype._forEachCell = function (t, e, r, n, i, o, a, s) {
              for (
                var l = this._convertToXCellCoord(t),
                  u = this._convertToYCellCoord(e),
                  c = this._convertToXCellCoord(r),
                  p = this._convertToYCellCoord(n),
                  h = l;
                h <= c;
                h++
              )
                for (var f = u; f <= p; f++)
                  if (
                    i.call(this, t, e, r, n, this.xCellCount * f + h, o, a, s)
                  )
                    return
            }),
            (Xt.prototype._convertToXCellCoord = function (t) {
              return Math.max(
                0,
                Math.min(this.xCellCount - 1, Math.floor(t * this.xScale))
              )
            }),
            (Xt.prototype._convertToYCellCoord = function (t) {
              return Math.max(
                0,
                Math.min(this.yCellCount - 1, Math.floor(t * this.yScale))
              )
            }),
            (Xt.prototype._circlesCollide = function (t, e, r, n, i, o) {
              var a = n - t,
                s = i - e,
                l = r + o
              return l * l > a * a + s * s
            }),
            (Xt.prototype._circleAndRectCollide = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a
            ) {
              var s = (o - n) / 2,
                l = Math.abs(t - (n + s))
              if (l > s + r) return !1
              var u = (a - i) / 2,
                c = Math.abs(e - (i + u))
              if (c > u + r) return !1
              if (l <= s || c <= u) return !0
              var p = l - s,
                h = c - u
              return p * p + h * h <= r * r
            })
          var ie = new Float32Array([
            -1 / 0,
            -1 / 0,
            0,
            -1 / 0,
            -1 / 0,
            0,
            -1 / 0,
            -1 / 0,
            0,
            -1 / 0,
            -1 / 0,
            0,
          ])
          function oe(t, e) {
            for (var r = 0; r < t; r++) {
              var n = e.length
              e.resize(n + 4), e.float32.set(ie, 3 * n)
            }
          }
          function ae(t, e, r) {
            var n = e[0],
              i = e[1]
            return (
              (t[0] = r[0] * n + r[4] * i + r[12]),
              (t[1] = r[1] * n + r[5] * i + r[13]),
              (t[3] = r[3] * n + r[7] * i + r[15]),
              t
            )
          }
          var se = function (t, e, r) {
            void 0 === e && (e = new Xt(t.width + 200, t.height + 200, 25)),
              void 0 === r && (r = new Xt(t.width + 200, t.height + 200, 25)),
              (this.transform = t),
              (this.grid = e),
              (this.ignoredGrid = r),
              (this.pitchfactor =
                Math.cos(t._pitch) * t.cameraToCenterDistance),
              (this.screenRightBoundary = t.width + 100),
              (this.screenBottomBoundary = t.height + 100),
              (this.gridRightBoundary = t.width + 200),
              (this.gridBottomBoundary = t.height + 200)
          }
          function le(t, e, r) {
            t[e + 4] = r ? 1 : 0
          }
          function ue(e, r, n) {
            return (
              r *
              (t.EXTENT / (e.tileSize * Math.pow(2, n - e.tileID.overscaledZ)))
            )
          }
          ;(se.prototype.placeCollisionBox = function (t, e, r, n, i) {
            var o = this.projectAndGetPerspectiveRatio(
                n,
                t.anchorPointX,
                t.anchorPointY
              ),
              a = r * o.perspectiveRatio,
              s = t.x1 * a + o.point.x,
              l = t.y1 * a + o.point.y,
              u = t.x2 * a + o.point.x,
              c = t.y2 * a + o.point.y
            return !this.isInsideGrid(s, l, u, c) ||
              (!e && this.grid.hitTest(s, l, u, c, i))
              ? { box: [], offscreen: !1 }
              : { box: [s, l, u, c], offscreen: this.isOffscreen(s, l, u, c) }
          }),
            (se.prototype.approximateTileDistance = function (t, e, r, n, i) {
              var o = t.lastSegmentViewportDistance * r
              return (
                t.prevTileDistance +
                o +
                ((i ? 1 : n / this.pitchfactor) - 1) * o * Math.abs(Math.sin(e))
              )
            }),
            (se.prototype.placeCollisionCircles = function (
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u,
              c,
              p,
              h,
              f
            ) {
              var d = [],
                m = this.projectAnchor(u, o.anchorX, o.anchorY),
                y = l / 24,
                v = o.lineOffsetX * l,
                g = o.lineOffsetY * l,
                _ = new t.Point(o.anchorX, o.anchorY),
                x = Qt(y, s, v, g, !1, Ht(_, c).point, _, o, a, c, {}, !0),
                b = !1,
                w = !1,
                E = !0,
                S = m.perspectiveRatio * i,
                T = 1 / (i * n),
                I = 0,
                C = 0
              x &&
                ((I = this.approximateTileDistance(
                  x.first.tileDistance,
                  x.first.angle,
                  T,
                  m.cameraDistance,
                  h
                )),
                (C = this.approximateTileDistance(
                  x.last.tileDistance,
                  x.last.angle,
                  T,
                  m.cameraDistance,
                  h
                )))
              for (var A = 0; A < e.length; A += 5) {
                var k = e[A],
                  P = e[A + 1],
                  M = e[A + 2],
                  L = e[A + 3]
                if (!x || L < -I || L > C) le(e, A, !1)
                else {
                  var z = this.projectPoint(u, k, P),
                    O = M * S
                  if (d.length > 0) {
                    var D = z.x - d[d.length - 4],
                      R = z.y - d[d.length - 3]
                    if (O * O * 2 > D * D + R * R && A + 8 < e.length) {
                      var F = e[A + 8]
                      if (F > -I && F < C) {
                        le(e, A, !1)
                        continue
                      }
                    }
                  }
                  d.push(z.x, z.y, O, A / 5), le(e, A, !0)
                  var B = z.x - O,
                    N = z.y - O,
                    U = z.x + O,
                    j = z.y + O
                  if (
                    ((E = E && this.isOffscreen(B, N, U, j)),
                    (w = w || this.isInsideGrid(B, N, U, j)),
                    !r && this.grid.hitTestCircle(z.x, z.y, O, f))
                  ) {
                    if (!p) return { circles: [], offscreen: !1 }
                    b = !0
                  }
                }
              }
              return { circles: b || !w ? [] : d, offscreen: E }
            }),
            (se.prototype.queryRenderedSymbols = function (e) {
              if (
                0 === e.length ||
                (0 === this.grid.keysLength() &&
                  0 === this.ignoredGrid.keysLength())
              )
                return {}
              for (
                var r = [],
                  n = 1 / 0,
                  i = 1 / 0,
                  o = -1 / 0,
                  a = -1 / 0,
                  s = 0,
                  l = e;
                s < l.length;
                s += 1
              ) {
                var u = l[s],
                  c = new t.Point(u.x + 100, u.y + 100)
                ;(n = Math.min(n, c.x)),
                  (i = Math.min(i, c.y)),
                  (o = Math.max(o, c.x)),
                  (a = Math.max(a, c.y)),
                  r.push(c)
              }
              for (
                var p = {},
                  h = {},
                  f = 0,
                  d = this.grid
                    .query(n, i, o, a)
                    .concat(this.ignoredGrid.query(n, i, o, a));
                f < d.length;
                f += 1
              ) {
                var m = d[f],
                  y = m.key
                if (
                  (void 0 === p[y.bucketInstanceId] &&
                    (p[y.bucketInstanceId] = {}),
                  !p[y.bucketInstanceId][y.featureIndex])
                ) {
                  var v = [
                    new t.Point(m.x1, m.y1),
                    new t.Point(m.x2, m.y1),
                    new t.Point(m.x2, m.y2),
                    new t.Point(m.x1, m.y2),
                  ]
                  t.polygonIntersectsPolygon(r, v) &&
                    ((p[y.bucketInstanceId][y.featureIndex] = !0),
                    void 0 === h[y.bucketInstanceId] &&
                      (h[y.bucketInstanceId] = []),
                    h[y.bucketInstanceId].push(y.featureIndex))
                }
              }
              return h
            }),
            (se.prototype.insertCollisionBox = function (t, e, r, n, i) {
              ;(e ? this.ignoredGrid : this.grid).insert(
                { bucketInstanceId: r, featureIndex: n, collisionGroupID: i },
                t[0],
                t[1],
                t[2],
                t[3]
              )
            }),
            (se.prototype.insertCollisionCircles = function (t, e, r, n, i) {
              for (
                var o = e ? this.ignoredGrid : this.grid,
                  a = {
                    bucketInstanceId: r,
                    featureIndex: n,
                    collisionGroupID: i,
                  },
                  s = 0;
                s < t.length;
                s += 4
              )
                o.insertCircle(a, t[s], t[s + 1], t[s + 2])
            }),
            (se.prototype.projectAnchor = function (t, e, r) {
              var n = [e, r, 0, 1]
              return (
                ae(n, n, t),
                {
                  perspectiveRatio:
                    0.5 + (this.transform.cameraToCenterDistance / n[3]) * 0.5,
                  cameraDistance: n[3],
                }
              )
            }),
            (se.prototype.projectPoint = function (e, r, n) {
              var i = [r, n, 0, 1]
              return (
                ae(i, i, e),
                new t.Point(
                  ((i[0] / i[3] + 1) / 2) * this.transform.width + 100,
                  ((-i[1] / i[3] + 1) / 2) * this.transform.height + 100
                )
              )
            }),
            (se.prototype.projectAndGetPerspectiveRatio = function (e, r, n) {
              var i = [r, n, 0, 1]
              return (
                ae(i, i, e),
                {
                  point: new t.Point(
                    ((i[0] / i[3] + 1) / 2) * this.transform.width + 100,
                    ((-i[1] / i[3] + 1) / 2) * this.transform.height + 100
                  ),
                  perspectiveRatio:
                    0.5 + (this.transform.cameraToCenterDistance / i[3]) * 0.5,
                }
              )
            }),
            (se.prototype.isOffscreen = function (t, e, r, n) {
              return (
                r < 100 ||
                t >= this.screenRightBoundary ||
                n < 100 ||
                e > this.screenBottomBoundary
              )
            }),
            (se.prototype.isInsideGrid = function (t, e, r, n) {
              return (
                r >= 0 &&
                t < this.gridRightBoundary &&
                n >= 0 &&
                e < this.gridBottomBoundary
              )
            })
          var ce = function (t, e, r, n) {
            ;(this.opacity = t
              ? Math.max(0, Math.min(1, t.opacity + (t.placed ? e : -e)))
              : n && r
              ? 1
              : 0),
              (this.placed = r)
          }
          ce.prototype.isHidden = function () {
            return 0 === this.opacity && !this.placed
          }
          var pe = function (t, e, r, n, i) {
            ;(this.text = new ce(t ? t.text : null, e, r, i)),
              (this.icon = new ce(t ? t.icon : null, e, n, i))
          }
          pe.prototype.isHidden = function () {
            return this.text.isHidden() && this.icon.isHidden()
          }
          var he = function (t, e, r) {
              ;(this.text = t), (this.icon = e), (this.skipFade = r)
            },
            fe = function (t, e, r, n, i) {
              ;(this.bucketInstanceId = t),
                (this.featureIndex = e),
                (this.sourceLayerIndex = r),
                (this.bucketIndex = n),
                (this.tileID = i)
            },
            de = function (t) {
              ;(this.crossSourceCollisions = t),
                (this.maxGroupID = 0),
                (this.collisionGroups = {})
            }
          function me(e, r, n, i, o) {
            var a = t.getAnchorAlignment(e),
              s = -(a.horizontalAlign - 0.5) * r,
              l = -(a.verticalAlign - 0.5) * n,
              u = t.evaluateVariableOffset(e, i)
            return new t.Point(s + u[0] * o, l + u[1] * o)
          }
          function ye(e, r, n, i, o, a) {
            var s = e.x1,
              l = e.x2,
              u = e.y1,
              c = e.y2,
              p = e.anchorPointX,
              h = e.anchorPointY,
              f = new t.Point(r, n)
            return (
              i && f._rotate(o ? a : -a),
              {
                x1: s + f.x,
                y1: u + f.y,
                x2: l + f.x,
                y2: c + f.y,
                anchorPointX: p,
                anchorPointY: h,
              }
            )
          }
          de.prototype.get = function (t) {
            if (this.crossSourceCollisions) return { ID: 0, predicate: null }
            if (!this.collisionGroups[t]) {
              var e = ++this.maxGroupID
              this.collisionGroups[t] = {
                ID: e,
                predicate: function (t) {
                  return t.collisionGroupID === e
                },
              }
            }
            return this.collisionGroups[t]
          }
          var ve = function (t, e, r, n) {
            ;(this.transform = t.clone()),
              (this.collisionIndex = new se(this.transform)),
              (this.placements = {}),
              (this.opacities = {}),
              (this.variableOffsets = {}),
              (this.stale = !1),
              (this.commitTime = 0),
              (this.fadeDuration = e),
              (this.retainedQueryData = {}),
              (this.collisionGroups = new de(r)),
              (this.prevPlacement = n),
              n && (n.prevPlacement = void 0),
              (this.placedOrientations = {})
          }
          function ge(t, e, r, n, i) {
            t.emplaceBack(e ? 1 : 0, r ? 1 : 0, n || 0, i || 0),
              t.emplaceBack(e ? 1 : 0, r ? 1 : 0, n || 0, i || 0),
              t.emplaceBack(e ? 1 : 0, r ? 1 : 0, n || 0, i || 0),
              t.emplaceBack(e ? 1 : 0, r ? 1 : 0, n || 0, i || 0)
          }
          ;(ve.prototype.getBucketParts = function (e, r, n, i) {
            var o = n.getBucket(r),
              a = n.latestFeatureIndex
            if (o && a && r.id === o.layerIds[0]) {
              var s = n.collisionBoxArray,
                l = o.layers[0].layout,
                u = Math.pow(2, this.transform.zoom - n.tileID.overscaledZ),
                c = n.tileSize / t.EXTENT,
                p = this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),
                h = Kt(
                  p,
                  'map' === l.get('text-pitch-alignment'),
                  'map' === l.get('text-rotation-alignment'),
                  this.transform,
                  ue(n, 1, this.transform.zoom)
                )
              this.retainedQueryData[o.bucketInstanceId] = new fe(
                o.bucketInstanceId,
                a,
                o.sourceLayerIndex,
                o.index,
                n.tileID
              )
              var f = {
                bucket: o,
                layout: l,
                posMatrix: p,
                textLabelPlaneMatrix: h,
                scale: u,
                textPixelRatio: c,
                holdingForFade: n.holdingForFade(),
                collisionBoxArray: s,
                partiallyEvaluatedTextSize: t.evaluateSizeForZoom(
                  o.textSizeData,
                  this.transform.zoom
                ),
                collisionGroup: this.collisionGroups.get(o.sourceID),
              }
              if (i)
                for (var d = 0, m = o.sortKeyRanges; d < m.length; d += 1) {
                  var y = m[d]
                  e.push({
                    sortKey: y.sortKey,
                    symbolInstanceStart: y.symbolInstanceStart,
                    symbolInstanceEnd: y.symbolInstanceEnd,
                    parameters: f,
                  })
                }
              else
                e.push({
                  symbolInstanceStart: 0,
                  symbolInstanceEnd: o.symbolInstances.length,
                  parameters: f,
                })
            }
          }),
            (ve.prototype.attemptAnchorPlacement = function (
              t,
              e,
              r,
              n,
              i,
              o,
              a,
              s,
              l,
              u,
              c,
              p,
              h,
              f,
              d
            ) {
              var m,
                y = [p.textOffset0, p.textOffset1],
                v = me(t, r, n, y, i),
                g = this.collisionIndex.placeCollisionBox(
                  ye(e, v.x, v.y, o, a, this.transform.angle),
                  c,
                  s,
                  l,
                  u.predicate
                )
              if (
                !d ||
                0 !==
                  this.collisionIndex.placeCollisionBox(
                    ye(d, v.x, v.y, o, a, this.transform.angle),
                    c,
                    s,
                    l,
                    u.predicate
                  ).box.length
              )
                return g.box.length > 0
                  ? (this.prevPlacement &&
                      this.prevPlacement.variableOffsets[p.crossTileID] &&
                      this.prevPlacement.placements[p.crossTileID] &&
                      this.prevPlacement.placements[p.crossTileID].text &&
                      (m = this.prevPlacement.variableOffsets[p.crossTileID]
                        .anchor),
                    (this.variableOffsets[p.crossTileID] = {
                      textOffset: y,
                      width: r,
                      height: n,
                      anchor: t,
                      textBoxScale: i,
                      prevAnchor: m,
                    }),
                    this.markUsedJustification(h, t, p, f),
                    h.allowVerticalPlacement &&
                      (this.markUsedOrientation(h, f, p),
                      (this.placedOrientations[p.crossTileID] = f)),
                    { shift: v, placedGlyphBoxes: g })
                  : void 0
            }),
            (ve.prototype.placeLayerBucketPart = function (e, r, n) {
              var i = this,
                o = e.parameters,
                a = o.bucket,
                s = o.layout,
                l = o.posMatrix,
                u = o.textLabelPlaneMatrix,
                c = o.scale,
                p = o.textPixelRatio,
                h = o.holdingForFade,
                f = o.collisionBoxArray,
                d = o.partiallyEvaluatedTextSize,
                m = o.collisionGroup,
                y = s.get('text-optional'),
                v = s.get('icon-optional'),
                g = s.get('text-allow-overlap'),
                _ = s.get('icon-allow-overlap'),
                x = 'map' === s.get('text-rotation-alignment'),
                b = 'map' === s.get('text-pitch-alignment'),
                w = 'none' !== s.get('icon-text-fit'),
                E = 'viewport-y' === s.get('symbol-z-order'),
                S = g && (_ || !a.hasIconData() || v),
                T = _ && (g || !a.hasTextData() || y)
              !a.collisionArrays && f && a.deserializeCollisionBoxes(f)
              var I = function (e, o) {
                if (!r[e.crossTileID])
                  if (h) i.placements[e.crossTileID] = new he(!1, !1, !1)
                  else {
                    var f,
                      E = !1,
                      I = !1,
                      C = !0,
                      A = null,
                      k = { box: null, offscreen: null },
                      P = { box: null, offscreen: null },
                      M = null,
                      L = null,
                      z = 0,
                      O = 0,
                      D = 0
                    o.textFeatureIndex && (z = o.textFeatureIndex),
                      o.verticalTextFeatureIndex &&
                        (O = o.verticalTextFeatureIndex)
                    var R = o.textBox
                    if (R) {
                      var F = function (r) {
                          var n = t.WritingMode.horizontal
                          if (
                            a.allowVerticalPlacement &&
                            !r &&
                            i.prevPlacement
                          ) {
                            var o =
                              i.prevPlacement.placedOrientations[e.crossTileID]
                            o &&
                              ((i.placedOrientations[e.crossTileID] = o),
                              i.markUsedOrientation(a, (n = o), e))
                          }
                          return n
                        },
                        B = function (r, n) {
                          if (
                            a.allowVerticalPlacement &&
                            e.numVerticalGlyphVertices > 0 &&
                            o.verticalTextBox
                          )
                            for (
                              var i = 0, s = a.writingModes;
                              i < s.length &&
                              (s[i] === t.WritingMode.vertical
                                ? ((k = n()), (P = k))
                                : (k = r()),
                              !(k && k.box && k.box.length));
                              i += 1
                            );
                          else k = r()
                        }
                      if (s.get('text-variable-anchor')) {
                        var N = s.get('text-variable-anchor')
                        if (
                          i.prevPlacement &&
                          i.prevPlacement.variableOffsets[e.crossTileID]
                        ) {
                          var U = i.prevPlacement.variableOffsets[e.crossTileID]
                          N.indexOf(U.anchor) > 0 &&
                            (N = N.filter(function (t) {
                              return t !== U.anchor
                            })).unshift(U.anchor)
                        }
                        var j = function (t, r, n) {
                          for (
                            var o = t.x2 - t.x1,
                              s = t.y2 - t.y1,
                              u = e.textBoxScale,
                              c = w && !_ ? r : null,
                              h = { box: [], offscreen: !1 },
                              f = g ? 2 * N.length : N.length,
                              d = 0;
                            d < f;
                            ++d
                          ) {
                            var y = i.attemptAnchorPlacement(
                              N[d % N.length],
                              t,
                              o,
                              s,
                              u,
                              x,
                              b,
                              p,
                              l,
                              m,
                              d >= N.length,
                              e,
                              a,
                              n,
                              c
                            )
                            if (
                              y &&
                              (h = y.placedGlyphBoxes) &&
                              h.box &&
                              h.box.length
                            ) {
                              ;(E = !0), (A = y.shift)
                              break
                            }
                          }
                          return h
                        }
                        B(
                          function () {
                            return j(R, o.iconBox, t.WritingMode.horizontal)
                          },
                          function () {
                            var r = o.verticalTextBox
                            return a.allowVerticalPlacement &&
                              !(k && k.box && k.box.length) &&
                              e.numVerticalGlyphVertices > 0 &&
                              r
                              ? j(r, o.verticalIconBox, t.WritingMode.vertical)
                              : { box: null, offscreen: null }
                          }
                        ),
                          k && ((E = k.box), (C = k.offscreen))
                        var V = F(k && k.box)
                        if (!E && i.prevPlacement) {
                          var q = i.prevPlacement.variableOffsets[e.crossTileID]
                          q &&
                            ((i.variableOffsets[e.crossTileID] = q),
                            i.markUsedJustification(a, q.anchor, e, V))
                        }
                      } else {
                        var G = function (t, r) {
                          var n = i.collisionIndex.placeCollisionBox(
                            t,
                            g,
                            p,
                            l,
                            m.predicate
                          )
                          return (
                            n &&
                              n.box &&
                              n.box.length &&
                              (i.markUsedOrientation(a, r, e),
                              (i.placedOrientations[e.crossTileID] = r)),
                            n
                          )
                        }
                        B(
                          function () {
                            return G(R, t.WritingMode.horizontal)
                          },
                          function () {
                            var r = o.verticalTextBox
                            return a.allowVerticalPlacement &&
                              e.numVerticalGlyphVertices > 0 &&
                              r
                              ? G(r, t.WritingMode.vertical)
                              : { box: null, offscreen: null }
                          }
                        ),
                          F(k && k.box && k.box.length)
                      }
                    }
                    ;(E = (f = k) && f.box && f.box.length > 0),
                      (C = f && f.offscreen)
                    var $ = o.textCircles
                    if ($) {
                      var Z = a.text.placedSymbolArray.get(
                          e.centerJustifiedTextSymbolIndex
                        ),
                        X = t.evaluateSizeForFeature(a.textSizeData, d, Z)
                      ;(M = i.collisionIndex.placeCollisionCircles(
                        $,
                        g,
                        c,
                        p,
                        Z,
                        a.lineVertexArray,
                        a.glyphOffsetArray,
                        X,
                        l,
                        u,
                        n,
                        b,
                        m.predicate
                      )),
                        (E = g || M.circles.length > 0),
                        (C = C && M.offscreen)
                    }
                    if (
                      (o.iconFeatureIndex && (D = o.iconFeatureIndex),
                      o.iconBox)
                    ) {
                      var K = function (t) {
                        var e =
                          w && A ? ye(t, A.x, A.y, x, b, i.transform.angle) : t
                        return i.collisionIndex.placeCollisionBox(
                          e,
                          _,
                          p,
                          l,
                          m.predicate
                        )
                      }
                      ;(I =
                        P && P.box && P.box.length && o.verticalIconBox
                          ? (L = K(o.verticalIconBox)).box.length > 0
                          : (L = K(o.iconBox)).box.length > 0),
                        (C = C && L.offscreen)
                    }
                    var W =
                        y ||
                        (0 === e.numHorizontalGlyphVertices &&
                          0 === e.numVerticalGlyphVertices),
                      H = v || 0 === e.numIconVertices
                    W || H
                      ? H
                        ? W || (I = I && E)
                        : (E = I && E)
                      : (I = E = I && E),
                      E &&
                        f &&
                        f.box &&
                        i.collisionIndex.insertCollisionBox(
                          f.box,
                          s.get('text-ignore-placement'),
                          a.bucketInstanceId,
                          P && P.box && O ? O : z,
                          m.ID
                        ),
                      I &&
                        L &&
                        i.collisionIndex.insertCollisionBox(
                          L.box,
                          s.get('icon-ignore-placement'),
                          a.bucketInstanceId,
                          D,
                          m.ID
                        ),
                      E &&
                        M &&
                        i.collisionIndex.insertCollisionCircles(
                          M.circles,
                          s.get('text-ignore-placement'),
                          a.bucketInstanceId,
                          z,
                          m.ID
                        ),
                      (i.placements[e.crossTileID] = new he(
                        E || S,
                        I || T,
                        C || a.justReloaded
                      )),
                      (r[e.crossTileID] = !0)
                  }
              }
              if (E)
                for (
                  var C = a.getSortedSymbolIndexes(this.transform.angle),
                    A = C.length - 1;
                  A >= 0;
                  --A
                ) {
                  var k = C[A]
                  I(a.symbolInstances.get(k), a.collisionArrays[k])
                }
              else
                for (
                  var P = e.symbolInstanceStart;
                  P < e.symbolInstanceEnd;
                  P++
                )
                  I(a.symbolInstances.get(P), a.collisionArrays[P])
              a.justReloaded = !1
            }),
            (ve.prototype.markUsedJustification = function (e, r, n, i) {
              var o
              o =
                i === t.WritingMode.vertical
                  ? n.verticalPlacedTextSymbolIndex
                  : {
                      left: n.leftJustifiedTextSymbolIndex,
                      center: n.centerJustifiedTextSymbolIndex,
                      right: n.rightJustifiedTextSymbolIndex,
                    }[t.getAnchorJustification(r)]
              for (
                var a = 0,
                  s = [
                    n.leftJustifiedTextSymbolIndex,
                    n.centerJustifiedTextSymbolIndex,
                    n.rightJustifiedTextSymbolIndex,
                    n.verticalPlacedTextSymbolIndex,
                  ];
                a < s.length;
                a += 1
              ) {
                var l = s[a]
                l >= 0 &&
                  (e.text.placedSymbolArray.get(l).crossTileID =
                    o >= 0 && l !== o ? 0 : n.crossTileID)
              }
            }),
            (ve.prototype.markUsedOrientation = function (e, r, n) {
              for (
                var i =
                    r === t.WritingMode.horizontal ||
                    r === t.WritingMode.horizontalOnly
                      ? r
                      : 0,
                  o = r === t.WritingMode.vertical ? r : 0,
                  a = 0,
                  s = [
                    n.leftJustifiedTextSymbolIndex,
                    n.centerJustifiedTextSymbolIndex,
                    n.rightJustifiedTextSymbolIndex,
                  ];
                a < s.length;
                a += 1
              )
                e.text.placedSymbolArray.get(s[a]).placedOrientation = i
              n.verticalPlacedTextSymbolIndex &&
                (e.text.placedSymbolArray.get(
                  n.verticalPlacedTextSymbolIndex
                ).placedOrientation = o)
            }),
            (ve.prototype.commit = function (t) {
              ;(this.commitTime = t),
                (this.zoomAtLastRecencyCheck = this.transform.zoom)
              var e = this.prevPlacement,
                r = !1
              this.prevZoomAdjustment = e
                ? e.zoomAdjustment(this.transform.zoom)
                : 0
              var n = e ? e.symbolFadeChange(t) : 1,
                i = e ? e.opacities : {},
                o = e ? e.variableOffsets : {},
                a = e ? e.placedOrientations : {}
              for (var s in this.placements) {
                var l = this.placements[s],
                  u = i[s]
                u
                  ? ((this.opacities[s] = new pe(u, n, l.text, l.icon)),
                    (r =
                      r ||
                      l.text !== u.text.placed ||
                      l.icon !== u.icon.placed))
                  : ((this.opacities[s] = new pe(
                      null,
                      n,
                      l.text,
                      l.icon,
                      l.skipFade
                    )),
                    (r = r || l.text || l.icon))
              }
              for (var c in i) {
                var p = i[c]
                if (!this.opacities[c]) {
                  var h = new pe(p, n, !1, !1)
                  h.isHidden() ||
                    ((this.opacities[c] = h),
                    (r = r || p.text.placed || p.icon.placed))
                }
              }
              for (var f in o)
                this.variableOffsets[f] ||
                  !this.opacities[f] ||
                  this.opacities[f].isHidden() ||
                  (this.variableOffsets[f] = o[f])
              for (var d in a)
                this.placedOrientations[d] ||
                  !this.opacities[d] ||
                  this.opacities[d].isHidden() ||
                  (this.placedOrientations[d] = a[d])
              r
                ? (this.lastPlacementChangeTime = t)
                : 'number' != typeof this.lastPlacementChangeTime &&
                  (this.lastPlacementChangeTime = e
                    ? e.lastPlacementChangeTime
                    : t)
            }),
            (ve.prototype.updateLayerOpacities = function (t, e) {
              for (var r = {}, n = 0, i = e; n < i.length; n += 1) {
                var o = i[n],
                  a = o.getBucket(t)
                a &&
                  o.latestFeatureIndex &&
                  t.id === a.layerIds[0] &&
                  this.updateBucketOpacities(a, r, o.collisionBoxArray)
              }
            }),
            (ve.prototype.updateBucketOpacities = function (e, r, n) {
              var i = this
              e.hasTextData() && e.text.opacityVertexArray.clear(),
                e.hasIconData() && e.icon.opacityVertexArray.clear(),
                e.hasIconCollisionBoxData() &&
                  e.iconCollisionBox.collisionVertexArray.clear(),
                e.hasTextCollisionBoxData() &&
                  e.textCollisionBox.collisionVertexArray.clear(),
                e.hasIconCollisionCircleData() &&
                  e.iconCollisionCircle.collisionVertexArray.clear(),
                e.hasTextCollisionCircleData() &&
                  e.textCollisionCircle.collisionVertexArray.clear()
              var o = e.layers[0].layout,
                a = new pe(null, 0, !1, !1, !0),
                s = o.get('text-allow-overlap'),
                l = o.get('icon-allow-overlap'),
                u = o.get('text-variable-anchor'),
                c = 'map' === o.get('text-rotation-alignment'),
                p = 'map' === o.get('text-pitch-alignment'),
                h = 'none' !== o.get('icon-text-fit'),
                f = new pe(
                  null,
                  0,
                  s && (l || !e.hasIconData() || o.get('icon-optional')),
                  l && (s || !e.hasTextData() || o.get('text-optional')),
                  !0
                )
              !e.collisionArrays &&
                n &&
                (e.hasIconCollisionBoxData() ||
                  e.hasIconCollisionCircleData() ||
                  e.hasTextCollisionBoxData() ||
                  e.hasTextCollisionCircleData()) &&
                e.deserializeCollisionBoxes(n)
              for (
                var d = function (t, e, r) {
                    for (var n = 0; n < e / 4; n++)
                      t.opacityVertexArray.emplaceBack(r)
                  },
                  m = function (n) {
                    var o = e.symbolInstances.get(n),
                      s = o.numHorizontalGlyphVertices,
                      l = o.numVerticalGlyphVertices,
                      m = o.crossTileID,
                      y = r[m],
                      v = i.opacities[m]
                    y ? (v = a) : v || (i.opacities[m] = v = f), (r[m] = !0)
                    var g = o.numIconVertices > 0,
                      _ = i.placedOrientations[o.crossTileID],
                      x = _ === t.WritingMode.vertical,
                      b =
                        _ === t.WritingMode.horizontal ||
                        _ === t.WritingMode.horizontalOnly
                    if (s > 0 || l > 0) {
                      var w = Ie(v.text)
                      d(e.text, s, x ? Ce : w), d(e.text, l, b ? Ce : w)
                      var E = v.text.isHidden()
                      ;[
                        o.rightJustifiedTextSymbolIndex,
                        o.centerJustifiedTextSymbolIndex,
                        o.leftJustifiedTextSymbolIndex,
                      ].forEach(function (t) {
                        t >= 0 &&
                          (e.text.placedSymbolArray.get(t).hidden =
                            E || x ? 1 : 0)
                      }),
                        o.verticalPlacedTextSymbolIndex >= 0 &&
                          (e.text.placedSymbolArray.get(
                            o.verticalPlacedTextSymbolIndex
                          ).hidden = E || b ? 1 : 0)
                      var S = i.variableOffsets[o.crossTileID]
                      S && i.markUsedJustification(e, S.anchor, o, _)
                      var T = i.placedOrientations[o.crossTileID]
                      T &&
                        (i.markUsedJustification(e, 'left', o, T),
                        i.markUsedOrientation(e, T, o))
                    }
                    if (g) {
                      var I = Ie(v.icon),
                        C = !(h && o.verticalPlacedIconSymbolIndex && x)
                      o.placedIconSymbolIndex >= 0 &&
                        (d(e.icon, o.numIconVertices, C ? I : Ce),
                        (e.icon.placedSymbolArray.get(
                          o.placedIconSymbolIndex
                        ).hidden = v.icon.isHidden())),
                        o.verticalPlacedIconSymbolIndex >= 0 &&
                          (d(e.icon, o.numVerticalIconVertices, C ? Ce : I),
                          (e.icon.placedSymbolArray.get(
                            o.verticalPlacedIconSymbolIndex
                          ).hidden = v.icon.isHidden()))
                    }
                    if (
                      e.hasIconCollisionBoxData() ||
                      e.hasIconCollisionCircleData() ||
                      e.hasTextCollisionBoxData() ||
                      e.hasTextCollisionCircleData()
                    ) {
                      var A = e.collisionArrays[n]
                      if (A) {
                        var k = new t.Point(0, 0)
                        if (A.textBox || A.verticalTextBox) {
                          var P = !0
                          if (u) {
                            var M = i.variableOffsets[m]
                            M
                              ? ((k = me(
                                  M.anchor,
                                  M.width,
                                  M.height,
                                  M.textOffset,
                                  M.textBoxScale
                                )),
                                c &&
                                  k._rotate(
                                    p ? i.transform.angle : -i.transform.angle
                                  ))
                              : (P = !1)
                          }
                          A.textBox &&
                            ge(
                              e.textCollisionBox.collisionVertexArray,
                              v.text.placed,
                              !P || x,
                              k.x,
                              k.y
                            ),
                            A.verticalTextBox &&
                              ge(
                                e.textCollisionBox.collisionVertexArray,
                                v.text.placed,
                                !P || b,
                                k.x,
                                k.y
                              )
                        }
                        var L = Boolean(!b && A.verticalIconBox)
                        A.iconBox &&
                          ge(
                            e.iconCollisionBox.collisionVertexArray,
                            v.icon.placed,
                            L,
                            h ? k.x : 0,
                            h ? k.y : 0
                          ),
                          A.verticalIconBox &&
                            ge(
                              e.iconCollisionBox.collisionVertexArray,
                              v.icon.placed,
                              !L,
                              h ? k.x : 0,
                              h ? k.y : 0
                            )
                        var z = A.textCircles
                        if (z && e.hasTextCollisionCircleData())
                          for (var O = 0; O < z.length; O += 5)
                            ge(
                              e.textCollisionCircle.collisionVertexArray,
                              v.text.placed,
                              y || 0 === z[O + 4]
                            )
                      }
                    }
                  },
                  y = 0;
                y < e.symbolInstances.length;
                y++
              )
                m(y)
              e.sortFeatures(this.transform.angle),
                this.retainedQueryData[e.bucketInstanceId] &&
                  (this.retainedQueryData[e.bucketInstanceId].featureSortOrder =
                    e.featureSortOrder),
                e.hasTextData() &&
                  e.text.opacityVertexBuffer &&
                  e.text.opacityVertexBuffer.updateData(
                    e.text.opacityVertexArray
                  ),
                e.hasIconData() &&
                  e.icon.opacityVertexBuffer &&
                  e.icon.opacityVertexBuffer.updateData(
                    e.icon.opacityVertexArray
                  ),
                e.hasIconCollisionBoxData() &&
                  e.iconCollisionBox.collisionVertexBuffer &&
                  e.iconCollisionBox.collisionVertexBuffer.updateData(
                    e.iconCollisionBox.collisionVertexArray
                  ),
                e.hasTextCollisionBoxData() &&
                  e.textCollisionBox.collisionVertexBuffer &&
                  e.textCollisionBox.collisionVertexBuffer.updateData(
                    e.textCollisionBox.collisionVertexArray
                  ),
                e.hasIconCollisionCircleData() &&
                  e.iconCollisionCircle.collisionVertexBuffer &&
                  e.iconCollisionCircle.collisionVertexBuffer.updateData(
                    e.iconCollisionCircle.collisionVertexArray
                  ),
                e.hasTextCollisionCircleData() &&
                  e.textCollisionCircle.collisionVertexBuffer &&
                  e.textCollisionCircle.collisionVertexBuffer.updateData(
                    e.textCollisionCircle.collisionVertexArray
                  )
            }),
            (ve.prototype.symbolFadeChange = function (t) {
              return 0 === this.fadeDuration
                ? 1
                : (t - this.commitTime) / this.fadeDuration +
                    this.prevZoomAdjustment
            }),
            (ve.prototype.zoomAdjustment = function (t) {
              return Math.max(0, (this.transform.zoom - t) / 1.5)
            }),
            (ve.prototype.hasTransitions = function (t) {
              return (
                this.stale ||
                t - this.lastPlacementChangeTime < this.fadeDuration
              )
            }),
            (ve.prototype.stillRecent = function (t, e) {
              var r =
                this.zoomAtLastRecencyCheck === e
                  ? 1 - this.zoomAdjustment(e)
                  : 1
              return (
                (this.zoomAtLastRecencyCheck = e),
                this.commitTime + this.fadeDuration * r > t
              )
            }),
            (ve.prototype.setStale = function () {
              this.stale = !0
            })
          var _e = Math.pow(2, 25),
            xe = Math.pow(2, 24),
            be = Math.pow(2, 17),
            we = Math.pow(2, 16),
            Ee = Math.pow(2, 9),
            Se = Math.pow(2, 8),
            Te = Math.pow(2, 1)
          function Ie(t) {
            if (0 === t.opacity && !t.placed) return 0
            if (1 === t.opacity && t.placed) return 4294967295
            var e = t.placed ? 1 : 0,
              r = Math.floor(127 * t.opacity)
            return (
              r * _e + e * xe + r * be + e * we + r * Ee + e * Se + r * Te + e
            )
          }
          var Ce = 0,
            Ae = function (t) {
              ;(this._sortAcrossTiles =
                'viewport-y' !== t.layout.get('symbol-z-order') &&
                void 0 !== t.layout.get('symbol-sort-key').constantOr(1)),
                (this._currentTileIndex = 0),
                (this._currentPartIndex = 0),
                (this._seenCrossTileIDs = {}),
                (this._bucketParts = [])
            }
          Ae.prototype.continuePlacement = function (t, e, r, n, i) {
            for (var o = this._bucketParts; this._currentTileIndex < t.length; )
              if (
                (e.getBucketParts(
                  o,
                  n,
                  t[this._currentTileIndex],
                  this._sortAcrossTiles
                ),
                this._currentTileIndex++,
                i())
              )
                return !0
            for (
              this._sortAcrossTiles &&
              ((this._sortAcrossTiles = !1),
              o.sort(function (t, e) {
                return t.sortKey - e.sortKey
              }));
              this._currentPartIndex < o.length;

            )
              if (
                (e.placeLayerBucketPart(
                  o[this._currentPartIndex],
                  this._seenCrossTileIDs,
                  r
                ),
                this._currentPartIndex++,
                i())
              )
                return !0
            return !1
          }
          var ke = function (t, e, r, n, i, o, a) {
            ;(this.placement = new ve(t, i, o, a)),
              (this._currentPlacementIndex = e.length - 1),
              (this._forceFullPlacement = r),
              (this._showCollisionBoxes = n),
              (this._done = !1)
          }
          ;(ke.prototype.isDone = function () {
            return this._done
          }),
            (ke.prototype.continuePlacement = function (e, r, n) {
              for (
                var i = this,
                  o = t.browser.now(),
                  a = function () {
                    var e = t.browser.now() - o
                    return !i._forceFullPlacement && e > 2
                  };
                this._currentPlacementIndex >= 0;

              ) {
                var s = r[e[this._currentPlacementIndex]],
                  l = this.placement.collisionIndex.transform.zoom
                if (
                  'symbol' === s.type &&
                  (!s.minzoom || s.minzoom <= l) &&
                  (!s.maxzoom || s.maxzoom > l)
                ) {
                  if (
                    (this._inProgressLayer ||
                      (this._inProgressLayer = new Ae(s)),
                    this._inProgressLayer.continuePlacement(
                      n[s.source],
                      this.placement,
                      this._showCollisionBoxes,
                      s,
                      a
                    ))
                  )
                    return
                  delete this._inProgressLayer
                }
                this._currentPlacementIndex--
              }
              this._done = !0
            }),
            (ke.prototype.commit = function (t) {
              return this.placement.commit(t), this.placement
            })
          var Pe = 512 / t.EXTENT / 2,
            Me = function (t, e, r) {
              ;(this.tileID = t),
                (this.indexedSymbolInstances = {}),
                (this.bucketInstanceId = r)
              for (var n = 0; n < e.length; n++) {
                var i = e.get(n),
                  o = i.key
                this.indexedSymbolInstances[o] ||
                  (this.indexedSymbolInstances[o] = []),
                  this.indexedSymbolInstances[o].push({
                    crossTileID: i.crossTileID,
                    coord: this.getScaledCoordinates(i, t),
                  })
              }
            }
          ;(Me.prototype.getScaledCoordinates = function (e, r) {
            var n = Pe / Math.pow(2, r.canonical.z - this.tileID.canonical.z)
            return {
              x: Math.floor((r.canonical.x * t.EXTENT + e.anchorX) * n),
              y: Math.floor((r.canonical.y * t.EXTENT + e.anchorY) * n),
            }
          }),
            (Me.prototype.findMatches = function (t, e, r) {
              for (
                var n =
                    this.tileID.canonical.z < e.canonical.z
                      ? 1
                      : Math.pow(2, this.tileID.canonical.z - e.canonical.z),
                  i = 0;
                i < t.length;
                i++
              ) {
                var o = t.get(i)
                if (!o.crossTileID) {
                  var a = this.indexedSymbolInstances[o.key]
                  if (a)
                    for (
                      var s = this.getScaledCoordinates(o, e), l = 0, u = a;
                      l < u.length;
                      l += 1
                    ) {
                      var c = u[l]
                      if (
                        Math.abs(c.coord.x - s.x) <= n &&
                        Math.abs(c.coord.y - s.y) <= n &&
                        !r[c.crossTileID]
                      ) {
                        ;(r[c.crossTileID] = !0),
                          (o.crossTileID = c.crossTileID)
                        break
                      }
                    }
                }
              }
            })
          var Le = function () {
            this.maxCrossTileID = 0
          }
          Le.prototype.generate = function () {
            return ++this.maxCrossTileID
          }
          var ze = function () {
            ;(this.indexes = {}), (this.usedCrossTileIDs = {}), (this.lng = 0)
          }
          ;(ze.prototype.handleWrapJump = function (t) {
            var e = Math.round((t - this.lng) / 360)
            if (0 !== e)
              for (var r in this.indexes) {
                var n = this.indexes[r],
                  i = {}
                for (var o in n) {
                  var a = n[o]
                  ;(a.tileID = a.tileID.unwrapTo(a.tileID.wrap + e)),
                    (i[a.tileID.key] = a)
                }
                this.indexes[r] = i
              }
            this.lng = t
          }),
            (ze.prototype.addBucket = function (t, e, r) {
              if (
                this.indexes[t.overscaledZ] &&
                this.indexes[t.overscaledZ][t.key]
              ) {
                if (
                  this.indexes[t.overscaledZ][t.key].bucketInstanceId ===
                  e.bucketInstanceId
                )
                  return !1
                this.removeBucketCrossTileIDs(
                  t.overscaledZ,
                  this.indexes[t.overscaledZ][t.key]
                )
              }
              for (var n = 0; n < e.symbolInstances.length; n++)
                e.symbolInstances.get(n).crossTileID = 0
              this.usedCrossTileIDs[t.overscaledZ] ||
                (this.usedCrossTileIDs[t.overscaledZ] = {})
              var i = this.usedCrossTileIDs[t.overscaledZ]
              for (var o in this.indexes) {
                var a = this.indexes[o]
                if (Number(o) > t.overscaledZ)
                  for (var s in a) {
                    var l = a[s]
                    l.tileID.isChildOf(t) &&
                      l.findMatches(e.symbolInstances, t, i)
                  }
                else {
                  var u = a[t.scaledTo(Number(o)).key]
                  u && u.findMatches(e.symbolInstances, t, i)
                }
              }
              for (var c = 0; c < e.symbolInstances.length; c++) {
                var p = e.symbolInstances.get(c)
                p.crossTileID ||
                  ((p.crossTileID = r.generate()), (i[p.crossTileID] = !0))
              }
              return (
                void 0 === this.indexes[t.overscaledZ] &&
                  (this.indexes[t.overscaledZ] = {}),
                (this.indexes[t.overscaledZ][t.key] = new Me(
                  t,
                  e.symbolInstances,
                  e.bucketInstanceId
                )),
                !0
              )
            }),
            (ze.prototype.removeBucketCrossTileIDs = function (t, e) {
              for (var r in e.indexedSymbolInstances)
                for (
                  var n = 0, i = e.indexedSymbolInstances[r];
                  n < i.length;
                  n += 1
                )
                  delete this.usedCrossTileIDs[t][i[n].crossTileID]
            }),
            (ze.prototype.removeStaleBuckets = function (t) {
              var e = !1
              for (var r in this.indexes) {
                var n = this.indexes[r]
                for (var i in n)
                  t[n[i].bucketInstanceId] ||
                    (this.removeBucketCrossTileIDs(r, n[i]),
                    delete n[i],
                    (e = !0))
              }
              return e
            })
          var Oe = function () {
            ;(this.layerIndexes = {}),
              (this.crossTileIDs = new Le()),
              (this.maxBucketInstanceId = 0),
              (this.bucketsInCurrentPlacement = {})
          }
          ;(Oe.prototype.addLayer = function (t, e, r) {
            var n = this.layerIndexes[t.id]
            void 0 === n && (n = this.layerIndexes[t.id] = new ze())
            var i = !1,
              o = {}
            n.handleWrapJump(r)
            for (var a = 0, s = e; a < s.length; a += 1) {
              var l = s[a],
                u = l.getBucket(t)
              u &&
                t.id === u.layerIds[0] &&
                (u.bucketInstanceId ||
                  (u.bucketInstanceId = ++this.maxBucketInstanceId),
                n.addBucket(l.tileID, u, this.crossTileIDs) && (i = !0),
                (o[u.bucketInstanceId] = !0))
            }
            return n.removeStaleBuckets(o) && (i = !0), i
          }),
            (Oe.prototype.pruneUnusedLayers = function (t) {
              var e = {}
              for (var r in (t.forEach(function (t) {
                e[t] = !0
              }),
              this.layerIndexes))
                e[r] || delete this.layerIndexes[r]
            })
          var De = function (e, r) {
              return t.emitValidationErrors(
                e,
                r &&
                  r.filter(function (t) {
                    return 'source.canvas' !== t.identifier
                  })
              )
            },
            Re = t.pick(Nt, [
              'addLayer',
              'removeLayer',
              'setPaintProperty',
              'setLayoutProperty',
              'setFilter',
              'addSource',
              'removeSource',
              'setLayerZoomRange',
              'setLight',
              'setTransition',
              'setGeoJSONSourceData',
            ]),
            Fe = t.pick(Nt, ['setCenter', 'setZoom', 'setBearing', 'setPitch']),
            Be = (function () {
              var e = {},
                r = t.styleSpec.$version
              for (var n in t.styleSpec.$root) {
                var i,
                  o = t.styleSpec.$root[n]
                o.required &&
                  null !=
                    (i = 'version' === n ? r : 'array' === o.type ? [] : {}) &&
                  (e[n] = i)
              }
              return e
            })(),
            Ne = (function (e) {
              function r(n, i) {
                var o = this
                void 0 === i && (i = {}),
                  e.call(this),
                  (this.map = n),
                  (this.dispatcher = new S((Dt || (Dt = new Ot()), Dt), this)),
                  (this.imageManager = new h()),
                  this.imageManager.setEventedParent(this),
                  (this.glyphManager = new _(
                    n._requestManager,
                    i.localIdeographFontFamily
                  )),
                  (this.lineAtlas = new E(256, 512)),
                  (this.crossTileSymbolIndex = new Oe()),
                  (this._layers = {}),
                  (this._serializedLayers = {}),
                  (this._order = []),
                  (this.sourceCaches = {}),
                  (this.zoomHistory = new t.ZoomHistory()),
                  (this._loaded = !1),
                  (this._availableImages = []),
                  this._resetUpdates(),
                  this.dispatcher.broadcast('setReferrer', t.getReferrer())
                var a = this
                ;(this._rtlTextPluginCallback = r.registerForPluginStateChange(
                  function (e) {
                    a.dispatcher.broadcast(
                      'syncRTLPluginState',
                      { pluginStatus: e.pluginStatus, pluginURL: e.pluginURL },
                      function (e, r) {
                        if (
                          (t.triggerPluginCompletionEvent(e),
                          r &&
                            r.every(function (t) {
                              return t
                            }))
                        )
                          for (var n in a.sourceCaches)
                            a.sourceCaches[n].reload()
                      }
                    )
                  }
                )),
                  this.on('data', function (t) {
                    if (
                      'source' === t.dataType &&
                      'metadata' === t.sourceDataType
                    ) {
                      var e = o.sourceCaches[t.sourceId]
                      if (e) {
                        var r = e.getSource()
                        if (r && r.vectorLayerIds)
                          for (var n in o._layers) {
                            var i = o._layers[n]
                            i.source === r.id && o._validateLayer(i)
                          }
                      }
                    }
                  })
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.loadURL = function (e, r) {
                  var n = this
                  void 0 === r && (r = {}),
                    this.fire(new t.Event('dataloading', { dataType: 'style' }))
                  var i =
                    'boolean' == typeof r.validate
                      ? r.validate
                      : !t.isMapboxURL(e)
                  e = this.map._requestManager.normalizeStyleURL(
                    e,
                    r.accessToken
                  )
                  var o = this.map._requestManager.transformRequest(
                    e,
                    t.ResourceType.Style
                  )
                  this._request = t.getJSON(o, function (e, r) {
                    ;(n._request = null),
                      e ? n.fire(new t.ErrorEvent(e)) : r && n._load(r, i)
                  })
                }),
                (r.prototype.loadJSON = function (e, r) {
                  var n = this
                  void 0 === r && (r = {}),
                    this.fire(
                      new t.Event('dataloading', { dataType: 'style' })
                    ),
                    (this._request = t.browser.frame(function () {
                      ;(n._request = null), n._load(e, !1 !== r.validate)
                    }))
                }),
                (r.prototype.loadEmpty = function () {
                  this.fire(new t.Event('dataloading', { dataType: 'style' })),
                    this._load(Be, !1)
                }),
                (r.prototype._load = function (e, r) {
                  if (!r || !De(this, t.validateStyle(e))) {
                    for (var n in ((this._loaded = !0),
                    (this.stylesheet = e),
                    e.sources))
                      this.addSource(n, e.sources[n], { validate: !1 })
                    e.sprite
                      ? this._loadSprite(e.sprite)
                      : this.imageManager.setLoaded(!0),
                      this.glyphManager.setURL(e.glyphs)
                    var i = Bt(this.stylesheet.layers)
                    ;(this._order = i.map(function (t) {
                      return t.id
                    })),
                      (this._layers = {}),
                      (this._serializedLayers = {})
                    for (var o = 0, a = i; o < a.length; o += 1) {
                      var s = a[o]
                      ;(s = t.createStyleLayer(s)).setEventedParent(this, {
                        layer: { id: s.id },
                      }),
                        (this._layers[s.id] = s),
                        (this._serializedLayers[s.id] = s.serialize())
                    }
                    this.dispatcher.broadcast(
                      'setLayers',
                      this._serializeLayers(this._order)
                    ),
                      (this.light = new w(this.stylesheet.light)),
                      this.fire(new t.Event('data', { dataType: 'style' })),
                      this.fire(new t.Event('style.load'))
                  }
                }),
                (r.prototype._loadSprite = function (e) {
                  var r = this
                  this._spriteRequest = (function (e, r, n) {
                    var i,
                      o,
                      a,
                      s = t.browser.devicePixelRatio > 1 ? '@2x' : '',
                      l = t.getJSON(
                        r.transformRequest(
                          r.normalizeSpriteURL(e, s, '.json'),
                          t.ResourceType.SpriteJSON
                        ),
                        function (t, e) {
                          ;(l = null), a || ((a = t), (i = e), c())
                        }
                      ),
                      u = t.getImage(
                        r.transformRequest(
                          r.normalizeSpriteURL(e, s, '.png'),
                          t.ResourceType.SpriteImage
                        ),
                        function (t, e) {
                          ;(u = null), a || ((a = t), (o = e), c())
                        }
                      )
                    function c() {
                      if (a) n(a)
                      else if (i && o) {
                        var e = t.browser.getImageData(o),
                          r = {}
                        for (var s in i) {
                          var l = i[s],
                            u = l.width,
                            c = l.height,
                            p = l.x,
                            h = l.y,
                            f = l.sdf,
                            d = l.pixelRatio,
                            m = l.stretchX,
                            y = l.stretchY,
                            v = l.content,
                            g = new t.RGBAImage({ width: u, height: c })
                          t.RGBAImage.copy(
                            e,
                            g,
                            { x: p, y: h },
                            { x: 0, y: 0 },
                            { width: u, height: c }
                          ),
                            (r[s] = {
                              data: g,
                              pixelRatio: d,
                              sdf: f,
                              stretchX: m,
                              stretchY: y,
                              content: v,
                            })
                        }
                        n(null, r)
                      }
                    }
                    return {
                      cancel: function () {
                        l && (l.cancel(), (l = null)),
                          u && (u.cancel(), (u = null))
                      },
                    }
                  })(e, this.map._requestManager, function (e, n) {
                    if (((r._spriteRequest = null), e))
                      r.fire(new t.ErrorEvent(e))
                    else if (n)
                      for (var i in n) r.imageManager.addImage(i, n[i])
                    r.imageManager.setLoaded(!0),
                      (r._availableImages = r.imageManager.listImages()),
                      r.dispatcher.broadcast('setImages', r._availableImages),
                      r.fire(new t.Event('data', { dataType: 'style' }))
                  })
                }),
                (r.prototype._validateLayer = function (e) {
                  var r = this.sourceCaches[e.source]
                  if (r) {
                    var n = e.sourceLayer
                    if (n) {
                      var i = r.getSource()
                      ;('geojson' === i.type ||
                        (i.vectorLayerIds &&
                          -1 === i.vectorLayerIds.indexOf(n))) &&
                        this.fire(
                          new t.ErrorEvent(
                            new Error(
                              'Source layer "' +
                                n +
                                '" does not exist on source "' +
                                i.id +
                                '" as specified by style layer "' +
                                e.id +
                                '"'
                            )
                          )
                        )
                    }
                  }
                }),
                (r.prototype.loaded = function () {
                  if (!this._loaded) return !1
                  if (Object.keys(this._updatedSources).length) return !1
                  for (var t in this.sourceCaches)
                    if (!this.sourceCaches[t].loaded()) return !1
                  return !!this.imageManager.isLoaded()
                }),
                (r.prototype._serializeLayers = function (t) {
                  for (var e = [], r = 0, n = t; r < n.length; r += 1) {
                    var i = this._layers[n[r]]
                    'custom' !== i.type && e.push(i.serialize())
                  }
                  return e
                }),
                (r.prototype.hasTransitions = function () {
                  if (this.light && this.light.hasTransition()) return !0
                  for (var t in this.sourceCaches)
                    if (this.sourceCaches[t].hasTransition()) return !0
                  for (var e in this._layers)
                    if (this._layers[e].hasTransition()) return !0
                  return !1
                }),
                (r.prototype._checkLoaded = function () {
                  if (!this._loaded)
                    throw new Error('Style is not done loading')
                }),
                (r.prototype.update = function (e) {
                  if (this._loaded) {
                    var r = this._changed
                    if (this._changed) {
                      var n = Object.keys(this._updatedLayers),
                        i = Object.keys(this._removedLayers)
                      for (var o in ((n.length || i.length) &&
                        this._updateWorkerLayers(n, i),
                      this._updatedSources)) {
                        var a = this._updatedSources[o]
                        'reload' === a
                          ? this._reloadSource(o)
                          : 'clear' === a && this._clearSource(o)
                      }
                      for (var s in (this._updateTilesForChangedImages(),
                      this._updatedPaintProps))
                        this._layers[s].updateTransitions(e)
                      this.light.updateTransitions(e), this._resetUpdates()
                    }
                    for (var l in this.sourceCaches)
                      this.sourceCaches[l].used = !1
                    for (var u = 0, c = this._order; u < c.length; u += 1) {
                      var p = this._layers[c[u]]
                      p.recalculate(e, this._availableImages),
                        !p.isHidden(e.zoom) &&
                          p.source &&
                          (this.sourceCaches[p.source].used = !0)
                    }
                    this.light.recalculate(e),
                      (this.z = e.zoom),
                      r && this.fire(new t.Event('data', { dataType: 'style' }))
                  }
                }),
                (r.prototype._updateTilesForChangedImages = function () {
                  var t = Object.keys(this._changedImages)
                  if (t.length) {
                    for (var e in this.sourceCaches)
                      this.sourceCaches[e].reloadTilesForDependencies(
                        ['icons', 'patterns'],
                        t
                      )
                    this._changedImages = {}
                  }
                }),
                (r.prototype._updateWorkerLayers = function (t, e) {
                  this.dispatcher.broadcast('updateLayers', {
                    layers: this._serializeLayers(t),
                    removedIds: e,
                  })
                }),
                (r.prototype._resetUpdates = function () {
                  ;(this._changed = !1),
                    (this._updatedLayers = {}),
                    (this._removedLayers = {}),
                    (this._updatedSources = {}),
                    (this._updatedPaintProps = {}),
                    (this._changedImages = {})
                }),
                (r.prototype.setState = function (e) {
                  var r = this
                  if ((this._checkLoaded(), De(this, t.validateStyle(e))))
                    return !1
                  ;(e = t.clone$1(e)).layers = Bt(e.layers)
                  var n = (function (e, r) {
                    if (!e) return [{ command: Nt.setStyle, args: [r] }]
                    var n = []
                    try {
                      if (!t.deepEqual(e.version, r.version))
                        return [{ command: Nt.setStyle, args: [r] }]
                      t.deepEqual(e.center, r.center) ||
                        n.push({ command: Nt.setCenter, args: [r.center] }),
                        t.deepEqual(e.zoom, r.zoom) ||
                          n.push({ command: Nt.setZoom, args: [r.zoom] }),
                        t.deepEqual(e.bearing, r.bearing) ||
                          n.push({ command: Nt.setBearing, args: [r.bearing] }),
                        t.deepEqual(e.pitch, r.pitch) ||
                          n.push({ command: Nt.setPitch, args: [r.pitch] }),
                        t.deepEqual(e.sprite, r.sprite) ||
                          n.push({ command: Nt.setSprite, args: [r.sprite] }),
                        t.deepEqual(e.glyphs, r.glyphs) ||
                          n.push({ command: Nt.setGlyphs, args: [r.glyphs] }),
                        t.deepEqual(e.transition, r.transition) ||
                          n.push({
                            command: Nt.setTransition,
                            args: [r.transition],
                          }),
                        t.deepEqual(e.light, r.light) ||
                          n.push({ command: Nt.setLight, args: [r.light] })
                      var i = {},
                        o = []
                      !(function (e, r, n, i) {
                        var o
                        for (o in ((r = r || {}), (e = e || {})))
                          e.hasOwnProperty(o) &&
                            (r.hasOwnProperty(o) || jt(o, n, i))
                        for (o in r)
                          r.hasOwnProperty(o) &&
                            (e.hasOwnProperty(o)
                              ? t.deepEqual(e[o], r[o]) ||
                                ('geojson' === e[o].type &&
                                'geojson' === r[o].type &&
                                qt(e, r, o)
                                  ? n.push({
                                      command: Nt.setGeoJSONSourceData,
                                      args: [o, r[o].data],
                                    })
                                  : Vt(o, r, n, i))
                              : Ut(o, r, n))
                      })(e.sources, r.sources, o, i)
                      var a = []
                      e.layers &&
                        e.layers.forEach(function (t) {
                          i[t.source]
                            ? n.push({ command: Nt.removeLayer, args: [t.id] })
                            : a.push(t)
                        }),
                        (n = n.concat(o)),
                        (function (e, r, n) {
                          r = r || []
                          var i,
                            o,
                            a,
                            s,
                            l,
                            u,
                            c,
                            p = (e = e || []).map($t),
                            h = r.map($t),
                            f = e.reduce(Zt, {}),
                            d = r.reduce(Zt, {}),
                            m = p.slice(),
                            y = Object.create(null)
                          for (i = 0, o = 0; i < p.length; i++)
                            d.hasOwnProperty((a = p[i]))
                              ? o++
                              : (n.push({ command: Nt.removeLayer, args: [a] }),
                                m.splice(m.indexOf(a, o), 1))
                          for (i = 0, o = 0; i < h.length; i++)
                            m[m.length - 1 - i] !== (a = h[h.length - 1 - i]) &&
                              (f.hasOwnProperty(a)
                                ? (n.push({
                                    command: Nt.removeLayer,
                                    args: [a],
                                  }),
                                  m.splice(m.lastIndexOf(a, m.length - o), 1))
                                : o++,
                              n.push({
                                command: Nt.addLayer,
                                args: [d[a], (u = m[m.length - i])],
                              }),
                              m.splice(m.length - i, 0, a),
                              (y[a] = !0))
                          for (i = 0; i < h.length; i++)
                            if (
                              ((s = f[(a = h[i])]),
                              (l = d[a]),
                              !y[a] && !t.deepEqual(s, l))
                            )
                              if (
                                t.deepEqual(s.source, l.source) &&
                                t.deepEqual(
                                  s['source-layer'],
                                  l['source-layer']
                                ) &&
                                t.deepEqual(s.type, l.type)
                              ) {
                                for (c in (Gt(
                                  s.layout,
                                  l.layout,
                                  n,
                                  a,
                                  null,
                                  Nt.setLayoutProperty
                                ),
                                Gt(
                                  s.paint,
                                  l.paint,
                                  n,
                                  a,
                                  null,
                                  Nt.setPaintProperty
                                ),
                                t.deepEqual(s.filter, l.filter) ||
                                  n.push({
                                    command: Nt.setFilter,
                                    args: [a, l.filter],
                                  }),
                                (t.deepEqual(s.minzoom, l.minzoom) &&
                                  t.deepEqual(s.maxzoom, l.maxzoom)) ||
                                  n.push({
                                    command: Nt.setLayerZoomRange,
                                    args: [a, l.minzoom, l.maxzoom],
                                  }),
                                s))
                                  s.hasOwnProperty(c) &&
                                    'layout' !== c &&
                                    'paint' !== c &&
                                    'filter' !== c &&
                                    'metadata' !== c &&
                                    'minzoom' !== c &&
                                    'maxzoom' !== c &&
                                    (0 === c.indexOf('paint.')
                                      ? Gt(
                                          s[c],
                                          l[c],
                                          n,
                                          a,
                                          c.slice(6),
                                          Nt.setPaintProperty
                                        )
                                      : t.deepEqual(s[c], l[c]) ||
                                        n.push({
                                          command: Nt.setLayerProperty,
                                          args: [a, c, l[c]],
                                        }))
                                for (c in l)
                                  l.hasOwnProperty(c) &&
                                    !s.hasOwnProperty(c) &&
                                    'layout' !== c &&
                                    'paint' !== c &&
                                    'filter' !== c &&
                                    'metadata' !== c &&
                                    'minzoom' !== c &&
                                    'maxzoom' !== c &&
                                    (0 === c.indexOf('paint.')
                                      ? Gt(
                                          s[c],
                                          l[c],
                                          n,
                                          a,
                                          c.slice(6),
                                          Nt.setPaintProperty
                                        )
                                      : t.deepEqual(s[c], l[c]) ||
                                        n.push({
                                          command: Nt.setLayerProperty,
                                          args: [a, c, l[c]],
                                        }))
                              } else
                                n.push({ command: Nt.removeLayer, args: [a] }),
                                  (u = m[m.lastIndexOf(a) + 1]),
                                  n.push({ command: Nt.addLayer, args: [l, u] })
                        })(a, r.layers, n)
                    } catch (t) {
                      console.warn('Unable to compute style diff:', t),
                        (n = [{ command: Nt.setStyle, args: [r] }])
                    }
                    return n
                  })(this.serialize(), e).filter(function (t) {
                    return !(t.command in Fe)
                  })
                  if (0 === n.length) return !1
                  var i = n.filter(function (t) {
                    return !(t.command in Re)
                  })
                  if (i.length > 0)
                    throw new Error(
                      'Unimplemented: ' +
                        i
                          .map(function (t) {
                            return t.command
                          })
                          .join(', ') +
                        '.'
                    )
                  return (
                    n.forEach(function (t) {
                      'setTransition' !== t.command &&
                        r[t.command].apply(r, t.args)
                    }),
                    (this.stylesheet = e),
                    !0
                  )
                }),
                (r.prototype.addImage = function (e, r) {
                  if (this.getImage(e))
                    return this.fire(
                      new t.ErrorEvent(
                        new Error('An image with this name already exists.')
                      )
                    )
                  this.imageManager.addImage(e, r),
                    (this._availableImages = this.imageManager.listImages()),
                    (this._changedImages[e] = !0),
                    (this._changed = !0),
                    this.fire(new t.Event('data', { dataType: 'style' }))
                }),
                (r.prototype.updateImage = function (t, e) {
                  this.imageManager.updateImage(t, e)
                }),
                (r.prototype.getImage = function (t) {
                  return this.imageManager.getImage(t)
                }),
                (r.prototype.removeImage = function (e) {
                  if (!this.getImage(e))
                    return this.fire(
                      new t.ErrorEvent(
                        new Error('No image with this name exists.')
                      )
                    )
                  this.imageManager.removeImage(e),
                    (this._availableImages = this.imageManager.listImages()),
                    (this._changedImages[e] = !0),
                    (this._changed = !0),
                    this.fire(new t.Event('data', { dataType: 'style' }))
                }),
                (r.prototype.listImages = function () {
                  return this._checkLoaded(), this.imageManager.listImages()
                }),
                (r.prototype.addSource = function (e, r, n) {
                  var i = this
                  if (
                    (void 0 === n && (n = {}),
                    this._checkLoaded(),
                    void 0 !== this.sourceCaches[e])
                  )
                    throw new Error('There is already a source with this ID')
                  if (!r.type)
                    throw new Error(
                      'The type property must be defined, but the only the following properties were given: ' +
                        Object.keys(r).join(', ') +
                        '.'
                    )
                  if (
                    !(
                      ['vector', 'raster', 'geojson', 'video', 'image'].indexOf(
                        r.type
                      ) >= 0 &&
                      this._validate(
                        t.validateStyle.source,
                        'sources.' + e,
                        r,
                        null,
                        n
                      )
                    )
                  ) {
                    this.map &&
                      this.map._collectResourceTiming &&
                      (r.collectResourceTiming = !0)
                    var o = (this.sourceCaches[e] = new Pt(
                      e,
                      r,
                      this.dispatcher
                    ))
                    ;(o.style = this),
                      o.setEventedParent(this, function () {
                        return {
                          isSourceLoaded: i.loaded(),
                          source: o.serialize(),
                          sourceId: e,
                        }
                      }),
                      o.onAdd(this.map),
                      (this._changed = !0)
                  }
                }),
                (r.prototype.removeSource = function (e) {
                  if ((this._checkLoaded(), void 0 === this.sourceCaches[e]))
                    throw new Error('There is no source with this ID')
                  for (var r in this._layers)
                    if (this._layers[r].source === e)
                      return this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Source "' +
                              e +
                              '" cannot be removed while layer "' +
                              r +
                              '" is using it.'
                          )
                        )
                      )
                  var n = this.sourceCaches[e]
                  delete this.sourceCaches[e],
                    delete this._updatedSources[e],
                    n.fire(
                      new t.Event('data', {
                        sourceDataType: 'metadata',
                        dataType: 'source',
                        sourceId: e,
                      })
                    ),
                    n.setEventedParent(null),
                    n.clearTiles(),
                    n.onRemove && n.onRemove(this.map),
                    (this._changed = !0)
                }),
                (r.prototype.setGeoJSONSourceData = function (t, e) {
                  this._checkLoaded(),
                    this.sourceCaches[t].getSource().setData(e),
                    (this._changed = !0)
                }),
                (r.prototype.getSource = function (t) {
                  return (
                    this.sourceCaches[t] && this.sourceCaches[t].getSource()
                  )
                }),
                (r.prototype.addLayer = function (e, r, n) {
                  void 0 === n && (n = {}), this._checkLoaded()
                  var i = e.id
                  if (this.getLayer(i))
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          'Layer with id "' + i + '" already exists on this map'
                        )
                      )
                    )
                  else {
                    var o
                    if ('custom' === e.type) {
                      if (De(this, t.validateCustomStyleLayer(e))) return
                      o = t.createStyleLayer(e)
                    } else {
                      if (
                        ('object' == typeof e.source &&
                          (this.addSource(i, e.source),
                          (e = t.clone$1(e)),
                          (e = t.extend(e, { source: i }))),
                        this._validate(
                          t.validateStyle.layer,
                          'layers.' + i,
                          e,
                          { arrayIndex: -1 },
                          n
                        ))
                      )
                        return
                      ;(o = t.createStyleLayer(e)),
                        this._validateLayer(o),
                        o.setEventedParent(this, { layer: { id: i } }),
                        (this._serializedLayers[o.id] = o.serialize())
                    }
                    var a = r ? this._order.indexOf(r) : this._order.length
                    if (r && -1 === a)
                      this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Layer with id "' +
                              r +
                              '" does not exist on this map.'
                          )
                        )
                      )
                    else {
                      if (
                        (this._order.splice(a, 0, i),
                        (this._layerOrderChanged = !0),
                        (this._layers[i] = o),
                        this._removedLayers[i] &&
                          o.source &&
                          'custom' !== o.type)
                      ) {
                        var s = this._removedLayers[i]
                        delete this._removedLayers[i],
                          s.type !== o.type
                            ? (this._updatedSources[o.source] = 'clear')
                            : ((this._updatedSources[o.source] = 'reload'),
                              this.sourceCaches[o.source].pause())
                      }
                      this._updateLayer(o), o.onAdd && o.onAdd(this.map)
                    }
                  }
                }),
                (r.prototype.moveLayer = function (e, r) {
                  if (
                    (this._checkLoaded(), (this._changed = !0), this._layers[e])
                  ) {
                    if (e !== r) {
                      var n = this._order.indexOf(e)
                      this._order.splice(n, 1)
                      var i = r ? this._order.indexOf(r) : this._order.length
                      r && -1 === i
                        ? this.fire(
                            new t.ErrorEvent(
                              new Error(
                                'Layer with id "' +
                                  r +
                                  '" does not exist on this map.'
                              )
                            )
                          )
                        : (this._order.splice(i, 0, e),
                          (this._layerOrderChanged = !0))
                    }
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The layer '" +
                            e +
                            "' does not exist in the map's style and cannot be moved."
                        )
                      )
                    )
                }),
                (r.prototype.removeLayer = function (e) {
                  this._checkLoaded()
                  var r = this._layers[e]
                  if (r) {
                    r.setEventedParent(null)
                    var n = this._order.indexOf(e)
                    this._order.splice(n, 1),
                      (this._layerOrderChanged = !0),
                      (this._changed = !0),
                      (this._removedLayers[e] = r),
                      delete this._layers[e],
                      delete this._serializedLayers[e],
                      delete this._updatedLayers[e],
                      delete this._updatedPaintProps[e],
                      r.onRemove && r.onRemove(this.map)
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The layer '" +
                            e +
                            "' does not exist in the map's style and cannot be removed."
                        )
                      )
                    )
                }),
                (r.prototype.getLayer = function (t) {
                  return this._layers[t]
                }),
                (r.prototype.hasLayer = function (t) {
                  return t in this._layers
                }),
                (r.prototype.setLayerZoomRange = function (e, r, n) {
                  this._checkLoaded()
                  var i = this.getLayer(e)
                  i
                    ? (i.minzoom === r && i.maxzoom === n) ||
                      (null != r && (i.minzoom = r),
                      null != n && (i.maxzoom = n),
                      this._updateLayer(i))
                    : this.fire(
                        new t.ErrorEvent(
                          new Error(
                            "The layer '" +
                              e +
                              "' does not exist in the map's style and cannot have zoom extent."
                          )
                        )
                      )
                }),
                (r.prototype.setFilter = function (e, r, n) {
                  void 0 === n && (n = {}), this._checkLoaded()
                  var i = this.getLayer(e)
                  if (i) {
                    if (!t.deepEqual(i.filter, r))
                      return null == r
                        ? ((i.filter = void 0), void this._updateLayer(i))
                        : void (
                            this._validate(
                              t.validateStyle.filter,
                              'layers.' + i.id + '.filter',
                              r,
                              null,
                              n
                            ) ||
                            ((i.filter = t.clone$1(r)), this._updateLayer(i))
                          )
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The layer '" +
                            e +
                            "' does not exist in the map's style and cannot be filtered."
                        )
                      )
                    )
                }),
                (r.prototype.getFilter = function (e) {
                  return t.clone$1(this.getLayer(e).filter)
                }),
                (r.prototype.setLayoutProperty = function (e, r, n, i) {
                  void 0 === i && (i = {}), this._checkLoaded()
                  var o = this.getLayer(e)
                  o
                    ? t.deepEqual(o.getLayoutProperty(r), n) ||
                      (o.setLayoutProperty(r, n, i), this._updateLayer(o))
                    : this.fire(
                        new t.ErrorEvent(
                          new Error(
                            "The layer '" +
                              e +
                              "' does not exist in the map's style and cannot be styled."
                          )
                        )
                      )
                }),
                (r.prototype.getLayoutProperty = function (e, r) {
                  var n = this.getLayer(e)
                  if (n) return n.getLayoutProperty(r)
                  this.fire(
                    new t.ErrorEvent(
                      new Error(
                        "The layer '" +
                          e +
                          "' does not exist in the map's style."
                      )
                    )
                  )
                }),
                (r.prototype.setPaintProperty = function (e, r, n, i) {
                  void 0 === i && (i = {}), this._checkLoaded()
                  var o = this.getLayer(e)
                  o
                    ? t.deepEqual(o.getPaintProperty(r), n) ||
                      (o.setPaintProperty(r, n, i) && this._updateLayer(o),
                      (this._changed = !0),
                      (this._updatedPaintProps[e] = !0))
                    : this.fire(
                        new t.ErrorEvent(
                          new Error(
                            "The layer '" +
                              e +
                              "' does not exist in the map's style and cannot be styled."
                          )
                        )
                      )
                }),
                (r.prototype.getPaintProperty = function (t, e) {
                  return this.getLayer(t).getPaintProperty(e)
                }),
                (r.prototype.setFeatureState = function (e, r) {
                  this._checkLoaded()
                  var n = e.source,
                    i = e.sourceLayer,
                    o = this.sourceCaches[n]
                  if (void 0 !== o) {
                    var a = o.getSource().type
                    'geojson' === a && i
                      ? this.fire(
                          new t.ErrorEvent(
                            new Error(
                              'GeoJSON sources cannot have a sourceLayer parameter.'
                            )
                          )
                        )
                      : 'vector' !== a || i
                      ? (void 0 === e.id &&
                          this.fire(
                            new t.ErrorEvent(
                              new Error(
                                'The feature id parameter must be provided.'
                              )
                            )
                          ),
                        o.setFeatureState(i, e.id, r))
                      : this.fire(
                          new t.ErrorEvent(
                            new Error(
                              'The sourceLayer parameter must be provided for vector source types.'
                            )
                          )
                        )
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The source '" +
                            n +
                            "' does not exist in the map's style."
                        )
                      )
                    )
                }),
                (r.prototype.removeFeatureState = function (e, r) {
                  this._checkLoaded()
                  var n = e.source,
                    i = this.sourceCaches[n]
                  if (void 0 !== i) {
                    var o = i.getSource().type,
                      a = 'vector' === o ? e.sourceLayer : void 0
                    'vector' !== o || a
                      ? r && 'string' != typeof e.id && 'number' != typeof e.id
                        ? this.fire(
                            new t.ErrorEvent(
                              new Error(
                                'A feature id is requred to remove its specific state property.'
                              )
                            )
                          )
                        : i.removeFeatureState(a, e.id, r)
                      : this.fire(
                          new t.ErrorEvent(
                            new Error(
                              'The sourceLayer parameter must be provided for vector source types.'
                            )
                          )
                        )
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The source '" +
                            n +
                            "' does not exist in the map's style."
                        )
                      )
                    )
                }),
                (r.prototype.getFeatureState = function (e) {
                  this._checkLoaded()
                  var r = e.source,
                    n = e.sourceLayer,
                    i = this.sourceCaches[r]
                  if (void 0 !== i) {
                    if ('vector' !== i.getSource().type || n)
                      return (
                        void 0 === e.id &&
                          this.fire(
                            new t.ErrorEvent(
                              new Error(
                                'The feature id parameter must be provided.'
                              )
                            )
                          ),
                        i.getFeatureState(n, e.id)
                      )
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          'The sourceLayer parameter must be provided for vector source types.'
                        )
                      )
                    )
                  } else
                    this.fire(
                      new t.ErrorEvent(
                        new Error(
                          "The source '" +
                            r +
                            "' does not exist in the map's style."
                        )
                      )
                    )
                }),
                (r.prototype.getTransition = function () {
                  return t.extend(
                    { duration: 300, delay: 0 },
                    this.stylesheet && this.stylesheet.transition
                  )
                }),
                (r.prototype.serialize = function () {
                  return t.filterObject(
                    {
                      version: this.stylesheet.version,
                      name: this.stylesheet.name,
                      metadata: this.stylesheet.metadata,
                      light: this.stylesheet.light,
                      center: this.stylesheet.center,
                      zoom: this.stylesheet.zoom,
                      bearing: this.stylesheet.bearing,
                      pitch: this.stylesheet.pitch,
                      sprite: this.stylesheet.sprite,
                      glyphs: this.stylesheet.glyphs,
                      transition: this.stylesheet.transition,
                      sources: t.mapObject(this.sourceCaches, function (t) {
                        return t.serialize()
                      }),
                      layers: this._serializeLayers(this._order),
                    },
                    function (t) {
                      return void 0 !== t
                    }
                  )
                }),
                (r.prototype._updateLayer = function (t) {
                  ;(this._updatedLayers[t.id] = !0),
                    t.source &&
                      !this._updatedSources[t.source] &&
                      'raster' !==
                        this.sourceCaches[t.source].getSource().type &&
                      ((this._updatedSources[t.source] = 'reload'),
                      this.sourceCaches[t.source].pause()),
                    (this._changed = !0)
                }),
                (r.prototype._flattenAndSortRenderedFeatures = function (t) {
                  for (
                    var e = this,
                      r = function (t) {
                        return 'fill-extrusion' === e._layers[t].type
                      },
                      n = {},
                      i = [],
                      o = this._order.length - 1;
                    o >= 0;
                    o--
                  ) {
                    var a = this._order[o]
                    if (r(a)) {
                      n[a] = o
                      for (var s = 0, l = t; s < l.length; s += 1) {
                        var u = l[s][a]
                        if (u)
                          for (var c = 0, p = u; c < p.length; c += 1)
                            i.push(p[c])
                      }
                    }
                  }
                  i.sort(function (t, e) {
                    return e.intersectionZ - t.intersectionZ
                  })
                  for (var h = [], f = this._order.length - 1; f >= 0; f--) {
                    var d = this._order[f]
                    if (r(d))
                      for (var m = i.length - 1; m >= 0; m--) {
                        var y = i[m].feature
                        if (n[y.layer.id] < f) break
                        h.push(y), i.pop()
                      }
                    else
                      for (var v = 0, g = t; v < g.length; v += 1) {
                        var _ = g[v][d]
                        if (_)
                          for (var x = 0, b = _; x < b.length; x += 1)
                            h.push(b[x].feature)
                      }
                  }
                  return h
                }),
                (r.prototype.queryRenderedFeatures = function (e, r, n) {
                  r &&
                    r.filter &&
                    this._validate(
                      t.validateStyle.filter,
                      'queryRenderedFeatures.filter',
                      r.filter,
                      null,
                      r
                    )
                  var i = {}
                  if (r && r.layers) {
                    if (!Array.isArray(r.layers))
                      return (
                        this.fire(
                          new t.ErrorEvent(
                            new Error('parameters.layers must be an Array.')
                          )
                        ),
                        []
                      )
                    for (var o = 0, a = r.layers; o < a.length; o += 1) {
                      var s = a[o],
                        l = this._layers[s]
                      if (!l)
                        return (
                          this.fire(
                            new t.ErrorEvent(
                              new Error(
                                "The layer '" +
                                  s +
                                  "' does not exist in the map's style and cannot be queried for features."
                              )
                            )
                          ),
                          []
                        )
                      i[l.source] = !0
                    }
                  }
                  var u = []
                  for (var c in ((r.availableImages = this._availableImages),
                  this.sourceCaches))
                    (r.layers && !i[c]) ||
                      u.push(
                        F(
                          this.sourceCaches[c],
                          this._layers,
                          this._serializedLayers,
                          e,
                          r,
                          n
                        )
                      )
                  return (
                    this.placement &&
                      u.push(
                        (function (t, e, r, n, i, o, a) {
                          for (
                            var s = {},
                              l = o.queryRenderedSymbols(n),
                              u = [],
                              c = 0,
                              p = Object.keys(l).map(Number);
                            c < p.length;
                            c += 1
                          )
                            u.push(a[p[c]])
                          u.sort(B)
                          for (
                            var h = function () {
                                var r = d[f],
                                  n = r.featureIndex.lookupSymbolFeatures(
                                    l[r.bucketInstanceId],
                                    e,
                                    r.bucketIndex,
                                    r.sourceLayerIndex,
                                    i.filter,
                                    i.layers,
                                    i.availableImages,
                                    t
                                  )
                                for (var o in n) {
                                  var a = (s[o] = s[o] || []),
                                    u = n[o]
                                  u.sort(function (t, e) {
                                    var n = r.featureSortOrder
                                    if (n) {
                                      var i = n.indexOf(t.featureIndex)
                                      return n.indexOf(e.featureIndex) - i
                                    }
                                    return e.featureIndex - t.featureIndex
                                  })
                                  for (var c = 0, p = u; c < p.length; c += 1)
                                    a.push(p[c])
                                }
                              },
                              f = 0,
                              d = u;
                            f < d.length;
                            f += 1
                          )
                            h()
                          var m = function (e) {
                            s[e].forEach(function (n) {
                              var i = n.feature,
                                o = r[t[e].source].getFeatureState(
                                  i.layer['source-layer'],
                                  i.id
                                )
                              ;(i.source = i.layer.source),
                                i.layer['source-layer'] &&
                                  (i.sourceLayer = i.layer['source-layer']),
                                (i.state = o)
                            })
                          }
                          for (var y in s) m(y)
                          return s
                        })(
                          this._layers,
                          this._serializedLayers,
                          this.sourceCaches,
                          e,
                          r,
                          this.placement.collisionIndex,
                          this.placement.retainedQueryData
                        )
                      ),
                    this._flattenAndSortRenderedFeatures(u)
                  )
                }),
                (r.prototype.querySourceFeatures = function (e, r) {
                  r &&
                    r.filter &&
                    this._validate(
                      t.validateStyle.filter,
                      'querySourceFeatures.filter',
                      r.filter,
                      null,
                      r
                    )
                  var n = this.sourceCaches[e]
                  return n
                    ? (function (t, e) {
                        for (
                          var r = t.getRenderableIds().map(function (e) {
                              return t.getTileByID(e)
                            }),
                            n = [],
                            i = {},
                            o = 0;
                          o < r.length;
                          o++
                        ) {
                          var a = r[o],
                            s = a.tileID.canonical.key
                          i[s] || ((i[s] = !0), a.querySourceFeatures(n, e))
                        }
                        return n
                      })(n, r)
                    : []
                }),
                (r.prototype.addSourceType = function (t, e, n) {
                  return r.getSourceType(t)
                    ? n(
                        new Error(
                          'A source type called "' + t + '" already exists.'
                        )
                      )
                    : (r.setSourceType(t, e),
                      e.workerSourceURL
                        ? void this.dispatcher.broadcast(
                            'loadWorkerSource',
                            { name: t, url: e.workerSourceURL },
                            n
                          )
                        : n(null, null))
                }),
                (r.prototype.getLight = function () {
                  return this.light.getLight()
                }),
                (r.prototype.setLight = function (e, r) {
                  void 0 === r && (r = {}), this._checkLoaded()
                  var n = this.light.getLight(),
                    i = !1
                  for (var o in e)
                    if (!t.deepEqual(e[o], n[o])) {
                      i = !0
                      break
                    }
                  if (i) {
                    var a = {
                      now: t.browser.now(),
                      transition: t.extend(
                        { duration: 300, delay: 0 },
                        this.stylesheet.transition
                      ),
                    }
                    this.light.setLight(e, r), this.light.updateTransitions(a)
                  }
                }),
                (r.prototype._validate = function (e, r, n, i, o) {
                  return (
                    void 0 === o && (o = {}),
                    (!o || !1 !== o.validate) &&
                      De(
                        this,
                        e.call(
                          t.validateStyle,
                          t.extend(
                            {
                              key: r,
                              style: this.serialize(),
                              value: n,
                              styleSpec: t.styleSpec,
                            },
                            i
                          )
                        )
                      )
                  )
                }),
                (r.prototype._remove = function () {
                  for (var e in (this._request &&
                    (this._request.cancel(), (this._request = null)),
                  this._spriteRequest &&
                    (this._spriteRequest.cancel(),
                    (this._spriteRequest = null)),
                  t.evented.off(
                    'pluginStateChange',
                    this._rtlTextPluginCallback
                  ),
                  this._layers))
                    this._layers[e].setEventedParent(null)
                  for (var r in this.sourceCaches)
                    this.sourceCaches[r].clearTiles(),
                      this.sourceCaches[r].setEventedParent(null)
                  this.imageManager.setEventedParent(null),
                    this.setEventedParent(null),
                    this.dispatcher.remove()
                }),
                (r.prototype._clearSource = function (t) {
                  this.sourceCaches[t].clearTiles()
                }),
                (r.prototype._reloadSource = function (t) {
                  this.sourceCaches[t].resume(), this.sourceCaches[t].reload()
                }),
                (r.prototype._updateSources = function (t) {
                  for (var e in this.sourceCaches)
                    this.sourceCaches[e].update(t)
                }),
                (r.prototype._generateCollisionBoxes = function () {
                  for (var t in this.sourceCaches) this._reloadSource(t)
                }),
                (r.prototype._updatePlacement = function (e, r, n, i, o) {
                  void 0 === o && (o = !1)
                  for (
                    var a = !1, s = !1, l = {}, u = 0, c = this._order;
                    u < c.length;
                    u += 1
                  ) {
                    var p = this._layers[c[u]]
                    if ('symbol' === p.type) {
                      if (!l[p.source]) {
                        var h = this.sourceCaches[p.source]
                        l[p.source] = h
                          .getRenderableIds(!0)
                          .map(function (t) {
                            return h.getTileByID(t)
                          })
                          .sort(function (t, e) {
                            return (
                              e.tileID.overscaledZ - t.tileID.overscaledZ ||
                              (t.tileID.isLessThan(e.tileID) ? -1 : 1)
                            )
                          })
                      }
                      var f = this.crossTileSymbolIndex.addLayer(
                        p,
                        l[p.source],
                        e.center.lng
                      )
                      a = a || f
                    }
                  }
                  if (
                    (this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
                    ((o = o || this._layerOrderChanged || 0 === n) ||
                      !this.pauseablePlacement ||
                      (this.pauseablePlacement.isDone() &&
                        !this.placement.stillRecent(
                          t.browser.now(),
                          e.zoom
                        ))) &&
                      ((this.pauseablePlacement = new ke(
                        e,
                        this._order,
                        o,
                        r,
                        n,
                        i,
                        this.placement
                      )),
                      (this._layerOrderChanged = !1)),
                    this.pauseablePlacement.isDone()
                      ? this.placement.setStale()
                      : (this.pauseablePlacement.continuePlacement(
                          this._order,
                          this._layers,
                          l
                        ),
                        this.pauseablePlacement.isDone() &&
                          ((this.placement = this.pauseablePlacement.commit(
                            t.browser.now()
                          )),
                          (s = !0)),
                        a && this.pauseablePlacement.placement.setStale()),
                    s || a)
                  )
                    for (var d = 0, m = this._order; d < m.length; d += 1) {
                      var y = this._layers[m[d]]
                      'symbol' === y.type &&
                        this.placement.updateLayerOpacities(y, l[y.source])
                    }
                  return (
                    !this.pauseablePlacement.isDone() ||
                    this.placement.hasTransitions(t.browser.now())
                  )
                }),
                (r.prototype._releaseSymbolFadeTiles = function () {
                  for (var t in this.sourceCaches)
                    this.sourceCaches[t].releaseSymbolFadeTiles()
                }),
                (r.prototype.getImages = function (t, e, r) {
                  this.imageManager.getImages(e.icons, r),
                    this._updateTilesForChangedImages()
                  var n = this.sourceCaches[e.source]
                  n && n.setDependencies(e.tileID.key, e.type, e.icons)
                }),
                (r.prototype.getGlyphs = function (t, e, r) {
                  this.glyphManager.getGlyphs(e.stacks, r)
                }),
                (r.prototype.getResource = function (e, r, n) {
                  return t.makeRequest(r, n)
                }),
                r
              )
            })(t.Evented)
          ;(Ne.getSourceType = function (t) {
            return D[t]
          }),
            (Ne.setSourceType = function (t, e) {
              D[t] = e
            }),
            (Ne.registerForPluginStateChange = t.registerForPluginStateChange)
          var Ue = t.createLayout([
              { name: 'a_pos', type: 'Int16', components: 2 },
            ]),
            je = fr(
              '#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif',
              '#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}'
            ),
            Ve = fr(
              'uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}'
            ),
            qe = fr(
              'uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}'
            ),
            Ge = fr(
              'varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}'
            ),
            $e = fr(
              'void main() {gl_FragColor=vec4(1.0);}',
              'attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}'
            ),
            Ze = fr(
              'uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}'
            ),
            Xe = fr(
              'uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}'
            ),
            Ke = fr(
              'varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}',
              'attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'
            ),
            We = fr(
              'uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}',
              'attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}'
            ),
            He = fr(
              'uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}',
              'attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}'
            ),
            Je = fr(
              '#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}'
            ),
            Ye = fr(
              'varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}'
            ),
            Qe = fr(
              'uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}'
            ),
            tr = fr(
              'uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}'
            ),
            er = fr(
              'varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}'
            ),
            rr = fr(
              'uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}'
            ),
            nr = fr(
              '#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}'
            ),
            ir = fr(
              'uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}'
            ),
            or = fr(
              'uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              '\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}'
            ),
            ar = fr(
              'uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              '\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}'
            ),
            sr = fr(
              'uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              '\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}'
            ),
            lr = fr(
              'uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              '\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}'
            ),
            ur = fr(
              'uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}'
            ),
            cr = fr(
              'uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}'
            ),
            pr = fr(
              '#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}'
            ),
            hr = fr(
              '#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}',
              'const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}'
            )
          function fr(t, e) {
            var r = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
              n = {}
            return {
              fragmentSource: (t = t.replace(r, function (t, e, r, i, o) {
                return (
                  (n[o] = !0),
                  'define' === e
                    ? '\n#ifndef HAS_UNIFORM_u_' +
                      o +
                      '\nvarying ' +
                      r +
                      ' ' +
                      i +
                      ' ' +
                      o +
                      ';\n#else\nuniform ' +
                      r +
                      ' ' +
                      i +
                      ' u_' +
                      o +
                      ';\n#endif\n'
                    : '\n#ifdef HAS_UNIFORM_u_' +
                      o +
                      '\n    ' +
                      r +
                      ' ' +
                      i +
                      ' ' +
                      o +
                      ' = u_' +
                      o +
                      ';\n#endif\n'
                )
              })),
              vertexSource: (e = e.replace(r, function (t, e, r, i, o) {
                var a = 'float' === i ? 'vec2' : 'vec4',
                  s = o.match(/color/) ? 'color' : a
                return n[o]
                  ? 'define' === e
                    ? '\n#ifndef HAS_UNIFORM_u_' +
                      o +
                      '\nuniform lowp float u_' +
                      o +
                      '_t;\nattribute ' +
                      r +
                      ' ' +
                      a +
                      ' a_' +
                      o +
                      ';\nvarying ' +
                      r +
                      ' ' +
                      i +
                      ' ' +
                      o +
                      ';\n#else\nuniform ' +
                      r +
                      ' ' +
                      i +
                      ' u_' +
                      o +
                      ';\n#endif\n'
                    : 'vec4' === s
                    ? '\n#ifndef HAS_UNIFORM_u_' +
                      o +
                      '\n    ' +
                      o +
                      ' = a_' +
                      o +
                      ';\n#else\n    ' +
                      r +
                      ' ' +
                      i +
                      ' ' +
                      o +
                      ' = u_' +
                      o +
                      ';\n#endif\n'
                    : '\n#ifndef HAS_UNIFORM_u_' +
                      o +
                      '\n    ' +
                      o +
                      ' = unpack_mix_' +
                      s +
                      '(a_' +
                      o +
                      ', u_' +
                      o +
                      '_t);\n#else\n    ' +
                      r +
                      ' ' +
                      i +
                      ' ' +
                      o +
                      ' = u_' +
                      o +
                      ';\n#endif\n'
                  : 'define' === e
                  ? '\n#ifndef HAS_UNIFORM_u_' +
                    o +
                    '\nuniform lowp float u_' +
                    o +
                    '_t;\nattribute ' +
                    r +
                    ' ' +
                    a +
                    ' a_' +
                    o +
                    ';\n#else\nuniform ' +
                    r +
                    ' ' +
                    i +
                    ' u_' +
                    o +
                    ';\n#endif\n'
                  : 'vec4' === s
                  ? '\n#ifndef HAS_UNIFORM_u_' +
                    o +
                    '\n    ' +
                    r +
                    ' ' +
                    i +
                    ' ' +
                    o +
                    ' = a_' +
                    o +
                    ';\n#else\n    ' +
                    r +
                    ' ' +
                    i +
                    ' ' +
                    o +
                    ' = u_' +
                    o +
                    ';\n#endif\n'
                  : '\n#ifndef HAS_UNIFORM_u_' +
                    o +
                    '\n    ' +
                    r +
                    ' ' +
                    i +
                    ' ' +
                    o +
                    ' = unpack_mix_' +
                    s +
                    '(a_' +
                    o +
                    ', u_' +
                    o +
                    '_t);\n#else\n    ' +
                    r +
                    ' ' +
                    i +
                    ' ' +
                    o +
                    ' = u_' +
                    o +
                    ';\n#endif\n'
              })),
            }
          }
          var dr = Object.freeze({
              __proto__: null,
              prelude: je,
              background: Ve,
              backgroundPattern: qe,
              circle: Ge,
              clippingMask: $e,
              heatmap: Ze,
              heatmapTexture: Xe,
              collisionBox: Ke,
              collisionCircle: We,
              debug: He,
              fill: Je,
              fillOutline: Ye,
              fillOutlinePattern: Qe,
              fillPattern: tr,
              fillExtrusion: er,
              fillExtrusionPattern: rr,
              hillshadePrepare: nr,
              hillshade: ir,
              line: or,
              lineGradient: ar,
              linePattern: sr,
              lineSDF: lr,
              raster: ur,
              symbolIcon: cr,
              symbolSDF: pr,
              symbolTextAndIcon: hr,
            }),
            mr = function () {
              ;(this.boundProgram = null),
                (this.boundLayoutVertexBuffer = null),
                (this.boundPaintVertexBuffers = []),
                (this.boundIndexBuffer = null),
                (this.boundVertexOffset = null),
                (this.boundDynamicVertexBuffer = null),
                (this.vao = null)
            }
          ;(mr.prototype.bind = function (t, e, r, n, i, o, a, s) {
            this.context = t
            for (
              var l = this.boundPaintVertexBuffers.length !== n.length, u = 0;
              !l && u < n.length;
              u++
            )
              this.boundPaintVertexBuffers[u] !== n[u] && (l = !0)
            t.extVertexArrayObject &&
            this.vao &&
            this.boundProgram === e &&
            this.boundLayoutVertexBuffer === r &&
            !l &&
            this.boundIndexBuffer === i &&
            this.boundVertexOffset === o &&
            this.boundDynamicVertexBuffer === a &&
            this.boundDynamicVertexBuffer2 === s
              ? (t.bindVertexArrayOES.set(this.vao),
                a && a.bind(),
                i && i.dynamicDraw && i.bind(),
                s && s.bind())
              : this.freshBind(e, r, n, i, o, a, s)
          }),
            (mr.prototype.freshBind = function (t, e, r, n, i, o, a) {
              var s,
                l = t.numAttributes,
                u = this.context,
                c = u.gl
              if (u.extVertexArrayObject)
                this.vao && this.destroy(),
                  (this.vao = u.extVertexArrayObject.createVertexArrayOES()),
                  u.bindVertexArrayOES.set(this.vao),
                  (s = 0),
                  (this.boundProgram = t),
                  (this.boundLayoutVertexBuffer = e),
                  (this.boundPaintVertexBuffers = r),
                  (this.boundIndexBuffer = n),
                  (this.boundVertexOffset = i),
                  (this.boundDynamicVertexBuffer = o),
                  (this.boundDynamicVertexBuffer2 = a)
              else {
                s = u.currentNumAttributes || 0
                for (var p = l; p < s; p++) c.disableVertexAttribArray(p)
              }
              e.enableAttributes(c, t)
              for (var h = 0, f = r; h < f.length; h += 1)
                f[h].enableAttributes(c, t)
              o && o.enableAttributes(c, t),
                a && a.enableAttributes(c, t),
                e.bind(),
                e.setVertexAttribPointers(c, t, i)
              for (var d = 0, m = r; d < m.length; d += 1) {
                var y = m[d]
                y.bind(), y.setVertexAttribPointers(c, t, i)
              }
              o && (o.bind(), o.setVertexAttribPointers(c, t, i)),
                n && n.bind(),
                a && (a.bind(), a.setVertexAttribPointers(c, t, i)),
                (u.currentNumAttributes = l)
            }),
            (mr.prototype.destroy = function () {
              this.vao &&
                (this.context.extVertexArrayObject.deleteVertexArrayOES(
                  this.vao
                ),
                (this.vao = null))
            })
          var yr = function (t, e, r, n, i) {
            var o = t.gl
            this.program = o.createProgram()
            var a = r ? r.defines() : []
            i && a.push('#define OVERDRAW_INSPECTOR;')
            var s = a.concat(je.fragmentSource, e.fragmentSource).join('\n'),
              l = a.concat(je.vertexSource, e.vertexSource).join('\n'),
              u = o.createShader(o.FRAGMENT_SHADER)
            if (o.isContextLost()) this.failedToCreate = !0
            else {
              o.shaderSource(u, s),
                o.compileShader(u),
                o.attachShader(this.program, u)
              var c = o.createShader(o.VERTEX_SHADER)
              if (o.isContextLost()) this.failedToCreate = !0
              else {
                o.shaderSource(c, l),
                  o.compileShader(c),
                  o.attachShader(this.program, c)
                for (
                  var p = r ? r.layoutAttributes : [], h = 0;
                  h < p.length;
                  h++
                )
                  o.bindAttribLocation(this.program, h, p[h].name)
                o.linkProgram(this.program),
                  (this.numAttributes = o.getProgramParameter(
                    this.program,
                    o.ACTIVE_ATTRIBUTES
                  )),
                  (this.attributes = {})
                for (var f = {}, d = 0; d < this.numAttributes; d++) {
                  var m = o.getActiveAttrib(this.program, d)
                  m &&
                    (this.attributes[m.name] = o.getAttribLocation(
                      this.program,
                      m.name
                    ))
                }
                for (
                  var y = o.getProgramParameter(
                      this.program,
                      o.ACTIVE_UNIFORMS
                    ),
                    v = 0;
                  v < y;
                  v++
                ) {
                  var g = o.getActiveUniform(this.program, v)
                  g && (f[g.name] = o.getUniformLocation(this.program, g.name))
                }
                ;(this.fixedUniforms = n(t, f)),
                  (this.binderUniforms = r ? r.getUniforms(t, f) : [])
              }
            }
          }
          function vr(t, e, r) {
            var n = 1 / ue(r, 1, e.transform.tileZoom),
              i = Math.pow(2, r.tileID.overscaledZ),
              o = (r.tileSize * Math.pow(2, e.transform.tileZoom)) / i,
              a = o * (r.tileID.canonical.x + r.tileID.wrap * i),
              s = o * r.tileID.canonical.y
            return {
              u_image: 0,
              u_texsize: r.imageAtlasTexture.size,
              u_scale: [n, t.fromScale, t.toScale],
              u_fade: t.t,
              u_pixel_coord_upper: [a >> 16, s >> 16],
              u_pixel_coord_lower: [65535 & a, 65535 & s],
            }
          }
          yr.prototype.draw = function (
            t,
            e,
            r,
            n,
            i,
            o,
            a,
            s,
            l,
            u,
            c,
            p,
            h,
            f,
            d,
            m
          ) {
            var y,
              v = t.gl
            if (!this.failedToCreate) {
              for (var g in (t.program.set(this.program),
              t.setDepthMode(r),
              t.setStencilMode(n),
              t.setColorMode(i),
              t.setCullFace(o),
              this.fixedUniforms))
                this.fixedUniforms[g].set(a[g])
              f && f.setUniforms(t, this.binderUniforms, p, { zoom: h })
              for (
                var _ = ((y = {}),
                  (y[v.LINES] = 2),
                  (y[v.TRIANGLES] = 3),
                  (y[v.LINE_STRIP] = 1),
                  y)[e],
                  x = 0,
                  b = c.get();
                x < b.length;
                x += 1
              ) {
                var w = b[x],
                  E = w.vaos || (w.vaos = {})
                ;(E[s] || (E[s] = new mr())).bind(
                  t,
                  this,
                  l,
                  f ? f.getPaintVertexBuffers() : [],
                  u,
                  w.vertexOffset,
                  d,
                  m
                ),
                  v.drawElements(
                    e,
                    w.primitiveLength * _,
                    v.UNSIGNED_SHORT,
                    w.primitiveOffset * _ * 2
                  )
              }
            }
          }
          var gr = function (e, r, n, i) {
              var o = r.style.light,
                a = o.properties.get('position'),
                s = [a.x, a.y, a.z],
                l = t.create$1()
              'viewport' === o.properties.get('anchor') &&
                t.fromRotation(l, -r.transform.angle),
                t.transformMat3(s, s, l)
              var u = o.properties.get('color')
              return {
                u_matrix: e,
                u_lightpos: s,
                u_lightintensity: o.properties.get('intensity'),
                u_lightcolor: [u.r, u.g, u.b],
                u_vertical_gradient: +n,
                u_opacity: i,
              }
            },
            _r = function (e, r, n, i, o, a, s) {
              return t.extend(gr(e, r, n, i), vr(a, r, s), {
                u_height_factor: -Math.pow(2, o.overscaledZ) / s.tileSize / 8,
              })
            },
            xr = function (t) {
              return { u_matrix: t }
            },
            br = function (e, r, n, i) {
              return t.extend(xr(e), vr(n, r, i))
            },
            wr = function (t, e) {
              return { u_matrix: t, u_world: e }
            },
            Er = function (e, r, n, i, o) {
              return t.extend(br(e, r, n, i), { u_world: o })
            },
            Sr = function (e, r, n, i) {
              var o,
                a,
                s = e.transform
              if ('map' === i.paint.get('circle-pitch-alignment')) {
                var l = ue(n, 1, s.zoom)
                ;(o = !0), (a = [l, l])
              } else (o = !1), (a = s.pixelsToGLUnits)
              return {
                u_camera_to_center_distance: s.cameraToCenterDistance,
                u_scale_with_map: +(
                  'map' === i.paint.get('circle-pitch-scale')
                ),
                u_matrix: e.translatePosMatrix(
                  r.posMatrix,
                  n,
                  i.paint.get('circle-translate'),
                  i.paint.get('circle-translate-anchor')
                ),
                u_pitch_with_map: +o,
                u_device_pixel_ratio: t.browser.devicePixelRatio,
                u_extrude_scale: a,
              }
            },
            Tr = function (e, r) {
              return {
                u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                u_camera_to_center_distance: new t.Uniform1f(
                  e,
                  r.u_camera_to_center_distance
                ),
                u_pixels_to_tile_units: new t.Uniform1f(
                  e,
                  r.u_pixels_to_tile_units
                ),
                u_extrude_scale: new t.Uniform2f(e, r.u_extrude_scale),
                u_overscale_factor: new t.Uniform1f(e, r.u_overscale_factor),
              }
            },
            Ir = function (t, e, r) {
              var n = ue(r, 1, e.zoom),
                i = Math.pow(2, e.zoom - r.tileID.overscaledZ),
                o = r.tileID.overscaleFactor()
              return {
                u_matrix: t,
                u_camera_to_center_distance: e.cameraToCenterDistance,
                u_pixels_to_tile_units: n,
                u_extrude_scale: [
                  e.pixelsToGLUnits[0] / (n * i),
                  e.pixelsToGLUnits[1] / (n * i),
                ],
                u_overscale_factor: o,
              }
            },
            Cr = function (t, e, r) {
              return (
                void 0 === r && (r = 1),
                { u_matrix: t, u_color: e, u_overlay: 0, u_overlay_scale: r }
              )
            },
            Ar = function (t) {
              return { u_matrix: t }
            },
            kr = function (t, e, r, n) {
              return {
                u_matrix: t,
                u_extrude_scale: ue(e, 1, r),
                u_intensity: n,
              }
            },
            Pr = function (e, r, n) {
              var i = n.paint.get('hillshade-shadow-color'),
                o = n.paint.get('hillshade-highlight-color'),
                a = n.paint.get('hillshade-accent-color'),
                s =
                  n.paint.get('hillshade-illumination-direction') *
                  (Math.PI / 180)
              'viewport' === n.paint.get('hillshade-illumination-anchor') &&
                (s -= e.transform.angle)
              var l,
                u,
                c,
                p = !e.options.moving
              return {
                u_matrix: e.transform.calculatePosMatrix(
                  r.tileID.toUnwrapped(),
                  p
                ),
                u_image: 0,
                u_latrange:
                  ((l = r.tileID),
                  (u = Math.pow(2, l.canonical.z)),
                  (c = l.canonical.y),
                  [
                    new t.MercatorCoordinate(0, c / u).toLngLat().lat,
                    new t.MercatorCoordinate(0, (c + 1) / u).toLngLat().lat,
                  ]),
                u_light: [n.paint.get('hillshade-exaggeration'), s],
                u_shadow: i,
                u_highlight: o,
                u_accent: a,
              }
            },
            Mr = function (e, r, n) {
              var i = e.transform
              return {
                u_matrix: Rr(e, r, n),
                u_ratio: 1 / ue(r, 1, i.zoom),
                u_device_pixel_ratio: t.browser.devicePixelRatio,
                u_units_to_pixels: [
                  1 / i.pixelsToGLUnits[0],
                  1 / i.pixelsToGLUnits[1],
                ],
              }
            },
            Lr = function (e, r, n) {
              return t.extend(Mr(e, r, n), { u_image: 0 })
            },
            zr = function (e, r, n, i) {
              var o = e.transform,
                a = Dr(r, o)
              return {
                u_matrix: Rr(e, r, n),
                u_texsize: r.imageAtlasTexture.size,
                u_ratio: 1 / ue(r, 1, o.zoom),
                u_device_pixel_ratio: t.browser.devicePixelRatio,
                u_image: 0,
                u_scale: [a, i.fromScale, i.toScale],
                u_fade: i.t,
                u_units_to_pixels: [
                  1 / o.pixelsToGLUnits[0],
                  1 / o.pixelsToGLUnits[1],
                ],
              }
            },
            Or = function (e, r, n, i, o) {
              var a = e.lineAtlas,
                s = Dr(r, e.transform),
                l = 'round' === n.layout.get('line-cap'),
                u = a.getDash(i.from, l),
                c = a.getDash(i.to, l),
                p = u.width * o.fromScale,
                h = c.width * o.toScale
              return t.extend(Mr(e, r, n), {
                u_patternscale_a: [s / p, -u.height / 2],
                u_patternscale_b: [s / h, -c.height / 2],
                u_sdfgamma:
                  a.width /
                  (256 * Math.min(p, h) * t.browser.devicePixelRatio) /
                  2,
                u_image: 0,
                u_tex_y_a: u.y,
                u_tex_y_b: c.y,
                u_mix: o.t,
              })
            }
          function Dr(t, e) {
            return 1 / ue(t, 1, e.tileZoom)
          }
          function Rr(t, e, r) {
            return t.translatePosMatrix(
              e.tileID.posMatrix,
              e,
              r.paint.get('line-translate'),
              r.paint.get('line-translate-anchor')
            )
          }
          var Fr = function (t, e, r, n, i) {
            return {
              u_matrix: t,
              u_tl_parent: e,
              u_scale_parent: r,
              u_buffer_scale: 1,
              u_fade_t: n.mix,
              u_opacity: n.opacity * i.paint.get('raster-opacity'),
              u_image0: 0,
              u_image1: 1,
              u_brightness_low: i.paint.get('raster-brightness-min'),
              u_brightness_high: i.paint.get('raster-brightness-max'),
              u_saturation_factor:
                ((a = i.paint.get('raster-saturation')),
                a > 0 ? 1 - 1 / (1.001 - a) : -a),
              u_contrast_factor:
                ((o = i.paint.get('raster-contrast')),
                o > 0 ? 1 / (1 - o) : 1 + o),
              u_spin_weights: Br(i.paint.get('raster-hue-rotate')),
            }
            var o, a
          }
          function Br(t) {
            t *= Math.PI / 180
            var e = Math.sin(t),
              r = Math.cos(t)
            return [
              (2 * r + 1) / 3,
              (-Math.sqrt(3) * e - r + 1) / 3,
              (Math.sqrt(3) * e - r + 1) / 3,
            ]
          }
          var Nr = function (t, e, r, n, i, o, a, s, l, u) {
              var c = i.transform
              return {
                u_is_size_zoom_constant: +('constant' === t || 'source' === t),
                u_is_size_feature_constant: +(
                  'constant' === t || 'camera' === t
                ),
                u_size_t: e ? e.uSizeT : 0,
                u_size: e ? e.uSize : 0,
                u_camera_to_center_distance: c.cameraToCenterDistance,
                u_pitch: (c.pitch / 360) * 2 * Math.PI,
                u_rotate_symbol: +r,
                u_aspect_ratio: c.width / c.height,
                u_fade_change: i.options.fadeDuration ? i.symbolFadeChange : 1,
                u_matrix: o,
                u_label_plane_matrix: a,
                u_coord_matrix: s,
                u_is_text: +l,
                u_pitch_with_map: +n,
                u_texsize: u,
                u_texture: 0,
              }
            },
            Ur = function (e, r, n, i, o, a, s, l, u, c, p) {
              var h = o.transform
              return t.extend(Nr(e, r, n, i, o, a, s, l, u, c), {
                u_gamma_scale: i
                  ? Math.cos(h._pitch) * h.cameraToCenterDistance
                  : 1,
                u_device_pixel_ratio: t.browser.devicePixelRatio,
                u_is_halo: +p,
              })
            },
            jr = function (e, r, n, i, o, a, s, l, u, c) {
              return t.extend(Ur(e, r, n, i, o, a, s, l, !0, u, !0), {
                u_texsize_icon: c,
                u_texture_icon: 1,
              })
            },
            Vr = function (t, e, r) {
              return { u_matrix: t, u_opacity: e, u_color: r }
            },
            qr = function (e, r, n, i, o, a) {
              return t.extend(
                (function (t, e, r, n) {
                  var i = r.imageManager.getPattern(t.from.toString()),
                    o = r.imageManager.getPattern(t.to.toString()),
                    a = r.imageManager.getPixelSize(),
                    s = a.width,
                    l = a.height,
                    u = Math.pow(2, n.tileID.overscaledZ),
                    c = (n.tileSize * Math.pow(2, r.transform.tileZoom)) / u,
                    p = c * (n.tileID.canonical.x + n.tileID.wrap * u),
                    h = c * n.tileID.canonical.y
                  return {
                    u_image: 0,
                    u_pattern_tl_a: i.tl,
                    u_pattern_br_a: i.br,
                    u_pattern_tl_b: o.tl,
                    u_pattern_br_b: o.br,
                    u_texsize: [s, l],
                    u_mix: e.t,
                    u_pattern_size_a: i.displaySize,
                    u_pattern_size_b: o.displaySize,
                    u_scale_a: e.fromScale,
                    u_scale_b: e.toScale,
                    u_tile_units_to_pixels: 1 / ue(n, 1, r.transform.tileZoom),
                    u_pixel_coord_upper: [p >> 16, h >> 16],
                    u_pixel_coord_lower: [65535 & p, 65535 & h],
                  }
                })(i, a, n, o),
                { u_matrix: e, u_opacity: r }
              )
            },
            Gr = {
              fillExtrusion: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_lightpos: new t.Uniform3f(e, r.u_lightpos),
                  u_lightintensity: new t.Uniform1f(e, r.u_lightintensity),
                  u_lightcolor: new t.Uniform3f(e, r.u_lightcolor),
                  u_vertical_gradient: new t.Uniform1f(
                    e,
                    r.u_vertical_gradient
                  ),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                }
              },
              fillExtrusionPattern: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_lightpos: new t.Uniform3f(e, r.u_lightpos),
                  u_lightintensity: new t.Uniform1f(e, r.u_lightintensity),
                  u_lightcolor: new t.Uniform3f(e, r.u_lightcolor),
                  u_vertical_gradient: new t.Uniform1f(
                    e,
                    r.u_vertical_gradient
                  ),
                  u_height_factor: new t.Uniform1f(e, r.u_height_factor),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_pixel_coord_upper: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_upper
                  ),
                  u_pixel_coord_lower: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_lower
                  ),
                  u_scale: new t.Uniform3f(e, r.u_scale),
                  u_fade: new t.Uniform1f(e, r.u_fade),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                }
              },
              fill: function (e, r) {
                return { u_matrix: new t.UniformMatrix4f(e, r.u_matrix) }
              },
              fillPattern: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_pixel_coord_upper: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_upper
                  ),
                  u_pixel_coord_lower: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_lower
                  ),
                  u_scale: new t.Uniform3f(e, r.u_scale),
                  u_fade: new t.Uniform1f(e, r.u_fade),
                }
              },
              fillOutline: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_world: new t.Uniform2f(e, r.u_world),
                }
              },
              fillOutlinePattern: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_world: new t.Uniform2f(e, r.u_world),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_pixel_coord_upper: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_upper
                  ),
                  u_pixel_coord_lower: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_lower
                  ),
                  u_scale: new t.Uniform3f(e, r.u_scale),
                  u_fade: new t.Uniform1f(e, r.u_fade),
                }
              },
              circle: function (e, r) {
                return {
                  u_camera_to_center_distance: new t.Uniform1f(
                    e,
                    r.u_camera_to_center_distance
                  ),
                  u_scale_with_map: new t.Uniform1i(e, r.u_scale_with_map),
                  u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
                  u_extrude_scale: new t.Uniform2f(e, r.u_extrude_scale),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                }
              },
              collisionBox: Tr,
              collisionCircle: Tr,
              debug: function (e, r) {
                return {
                  u_color: new t.UniformColor(e, r.u_color),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_overlay: new t.Uniform1i(e, r.u_overlay),
                  u_overlay_scale: new t.Uniform1f(e, r.u_overlay_scale),
                }
              },
              clippingMask: function (e, r) {
                return { u_matrix: new t.UniformMatrix4f(e, r.u_matrix) }
              },
              heatmap: function (e, r) {
                return {
                  u_extrude_scale: new t.Uniform1f(e, r.u_extrude_scale),
                  u_intensity: new t.Uniform1f(e, r.u_intensity),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                }
              },
              heatmapTexture: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_world: new t.Uniform2f(e, r.u_world),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_color_ramp: new t.Uniform1i(e, r.u_color_ramp),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                }
              },
              hillshade: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_latrange: new t.Uniform2f(e, r.u_latrange),
                  u_light: new t.Uniform2f(e, r.u_light),
                  u_shadow: new t.UniformColor(e, r.u_shadow),
                  u_highlight: new t.UniformColor(e, r.u_highlight),
                  u_accent: new t.UniformColor(e, r.u_accent),
                }
              },
              hillshadePrepare: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_dimension: new t.Uniform2f(e, r.u_dimension),
                  u_zoom: new t.Uniform1f(e, r.u_zoom),
                  u_maxzoom: new t.Uniform1f(e, r.u_maxzoom),
                  u_unpack: new t.Uniform4f(e, r.u_unpack),
                }
              },
              line: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_ratio: new t.Uniform1f(e, r.u_ratio),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
                }
              },
              lineGradient: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_ratio: new t.Uniform1f(e, r.u_ratio),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
                  u_image: new t.Uniform1i(e, r.u_image),
                }
              },
              linePattern: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_ratio: new t.Uniform1f(e, r.u_ratio),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
                  u_scale: new t.Uniform3f(e, r.u_scale),
                  u_fade: new t.Uniform1f(e, r.u_fade),
                }
              },
              lineSDF: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_ratio: new t.Uniform1f(e, r.u_ratio),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
                  u_patternscale_a: new t.Uniform2f(e, r.u_patternscale_a),
                  u_patternscale_b: new t.Uniform2f(e, r.u_patternscale_b),
                  u_sdfgamma: new t.Uniform1f(e, r.u_sdfgamma),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_tex_y_a: new t.Uniform1f(e, r.u_tex_y_a),
                  u_tex_y_b: new t.Uniform1f(e, r.u_tex_y_b),
                  u_mix: new t.Uniform1f(e, r.u_mix),
                }
              },
              raster: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_tl_parent: new t.Uniform2f(e, r.u_tl_parent),
                  u_scale_parent: new t.Uniform1f(e, r.u_scale_parent),
                  u_buffer_scale: new t.Uniform1f(e, r.u_buffer_scale),
                  u_fade_t: new t.Uniform1f(e, r.u_fade_t),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                  u_image0: new t.Uniform1i(e, r.u_image0),
                  u_image1: new t.Uniform1i(e, r.u_image1),
                  u_brightness_low: new t.Uniform1f(e, r.u_brightness_low),
                  u_brightness_high: new t.Uniform1f(e, r.u_brightness_high),
                  u_saturation_factor: new t.Uniform1f(
                    e,
                    r.u_saturation_factor
                  ),
                  u_contrast_factor: new t.Uniform1f(e, r.u_contrast_factor),
                  u_spin_weights: new t.Uniform3f(e, r.u_spin_weights),
                }
              },
              symbolIcon: function (e, r) {
                return {
                  u_is_size_zoom_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_zoom_constant
                  ),
                  u_is_size_feature_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_feature_constant
                  ),
                  u_size_t: new t.Uniform1f(e, r.u_size_t),
                  u_size: new t.Uniform1f(e, r.u_size),
                  u_camera_to_center_distance: new t.Uniform1f(
                    e,
                    r.u_camera_to_center_distance
                  ),
                  u_pitch: new t.Uniform1f(e, r.u_pitch),
                  u_rotate_symbol: new t.Uniform1i(e, r.u_rotate_symbol),
                  u_aspect_ratio: new t.Uniform1f(e, r.u_aspect_ratio),
                  u_fade_change: new t.Uniform1f(e, r.u_fade_change),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_label_plane_matrix: new t.UniformMatrix4f(
                    e,
                    r.u_label_plane_matrix
                  ),
                  u_coord_matrix: new t.UniformMatrix4f(e, r.u_coord_matrix),
                  u_is_text: new t.Uniform1i(e, r.u_is_text),
                  u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_texture: new t.Uniform1i(e, r.u_texture),
                }
              },
              symbolSDF: function (e, r) {
                return {
                  u_is_size_zoom_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_zoom_constant
                  ),
                  u_is_size_feature_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_feature_constant
                  ),
                  u_size_t: new t.Uniform1f(e, r.u_size_t),
                  u_size: new t.Uniform1f(e, r.u_size),
                  u_camera_to_center_distance: new t.Uniform1f(
                    e,
                    r.u_camera_to_center_distance
                  ),
                  u_pitch: new t.Uniform1f(e, r.u_pitch),
                  u_rotate_symbol: new t.Uniform1i(e, r.u_rotate_symbol),
                  u_aspect_ratio: new t.Uniform1f(e, r.u_aspect_ratio),
                  u_fade_change: new t.Uniform1f(e, r.u_fade_change),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_label_plane_matrix: new t.UniformMatrix4f(
                    e,
                    r.u_label_plane_matrix
                  ),
                  u_coord_matrix: new t.UniformMatrix4f(e, r.u_coord_matrix),
                  u_is_text: new t.Uniform1i(e, r.u_is_text),
                  u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_texture: new t.Uniform1i(e, r.u_texture),
                  u_gamma_scale: new t.Uniform1f(e, r.u_gamma_scale),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_is_halo: new t.Uniform1i(e, r.u_is_halo),
                }
              },
              symbolTextAndIcon: function (e, r) {
                return {
                  u_is_size_zoom_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_zoom_constant
                  ),
                  u_is_size_feature_constant: new t.Uniform1i(
                    e,
                    r.u_is_size_feature_constant
                  ),
                  u_size_t: new t.Uniform1f(e, r.u_size_t),
                  u_size: new t.Uniform1f(e, r.u_size),
                  u_camera_to_center_distance: new t.Uniform1f(
                    e,
                    r.u_camera_to_center_distance
                  ),
                  u_pitch: new t.Uniform1f(e, r.u_pitch),
                  u_rotate_symbol: new t.Uniform1i(e, r.u_rotate_symbol),
                  u_aspect_ratio: new t.Uniform1f(e, r.u_aspect_ratio),
                  u_fade_change: new t.Uniform1f(e, r.u_fade_change),
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_label_plane_matrix: new t.UniformMatrix4f(
                    e,
                    r.u_label_plane_matrix
                  ),
                  u_coord_matrix: new t.UniformMatrix4f(e, r.u_coord_matrix),
                  u_is_text: new t.Uniform1i(e, r.u_is_text),
                  u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_texsize_icon: new t.Uniform2f(e, r.u_texsize_icon),
                  u_texture: new t.Uniform1i(e, r.u_texture),
                  u_texture_icon: new t.Uniform1i(e, r.u_texture_icon),
                  u_gamma_scale: new t.Uniform1f(e, r.u_gamma_scale),
                  u_device_pixel_ratio: new t.Uniform1f(
                    e,
                    r.u_device_pixel_ratio
                  ),
                  u_is_halo: new t.Uniform1i(e, r.u_is_halo),
                }
              },
              background: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                  u_color: new t.UniformColor(e, r.u_color),
                }
              },
              backgroundPattern: function (e, r) {
                return {
                  u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
                  u_opacity: new t.Uniform1f(e, r.u_opacity),
                  u_image: new t.Uniform1i(e, r.u_image),
                  u_pattern_tl_a: new t.Uniform2f(e, r.u_pattern_tl_a),
                  u_pattern_br_a: new t.Uniform2f(e, r.u_pattern_br_a),
                  u_pattern_tl_b: new t.Uniform2f(e, r.u_pattern_tl_b),
                  u_pattern_br_b: new t.Uniform2f(e, r.u_pattern_br_b),
                  u_texsize: new t.Uniform2f(e, r.u_texsize),
                  u_mix: new t.Uniform1f(e, r.u_mix),
                  u_pattern_size_a: new t.Uniform2f(e, r.u_pattern_size_a),
                  u_pattern_size_b: new t.Uniform2f(e, r.u_pattern_size_b),
                  u_scale_a: new t.Uniform1f(e, r.u_scale_a),
                  u_scale_b: new t.Uniform1f(e, r.u_scale_b),
                  u_pixel_coord_upper: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_upper
                  ),
                  u_pixel_coord_lower: new t.Uniform2f(
                    e,
                    r.u_pixel_coord_lower
                  ),
                  u_tile_units_to_pixels: new t.Uniform1f(
                    e,
                    r.u_tile_units_to_pixels
                  ),
                }
              },
            }
          function $r(t, e, r, n, i, o, a, s) {
            for (
              var l = t.context,
                u = l.gl,
                c = t.useProgram(i ? 'collisionCircle' : 'collisionBox'),
                p = 0;
              p < n.length;
              p++
            ) {
              var h = n[p],
                f = e.getTile(h),
                d = f.getBucket(r)
              if (d) {
                var m = i
                  ? s
                    ? d.textCollisionCircle
                    : d.iconCollisionCircle
                  : s
                  ? d.textCollisionBox
                  : d.iconCollisionBox
                if (m) {
                  var y = h.posMatrix
                  ;(0 === o[0] && 0 === o[1]) ||
                    (y = t.translatePosMatrix(h.posMatrix, f, o, a)),
                    c.draw(
                      l,
                      i ? u.TRIANGLES : u.LINES,
                      Tt.disabled,
                      It.disabled,
                      t.colorModeForRenderPass(),
                      At.disabled,
                      Ir(y, t.transform, f),
                      r.id,
                      m.layoutVertexBuffer,
                      m.indexBuffer,
                      m.segments,
                      null,
                      t.transform.zoom,
                      null,
                      null,
                      m.collisionVertexBuffer
                    )
                }
              }
            }
          }
          function Zr(t, e, r, n, i, o, a) {
            $r(t, e, r, n, !1, i, o, a), $r(t, e, r, n, !0, i, o, a)
          }
          var Xr = t.identity(new Float32Array(16))
          function Kr(e, r, n, i, o, a) {
            var s = t.getAnchorAlignment(e),
              l = -(s.horizontalAlign - 0.5) * r,
              u = -(s.verticalAlign - 0.5) * n,
              c = t.evaluateVariableOffset(e, i)
            return new t.Point((l / o + c[0]) * a, (u / o + c[1]) * a)
          }
          function Wr(e, r, n, i, o, a, s, l, u, c, p) {
            var h = e.text.placedSymbolArray,
              f = e.text.dynamicLayoutVertexArray,
              d = e.icon.dynamicLayoutVertexArray,
              m = {}
            f.clear()
            for (var y = 0; y < h.length; y++) {
              var v = h.get(y),
                g =
                  v.hidden ||
                  !v.crossTileID ||
                  (e.allowVerticalPlacement && !v.placedOrientation)
                    ? null
                    : i[v.crossTileID]
              if (g) {
                var _ = new t.Point(v.anchorX, v.anchorY),
                  x = Ht(_, n ? l : s),
                  b =
                    0.5 +
                    (a.cameraToCenterDistance / x.signedDistanceFromCamera) *
                      0.5,
                  w =
                    (o.evaluateSizeForFeature(e.textSizeData, c, v) * b) /
                    t.ONE_EM
                n && (w *= e.tilePixelRatio / u)
                for (
                  var E = Kr(
                      g.anchor,
                      g.width,
                      g.height,
                      g.textOffset,
                      g.textBoxScale,
                      w
                    ),
                    S = n
                      ? Ht(_.add(E), s).point
                      : x.point.add(r ? E.rotate(-a.angle) : E),
                    T =
                      e.allowVerticalPlacement &&
                      v.placedOrientation === t.WritingMode.vertical
                        ? Math.PI / 2
                        : 0,
                    I = 0;
                  I < v.numGlyphs;
                  I++
                )
                  t.addDynamicAttributes(f, S, T)
                p &&
                  v.associatedIconIndex >= 0 &&
                  (m[v.associatedIconIndex] = { shiftedAnchor: S, angle: T })
              } else oe(v.numGlyphs, f)
            }
            if (p) {
              d.clear()
              for (var C = e.icon.placedSymbolArray, A = 0; A < C.length; A++) {
                var k = C.get(A)
                if (k.hidden) oe(k.numGlyphs, d)
                else {
                  var P = m[A]
                  if (P)
                    for (var M = 0; M < k.numGlyphs; M++)
                      t.addDynamicAttributes(d, P.shiftedAnchor, P.angle)
                  else oe(k.numGlyphs, d)
                }
              }
              e.icon.dynamicLayoutVertexBuffer.updateData(d)
            }
            e.text.dynamicLayoutVertexBuffer.updateData(f)
          }
          function Hr(t, e, r) {
            return r.iconsInText && e
              ? 'symbolTextAndIcon'
              : t
              ? 'symbolSDF'
              : 'symbolIcon'
          }
          function Jr(e, r, n, i, o, a, s, l, u, c, p, h) {
            for (
              var f = e.context,
                d = f.gl,
                m = e.transform,
                y = 'map' === l,
                v = 'map' === u,
                g = y && 'point' !== n.layout.get('symbol-placement'),
                _ = y && !v && !g,
                x = void 0 !== n.layout.get('symbol-sort-key').constantOr(1),
                b = e.depthModeForSublayer(0, Tt.ReadOnly),
                w = n.layout.get('text-variable-anchor'),
                E = [],
                S = 0,
                T = i;
              S < T.length;
              S += 1
            ) {
              var I = T[S],
                C = r.getTile(I),
                A = C.getBucket(n)
              if (A) {
                var k = o ? A.text : A.icon
                if (k && k.segments.get().length) {
                  var P = k.programConfigurations.get(n.id),
                    M = o || A.sdfIcons,
                    L = o ? A.textSizeData : A.iconSizeData,
                    z = v || 0 !== m.pitch,
                    O = e.useProgram(Hr(M, o, A), P),
                    D = t.evaluateSizeForZoom(L, m.zoom),
                    R = void 0,
                    F = [0, 0],
                    B = void 0,
                    N = void 0,
                    U = null,
                    j = void 0
                  if (o)
                    (B = C.glyphAtlasTexture),
                      (N = d.LINEAR),
                      (R = C.glyphAtlasTexture.size),
                      A.iconsInText &&
                        ((F = C.imageAtlasTexture.size),
                        (U = C.imageAtlasTexture),
                        (j =
                          z ||
                          e.options.rotating ||
                          e.options.zooming ||
                          'composite' === L.kind ||
                          'camera' === L.kind
                            ? d.LINEAR
                            : d.NEAREST))
                  else {
                    var V =
                      1 !== n.layout.get('icon-size').constantOr(0) ||
                      A.iconsNeedLinear
                    ;(B = C.imageAtlasTexture),
                      (N =
                        M || e.options.rotating || e.options.zooming || V || z
                          ? d.LINEAR
                          : d.NEAREST),
                      (R = C.imageAtlasTexture.size)
                  }
                  var q = ue(C, 1, e.transform.zoom),
                    G = Kt(I.posMatrix, v, y, e.transform, q),
                    $ = Wt(I.posMatrix, v, y, e.transform, q),
                    Z = w && A.hasTextData(),
                    X =
                      'none' !== n.layout.get('icon-text-fit') &&
                      Z &&
                      A.hasIconData()
                  g && Yt(A, I.posMatrix, e, o, G, $, v, c)
                  var K = e.translatePosMatrix(I.posMatrix, C, a, s),
                    W = g || (o && w) || X ? Xr : G,
                    H = e.translatePosMatrix($, C, a, s, !0),
                    J =
                      M &&
                      0 !==
                        n.paint
                          .get(o ? 'text-halo-width' : 'icon-halo-width')
                          .constantOr(1),
                    Y = {
                      program: O,
                      buffers: k,
                      uniformValues: M
                        ? A.iconsInText
                          ? jr(L.kind, D, _, v, e, K, W, H, R, F)
                          : Ur(L.kind, D, _, v, e, K, W, H, o, R, !0)
                        : Nr(L.kind, D, _, v, e, K, W, H, o, R),
                      atlasTexture: B,
                      atlasTextureIcon: U,
                      atlasInterpolation: N,
                      atlasInterpolationIcon: j,
                      isSDF: M,
                      hasHalo: J,
                    }
                  if (x)
                    for (
                      var Q = 0, tt = k.segments.get();
                      Q < tt.length;
                      Q += 1
                    ) {
                      var et = tt[Q]
                      E.push({
                        segments: new t.SegmentVector([et]),
                        sortKey: et.sortKey,
                        state: Y,
                      })
                    }
                  else E.push({ segments: k.segments, sortKey: 0, state: Y })
                }
              }
            }
            x &&
              E.sort(function (t, e) {
                return t.sortKey - e.sortKey
              })
            for (var rt = 0, nt = E; rt < nt.length; rt += 1) {
              var it = nt[rt],
                ot = it.state
              if (
                (f.activeTexture.set(d.TEXTURE0),
                ot.atlasTexture.bind(ot.atlasInterpolation, d.CLAMP_TO_EDGE),
                ot.atlasTextureIcon &&
                  (f.activeTexture.set(d.TEXTURE1),
                  ot.atlasTextureIcon &&
                    ot.atlasTextureIcon.bind(
                      ot.atlasInterpolationIcon,
                      d.CLAMP_TO_EDGE
                    )),
                ot.isSDF)
              ) {
                var at = ot.uniformValues
                ot.hasHalo &&
                  ((at.u_is_halo = 1),
                  Yr(ot.buffers, it.segments, n, e, ot.program, b, p, h, at)),
                  (at.u_is_halo = 0)
              }
              Yr(
                ot.buffers,
                it.segments,
                n,
                e,
                ot.program,
                b,
                p,
                h,
                ot.uniformValues
              )
            }
          }
          function Yr(t, e, r, n, i, o, a, s, l) {
            var u = n.context
            i.draw(
              u,
              u.gl.TRIANGLES,
              o,
              a,
              s,
              At.disabled,
              l,
              r.id,
              t.layoutVertexBuffer,
              t.indexBuffer,
              e,
              r.paint,
              n.transform.zoom,
              t.programConfigurations.get(r.id),
              t.dynamicLayoutVertexBuffer,
              t.opacityVertexBuffer
            )
          }
          function Qr(t, e, r, n, i, o, a) {
            var s,
              l,
              u,
              c,
              p,
              h = t.context.gl,
              f = r.paint.get('fill-pattern'),
              d = f && f.constantOr(1),
              m = r.getCrossfadeParameters()
            a
              ? ((l =
                  d && !r.getPaintProperty('fill-outline-color')
                    ? 'fillOutlinePattern'
                    : 'fillOutline'),
                (s = h.LINES))
              : ((l = d ? 'fillPattern' : 'fill'), (s = h.TRIANGLES))
            for (var y = 0, v = n; y < v.length; y += 1) {
              var g = v[y],
                _ = e.getTile(g)
              if (!d || _.patternsLoaded()) {
                var x = _.getBucket(r)
                if (x) {
                  var b = x.programConfigurations.get(r.id),
                    w = t.useProgram(l, b)
                  d &&
                    (t.context.activeTexture.set(h.TEXTURE0),
                    _.imageAtlasTexture.bind(h.LINEAR, h.CLAMP_TO_EDGE),
                    b.updatePaintBuffers(m))
                  var E = f.constantOr(null)
                  if (E && _.imageAtlas) {
                    var S = _.imageAtlas,
                      T = S.patternPositions[E.to.toString()],
                      I = S.patternPositions[E.from.toString()]
                    T && I && b.setConstantPatternPositions(T, I)
                  }
                  var C = t.translatePosMatrix(
                    g.posMatrix,
                    _,
                    r.paint.get('fill-translate'),
                    r.paint.get('fill-translate-anchor')
                  )
                  if (a) {
                    ;(c = x.indexBuffer2), (p = x.segments2)
                    var A = [h.drawingBufferWidth, h.drawingBufferHeight]
                    u =
                      'fillOutlinePattern' === l && d
                        ? Er(C, t, m, _, A)
                        : wr(C, A)
                  } else
                    (c = x.indexBuffer),
                      (p = x.segments),
                      (u = d ? br(C, t, m, _) : xr(C))
                  w.draw(
                    t.context,
                    s,
                    i,
                    t.stencilModeForClipping(g),
                    o,
                    At.disabled,
                    u,
                    r.id,
                    x.layoutVertexBuffer,
                    c,
                    p,
                    r.paint,
                    t.transform.zoom,
                    b
                  )
                }
              }
            }
          }
          function tn(t, e, r, n, i, o, a) {
            for (
              var s = t.context,
                l = s.gl,
                u = r.paint.get('fill-extrusion-pattern'),
                c = u.constantOr(1),
                p = r.getCrossfadeParameters(),
                h = r.paint.get('fill-extrusion-opacity'),
                f = 0,
                d = n;
              f < d.length;
              f += 1
            ) {
              var m = d[f],
                y = e.getTile(m),
                v = y.getBucket(r)
              if (v) {
                var g = v.programConfigurations.get(r.id),
                  _ = t.useProgram(
                    c ? 'fillExtrusionPattern' : 'fillExtrusion',
                    g
                  )
                c &&
                  (t.context.activeTexture.set(l.TEXTURE0),
                  y.imageAtlasTexture.bind(l.LINEAR, l.CLAMP_TO_EDGE),
                  g.updatePaintBuffers(p))
                var x = u.constantOr(null)
                if (x && y.imageAtlas) {
                  var b = y.imageAtlas,
                    w = b.patternPositions[x.to.toString()],
                    E = b.patternPositions[x.from.toString()]
                  w && E && g.setConstantPatternPositions(w, E)
                }
                var S = t.translatePosMatrix(
                    m.posMatrix,
                    y,
                    r.paint.get('fill-extrusion-translate'),
                    r.paint.get('fill-extrusion-translate-anchor')
                  ),
                  T = r.paint.get('fill-extrusion-vertical-gradient'),
                  I = c ? _r(S, t, T, h, m, p, y) : gr(S, t, T, h)
                _.draw(
                  s,
                  s.gl.TRIANGLES,
                  i,
                  o,
                  a,
                  At.backCCW,
                  I,
                  r.id,
                  v.layoutVertexBuffer,
                  v.indexBuffer,
                  v.segments,
                  r.paint,
                  t.transform.zoom,
                  g
                )
              }
            }
          }
          function en(t, e, r, n, i, o) {
            var a = t.context,
              s = a.gl,
              l = e.fbo
            if (l) {
              var u = t.useProgram('hillshade')
              a.activeTexture.set(s.TEXTURE0),
                s.bindTexture(s.TEXTURE_2D, l.colorAttachment.get())
              var c = Pr(t, e, r)
              u.draw(
                a,
                s.TRIANGLES,
                n,
                i,
                o,
                At.disabled,
                c,
                r.id,
                t.rasterBoundsBuffer,
                t.quadTriangleIndexBuffer,
                t.rasterBoundsSegments
              )
            }
          }
          function rn(e, r, n, i, o, a, s) {
            var l = e.context,
              u = l.gl,
              c = r.dem
            if (c && c.data) {
              var p = c.dim,
                h = c.stride,
                f = c.getPixels()
              if (
                (l.activeTexture.set(u.TEXTURE1),
                l.pixelStoreUnpackPremultiplyAlpha.set(!1),
                (r.demTexture = r.demTexture || e.getTileTexture(h)),
                r.demTexture)
              ) {
                var d = r.demTexture
                d.update(f, { premultiply: !1 }),
                  d.bind(u.NEAREST, u.CLAMP_TO_EDGE)
              } else
                (r.demTexture = new t.Texture(l, f, u.RGBA, {
                  premultiply: !1,
                })),
                  r.demTexture.bind(u.NEAREST, u.CLAMP_TO_EDGE)
              l.activeTexture.set(u.TEXTURE0)
              var m = r.fbo
              if (!m) {
                var y = new t.Texture(
                  l,
                  { width: p, height: p, data: null },
                  u.RGBA
                )
                y.bind(u.LINEAR, u.CLAMP_TO_EDGE),
                  (m = r.fbo = l.createFramebuffer(
                    p,
                    p,
                    !0
                  )).colorAttachment.set(y.texture)
              }
              l.bindFramebuffer.set(m.framebuffer),
                l.viewport.set([0, 0, p, p]),
                e.useProgram('hillshadePrepare').draw(
                  l,
                  u.TRIANGLES,
                  o,
                  a,
                  s,
                  At.disabled,
                  (function (e, r, n) {
                    var i = r.stride,
                      o = t.create()
                    return (
                      t.ortho(o, 0, t.EXTENT, -t.EXTENT, 0, 0, 1),
                      t.translate(o, o, [0, -t.EXTENT, 0]),
                      {
                        u_matrix: o,
                        u_image: 1,
                        u_dimension: [i, i],
                        u_zoom: e.overscaledZ,
                        u_maxzoom: n,
                        u_unpack: r.getUnpackVector(),
                      }
                    )
                  })(r.tileID, c, i),
                  n.id,
                  e.rasterBoundsBuffer,
                  e.quadTriangleIndexBuffer,
                  e.rasterBoundsSegments
                ),
                (r.needsHillshadePrepare = !1)
            }
          }
          function nn(e, r, n, i, o) {
            var a = i.paint.get('raster-fade-duration')
            if (a > 0) {
              var s = t.browser.now(),
                l = (s - e.timeAdded) / a,
                u = r ? (s - r.timeAdded) / a : -1,
                c = n.getSource(),
                p = o.coveringZoomLevel({
                  tileSize: c.tileSize,
                  roundZoom: c.roundZoom,
                }),
                h =
                  !r ||
                  Math.abs(r.tileID.overscaledZ - p) >
                    Math.abs(e.tileID.overscaledZ - p),
                f =
                  h && e.refreshedUponExpiration
                    ? 1
                    : t.clamp(h ? l : 1 - u, 0, 1)
              return (
                e.refreshedUponExpiration &&
                  l >= 1 &&
                  (e.refreshedUponExpiration = !1),
                r ? { opacity: 1, mix: 1 - f } : { opacity: f, mix: 0 }
              )
            }
            return { opacity: 1, mix: 0 }
          }
          var on = new t.Color(1, 0, 0, 1),
            an = new t.Color(0, 1, 0, 1),
            sn = new t.Color(0, 0, 1, 1),
            ln = new t.Color(1, 0, 1, 1),
            un = new t.Color(0, 1, 1, 1)
          function cn(t, e, r, n) {
            hn(t, 0, e + r / 2, t.transform.width, r, n)
          }
          function pn(t, e, r, n) {
            hn(t, e - r / 2, 0, r, t.transform.height, n)
          }
          function hn(e, r, n, i, o, a) {
            var s = e.context,
              l = s.gl
            l.enable(l.SCISSOR_TEST),
              l.scissor(
                r * t.browser.devicePixelRatio,
                n * t.browser.devicePixelRatio,
                i * t.browser.devicePixelRatio,
                o * t.browser.devicePixelRatio
              ),
              s.clear({ color: a }),
              l.disable(l.SCISSOR_TEST)
          }
          function fn(e, r, n) {
            var i = e.context,
              o = i.gl,
              a = n.posMatrix,
              s = e.useProgram('debug'),
              l = Tt.disabled,
              u = It.disabled,
              c = e.colorModeForRenderPass()
            i.activeTexture.set(o.TEXTURE0),
              e.emptyTexture.bind(o.LINEAR, o.CLAMP_TO_EDGE),
              s.draw(
                i,
                o.LINE_STRIP,
                l,
                u,
                c,
                At.disabled,
                Cr(a, t.Color.red),
                '$debug',
                e.debugBuffer,
                e.tileBorderIndexBuffer,
                e.debugSegments
              )
            var p = r.getTileByID(n.key).latestRawTileData,
              h = Math.floor(((p && p.byteLength) || 0) / 1024),
              f = r.getTile(n).tileSize,
              d =
                (512 / Math.min(f, 512)) *
                (n.overscaledZ / e.transform.zoom) *
                0.5,
              m = n.canonical.toString()
            n.overscaledZ !== n.canonical.z && (m += ' => ' + n.overscaledZ),
              (function (t, e) {
                t.initDebugOverlayCanvas()
                var r = t.debugOverlayCanvas,
                  n = t.context.gl,
                  i = t.debugOverlayCanvas.getContext('2d')
                i.clearRect(0, 0, r.width, r.height),
                  (i.shadowColor = 'white'),
                  (i.shadowBlur = 2),
                  (i.lineWidth = 1.5),
                  (i.strokeStyle = 'white'),
                  (i.textBaseline = 'top'),
                  (i.font = 'bold 36px Open Sans, sans-serif'),
                  i.fillText(e, 5, 5),
                  i.strokeText(e, 5, 5),
                  t.debugOverlayTexture.update(r),
                  t.debugOverlayTexture.bind(n.LINEAR, n.CLAMP_TO_EDGE)
              })(e, m + ' ' + h + 'kb'),
              s.draw(
                i,
                o.TRIANGLES,
                l,
                u,
                Ct.alphaBlended,
                At.disabled,
                Cr(a, t.Color.transparent, d),
                '$debug',
                e.debugBuffer,
                e.quadTriangleIndexBuffer,
                e.debugSegments
              )
          }
          var dn = {
              symbol: function (e, r, n, i, o) {
                if ('translucent' === e.renderPass) {
                  var a = It.disabled,
                    s = e.colorModeForRenderPass()
                  n.layout.get('text-variable-anchor') &&
                    (function (e, r, n, i, o, a, s) {
                      for (
                        var l = r.transform,
                          u = 'map' === o,
                          c = 'map' === a,
                          p = 0,
                          h = e;
                        p < h.length;
                        p += 1
                      ) {
                        var f = h[p],
                          d = i.getTile(f),
                          m = d.getBucket(n)
                        if (m && m.text && m.text.segments.get().length) {
                          var y = t.evaluateSizeForZoom(m.textSizeData, l.zoom),
                            v = ue(d, 1, r.transform.zoom),
                            g = Kt(f.posMatrix, c, u, r.transform, v),
                            _ =
                              'none' !== n.layout.get('icon-text-fit') &&
                              m.hasIconData()
                          if (y) {
                            var x = Math.pow(2, l.zoom - d.tileID.overscaledZ)
                            Wr(
                              m,
                              u,
                              c,
                              s,
                              t.symbolSize,
                              l,
                              g,
                              f.posMatrix,
                              x,
                              y,
                              _
                            )
                          }
                        }
                      }
                    })(
                      i,
                      e,
                      n,
                      r,
                      n.layout.get('text-rotation-alignment'),
                      n.layout.get('text-pitch-alignment'),
                      o
                    ),
                    0 !== n.paint.get('icon-opacity').constantOr(1) &&
                      Jr(
                        e,
                        r,
                        n,
                        i,
                        !1,
                        n.paint.get('icon-translate'),
                        n.paint.get('icon-translate-anchor'),
                        n.layout.get('icon-rotation-alignment'),
                        n.layout.get('icon-pitch-alignment'),
                        n.layout.get('icon-keep-upright'),
                        a,
                        s
                      ),
                    0 !== n.paint.get('text-opacity').constantOr(1) &&
                      Jr(
                        e,
                        r,
                        n,
                        i,
                        !0,
                        n.paint.get('text-translate'),
                        n.paint.get('text-translate-anchor'),
                        n.layout.get('text-rotation-alignment'),
                        n.layout.get('text-pitch-alignment'),
                        n.layout.get('text-keep-upright'),
                        a,
                        s
                      ),
                    r.map.showCollisionBoxes &&
                      (Zr(
                        e,
                        r,
                        n,
                        i,
                        n.paint.get('text-translate'),
                        n.paint.get('text-translate-anchor'),
                        !0
                      ),
                      Zr(
                        e,
                        r,
                        n,
                        i,
                        n.paint.get('icon-translate'),
                        n.paint.get('icon-translate-anchor'),
                        !1
                      ))
                }
              },
              circle: function (e, r, n, i) {
                if ('translucent' === e.renderPass) {
                  var o = n.paint.get('circle-opacity'),
                    a = n.paint.get('circle-stroke-width'),
                    s = n.paint.get('circle-stroke-opacity'),
                    l = void 0 !== n.layout.get('circle-sort-key').constantOr(1)
                  if (
                    0 !== o.constantOr(1) ||
                    (0 !== a.constantOr(1) && 0 !== s.constantOr(1))
                  ) {
                    for (
                      var u = e.context,
                        c = u.gl,
                        p = e.depthModeForSublayer(0, Tt.ReadOnly),
                        h = It.disabled,
                        f = e.colorModeForRenderPass(),
                        d = [],
                        m = 0;
                      m < i.length;
                      m++
                    ) {
                      var y = i[m],
                        v = r.getTile(y),
                        g = v.getBucket(n)
                      if (g) {
                        var _ = g.programConfigurations.get(n.id),
                          x = {
                            programConfiguration: _,
                            program: e.useProgram('circle', _),
                            layoutVertexBuffer: g.layoutVertexBuffer,
                            indexBuffer: g.indexBuffer,
                            uniformValues: Sr(e, y, v, n),
                          }
                        if (l)
                          for (
                            var b = 0, w = g.segments.get();
                            b < w.length;
                            b += 1
                          ) {
                            var E = w[b]
                            d.push({
                              segments: new t.SegmentVector([E]),
                              sortKey: E.sortKey,
                              state: x,
                            })
                          }
                        else
                          d.push({ segments: g.segments, sortKey: 0, state: x })
                      }
                    }
                    l &&
                      d.sort(function (t, e) {
                        return t.sortKey - e.sortKey
                      })
                    for (var S = 0, T = d; S < T.length; S += 1) {
                      var I = T[S],
                        C = I.state
                      C.program.draw(
                        u,
                        c.TRIANGLES,
                        p,
                        h,
                        f,
                        At.disabled,
                        C.uniformValues,
                        n.id,
                        C.layoutVertexBuffer,
                        C.indexBuffer,
                        I.segments,
                        n.paint,
                        e.transform.zoom,
                        C.programConfiguration
                      )
                    }
                  }
                }
              },
              heatmap: function (e, r, n, i) {
                if (0 !== n.paint.get('heatmap-opacity'))
                  if ('offscreen' === e.renderPass) {
                    var o = e.context,
                      a = o.gl,
                      s = It.disabled,
                      l = new Ct([a.ONE, a.ONE], t.Color.transparent, [
                        !0,
                        !0,
                        !0,
                        !0,
                      ])
                    !(function (t, e, r) {
                      var n = t.gl
                      t.activeTexture.set(n.TEXTURE1),
                        t.viewport.set([0, 0, e.width / 4, e.height / 4])
                      var i = r.heatmapFbo
                      if (i)
                        n.bindTexture(n.TEXTURE_2D, i.colorAttachment.get()),
                          t.bindFramebuffer.set(i.framebuffer)
                      else {
                        var o = n.createTexture()
                        n.bindTexture(n.TEXTURE_2D, o),
                          n.texParameteri(
                            n.TEXTURE_2D,
                            n.TEXTURE_WRAP_S,
                            n.CLAMP_TO_EDGE
                          ),
                          n.texParameteri(
                            n.TEXTURE_2D,
                            n.TEXTURE_WRAP_T,
                            n.CLAMP_TO_EDGE
                          ),
                          n.texParameteri(
                            n.TEXTURE_2D,
                            n.TEXTURE_MIN_FILTER,
                            n.LINEAR
                          ),
                          n.texParameteri(
                            n.TEXTURE_2D,
                            n.TEXTURE_MAG_FILTER,
                            n.LINEAR
                          ),
                          (i = r.heatmapFbo = t.createFramebuffer(
                            e.width / 4,
                            e.height / 4,
                            !1
                          )),
                          (function t(e, r, n, i) {
                            var o = e.gl
                            o.texImage2D(
                              o.TEXTURE_2D,
                              0,
                              o.RGBA,
                              r.width / 4,
                              r.height / 4,
                              0,
                              o.RGBA,
                              e.extTextureHalfFloat
                                ? e.extTextureHalfFloat.HALF_FLOAT_OES
                                : o.UNSIGNED_BYTE,
                              null
                            ),
                              i.colorAttachment.set(n),
                              e.extTextureHalfFloat &&
                                o.checkFramebufferStatus(o.FRAMEBUFFER) !==
                                  o.FRAMEBUFFER_COMPLETE &&
                                ((e.extTextureHalfFloat = null),
                                i.colorAttachment.setDirty(),
                                t(e, r, n, i))
                          })(t, e, o, i)
                      }
                    })(o, e, n),
                      o.clear({ color: t.Color.transparent })
                    for (var u = 0; u < i.length; u++) {
                      var c = i[u]
                      if (!r.hasRenderableParent(c)) {
                        var p = r.getTile(c),
                          h = p.getBucket(n)
                        if (h) {
                          var f = h.programConfigurations.get(n.id)
                          e.useProgram('heatmap', f).draw(
                            o,
                            a.TRIANGLES,
                            Tt.disabled,
                            s,
                            l,
                            At.disabled,
                            kr(
                              c.posMatrix,
                              p,
                              e.transform.zoom,
                              n.paint.get('heatmap-intensity')
                            ),
                            n.id,
                            h.layoutVertexBuffer,
                            h.indexBuffer,
                            h.segments,
                            n.paint,
                            e.transform.zoom,
                            f
                          )
                        }
                      }
                    }
                    o.viewport.set([0, 0, e.width, e.height])
                  } else
                    'translucent' === e.renderPass &&
                      (e.context.setColorMode(e.colorModeForRenderPass()),
                      (function (e, r) {
                        var n = e.context,
                          i = n.gl,
                          o = r.heatmapFbo
                        if (o) {
                          n.activeTexture.set(i.TEXTURE0),
                            i.bindTexture(
                              i.TEXTURE_2D,
                              o.colorAttachment.get()
                            ),
                            n.activeTexture.set(i.TEXTURE1)
                          var a = r.colorRampTexture
                          a ||
                            (a = r.colorRampTexture = new t.Texture(
                              n,
                              r.colorRamp,
                              i.RGBA
                            )),
                            a.bind(i.LINEAR, i.CLAMP_TO_EDGE),
                            e.useProgram('heatmapTexture').draw(
                              n,
                              i.TRIANGLES,
                              Tt.disabled,
                              It.disabled,
                              e.colorModeForRenderPass(),
                              At.disabled,
                              (function (e, r, n, i) {
                                var o = t.create()
                                t.ortho(o, 0, e.width, e.height, 0, 0, 1)
                                var a = e.context.gl
                                return {
                                  u_matrix: o,
                                  u_world: [
                                    a.drawingBufferWidth,
                                    a.drawingBufferHeight,
                                  ],
                                  u_image: 0,
                                  u_color_ramp: 1,
                                  u_opacity: r.paint.get('heatmap-opacity'),
                                }
                              })(e, r),
                              r.id,
                              e.viewportBuffer,
                              e.quadTriangleIndexBuffer,
                              e.viewportSegments,
                              r.paint,
                              e.transform.zoom
                            )
                        }
                      })(e, n))
              },
              line: function (e, r, n, i) {
                if ('translucent' === e.renderPass) {
                  var o = n.paint.get('line-opacity'),
                    a = n.paint.get('line-width')
                  if (0 !== o.constantOr(1) && 0 !== a.constantOr(1)) {
                    var s = e.depthModeForSublayer(0, Tt.ReadOnly),
                      l = e.colorModeForRenderPass(),
                      u = n.paint.get('line-dasharray'),
                      c = n.paint.get('line-pattern'),
                      p = c.constantOr(1),
                      h = n.paint.get('line-gradient'),
                      f = n.getCrossfadeParameters(),
                      d = p
                        ? 'linePattern'
                        : u
                        ? 'lineSDF'
                        : h
                        ? 'lineGradient'
                        : 'line',
                      m = e.context,
                      y = m.gl,
                      v = !0
                    if (h) {
                      m.activeTexture.set(y.TEXTURE0)
                      var g = n.gradientTexture
                      if (!n.gradient) return
                      g ||
                        (g = n.gradientTexture = new t.Texture(
                          m,
                          n.gradient,
                          y.RGBA
                        )),
                        g.bind(y.LINEAR, y.CLAMP_TO_EDGE)
                    }
                    for (var _ = 0, x = i; _ < x.length; _ += 1) {
                      var b = x[_],
                        w = r.getTile(b)
                      if (!p || w.patternsLoaded()) {
                        var E = w.getBucket(n)
                        if (E) {
                          var S = E.programConfigurations.get(n.id),
                            T = e.context.program.get(),
                            I = e.useProgram(d, S),
                            C = v || I.program !== T,
                            A = c.constantOr(null)
                          if (A && w.imageAtlas) {
                            var k = w.imageAtlas,
                              P = k.patternPositions[A.to.toString()],
                              M = k.patternPositions[A.from.toString()]
                            P && M && S.setConstantPatternPositions(P, M)
                          }
                          var L = p
                            ? zr(e, w, n, f)
                            : u
                            ? Or(e, w, n, u, f)
                            : h
                            ? Lr(e, w, n)
                            : Mr(e, w, n)
                          p
                            ? (m.activeTexture.set(y.TEXTURE0),
                              w.imageAtlasTexture.bind(
                                y.LINEAR,
                                y.CLAMP_TO_EDGE
                              ),
                              S.updatePaintBuffers(f))
                            : u &&
                              (C || e.lineAtlas.dirty) &&
                              (m.activeTexture.set(y.TEXTURE0),
                              e.lineAtlas.bind(m)),
                            I.draw(
                              m,
                              y.TRIANGLES,
                              s,
                              e.stencilModeForClipping(b),
                              l,
                              At.disabled,
                              L,
                              n.id,
                              E.layoutVertexBuffer,
                              E.indexBuffer,
                              E.segments,
                              n.paint,
                              e.transform.zoom,
                              S
                            ),
                            (v = !1)
                        }
                      }
                    }
                  }
                }
              },
              fill: function (e, r, n, i) {
                var o = n.paint.get('fill-color'),
                  a = n.paint.get('fill-opacity')
                if (0 !== a.constantOr(1)) {
                  var s = e.colorModeForRenderPass(),
                    l = n.paint.get('fill-pattern'),
                    u =
                      e.opaquePassEnabledForLayer() &&
                      !l.constantOr(1) &&
                      1 === o.constantOr(t.Color.transparent).a &&
                      1 === a.constantOr(0)
                        ? 'opaque'
                        : 'translucent'
                  if (e.renderPass === u) {
                    var c = e.depthModeForSublayer(
                      1,
                      'opaque' === e.renderPass ? Tt.ReadWrite : Tt.ReadOnly
                    )
                    Qr(e, r, n, i, c, s, !1)
                  }
                  if (
                    'translucent' === e.renderPass &&
                    n.paint.get('fill-antialias')
                  ) {
                    var p = e.depthModeForSublayer(
                      n.getPaintProperty('fill-outline-color') ? 2 : 0,
                      Tt.ReadOnly
                    )
                    Qr(e, r, n, i, p, s, !0)
                  }
                }
              },
              'fill-extrusion': function (t, e, r, n) {
                var i = r.paint.get('fill-extrusion-opacity')
                if (0 !== i && 'translucent' === t.renderPass) {
                  var o = new Tt(
                    t.context.gl.LEQUAL,
                    Tt.ReadWrite,
                    t.depthRangeFor3D
                  )
                  if (
                    1 !== i ||
                    r.paint.get('fill-extrusion-pattern').constantOr(1)
                  )
                    tn(t, e, r, n, o, It.disabled, Ct.disabled),
                      tn(
                        t,
                        e,
                        r,
                        n,
                        o,
                        t.stencilModeFor3D(),
                        t.colorModeForRenderPass()
                      )
                  else {
                    var a = t.colorModeForRenderPass()
                    tn(t, e, r, n, o, It.disabled, a)
                  }
                }
              },
              hillshade: function (t, e, r, n) {
                if (
                  'offscreen' === t.renderPass ||
                  'translucent' === t.renderPass
                ) {
                  for (
                    var i = t.context,
                      o = e.getSource().maxzoom,
                      a = t.depthModeForSublayer(0, Tt.ReadOnly),
                      s = t.colorModeForRenderPass(),
                      l =
                        'translucent' === t.renderPass
                          ? t.stencilConfigForOverlap(n)
                          : [{}, n],
                      u = l[0],
                      c = 0,
                      p = l[1];
                    c < p.length;
                    c += 1
                  ) {
                    var h = p[c],
                      f = e.getTile(h)
                    f.needsHillshadePrepare && 'offscreen' === t.renderPass
                      ? rn(t, f, r, o, a, It.disabled, s)
                      : 'translucent' === t.renderPass &&
                        en(t, f, r, a, u[h.overscaledZ], s)
                  }
                  i.viewport.set([0, 0, t.width, t.height])
                }
              },
              raster: function (t, e, r, n) {
                if (
                  'translucent' === t.renderPass &&
                  0 !== r.paint.get('raster-opacity') &&
                  n.length
                )
                  for (
                    var i = t.context,
                      o = i.gl,
                      a = e.getSource(),
                      s = t.useProgram('raster'),
                      l = t.colorModeForRenderPass(),
                      u =
                        a instanceof L ? [{}, n] : t.stencilConfigForOverlap(n),
                      c = u[0],
                      p = u[1],
                      h = p[p.length - 1].overscaledZ,
                      f = !t.options.moving,
                      d = 0,
                      m = p;
                    d < m.length;
                    d += 1
                  ) {
                    var y = m[d],
                      v = t.depthModeForSublayer(
                        y.overscaledZ - h,
                        1 === r.paint.get('raster-opacity')
                          ? Tt.ReadWrite
                          : Tt.ReadOnly,
                        o.LESS
                      ),
                      g = e.getTile(y),
                      _ = t.transform.calculatePosMatrix(y.toUnwrapped(), f)
                    g.registerFadeDuration(r.paint.get('raster-fade-duration'))
                    var x = e.findLoadedParent(y, 0),
                      b = nn(g, x, e, r, t.transform),
                      w = void 0,
                      E = void 0,
                      S =
                        'nearest' === r.paint.get('raster-resampling')
                          ? o.NEAREST
                          : o.LINEAR
                    i.activeTexture.set(o.TEXTURE0),
                      g.texture.bind(
                        S,
                        o.CLAMP_TO_EDGE,
                        o.LINEAR_MIPMAP_NEAREST
                      ),
                      i.activeTexture.set(o.TEXTURE1),
                      x
                        ? (x.texture.bind(
                            S,
                            o.CLAMP_TO_EDGE,
                            o.LINEAR_MIPMAP_NEAREST
                          ),
                          (w = Math.pow(
                            2,
                            x.tileID.overscaledZ - g.tileID.overscaledZ
                          )),
                          (E = [
                            (g.tileID.canonical.x * w) % 1,
                            (g.tileID.canonical.y * w) % 1,
                          ]))
                        : g.texture.bind(
                            S,
                            o.CLAMP_TO_EDGE,
                            o.LINEAR_MIPMAP_NEAREST
                          )
                    var T = Fr(_, E || [0, 0], w || 1, b, r)
                    a instanceof L
                      ? s.draw(
                          i,
                          o.TRIANGLES,
                          v,
                          It.disabled,
                          l,
                          At.disabled,
                          T,
                          r.id,
                          a.boundsBuffer,
                          t.quadTriangleIndexBuffer,
                          a.boundsSegments
                        )
                      : s.draw(
                          i,
                          o.TRIANGLES,
                          v,
                          c[y.overscaledZ],
                          l,
                          At.disabled,
                          T,
                          r.id,
                          t.rasterBoundsBuffer,
                          t.quadTriangleIndexBuffer,
                          t.rasterBoundsSegments
                        )
                  }
              },
              background: function (t, e, r) {
                var n = r.paint.get('background-color'),
                  i = r.paint.get('background-opacity')
                if (0 !== i) {
                  var o = t.context,
                    a = o.gl,
                    s = t.transform,
                    l = s.tileSize,
                    u = r.paint.get('background-pattern')
                  if (!t.isPatternMissing(u)) {
                    var c =
                      !u &&
                      1 === n.a &&
                      1 === i &&
                      t.opaquePassEnabledForLayer()
                        ? 'opaque'
                        : 'translucent'
                    if (t.renderPass === c) {
                      var p = It.disabled,
                        h = t.depthModeForSublayer(
                          0,
                          'opaque' === c ? Tt.ReadWrite : Tt.ReadOnly
                        ),
                        f = t.colorModeForRenderPass(),
                        d = t.useProgram(
                          u ? 'backgroundPattern' : 'background'
                        ),
                        m = s.coveringTiles({ tileSize: l })
                      u &&
                        (o.activeTexture.set(a.TEXTURE0),
                        t.imageManager.bind(t.context))
                      for (
                        var y = r.getCrossfadeParameters(), v = 0, g = m;
                        v < g.length;
                        v += 1
                      ) {
                        var _ = g[v],
                          x = t.transform.calculatePosMatrix(_.toUnwrapped()),
                          b = u
                            ? qr(x, i, t, u, { tileID: _, tileSize: l }, y)
                            : Vr(x, i, n)
                        d.draw(
                          o,
                          a.TRIANGLES,
                          h,
                          p,
                          f,
                          At.disabled,
                          b,
                          r.id,
                          t.tileExtentBuffer,
                          t.quadTriangleIndexBuffer,
                          t.tileExtentSegments
                        )
                      }
                    }
                  }
                }
              },
              debug: function (t, e, r) {
                for (var n = 0; n < r.length; n++) fn(t, e, r[n])
              },
              custom: function (t, e, r) {
                var n = t.context,
                  i = r.implementation
                if ('offscreen' === t.renderPass) {
                  var o = i.prerender
                  o &&
                    (t.setCustomLayerDefaults(),
                    n.setColorMode(t.colorModeForRenderPass()),
                    o.call(i, n.gl, t.transform.customLayerMatrix()),
                    n.setDirty(),
                    t.setBaseState())
                } else if ('translucent' === t.renderPass) {
                  t.setCustomLayerDefaults(),
                    n.setColorMode(t.colorModeForRenderPass()),
                    n.setStencilMode(It.disabled)
                  var a =
                    '3d' === i.renderingMode
                      ? new Tt(
                          t.context.gl.LEQUAL,
                          Tt.ReadWrite,
                          t.depthRangeFor3D
                        )
                      : t.depthModeForSublayer(0, Tt.ReadOnly)
                  n.setDepthMode(a),
                    i.render(n.gl, t.transform.customLayerMatrix()),
                    n.setDirty(),
                    t.setBaseState(),
                    n.bindFramebuffer.set(null)
                }
              },
            },
            mn = function (t, e) {
              ;(this.context = new kt(t)),
                (this.transform = e),
                (this._tileTextures = {}),
                this.setup(),
                (this.numSublayers =
                  Pt.maxUnderzooming + Pt.maxOverzooming + 1),
                (this.depthEpsilon = 1 / Math.pow(2, 16)),
                (this.crossTileSymbolIndex = new Oe()),
                (this.gpuTimers = {})
            }
          ;(mn.prototype.resize = function (e, r) {
            if (
              ((this.width = e * t.browser.devicePixelRatio),
              (this.height = r * t.browser.devicePixelRatio),
              this.context.viewport.set([0, 0, this.width, this.height]),
              this.style)
            )
              for (var n = 0, i = this.style._order; n < i.length; n += 1)
                this.style._layers[i[n]].resize()
          }),
            (mn.prototype.setup = function () {
              var e = this.context,
                r = new t.StructArrayLayout2i4()
              r.emplaceBack(0, 0),
                r.emplaceBack(t.EXTENT, 0),
                r.emplaceBack(0, t.EXTENT),
                r.emplaceBack(t.EXTENT, t.EXTENT),
                (this.tileExtentBuffer = e.createVertexBuffer(r, Ue.members)),
                (this.tileExtentSegments = t.SegmentVector.simpleSegment(
                  0,
                  0,
                  4,
                  2
                ))
              var n = new t.StructArrayLayout2i4()
              n.emplaceBack(0, 0),
                n.emplaceBack(t.EXTENT, 0),
                n.emplaceBack(0, t.EXTENT),
                n.emplaceBack(t.EXTENT, t.EXTENT),
                (this.debugBuffer = e.createVertexBuffer(n, Ue.members)),
                (this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5))
              var i = new t.StructArrayLayout4i8()
              i.emplaceBack(0, 0, 0, 0),
                i.emplaceBack(t.EXTENT, 0, t.EXTENT, 0),
                i.emplaceBack(0, t.EXTENT, 0, t.EXTENT),
                i.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT),
                (this.rasterBoundsBuffer = e.createVertexBuffer(i, M.members)),
                (this.rasterBoundsSegments = t.SegmentVector.simpleSegment(
                  0,
                  0,
                  4,
                  2
                ))
              var o = new t.StructArrayLayout2i4()
              o.emplaceBack(0, 0),
                o.emplaceBack(1, 0),
                o.emplaceBack(0, 1),
                o.emplaceBack(1, 1),
                (this.viewportBuffer = e.createVertexBuffer(o, Ue.members)),
                (this.viewportSegments = t.SegmentVector.simpleSegment(
                  0,
                  0,
                  4,
                  2
                ))
              var a = new t.StructArrayLayout1ui2()
              a.emplaceBack(0),
                a.emplaceBack(1),
                a.emplaceBack(3),
                a.emplaceBack(2),
                a.emplaceBack(0),
                (this.tileBorderIndexBuffer = e.createIndexBuffer(a))
              var s = new t.StructArrayLayout3ui6()
              s.emplaceBack(0, 1, 2),
                s.emplaceBack(2, 1, 3),
                (this.quadTriangleIndexBuffer = e.createIndexBuffer(s)),
                (this.emptyTexture = new t.Texture(
                  e,
                  { width: 1, height: 1, data: new Uint8Array([0, 0, 0, 0]) },
                  e.gl.RGBA
                ))
              var l = this.context.gl
              this.stencilClearMode = new It(
                { func: l.ALWAYS, mask: 0 },
                0,
                255,
                l.ZERO,
                l.ZERO,
                l.ZERO
              )
            }),
            (mn.prototype.clearStencil = function () {
              var e = this.context,
                r = e.gl
              ;(this.nextStencilID = 1), (this.currentStencilSource = void 0)
              var n = t.create()
              t.ortho(n, 0, this.width, this.height, 0, 0, 1),
                t.scale(n, n, [r.drawingBufferWidth, r.drawingBufferHeight, 0]),
                this.useProgram('clippingMask').draw(
                  e,
                  r.TRIANGLES,
                  Tt.disabled,
                  this.stencilClearMode,
                  Ct.disabled,
                  At.disabled,
                  Ar(n),
                  '$clipping',
                  this.viewportBuffer,
                  this.quadTriangleIndexBuffer,
                  this.viewportSegments
                )
            }),
            (mn.prototype._renderTileClippingMasks = function (t, e) {
              if (
                this.currentStencilSource !== t.source &&
                t.isTileClipped() &&
                e &&
                e.length
              ) {
                this.currentStencilSource = t.source
                var r = this.context,
                  n = r.gl
                this.nextStencilID + e.length > 256 && this.clearStencil(),
                  r.setColorMode(Ct.disabled),
                  r.setDepthMode(Tt.disabled)
                var i = this.useProgram('clippingMask')
                this._tileClippingMaskIDs = {}
                for (var o = 0, a = e; o < a.length; o += 1) {
                  var s = a[o],
                    l = (this._tileClippingMaskIDs[s.key] = this
                      .nextStencilID++)
                  i.draw(
                    r,
                    n.TRIANGLES,
                    Tt.disabled,
                    new It(
                      { func: n.ALWAYS, mask: 0 },
                      l,
                      255,
                      n.KEEP,
                      n.KEEP,
                      n.REPLACE
                    ),
                    Ct.disabled,
                    At.disabled,
                    Ar(s.posMatrix),
                    '$clipping',
                    this.tileExtentBuffer,
                    this.quadTriangleIndexBuffer,
                    this.tileExtentSegments
                  )
                }
              }
            }),
            (mn.prototype.stencilModeFor3D = function () {
              ;(this.currentStencilSource = void 0),
                this.nextStencilID + 1 > 256 && this.clearStencil()
              var t = this.nextStencilID++,
                e = this.context.gl
              return new It(
                { func: e.NOTEQUAL, mask: 255 },
                t,
                255,
                e.KEEP,
                e.KEEP,
                e.REPLACE
              )
            }),
            (mn.prototype.stencilModeForClipping = function (t) {
              var e = this.context.gl
              return new It(
                { func: e.EQUAL, mask: 255 },
                this._tileClippingMaskIDs[t.key],
                0,
                e.KEEP,
                e.KEEP,
                e.REPLACE
              )
            }),
            (mn.prototype.stencilConfigForOverlap = function (t) {
              var e,
                r = this.context.gl,
                n = t.sort(function (t, e) {
                  return e.overscaledZ - t.overscaledZ
                }),
                i = n[n.length - 1].overscaledZ,
                o = n[0].overscaledZ - i + 1
              if (o > 1) {
                ;(this.currentStencilSource = void 0),
                  this.nextStencilID + o > 256 && this.clearStencil()
                for (var a = {}, s = 0; s < o; s++)
                  a[s + i] = new It(
                    { func: r.GEQUAL, mask: 255 },
                    s + this.nextStencilID,
                    255,
                    r.KEEP,
                    r.KEEP,
                    r.REPLACE
                  )
                return (this.nextStencilID += o), [a, n]
              }
              return [((e = {}), (e[i] = It.disabled), e), n]
            }),
            (mn.prototype.colorModeForRenderPass = function () {
              var e = this.context.gl
              return this._showOverdrawInspector
                ? new Ct(
                    [e.CONSTANT_COLOR, e.ONE],
                    new t.Color(1 / 8, 1 / 8, 1 / 8, 0),
                    [!0, !0, !0, !0]
                  )
                : 'opaque' === this.renderPass
                ? Ct.unblended
                : Ct.alphaBlended
            }),
            (mn.prototype.depthModeForSublayer = function (t, e, r) {
              if (!this.opaquePassEnabledForLayer()) return Tt.disabled
              var n =
                1 -
                ((1 + this.currentLayer) * this.numSublayers + t) *
                  this.depthEpsilon
              return new Tt(r || this.context.gl.LEQUAL, e, [n, n])
            }),
            (mn.prototype.opaquePassEnabledForLayer = function () {
              return this.currentLayer < this.opaquePassCutoff
            }),
            (mn.prototype.render = function (e, r) {
              var n = this
              ;(this.style = e),
                (this.options = r),
                (this.lineAtlas = e.lineAtlas),
                (this.imageManager = e.imageManager),
                (this.glyphManager = e.glyphManager),
                (this.symbolFadeChange = e.placement.symbolFadeChange(
                  t.browser.now()
                )),
                this.imageManager.beginFrame()
              var i = this.style._order,
                o = this.style.sourceCaches
              for (var a in o) {
                var s = o[a]
                s.used && s.prepare(this.context)
              }
              var l,
                u,
                c = {},
                p = {},
                h = {}
              for (var f in o) {
                var d = o[f]
                ;(c[f] = d.getVisibleCoordinates()),
                  (p[f] = c[f].slice().reverse()),
                  (h[f] = d.getVisibleCoordinates(!0).reverse())
              }
              this.opaquePassCutoff = 1 / 0
              for (var m = 0; m < i.length; m++)
                if (this.style._layers[i[m]].is3D()) {
                  this.opaquePassCutoff = m
                  break
                }
              this.renderPass = 'offscreen'
              for (var y = 0, v = i; y < v.length; y += 1) {
                var g = this.style._layers[v[y]]
                if (g.hasOffscreenPass() && !g.isHidden(this.transform.zoom)) {
                  var _ = p[g.source]
                  ;('custom' === g.type || _.length) &&
                    this.renderLayer(this, o[g.source], g, _)
                }
              }
              for (
                this.context.bindFramebuffer.set(null),
                  this.context.clear({
                    color: r.showOverdrawInspector
                      ? t.Color.black
                      : t.Color.transparent,
                    depth: 1,
                  }),
                  this.clearStencil(),
                  this._showOverdrawInspector = r.showOverdrawInspector,
                  this.depthRangeFor3D = [
                    0,
                    1 -
                      (e._order.length + 2) *
                        this.numSublayers *
                        this.depthEpsilon,
                  ],
                  this.renderPass = 'opaque',
                  this.currentLayer = i.length - 1;
                this.currentLayer >= 0;
                this.currentLayer--
              ) {
                var x = this.style._layers[i[this.currentLayer]],
                  b = o[x.source],
                  w = c[x.source]
                this._renderTileClippingMasks(x, w),
                  this.renderLayer(this, b, x, w)
              }
              for (
                this.renderPass = 'translucent', this.currentLayer = 0;
                this.currentLayer < i.length;
                this.currentLayer++
              ) {
                var E = this.style._layers[i[this.currentLayer]],
                  S = o[E.source],
                  T = ('symbol' === E.type ? h : p)[E.source]
                this._renderTileClippingMasks(E, c[E.source]),
                  this.renderLayer(this, S, E, T)
              }
              this.options.showTileBoundaries &&
                (t.values(this.style._layers).forEach(function (t) {
                  t.source &&
                    !t.isHidden(n.transform.zoom) &&
                    (t.source !== (u && u.id) &&
                      (u = n.style.sourceCaches[t.source]),
                    (!l || l.getSource().maxzoom < u.getSource().maxzoom) &&
                      (l = u))
                }),
                l && dn.debug(this, l, l.getVisibleCoordinates())),
                this.options.showPadding &&
                  (function (t) {
                    var e = t.transform.padding
                    cn(t, t.transform.height - (e.top || 0), 3, on),
                      cn(t, e.bottom || 0, 3, an),
                      pn(t, e.left || 0, 3, sn),
                      pn(t, t.transform.width - (e.right || 0), 3, ln)
                    var r = t.transform.centerPoint
                    !(function (t, e, r, n) {
                      hn(t, e - 1, r - 10, 2, 20, n),
                        hn(t, e - 10, r - 1, 20, 2, n)
                    })(t, r.x, t.transform.height - r.y, un)
                  })(this),
                this.context.setDefault()
            }),
            (mn.prototype.renderLayer = function (t, e, r, n) {
              r.isHidden(this.transform.zoom) ||
                (('background' === r.type || 'custom' === r.type || n.length) &&
                  ((this.id = r.id),
                  this.gpuTimingStart(r),
                  dn[r.type](t, e, r, n, this.style.placement.variableOffsets),
                  this.gpuTimingEnd()))
            }),
            (mn.prototype.gpuTimingStart = function (t) {
              if (this.options.gpuTiming) {
                var e = this.context.extTimerQuery,
                  r = this.gpuTimers[t.id]
                r ||
                  (r = this.gpuTimers[t.id] = {
                    calls: 0,
                    cpuTime: 0,
                    query: e.createQueryEXT(),
                  }),
                  r.calls++,
                  e.beginQueryEXT(e.TIME_ELAPSED_EXT, r.query)
              }
            }),
            (mn.prototype.gpuTimingEnd = function () {
              if (this.options.gpuTiming) {
                var t = this.context.extTimerQuery
                t.endQueryEXT(t.TIME_ELAPSED_EXT)
              }
            }),
            (mn.prototype.collectGpuTimers = function () {
              var t = this.gpuTimers
              return (this.gpuTimers = {}), t
            }),
            (mn.prototype.queryGpuTimers = function (t) {
              var e = {}
              for (var r in t) {
                var n = t[r],
                  i = this.context.extTimerQuery,
                  o = i.getQueryObjectEXT(n.query, i.QUERY_RESULT_EXT) / 1e6
                i.deleteQueryEXT(n.query), (e[r] = o)
              }
              return e
            }),
            (mn.prototype.translatePosMatrix = function (e, r, n, i, o) {
              if (!n[0] && !n[1]) return e
              var a = o
                ? 'map' === i
                  ? this.transform.angle
                  : 0
                : 'viewport' === i
                ? -this.transform.angle
                : 0
              if (a) {
                var s = Math.sin(a),
                  l = Math.cos(a)
                n = [n[0] * l - n[1] * s, n[0] * s + n[1] * l]
              }
              var u = [
                  o ? n[0] : ue(r, n[0], this.transform.zoom),
                  o ? n[1] : ue(r, n[1], this.transform.zoom),
                  0,
                ],
                c = new Float32Array(16)
              return t.translate(c, e, u), c
            }),
            (mn.prototype.saveTileTexture = function (t) {
              var e = this._tileTextures[t.size[0]]
              e ? e.push(t) : (this._tileTextures[t.size[0]] = [t])
            }),
            (mn.prototype.getTileTexture = function (t) {
              var e = this._tileTextures[t]
              return e && e.length > 0 ? e.pop() : null
            }),
            (mn.prototype.isPatternMissing = function (t) {
              if (!t) return !1
              var e = this.imageManager.getPattern(t.from.toString()),
                r = this.imageManager.getPattern(t.to.toString())
              return !e || !r
            }),
            (mn.prototype.useProgram = function (t, e) {
              this.cache = this.cache || {}
              var r =
                '' +
                t +
                (e ? e.cacheKey : '') +
                (this._showOverdrawInspector ? '/overdraw' : '')
              return (
                this.cache[r] ||
                  (this.cache[r] = new yr(
                    this.context,
                    dr[t],
                    e,
                    Gr[t],
                    this._showOverdrawInspector
                  )),
                this.cache[r]
              )
            }),
            (mn.prototype.setCustomLayerDefaults = function () {
              this.context.unbindVAO(),
                this.context.cullFace.setDefault(),
                this.context.activeTexture.setDefault(),
                this.context.pixelStoreUnpack.setDefault(),
                this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),
                this.context.pixelStoreUnpackFlipY.setDefault()
            }),
            (mn.prototype.setBaseState = function () {
              var t = this.context.gl
              this.context.cullFace.set(!1),
                this.context.viewport.set([0, 0, this.width, this.height]),
                this.context.blendEquation.set(t.FUNC_ADD)
            }),
            (mn.prototype.initDebugOverlayCanvas = function () {
              null == this.debugOverlayCanvas &&
                ((this.debugOverlayCanvas = t.window.document.createElement(
                  'canvas'
                )),
                (this.debugOverlayCanvas.width = 512),
                (this.debugOverlayCanvas.height = 512),
                (this.debugOverlayTexture = new t.Texture(
                  this.context,
                  this.debugOverlayCanvas,
                  this.context.gl.RGBA
                )))
            }),
            (mn.prototype.destroy = function () {
              this.emptyTexture.destroy(),
                this.debugOverlayTexture && this.debugOverlayTexture.destroy()
            })
          var yn = function (t, e) {
            ;(this.points = t), (this.planes = e)
          }
          yn.fromInvProjectionMatrix = function (e, r, n) {
            var i = Math.pow(2, n),
              o = [
                [-1, 1, -1, 1],
                [1, 1, -1, 1],
                [1, -1, -1, 1],
                [-1, -1, -1, 1],
                [-1, 1, 1, 1],
                [1, 1, 1, 1],
                [1, -1, 1, 1],
                [-1, -1, 1, 1],
              ]
                .map(function (r) {
                  return t.transformMat4([], r, e)
                })
                .map(function (e) {
                  return t.scale$1([], e, (1 / e[3] / r) * i)
                }),
              a = [
                [0, 1, 2],
                [6, 5, 4],
                [0, 3, 7],
                [2, 1, 5],
                [3, 2, 6],
                [0, 4, 5],
              ].map(function (e) {
                var r = t.sub([], o[e[0]], o[e[1]]),
                  n = t.sub([], o[e[2]], o[e[1]]),
                  i = t.normalize([], t.cross([], r, n)),
                  a = -t.dot(i, o[e[1]])
                return i.concat(a)
              })
            return new yn(o, a)
          }
          var vn = function (e, r) {
            ;(this.min = e),
              (this.max = r),
              (this.center = t.scale$2([], t.add([], this.min, this.max), 0.5))
          }
          ;(vn.prototype.quadrant = function (e) {
            for (
              var r = [e % 2 == 0, e < 2],
                n = t.clone$2(this.min),
                i = t.clone$2(this.max),
                o = 0;
              o < r.length;
              o++
            )
              (n[o] = r[o] ? this.min[o] : this.center[o]),
                (i[o] = r[o] ? this.center[o] : this.max[o])
            return (i[2] = this.max[2]), new vn(n, i)
          }),
            (vn.prototype.distanceX = function (t) {
              return Math.max(Math.min(this.max[0], t[0]), this.min[0]) - t[0]
            }),
            (vn.prototype.distanceY = function (t) {
              return Math.max(Math.min(this.max[1], t[1]), this.min[1]) - t[1]
            }),
            (vn.prototype.intersects = function (e) {
              for (
                var r = [
                    [this.min[0], this.min[1], 0, 1],
                    [this.max[0], this.min[1], 0, 1],
                    [this.max[0], this.max[1], 0, 1],
                    [this.min[0], this.max[1], 0, 1],
                  ],
                  n = !0,
                  i = 0;
                i < e.planes.length;
                i++
              ) {
                for (var o = e.planes[i], a = 0, s = 0; s < r.length; s++)
                  a += t.dot$1(o, r[s]) >= 0
                if (0 === a) return 0
                a !== r.length && (n = !1)
              }
              if (n) return 2
              for (var l = 0; l < 3; l++) {
                for (
                  var u = Number.MAX_VALUE, c = -Number.MAX_VALUE, p = 0;
                  p < e.points.length;
                  p++
                ) {
                  var h = e.points[p][l] - this.min[l]
                  ;(u = Math.min(u, h)), (c = Math.max(c, h))
                }
                if (c < 0 || u > this.max[l] - this.min[l]) return 0
              }
              return 1
            })
          var gn = function (t, e, r, n) {
            if (
              (void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === r && (r = 0),
              void 0 === n && (n = 0),
              isNaN(t) ||
                t < 0 ||
                isNaN(e) ||
                e < 0 ||
                isNaN(r) ||
                r < 0 ||
                isNaN(n) ||
                n < 0)
            )
              throw new Error(
                'Invalid value for edge-insets, top, bottom, left and right must all be numbers'
              )
            ;(this.top = t),
              (this.bottom = e),
              (this.left = r),
              (this.right = n)
          }
          ;(gn.prototype.interpolate = function (e, r, n) {
            return (
              null != r.top &&
                null != e.top &&
                (this.top = t.number(e.top, r.top, n)),
              null != r.bottom &&
                null != e.bottom &&
                (this.bottom = t.number(e.bottom, r.bottom, n)),
              null != r.left &&
                null != e.left &&
                (this.left = t.number(e.left, r.left, n)),
              null != r.right &&
                null != e.right &&
                (this.right = t.number(e.right, r.right, n)),
              this
            )
          }),
            (gn.prototype.getCenter = function (e, r) {
              var n = t.clamp((this.left + e - this.right) / 2, 0, e),
                i = t.clamp((this.top + r - this.bottom) / 2, 0, r)
              return new t.Point(n, i)
            }),
            (gn.prototype.equals = function (t) {
              return (
                this.top === t.top &&
                this.bottom === t.bottom &&
                this.left === t.left &&
                this.right === t.right
              )
            }),
            (gn.prototype.clone = function () {
              return new gn(this.top, this.bottom, this.left, this.right)
            }),
            (gn.prototype.toJSON = function () {
              return {
                top: this.top,
                bottom: this.bottom,
                left: this.left,
                right: this.right,
              }
            })
          var _n = function (e, r, n, i, o) {
              ;(this.tileSize = 512),
                (this.maxValidLatitude = 85.051129),
                (this._renderWorldCopies = void 0 === o || o),
                (this._minZoom = e || 0),
                (this._maxZoom = r || 22),
                (this._minPitch = null == n ? 0 : n),
                (this._maxPitch = null == i ? 60 : i),
                this.setMaxBounds(),
                (this.width = 0),
                (this.height = 0),
                (this._center = new t.LngLat(0, 0)),
                (this.zoom = 0),
                (this.angle = 0),
                (this._fov = 0.6435011087932844),
                (this._pitch = 0),
                (this._unmodified = !0),
                (this._edgeInsets = new gn()),
                (this._posMatrixCache = {}),
                (this._alignedPosMatrixCache = {})
            },
            xn = {
              minZoom: { configurable: !0 },
              maxZoom: { configurable: !0 },
              minPitch: { configurable: !0 },
              maxPitch: { configurable: !0 },
              renderWorldCopies: { configurable: !0 },
              worldSize: { configurable: !0 },
              centerOffset: { configurable: !0 },
              size: { configurable: !0 },
              bearing: { configurable: !0 },
              pitch: { configurable: !0 },
              fov: { configurable: !0 },
              zoom: { configurable: !0 },
              center: { configurable: !0 },
              padding: { configurable: !0 },
              centerPoint: { configurable: !0 },
              unmodified: { configurable: !0 },
              point: { configurable: !0 },
            }
          ;(_n.prototype.clone = function () {
            var t = new _n(
              this._minZoom,
              this._maxZoom,
              this._minPitch,
              this.maxPitch,
              this._renderWorldCopies
            )
            return (
              (t.tileSize = this.tileSize),
              (t.latRange = this.latRange),
              (t.width = this.width),
              (t.height = this.height),
              (t._center = this._center),
              (t.zoom = this.zoom),
              (t.angle = this.angle),
              (t._fov = this._fov),
              (t._pitch = this._pitch),
              (t._unmodified = this._unmodified),
              (t._edgeInsets = this._edgeInsets.clone()),
              t._calcMatrices(),
              t
            )
          }),
            (xn.minZoom.get = function () {
              return this._minZoom
            }),
            (xn.minZoom.set = function (t) {
              this._minZoom !== t &&
                ((this._minZoom = t), (this.zoom = Math.max(this.zoom, t)))
            }),
            (xn.maxZoom.get = function () {
              return this._maxZoom
            }),
            (xn.maxZoom.set = function (t) {
              this._maxZoom !== t &&
                ((this._maxZoom = t), (this.zoom = Math.min(this.zoom, t)))
            }),
            (xn.minPitch.get = function () {
              return this._minPitch
            }),
            (xn.minPitch.set = function (t) {
              this._minPitch !== t &&
                ((this._minPitch = t), (this.pitch = Math.max(this.pitch, t)))
            }),
            (xn.maxPitch.get = function () {
              return this._maxPitch
            }),
            (xn.maxPitch.set = function (t) {
              this._maxPitch !== t &&
                ((this._maxPitch = t), (this.pitch = Math.min(this.pitch, t)))
            }),
            (xn.renderWorldCopies.get = function () {
              return this._renderWorldCopies
            }),
            (xn.renderWorldCopies.set = function (t) {
              void 0 === t ? (t = !0) : null === t && (t = !1),
                (this._renderWorldCopies = t)
            }),
            (xn.worldSize.get = function () {
              return this.tileSize * this.scale
            }),
            (xn.centerOffset.get = function () {
              return this.centerPoint._sub(this.size._div(2))
            }),
            (xn.size.get = function () {
              return new t.Point(this.width, this.height)
            }),
            (xn.bearing.get = function () {
              return (-this.angle / Math.PI) * 180
            }),
            (xn.bearing.set = function (e) {
              var r = (-t.wrap(e, -180, 180) * Math.PI) / 180
              this.angle !== r &&
                ((this._unmodified = !1),
                (this.angle = r),
                this._calcMatrices(),
                (this.rotationMatrix = t.create$2()),
                t.rotate(this.rotationMatrix, this.rotationMatrix, this.angle))
            }),
            (xn.pitch.get = function () {
              return (this._pitch / Math.PI) * 180
            }),
            (xn.pitch.set = function (e) {
              var r = (t.clamp(e, this.minPitch, this.maxPitch) / 180) * Math.PI
              this._pitch !== r &&
                ((this._unmodified = !1),
                (this._pitch = r),
                this._calcMatrices())
            }),
            (xn.fov.get = function () {
              return (this._fov / Math.PI) * 180
            }),
            (xn.fov.set = function (t) {
              ;(t = Math.max(0.01, Math.min(60, t))),
                this._fov !== t &&
                  ((this._unmodified = !1),
                  (this._fov = (t / 180) * Math.PI),
                  this._calcMatrices())
            }),
            (xn.zoom.get = function () {
              return this._zoom
            }),
            (xn.zoom.set = function (t) {
              var e = Math.min(Math.max(t, this.minZoom), this.maxZoom)
              this._zoom !== e &&
                ((this._unmodified = !1),
                (this._zoom = e),
                (this.scale = this.zoomScale(e)),
                (this.tileZoom = Math.floor(e)),
                (this.zoomFraction = e - this.tileZoom),
                this._constrain(),
                this._calcMatrices())
            }),
            (xn.center.get = function () {
              return this._center
            }),
            (xn.center.set = function (t) {
              ;(t.lat === this._center.lat && t.lng === this._center.lng) ||
                ((this._unmodified = !1),
                (this._center = t),
                this._constrain(),
                this._calcMatrices())
            }),
            (xn.padding.get = function () {
              return this._edgeInsets.toJSON()
            }),
            (xn.padding.set = function (t) {
              this._edgeInsets.equals(t) ||
                ((this._unmodified = !1),
                this._edgeInsets.interpolate(this._edgeInsets, t, 1),
                this._calcMatrices())
            }),
            (xn.centerPoint.get = function () {
              return this._edgeInsets.getCenter(this.width, this.height)
            }),
            (_n.prototype.isPaddingEqual = function (t) {
              return this._edgeInsets.equals(t)
            }),
            (_n.prototype.interpolatePadding = function (t, e, r) {
              ;(this._unmodified = !1),
                this._edgeInsets.interpolate(t, e, r),
                this._constrain(),
                this._calcMatrices()
            }),
            (_n.prototype.coveringZoomLevel = function (t) {
              var e = (t.roundZoom ? Math.round : Math.floor)(
                this.zoom + this.scaleZoom(this.tileSize / t.tileSize)
              )
              return Math.max(0, e)
            }),
            (_n.prototype.getVisibleUnwrappedCoordinates = function (e) {
              var r = [new t.UnwrappedTileID(0, e)]
              if (this._renderWorldCopies)
                for (
                  var n = this.pointCoordinate(new t.Point(0, 0)),
                    i = this.pointCoordinate(new t.Point(this.width, 0)),
                    o = this.pointCoordinate(
                      new t.Point(this.width, this.height)
                    ),
                    a = this.pointCoordinate(new t.Point(0, this.height)),
                    s = Math.floor(Math.min(n.x, i.x, o.x, a.x)),
                    l = Math.floor(Math.max(n.x, i.x, o.x, a.x)),
                    u = s - 1;
                  u <= l + 1;
                  u++
                )
                  0 !== u && r.push(new t.UnwrappedTileID(u, e))
              return r
            }),
            (_n.prototype.coveringTiles = function (e) {
              var r = this.coveringZoomLevel(e),
                n = r
              if (void 0 !== e.minzoom && r < e.minzoom) return []
              void 0 !== e.maxzoom && r > e.maxzoom && (r = e.maxzoom)
              var i = t.MercatorCoordinate.fromLngLat(this.center),
                o = Math.pow(2, r),
                a = [o * i.x, o * i.y, 0],
                s = yn.fromInvProjectionMatrix(
                  this.invProjMatrix,
                  this.worldSize,
                  r
                ),
                l = e.minzoom || 0
              this.pitch <= 60 && this._edgeInsets.top < 0.1 && (l = r)
              var u = function (t) {
                  return {
                    aabb: new vn([t * o, 0, 0], [(t + 1) * o, o, 0]),
                    zoom: 0,
                    x: 0,
                    y: 0,
                    wrap: t,
                    fullyVisible: !1,
                  }
                },
                c = [],
                p = [],
                h = r,
                f = e.reparseOverscaled ? n : r
              if (this._renderWorldCopies)
                for (var d = 1; d <= 3; d++) c.push(u(-d)), c.push(u(d))
              for (c.push(u(0)); c.length > 0; ) {
                var m = c.pop(),
                  y = m.x,
                  v = m.y,
                  g = m.fullyVisible
                if (!g) {
                  var _ = m.aabb.intersects(s)
                  if (0 === _) continue
                  g = 2 === _
                }
                var x = m.aabb.distanceX(a),
                  b = m.aabb.distanceY(a),
                  w = Math.max(Math.abs(x), Math.abs(b))
                if (
                  m.zoom === h ||
                  (w > 3 + (1 << (h - m.zoom)) - 2 && m.zoom >= l)
                )
                  p.push({
                    tileID: new t.OverscaledTileID(
                      m.zoom === h ? f : m.zoom,
                      m.wrap,
                      m.zoom,
                      y,
                      v
                    ),
                    distanceSq: t.sqrLen([a[0] - 0.5 - y, a[1] - 0.5 - v]),
                  })
                else
                  for (var E = 0; E < 4; E++) {
                    var S = (y << 1) + (E % 2),
                      T = (v << 1) + (E >> 1)
                    c.push({
                      aabb: m.aabb.quadrant(E),
                      zoom: m.zoom + 1,
                      x: S,
                      y: T,
                      wrap: m.wrap,
                      fullyVisible: g,
                    })
                  }
              }
              return p
                .sort(function (t, e) {
                  return t.distanceSq - e.distanceSq
                })
                .map(function (t) {
                  return t.tileID
                })
            }),
            (_n.prototype.resize = function (t, e) {
              ;(this.width = t),
                (this.height = e),
                (this.pixelsToGLUnits = [2 / t, -2 / e]),
                this._constrain(),
                this._calcMatrices()
            }),
            (xn.unmodified.get = function () {
              return this._unmodified
            }),
            (_n.prototype.zoomScale = function (t) {
              return Math.pow(2, t)
            }),
            (_n.prototype.scaleZoom = function (t) {
              return Math.log(t) / Math.LN2
            }),
            (_n.prototype.project = function (e) {
              var r = t.clamp(
                e.lat,
                -this.maxValidLatitude,
                this.maxValidLatitude
              )
              return new t.Point(
                t.mercatorXfromLng(e.lng) * this.worldSize,
                t.mercatorYfromLat(r) * this.worldSize
              )
            }),
            (_n.prototype.unproject = function (e) {
              return new t.MercatorCoordinate(
                e.x / this.worldSize,
                e.y / this.worldSize
              ).toLngLat()
            }),
            (xn.point.get = function () {
              return this.project(this.center)
            }),
            (_n.prototype.setLocationAtPoint = function (e, r) {
              var n = this.pointCoordinate(r),
                i = this.pointCoordinate(this.centerPoint),
                o = this.locationCoordinate(e),
                a = new t.MercatorCoordinate(
                  o.x - (n.x - i.x),
                  o.y - (n.y - i.y)
                )
              ;(this.center = this.coordinateLocation(a)),
                this._renderWorldCopies && (this.center = this.center.wrap())
            }),
            (_n.prototype.locationPoint = function (t) {
              return this.coordinatePoint(this.locationCoordinate(t))
            }),
            (_n.prototype.pointLocation = function (t) {
              return this.coordinateLocation(this.pointCoordinate(t))
            }),
            (_n.prototype.locationCoordinate = function (e) {
              return t.MercatorCoordinate.fromLngLat(e)
            }),
            (_n.prototype.coordinateLocation = function (t) {
              return t.toLngLat()
            }),
            (_n.prototype.pointCoordinate = function (e) {
              var r = [e.x, e.y, 0, 1],
                n = [e.x, e.y, 1, 1]
              t.transformMat4(r, r, this.pixelMatrixInverse),
                t.transformMat4(n, n, this.pixelMatrixInverse)
              var i = r[3],
                o = n[3],
                a = r[1] / i,
                s = n[1] / o,
                l = r[2] / i,
                u = n[2] / o,
                c = l === u ? 0 : (0 - l) / (u - l)
              return new t.MercatorCoordinate(
                t.number(r[0] / i, n[0] / o, c) / this.worldSize,
                t.number(a, s, c) / this.worldSize
              )
            }),
            (_n.prototype.coordinatePoint = function (e) {
              var r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1]
              return (
                t.transformMat4(r, r, this.pixelMatrix),
                new t.Point(r[0] / r[3], r[1] / r[3])
              )
            }),
            (_n.prototype.getBounds = function () {
              return new t.LngLatBounds()
                .extend(this.pointLocation(new t.Point(0, 0)))
                .extend(this.pointLocation(new t.Point(this.width, 0)))
                .extend(
                  this.pointLocation(new t.Point(this.width, this.height))
                )
                .extend(this.pointLocation(new t.Point(0, this.height)))
            }),
            (_n.prototype.getMaxBounds = function () {
              return this.latRange &&
                2 === this.latRange.length &&
                this.lngRange &&
                2 === this.lngRange.length
                ? new t.LngLatBounds(
                    [this.lngRange[0], this.latRange[0]],
                    [this.lngRange[1], this.latRange[1]]
                  )
                : null
            }),
            (_n.prototype.setMaxBounds = function (t) {
              t
                ? ((this.lngRange = [t.getWest(), t.getEast()]),
                  (this.latRange = [t.getSouth(), t.getNorth()]),
                  this._constrain())
                : ((this.lngRange = null),
                  (this.latRange = [
                    -this.maxValidLatitude,
                    this.maxValidLatitude,
                  ]))
            }),
            (_n.prototype.calculatePosMatrix = function (e, r) {
              void 0 === r && (r = !1)
              var n = e.key,
                i = r ? this._alignedPosMatrixCache : this._posMatrixCache
              if (i[n]) return i[n]
              var o = e.canonical,
                a = this.worldSize / this.zoomScale(o.z),
                s = o.x + Math.pow(2, o.z) * e.wrap,
                l = t.identity(new Float64Array(16))
              return (
                t.translate(l, l, [s * a, o.y * a, 0]),
                t.scale(l, l, [a / t.EXTENT, a / t.EXTENT, 1]),
                t.multiply(l, r ? this.alignedProjMatrix : this.projMatrix, l),
                (i[n] = new Float32Array(l)),
                i[n]
              )
            }),
            (_n.prototype.customLayerMatrix = function () {
              return this.mercatorMatrix.slice()
            }),
            (_n.prototype._constrain = function () {
              if (
                this.center &&
                this.width &&
                this.height &&
                !this._constraining
              ) {
                this._constraining = !0
                var e,
                  r,
                  n,
                  i,
                  o = -90,
                  a = 90,
                  s = -180,
                  l = 180,
                  u = this.size,
                  c = this._unmodified
                if (this.latRange) {
                  var p = this.latRange
                  ;(o = t.mercatorYfromLat(p[1]) * this.worldSize),
                    (e =
                      (a = t.mercatorYfromLat(p[0]) * this.worldSize) - o < u.y
                        ? u.y / (a - o)
                        : 0)
                }
                if (this.lngRange) {
                  var h = this.lngRange
                  ;(s = t.mercatorXfromLng(h[0]) * this.worldSize),
                    (r =
                      (l = t.mercatorXfromLng(h[1]) * this.worldSize) - s < u.x
                        ? u.x / (l - s)
                        : 0)
                }
                var f = this.point,
                  d = Math.max(r || 0, e || 0)
                if (d)
                  return (
                    (this.center = this.unproject(
                      new t.Point(r ? (l + s) / 2 : f.x, e ? (a + o) / 2 : f.y)
                    )),
                    (this.zoom += this.scaleZoom(d)),
                    (this._unmodified = c),
                    void (this._constraining = !1)
                  )
                if (this.latRange) {
                  var m = f.y,
                    y = u.y / 2
                  m - y < o && (i = o + y), m + y > a && (i = a - y)
                }
                if (this.lngRange) {
                  var v = f.x,
                    g = u.x / 2
                  v - g < s && (n = s + g), v + g > l && (n = l - g)
                }
                ;(void 0 === n && void 0 === i) ||
                  (this.center = this.unproject(
                    new t.Point(void 0 !== n ? n : f.x, void 0 !== i ? i : f.y)
                  )),
                  (this._unmodified = c),
                  (this._constraining = !1)
              }
            }),
            (_n.prototype._calcMatrices = function () {
              if (this.height) {
                var e = this.centerOffset
                this.cameraToCenterDistance =
                  (0.5 / Math.tan(this._fov / 2)) * this.height
                var r = Math.PI / 2 + this._pitch,
                  n = this._fov * (0.5 + e.y / this.height),
                  i =
                    (Math.sin(n) * this.cameraToCenterDistance) /
                    Math.sin(t.clamp(Math.PI - r - n, 0.01, Math.PI - 0.01)),
                  o = this.point,
                  a = o.x,
                  s = o.y,
                  l =
                    1.01 *
                    (Math.cos(Math.PI / 2 - this._pitch) * i +
                      this.cameraToCenterDistance),
                  u = this.height / 50,
                  c = new Float64Array(16)
                t.perspective(c, this._fov, this.width / this.height, u, l),
                  (c[8] = (2 * -e.x) / this.width),
                  (c[9] = (2 * e.y) / this.height),
                  t.scale(c, c, [1, -1, 1]),
                  t.translate(c, c, [0, 0, -this.cameraToCenterDistance]),
                  t.rotateX(c, c, this._pitch),
                  t.rotateZ(c, c, this.angle),
                  t.translate(c, c, [-a, -s, 0]),
                  (this.mercatorMatrix = t.scale([], c, [
                    this.worldSize,
                    this.worldSize,
                    this.worldSize,
                  ])),
                  t.scale(c, c, [
                    1,
                    1,
                    t.mercatorZfromAltitude(1, this.center.lat) *
                      this.worldSize,
                    1,
                  ]),
                  (this.projMatrix = c),
                  (this.invProjMatrix = t.invert([], this.projMatrix))
                var p = (this.width % 2) / 2,
                  h = (this.height % 2) / 2,
                  f = Math.cos(this.angle),
                  d = Math.sin(this.angle),
                  m = a - Math.round(a) + f * p + d * h,
                  y = s - Math.round(s) + f * h + d * p,
                  v = new Float64Array(c)
                if (
                  (t.translate(v, v, [
                    m > 0.5 ? m - 1 : m,
                    y > 0.5 ? y - 1 : y,
                    0,
                  ]),
                  (this.alignedProjMatrix = v),
                  (c = t.create()),
                  t.scale(c, c, [this.width / 2, -this.height / 2, 1]),
                  t.translate(c, c, [1, -1, 0]),
                  (this.labelPlaneMatrix = c),
                  (c = t.create()),
                  t.scale(c, c, [1, -1, 1]),
                  t.translate(c, c, [-1, -1, 0]),
                  t.scale(c, c, [2 / this.width, 2 / this.height, 1]),
                  (this.glCoordMatrix = c),
                  (this.pixelMatrix = t.multiply(
                    new Float64Array(16),
                    this.labelPlaneMatrix,
                    this.projMatrix
                  )),
                  !(c = t.invert(new Float64Array(16), this.pixelMatrix)))
                )
                  throw new Error('failed to invert matrix')
                ;(this.pixelMatrixInverse = c),
                  (this._posMatrixCache = {}),
                  (this._alignedPosMatrixCache = {})
              }
            }),
            (_n.prototype.maxPitchScaleFactor = function () {
              if (!this.pixelMatrixInverse) return 1
              var e = this.pointCoordinate(new t.Point(0, 0)),
                r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1]
              return (
                t.transformMat4(r, r, this.pixelMatrix)[3] /
                this.cameraToCenterDistance
              )
            }),
            (_n.prototype.getCameraPoint = function () {
              var e = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1)
              return this.centerPoint.add(new t.Point(0, e))
            }),
            (_n.prototype.getCameraQueryGeometry = function (e) {
              var r = this.getCameraPoint()
              if (1 === e.length) return [e[0], r]
              for (
                var n = r.x, i = r.y, o = r.x, a = r.y, s = 0, l = e;
                s < l.length;
                s += 1
              ) {
                var u = l[s]
                ;(n = Math.min(n, u.x)),
                  (i = Math.min(i, u.y)),
                  (o = Math.max(o, u.x)),
                  (a = Math.max(a, u.y))
              }
              return [
                new t.Point(n, i),
                new t.Point(o, i),
                new t.Point(o, a),
                new t.Point(n, a),
                new t.Point(n, i),
              ]
            }),
            Object.defineProperties(_n.prototype, xn)
          var bn = function (e) {
            var r, n, i, o
            ;(this._hashName = e && encodeURIComponent(e)),
              t.bindAll(
                ['_getCurrentHash', '_onHashChange', '_updateHash'],
                this
              ),
              (this._updateHash =
                ((r = this._updateHashUnthrottled.bind(this)),
                (n = !1),
                (i = null),
                (o = function () {
                  ;(i = null), n && (r(), (i = setTimeout(o, 300)), (n = !1))
                }),
                function () {
                  return (n = !0), i || o(), i
                }))
          }
          ;(bn.prototype.addTo = function (e) {
            return (
              (this._map = e),
              t.window.addEventListener('hashchange', this._onHashChange, !1),
              this._map.on('moveend', this._updateHash),
              this
            )
          }),
            (bn.prototype.remove = function () {
              return (
                t.window.removeEventListener(
                  'hashchange',
                  this._onHashChange,
                  !1
                ),
                this._map.off('moveend', this._updateHash),
                clearTimeout(this._updateHash()),
                delete this._map,
                this
              )
            }),
            (bn.prototype.getHashString = function (e) {
              var r = this._map.getCenter(),
                n = Math.round(100 * this._map.getZoom()) / 100,
                i = Math.ceil(
                  (n * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10
                ),
                o = Math.pow(10, i),
                a = Math.round(r.lng * o) / o,
                s = Math.round(r.lat * o) / o,
                l = this._map.getBearing(),
                u = this._map.getPitch(),
                c = ''
              if (
                ((c += e ? '/' + a + '/' + s + '/' + n : n + '/' + s + '/' + a),
                (l || u) && (c += '/' + Math.round(10 * l) / 10),
                u && (c += '/' + Math.round(u)),
                this._hashName)
              ) {
                var p = this._hashName,
                  h = !1,
                  f = t.window.location.hash
                    .slice(1)
                    .split('&')
                    .map(function (t) {
                      var e = t.split('=')[0]
                      return e === p ? ((h = !0), e + '=' + c) : t
                    })
                    .filter(function (t) {
                      return t
                    })
                return h || f.push(p + '=' + c), '#' + f.join('&')
              }
              return '#' + c
            }),
            (bn.prototype._getCurrentHash = function () {
              var e,
                r = this,
                n = t.window.location.hash.replace('#', '')
              return this._hashName
                ? (n
                    .split('&')
                    .map(function (t) {
                      return t.split('=')
                    })
                    .forEach(function (t) {
                      t[0] === r._hashName && (e = t)
                    }),
                  ((e && e[1]) || '').split('/'))
                : n.split('/')
            }),
            (bn.prototype._onHashChange = function () {
              var t = this._getCurrentHash()
              if (
                t.length >= 3 &&
                !t.some(function (t) {
                  return isNaN(t)
                })
              ) {
                var e =
                  this._map.dragRotate.isEnabled() &&
                  this._map.touchZoomRotate.isEnabled()
                    ? +(t[3] || 0)
                    : this._map.getBearing()
                return (
                  this._map.jumpTo({
                    center: [+t[2], +t[1]],
                    zoom: +t[0],
                    bearing: e,
                    pitch: +(t[4] || 0),
                  }),
                  !0
                )
              }
              return !1
            }),
            (bn.prototype._updateHashUnthrottled = function () {
              var e = this.getHashString()
              try {
                t.window.history.replaceState(t.window.history.state, '', e)
              } catch (t) {}
            })
          var wn = (function (e) {
              function n(n, i, o, a) {
                void 0 === a && (a = {})
                var s = r.mousePos(i.getCanvasContainer(), o),
                  l = i.unproject(s)
                e.call(
                  this,
                  n,
                  t.extend({ point: s, lngLat: l, originalEvent: o }, a)
                ),
                  (this._defaultPrevented = !1),
                  (this.target = i)
              }
              e && (n.__proto__ = e),
                ((n.prototype = Object.create(
                  e && e.prototype
                )).constructor = n)
              var i = { defaultPrevented: { configurable: !0 } }
              return (
                (n.prototype.preventDefault = function () {
                  this._defaultPrevented = !0
                }),
                (i.defaultPrevented.get = function () {
                  return this._defaultPrevented
                }),
                Object.defineProperties(n.prototype, i),
                n
              )
            })(t.Event),
            En = (function (e) {
              function n(n, i, o) {
                var a = r.touchPos(i.getCanvasContainer(), o),
                  s = a.map(function (t) {
                    return i.unproject(t)
                  }),
                  l = a.reduce(function (t, e, r, n) {
                    return t.add(e.div(n.length))
                  }, new t.Point(0, 0)),
                  u = i.unproject(l)
                e.call(this, n, {
                  points: a,
                  point: l,
                  lngLats: s,
                  lngLat: u,
                  originalEvent: o,
                }),
                  (this._defaultPrevented = !1)
              }
              e && (n.__proto__ = e),
                ((n.prototype = Object.create(
                  e && e.prototype
                )).constructor = n)
              var i = { defaultPrevented: { configurable: !0 } }
              return (
                (n.prototype.preventDefault = function () {
                  this._defaultPrevented = !0
                }),
                (i.defaultPrevented.get = function () {
                  return this._defaultPrevented
                }),
                Object.defineProperties(n.prototype, i),
                n
              )
            })(t.Event),
            Sn = (function (t) {
              function e(e, r, n) {
                t.call(this, e, { originalEvent: n }),
                  (this._defaultPrevented = !1)
              }
              t && (e.__proto__ = t),
                ((e.prototype = Object.create(
                  t && t.prototype
                )).constructor = e)
              var r = { defaultPrevented: { configurable: !0 } }
              return (
                (e.prototype.preventDefault = function () {
                  this._defaultPrevented = !0
                }),
                (r.defaultPrevented.get = function () {
                  return this._defaultPrevented
                }),
                Object.defineProperties(e.prototype, r),
                e
              )
            })(t.Event),
            Tn = function (e) {
              ;(this._map = e),
                (this._el = e.getCanvasContainer()),
                (this._delta = 0),
                (this._defaultZoomRate = 0.01),
                (this._wheelZoomRate = 1 / 450),
                t.bindAll(
                  [
                    '_onWheel',
                    '_onTimeout',
                    '_onScrollFrame',
                    '_onScrollFinished',
                  ],
                  this
                )
            }
          ;(Tn.prototype.setZoomRate = function (t) {
            this._defaultZoomRate = t
          }),
            (Tn.prototype.setWheelZoomRate = function (t) {
              this._wheelZoomRate = t
            }),
            (Tn.prototype.isEnabled = function () {
              return !!this._enabled
            }),
            (Tn.prototype.isActive = function () {
              return !!this._active
            }),
            (Tn.prototype.isZooming = function () {
              return !!this._zooming
            }),
            (Tn.prototype.enable = function (t) {
              this.isEnabled() ||
                ((this._enabled = !0),
                (this._aroundCenter = t && 'center' === t.around))
            }),
            (Tn.prototype.disable = function () {
              this.isEnabled() && (this._enabled = !1)
            }),
            (Tn.prototype.onWheel = function (e) {
              if (this.isEnabled()) {
                var r =
                    e.deltaMode === t.window.WheelEvent.DOM_DELTA_LINE
                      ? 40 * e.deltaY
                      : e.deltaY,
                  n = t.browser.now(),
                  i = n - (this._lastWheelEventTime || 0)
                ;(this._lastWheelEventTime = n),
                  0 !== r && r % 4.000244140625 == 0
                    ? (this._type = 'wheel')
                    : 0 !== r && Math.abs(r) < 4
                    ? (this._type = 'trackpad')
                    : i > 400
                    ? ((this._type = null),
                      (this._lastValue = r),
                      (this._timeout = setTimeout(this._onTimeout, 40, e)))
                    : this._type ||
                      ((this._type =
                        Math.abs(i * r) < 200 ? 'trackpad' : 'wheel'),
                      this._timeout &&
                        (clearTimeout(this._timeout),
                        (this._timeout = null),
                        (r += this._lastValue))),
                  e.shiftKey && r && (r /= 4),
                  this._type &&
                    ((this._lastWheelEvent = e),
                    (this._delta -= r),
                    this.isActive() || this._start(e)),
                  e.preventDefault()
              }
            }),
            (Tn.prototype._onTimeout = function (t) {
              ;(this._type = 'wheel'),
                (this._delta -= this._lastValue),
                this.isActive() || this._start(t)
            }),
            (Tn.prototype._start = function (e) {
              if (this._delta) {
                this._frameId &&
                  (this._map._cancelRenderFrame(this._frameId),
                  (this._frameId = null)),
                  (this._active = !0),
                  this.isZooming() ||
                    ((this._zooming = !0),
                    this._map.fire(
                      new t.Event('movestart', { originalEvent: e })
                    ),
                    this._map.fire(
                      new t.Event('zoomstart', { originalEvent: e })
                    )),
                  this._finishTimeout && clearTimeout(this._finishTimeout)
                var n = r.mousePos(this._el, e)
                ;(this._around = t.LngLat.convert(
                  this._aroundCenter
                    ? this._map.getCenter()
                    : this._map.unproject(n)
                )),
                  (this._aroundPoint = this._map.transform.locationPoint(
                    this._around
                  )),
                  this._frameId ||
                    (this._frameId = this._map._requestRenderFrame(
                      this._onScrollFrame
                    ))
              }
            }),
            (Tn.prototype._onScrollFrame = function () {
              var e = this
              if (((this._frameId = null), this.isActive())) {
                var r = this._map.transform
                if (0 !== this._delta) {
                  var n =
                      'wheel' === this._type &&
                      Math.abs(this._delta) > 4.000244140625
                        ? this._wheelZoomRate
                        : this._defaultZoomRate,
                    i = 2 / (1 + Math.exp(-Math.abs(this._delta * n)))
                  this._delta < 0 && 0 !== i && (i = 1 / i)
                  var o =
                    'number' == typeof this._targetZoom
                      ? r.zoomScale(this._targetZoom)
                      : r.scale
                  ;(this._targetZoom = Math.min(
                    r.maxZoom,
                    Math.max(r.minZoom, r.scaleZoom(o * i))
                  )),
                    'wheel' === this._type &&
                      ((this._startZoom = r.zoom),
                      (this._easing = this._smoothOutEasing(200))),
                    (this._delta = 0)
                }
                var a =
                    'number' == typeof this._targetZoom
                      ? this._targetZoom
                      : r.zoom,
                  s = this._startZoom,
                  l = this._easing,
                  u = !1
                if ('wheel' === this._type && s && l) {
                  var c = Math.min(
                      (t.browser.now() - this._lastWheelEventTime) / 200,
                      1
                    ),
                    p = l(c)
                  ;(r.zoom = t.number(s, a, p)),
                    c < 1
                      ? this._frameId ||
                        (this._frameId = this._map._requestRenderFrame(
                          this._onScrollFrame
                        ))
                      : (u = !0)
                } else (r.zoom = a), (u = !0)
                r.setLocationAtPoint(this._around, this._aroundPoint),
                  this._map.fire(
                    new t.Event('move', { originalEvent: this._lastWheelEvent })
                  ),
                  this._map.fire(
                    new t.Event('zoom', { originalEvent: this._lastWheelEvent })
                  ),
                  u &&
                    ((this._active = !1),
                    (this._finishTimeout = setTimeout(function () {
                      ;(e._zooming = !1),
                        e._map.fire(
                          new t.Event('zoomend', {
                            originalEvent: e._lastWheelEvent,
                          })
                        ),
                        e._map.fire(
                          new t.Event('moveend', {
                            originalEvent: e._lastWheelEvent,
                          })
                        ),
                        delete e._targetZoom
                    }, 200)))
              }
            }),
            (Tn.prototype._smoothOutEasing = function (e) {
              var r = t.ease
              if (this._prevEase) {
                var n = this._prevEase,
                  i = (t.browser.now() - n.start) / n.duration,
                  o = n.easing(i + 0.01) - n.easing(i),
                  a = (0.27 / Math.sqrt(o * o + 1e-4)) * 0.01,
                  s = Math.sqrt(0.0729 - a * a)
                r = t.bezier(a, s, 0.25, 1)
              }
              return (
                (this._prevEase = {
                  start: t.browser.now(),
                  duration: e,
                  easing: r,
                }),
                r
              )
            })
          var In = function (e, r) {
            ;(this._map = e),
              (this._el = e.getCanvasContainer()),
              (this._container = e.getContainer()),
              (this._clickTolerance = r.clickTolerance || 1),
              t.bindAll(['_onMouseMove', '_onMouseUp', '_onKeyDown'], this)
          }
          ;(In.prototype.isEnabled = function () {
            return !!this._enabled
          }),
            (In.prototype.isActive = function () {
              return !!this._active
            }),
            (In.prototype.enable = function () {
              this.isEnabled() || (this._enabled = !0)
            }),
            (In.prototype.disable = function () {
              this.isEnabled() && (this._enabled = !1)
            }),
            (In.prototype.onMouseDown = function (e) {
              this.isEnabled() &&
                e.shiftKey &&
                0 === e.button &&
                (t.window.document.addEventListener(
                  'mousemove',
                  this._onMouseMove,
                  !1
                ),
                t.window.document.addEventListener(
                  'keydown',
                  this._onKeyDown,
                  !1
                ),
                t.window.document.addEventListener(
                  'mouseup',
                  this._onMouseUp,
                  !1
                ),
                r.disableDrag(),
                (this._startPos = this._lastPos = r.mousePos(this._el, e)),
                (this._active = !0))
            }),
            (In.prototype._onMouseMove = function (t) {
              var e = r.mousePos(this._el, t)
              if (
                !(
                  this._lastPos.equals(e) ||
                  (!this._box && e.dist(this._startPos) < this._clickTolerance)
                )
              ) {
                var n = this._startPos
                ;(this._lastPos = e),
                  this._box ||
                    ((this._box = r.create(
                      'div',
                      'mapboxgl-boxzoom',
                      this._container
                    )),
                    this._container.classList.add('mapboxgl-crosshair'),
                    this._fireEvent('boxzoomstart', t))
                var i = Math.min(n.x, e.x),
                  o = Math.max(n.x, e.x),
                  a = Math.min(n.y, e.y),
                  s = Math.max(n.y, e.y)
                r.setTransform(this._box, 'translate(' + i + 'px,' + a + 'px)'),
                  (this._box.style.width = o - i + 'px'),
                  (this._box.style.height = s - a + 'px')
              }
            }),
            (In.prototype._onMouseUp = function (e) {
              if (0 === e.button) {
                var n = this._startPos,
                  i = r.mousePos(this._el, e)
                this._finish(),
                  r.suppressClick(),
                  n.x === i.x && n.y === i.y
                    ? this._fireEvent('boxzoomcancel', e)
                    : this._map
                        .fitScreenCoordinates(n, i, this._map.getBearing(), {
                          linear: !0,
                        })
                        .fire(new t.Event('boxzoomend', { originalEvent: e }))
              }
            }),
            (In.prototype._onKeyDown = function (t) {
              27 === t.keyCode &&
                (this._finish(), this._fireEvent('boxzoomcancel', t))
            }),
            (In.prototype._finish = function () {
              ;(this._active = !1),
                t.window.document.removeEventListener(
                  'mousemove',
                  this._onMouseMove,
                  !1
                ),
                t.window.document.removeEventListener(
                  'keydown',
                  this._onKeyDown,
                  !1
                ),
                t.window.document.removeEventListener(
                  'mouseup',
                  this._onMouseUp,
                  !1
                ),
                this._container.classList.remove('mapboxgl-crosshair'),
                this._box && (r.remove(this._box), (this._box = null)),
                r.enableDrag(),
                delete this._startPos,
                delete this._lastPos
            }),
            (In.prototype._fireEvent = function (e, r) {
              return this._map.fire(new t.Event(e, { originalEvent: r }))
            })
          var Cn = t.bezier(0, 0, 0.25, 1),
            An = function (e, r) {
              ;(this._map = e),
                (this._el = r.element || e.getCanvasContainer()),
                (this._state = 'disabled'),
                (this._button = r.button || 'right'),
                (this._bearingSnap = r.bearingSnap || 0),
                (this._pitchWithRotate = !1 !== r.pitchWithRotate),
                (this._clickTolerance = r.clickTolerance || 1),
                t.bindAll(
                  [
                    'onMouseDown',
                    '_onMouseMove',
                    '_onMouseUp',
                    '_onBlur',
                    '_onDragFrame',
                  ],
                  this
                )
            }
          ;(An.prototype.isEnabled = function () {
            return 'disabled' !== this._state
          }),
            (An.prototype.isActive = function () {
              return 'active' === this._state
            }),
            (An.prototype.enable = function () {
              this.isEnabled() || (this._state = 'enabled')
            }),
            (An.prototype.disable = function () {
              if (this.isEnabled())
                switch (this._state) {
                  case 'active':
                    ;(this._state = 'disabled'),
                      this._unbind(),
                      this._deactivate(),
                      this._fireEvent('rotateend'),
                      this._pitchWithRotate && this._fireEvent('pitchend'),
                      this._fireEvent('moveend')
                    break
                  case 'pending':
                    ;(this._state = 'disabled'), this._unbind()
                    break
                  default:
                    this._state = 'disabled'
                }
            }),
            (An.prototype.onMouseDown = function (e) {
              if ('enabled' === this._state) {
                var n = 'touchstart' === e.type
                if (n) this._startTime = Date.now()
                else if ('right' === this._button) {
                  if (
                    ((this._eventButton = r.mouseButton(e)),
                    e.altKey || e.metaKey)
                  )
                    return
                  if (this._eventButton !== (e.ctrlKey ? 0 : 2)) return
                } else {
                  if (e.ctrlKey || 0 !== r.mouseButton(e)) return
                  this._eventButton = 0
                }
                r.disableDrag(),
                  n
                    ? (t.window.document.addEventListener(
                        'touchmove',
                        this._onMouseMove,
                        { capture: !0 }
                      ),
                      t.window.document.addEventListener(
                        'touchend',
                        this._onMouseUp
                      ))
                    : (t.window.document.addEventListener(
                        'mousemove',
                        this._onMouseMove,
                        { capture: !0 }
                      ),
                      t.window.document.addEventListener(
                        'mouseup',
                        this._onMouseUp
                      )),
                  t.window.addEventListener('blur', this._onBlur),
                  (this._state = 'pending'),
                  (this._inertia = [[t.browser.now(), this._map.getBearing()]]),
                  (this._startPos = this._prevPos = this._lastPos = r.mousePos(
                    this._el,
                    e
                  )),
                  (this._center = this._map.transform.centerPoint),
                  e.preventDefault()
              }
            }),
            (An.prototype._onMouseMove = function (t) {
              var e = r.mousePos(this._el, t)
              this._lastPos.equals(e) ||
                ('pending' === this._state &&
                  e.dist(this._startPos) < this._clickTolerance) ||
                ((this._lastMoveEvent = t),
                (this._lastPos = e),
                'pending' === this._state &&
                  ((this._state = 'active'),
                  this._fireEvent('rotatestart', t),
                  this._fireEvent('movestart', t),
                  this._pitchWithRotate && this._fireEvent('pitchstart', t)),
                this._frameId ||
                  (this._frameId = this._map._requestRenderFrame(
                    this._onDragFrame
                  )))
            }),
            (An.prototype._onDragFrame = function () {
              this._frameId = null
              var e = this._lastMoveEvent
              if (e) {
                var r = this._map.transform,
                  n = this._prevPos,
                  i = this._lastPos,
                  o = r.bearing - 0.8 * (n.x - i.x),
                  a = r.pitch - -0.5 * (n.y - i.y),
                  s = this._inertia,
                  l = s[s.length - 1]
                this._drainInertiaBuffer(),
                  s.push([
                    t.browser.now(),
                    this._map._normalizeBearing(o, l[1]),
                  ])
                var u = r.bearing
                if (((r.bearing = o), this._pitchWithRotate)) {
                  var c = r.pitch
                  ;(r.pitch = a), r.pitch !== c && this._fireEvent('pitch', e)
                }
                r.bearing !== u && this._fireEvent('rotate', e),
                  this._fireEvent('move', e),
                  delete this._lastMoveEvent,
                  (this._prevPos = this._lastPos)
              }
            }),
            (An.prototype._onMouseUp = function (t) {
              var e = 'touchend' === t.type
              if (
                (e &&
                  this._startPos === this._lastPos &&
                  Date.now() - this._startTime < 300 &&
                  this._el.click(),
                e || r.mouseButton(t) === this._eventButton)
              )
                switch (this._state) {
                  case 'active':
                    ;(this._state = 'enabled'),
                      r.suppressClick(),
                      this._unbind(),
                      this._deactivate(),
                      this._inertialRotate(t)
                    break
                  case 'pending':
                    ;(this._state = 'enabled'), this._unbind()
                }
            }),
            (An.prototype._onBlur = function (t) {
              switch (this._state) {
                case 'active':
                  ;(this._state = 'enabled'),
                    this._unbind(),
                    this._deactivate(),
                    this._fireEvent('rotateend', t),
                    this._pitchWithRotate && this._fireEvent('pitchend', t),
                    this._fireEvent('moveend', t)
                  break
                case 'pending':
                  ;(this._state = 'enabled'), this._unbind()
              }
            }),
            (An.prototype._unbind = function () {
              t.window.document.removeEventListener(
                'mousemove',
                this._onMouseMove,
                { capture: !0 }
              ),
                t.window.document.removeEventListener(
                  'mouseup',
                  this._onMouseUp
                ),
                t.window.document.removeEventListener(
                  'touchmove',
                  this._onMouseMove,
                  { capture: !0 }
                ),
                t.window.document.removeEventListener(
                  'touchend',
                  this._onMouseUp
                ),
                t.window.removeEventListener('blur', this._onBlur),
                r.enableDrag()
            }),
            (An.prototype._deactivate = function () {
              this._frameId &&
                (this._map._cancelRenderFrame(this._frameId),
                (this._frameId = null)),
                delete this._lastMoveEvent,
                delete this._startPos,
                delete this._prevPos,
                delete this._lastPos
            }),
            (An.prototype._inertialRotate = function (t) {
              var e = this
              this._fireEvent('rotateend', t), this._drainInertiaBuffer()
              var r = this._map,
                n = r.getBearing(),
                i = this._inertia,
                o = function () {
                  Math.abs(n) < e._bearingSnap
                    ? r.resetNorth({ noMoveStart: !0 }, { originalEvent: t })
                    : e._fireEvent('moveend', t),
                    e._pitchWithRotate && e._fireEvent('pitchend', t)
                }
              if (i.length < 2) o()
              else {
                var a = i[0],
                  s = i[i.length - 1],
                  l = r._normalizeBearing(n, i[i.length - 2][1]),
                  u = s[1] - a[1],
                  c = u < 0 ? -1 : 1,
                  p = (s[0] - a[0]) / 1e3
                if (0 !== u && 0 !== p) {
                  var h = Math.abs(u * (0.25 / p))
                  h > 180 && (h = 180)
                  var f = h / 180
                  ;(l += c * h * (f / 2)),
                    Math.abs(r._normalizeBearing(l, 0)) < this._bearingSnap &&
                      (l = r._normalizeBearing(0, l)),
                    r.rotateTo(
                      l,
                      { duration: 1e3 * f, easing: Cn, noMoveStart: !0 },
                      { originalEvent: t }
                    )
                } else o()
              }
            }),
            (An.prototype._fireEvent = function (e, r) {
              return this._map.fire(
                new t.Event(e, r ? { originalEvent: r } : {})
              )
            }),
            (An.prototype._drainInertiaBuffer = function () {
              for (
                var e = this._inertia, r = t.browser.now();
                e.length > 0 && r - e[0][0] > 160;

              )
                e.shift()
            })
          var kn = {
              linearity: 0.3,
              easing: t.bezier(0, 0, 0.3, 1),
              maxSpeed: 1400,
              deceleration: 2500,
            },
            Pn = function (e, r) {
              ;(this._map = e),
                (this._el = e.getCanvasContainer()),
                (this._state = 'disabled'),
                (this._clickTolerance = r.clickTolerance || 1),
                (this._inertiaOptions = kn),
                t.bindAll(
                  [
                    '_onMove',
                    '_onMouseUp',
                    '_onTouchEnd',
                    '_onBlur',
                    '_onDragFrame',
                  ],
                  this
                )
            }
          ;(Pn.prototype.isEnabled = function () {
            return 'disabled' !== this._state
          }),
            (Pn.prototype.isActive = function () {
              return 'active' === this._state
            }),
            (Pn.prototype.enable = function (e) {
              this.isEnabled() ||
                (this._el.classList.add('mapboxgl-touch-drag-pan'),
                (this._state = 'enabled'),
                (this._inertiaOptions = t.extend(kn, e)))
            }),
            (Pn.prototype.disable = function () {
              if (this.isEnabled())
                switch (
                  (this._el.classList.remove('mapboxgl-touch-drag-pan'),
                  this._state)
                ) {
                  case 'active':
                    ;(this._state = 'disabled'),
                      this._unbind(),
                      this._deactivate(),
                      this._fireEvent('dragend'),
                      this._fireEvent('moveend')
                    break
                  case 'pending':
                    ;(this._state = 'disabled'), this._unbind()
                    break
                  default:
                    this._state = 'disabled'
                }
            }),
            (Pn.prototype.onMouseDown = function (e) {
              'enabled' === this._state &&
                (e.ctrlKey ||
                  0 !== r.mouseButton(e) ||
                  (r.addEventListener(
                    t.window.document,
                    'mousemove',
                    this._onMove,
                    { capture: !0 }
                  ),
                  r.addEventListener(
                    t.window.document,
                    'mouseup',
                    this._onMouseUp
                  ),
                  this._start(e)))
            }),
            (Pn.prototype.onTouchStart = function (e) {
              this.isEnabled() &&
                ((e.touches &&
                  e.touches.length > 1 &&
                  ('pending' === this._state || 'active' === this._state)) ||
                  (r.addEventListener(
                    t.window.document,
                    'touchmove',
                    this._onMove,
                    { capture: !0, passive: !1 }
                  ),
                  r.addEventListener(
                    t.window.document,
                    'touchend',
                    this._onTouchEnd
                  ),
                  this._start(e)))
            }),
            (Pn.prototype._start = function (e) {
              t.window.addEventListener('blur', this._onBlur),
                (this._state = 'pending'),
                (this._startPos = this._mouseDownPos = this._prevPos = this._lastPos = r.mousePos(
                  this._el,
                  e
                )),
                (this._startTouch = this._lastTouch =
                  t.window.TouchEvent && e instanceof t.window.TouchEvent
                    ? r.touchPos(this._el, e)
                    : null),
                (this._inertia = [[t.browser.now(), this._startPos]])
            }),
            (Pn.prototype._touchesMatch = function (t, e) {
              return (
                !(!t || !e || t.length !== e.length) &&
                t.every(function (t, r) {
                  return e[r] === t
                })
              )
            }),
            (Pn.prototype._onMove = function (e) {
              e.preventDefault()
              var n =
                  t.window.TouchEvent && e instanceof t.window.TouchEvent
                    ? r.touchPos(this._el, e)
                    : null,
                i = r.mousePos(this._el, e)
              ;(n
                ? this._touchesMatch(this._lastTouch, n)
                : this._lastPos.equals(i)) ||
                ('pending' === this._state &&
                  i.dist(this._mouseDownPos) < this._clickTolerance) ||
                ((this._lastMoveEvent = e),
                (this._lastPos = i),
                (this._lastTouch = n),
                this._drainInertiaBuffer(),
                this._inertia.push([t.browser.now(), this._lastPos]),
                'pending' === this._state &&
                  ((this._state = 'active'), (this._shouldStart = !0)),
                this._frameId ||
                  (this._frameId = this._map._requestRenderFrame(
                    this._onDragFrame
                  )))
            }),
            (Pn.prototype._onDragFrame = function () {
              this._frameId = null
              var t = this._lastMoveEvent
              if (t)
                if (this._map.touchZoomRotate.isActive()) this._abort(t)
                else if (
                  (this._shouldStart &&
                    (this._fireEvent('dragstart', t),
                    this._fireEvent('movestart', t),
                    (this._shouldStart = !1)),
                  this.isActive())
                ) {
                  var e = this._map.transform
                  e.setLocationAtPoint(
                    e.pointLocation(this._prevPos),
                    this._lastPos
                  ),
                    this._fireEvent('drag', t),
                    this._fireEvent('move', t),
                    (this._prevPos = this._lastPos),
                    delete this._lastMoveEvent
                }
            }),
            (Pn.prototype._onMouseUp = function (t) {
              if (0 === r.mouseButton(t))
                switch (this._state) {
                  case 'active':
                    ;(this._state = 'enabled'),
                      r.suppressClick(),
                      this._unbind(),
                      this._deactivate(),
                      this._inertialPan(t)
                    break
                  case 'pending':
                    ;(this._state = 'enabled'), this._unbind()
                }
            }),
            (Pn.prototype._onTouchEnd = function (t) {
              if (t.touches && 0 !== t.touches.length)
                switch (this._state) {
                  case 'pending':
                  case 'active':
                    break
                  case 'enabled':
                    this.onTouchStart(t)
                }
              else
                switch (this._state) {
                  case 'active':
                    ;(this._state = 'enabled'),
                      this._unbind(),
                      this._deactivate(),
                      this._inertialPan(t)
                    break
                  case 'pending':
                    ;(this._state = 'enabled'), this._unbind()
                    break
                  case 'enabled':
                    this._unbind()
                }
            }),
            (Pn.prototype._abort = function (e) {
              switch (this._state) {
                case 'active':
                  ;(this._state = 'enabled'),
                    this._shouldStart ||
                      (this._fireEvent('dragend', e),
                      this._fireEvent('moveend', e)),
                    this._unbind(),
                    this._deactivate(),
                    t.window.TouchEvent &&
                      e instanceof t.window.TouchEvent &&
                      e.touches.length > 1 &&
                      r.addEventListener(
                        t.window.document,
                        'touchend',
                        this._onTouchEnd
                      )
                  break
                case 'pending':
                  ;(this._state = 'enabled'), this._unbind()
                  break
                case 'enabled':
                  this._unbind()
              }
            }),
            (Pn.prototype._onBlur = function (t) {
              this._abort(t)
            }),
            (Pn.prototype._unbind = function () {
              r.removeEventListener(
                t.window.document,
                'touchmove',
                this._onMove,
                { capture: !0, passive: !1 }
              ),
                r.removeEventListener(
                  t.window.document,
                  'touchend',
                  this._onTouchEnd
                ),
                r.removeEventListener(
                  t.window.document,
                  'mousemove',
                  this._onMove,
                  { capture: !0 }
                ),
                r.removeEventListener(
                  t.window.document,
                  'mouseup',
                  this._onMouseUp
                ),
                r.removeEventListener(t.window, 'blur', this._onBlur)
            }),
            (Pn.prototype._deactivate = function () {
              this._frameId &&
                (this._map._cancelRenderFrame(this._frameId),
                (this._frameId = null)),
                delete this._lastMoveEvent,
                delete this._startPos,
                delete this._prevPos,
                delete this._mouseDownPos,
                delete this._lastPos,
                delete this._startTouch,
                delete this._lastTouch,
                delete this._shouldStart
            }),
            (Pn.prototype._inertialPan = function (t) {
              this._fireEvent('dragend', t), this._drainInertiaBuffer()
              var e = this._inertia
              if (e.length < 2) this._fireEvent('moveend', t)
              else {
                var r = e[e.length - 1],
                  n = e[0],
                  i = r[1].sub(n[1]),
                  o = (r[0] - n[0]) / 1e3
                if (0 === o || r[1].equals(n[1])) this._fireEvent('moveend', t)
                else {
                  var a = this._inertiaOptions,
                    s = a.linearity,
                    l = a.easing,
                    u = a.maxSpeed,
                    c = a.deceleration,
                    p = i.mult(s / o),
                    h = p.mag()
                  h > u && ((h = u), p._unit()._mult(h))
                  var f = h / (c * s),
                    d = p.mult(-f / 2)
                  this._map.panBy(
                    d,
                    { duration: 1e3 * f, easing: l, noMoveStart: !0 },
                    { originalEvent: t }
                  )
                }
              }
            }),
            (Pn.prototype._fireEvent = function (e, r) {
              return this._map.fire(
                new t.Event(e, r ? { originalEvent: r } : {})
              )
            }),
            (Pn.prototype._drainInertiaBuffer = function () {
              for (
                var e = this._inertia, r = t.browser.now();
                e.length > 0 && r - e[0][0] > 160;

              )
                e.shift()
            })
          var Mn = function (e) {
            ;(this._map = e),
              (this._el = e.getCanvasContainer()),
              t.bindAll(['_onKeyDown'], this)
          }
          function Ln(t) {
            return t * (2 - t)
          }
          ;(Mn.prototype.isEnabled = function () {
            return !!this._enabled
          }),
            (Mn.prototype.enable = function () {
              this.isEnabled() ||
                (this._el.addEventListener('keydown', this._onKeyDown, !1),
                (this._enabled = !0))
            }),
            (Mn.prototype.disable = function () {
              this.isEnabled() &&
                (this._el.removeEventListener('keydown', this._onKeyDown),
                (this._enabled = !1))
            }),
            (Mn.prototype._onKeyDown = function (t) {
              if (!(t.altKey || t.ctrlKey || t.metaKey)) {
                var e = 0,
                  r = 0,
                  n = 0,
                  i = 0,
                  o = 0
                switch (t.keyCode) {
                  case 61:
                  case 107:
                  case 171:
                  case 187:
                    e = 1
                    break
                  case 189:
                  case 109:
                  case 173:
                    e = -1
                    break
                  case 37:
                    t.shiftKey ? (r = -1) : (t.preventDefault(), (i = -1))
                    break
                  case 39:
                    t.shiftKey ? (r = 1) : (t.preventDefault(), (i = 1))
                    break
                  case 38:
                    t.shiftKey ? (n = 1) : (t.preventDefault(), (o = -1))
                    break
                  case 40:
                    t.shiftKey ? (n = -1) : ((o = 1), t.preventDefault())
                    break
                  default:
                    return
                }
                var a = this._map,
                  s = a.getZoom(),
                  l = {
                    duration: 300,
                    delayEndEvents: 500,
                    easing: Ln,
                    zoom: e ? Math.round(s) + e * (t.shiftKey ? 2 : 1) : s,
                    bearing: a.getBearing() + 15 * r,
                    pitch: a.getPitch() + 10 * n,
                    offset: [100 * -i, 100 * -o],
                    center: a.getCenter(),
                  }
                a.easeTo(l, { originalEvent: t })
              }
            })
          var zn = function (e) {
            ;(this._map = e), t.bindAll(['_onDblClick', '_onZoomEnd'], this)
          }
          ;(zn.prototype.isEnabled = function () {
            return !!this._enabled
          }),
            (zn.prototype.isActive = function () {
              return !!this._active
            }),
            (zn.prototype.enable = function () {
              this.isEnabled() || (this._enabled = !0)
            }),
            (zn.prototype.disable = function () {
              this.isEnabled() && (this._enabled = !1)
            }),
            (zn.prototype.onTouchStart = function (t) {
              var e = this
              if (this.isEnabled() && !(t.points.length > 1))
                if (this._tapped) {
                  var r = this._tappedPoint
                  if (r && r.dist(t.points[0]) <= 30) {
                    t.originalEvent.preventDefault()
                    var n = function () {
                        e._tapped && e._zoom(t),
                          e._map.off('touchcancel', i),
                          e._resetTapped()
                      },
                      i = function () {
                        e._map.off('touchend', n), e._resetTapped()
                      }
                    this._map.once('touchend', n),
                      this._map.once('touchcancel', i)
                  } else this._resetTapped()
                } else
                  (this._tappedPoint = t.points[0]),
                    (this._tapped = setTimeout(function () {
                      ;(e._tapped = null), (e._tappedPoint = null)
                    }, 300))
            }),
            (zn.prototype._resetTapped = function () {
              clearTimeout(this._tapped),
                (this._tapped = null),
                (this._tappedPoint = null)
            }),
            (zn.prototype.onDblClick = function (t) {
              this.isEnabled() &&
                (t.originalEvent.preventDefault(), this._zoom(t))
            }),
            (zn.prototype._zoom = function (t) {
              ;(this._active = !0),
                this._map.on('zoomend', this._onZoomEnd),
                this._map.zoomTo(
                  this._map.getZoom() + (t.originalEvent.shiftKey ? -1 : 1),
                  { around: t.lngLat },
                  t
                )
            }),
            (zn.prototype._onZoomEnd = function () {
              ;(this._active = !1), this._map.off('zoomend', this._onZoomEnd)
            })
          var On = t.bezier(0, 0, 0.15, 1),
            Dn = function (e) {
              ;(this._map = e),
                (this._el = e.getCanvasContainer()),
                t.bindAll(['_onMove', '_onEnd', '_onTouchFrame'], this)
            }
          ;(Dn.prototype.isEnabled = function () {
            return !!this._enabled
          }),
            (Dn.prototype.enable = function (t) {
              this.isEnabled() ||
                (this._el.classList.add('mapboxgl-touch-zoom-rotate'),
                (this._enabled = !0),
                (this._aroundCenter = !!t && 'center' === t.around))
            }),
            (Dn.prototype.disable = function () {
              this.isEnabled() &&
                (this._el.classList.remove('mapboxgl-touch-zoom-rotate'),
                (this._enabled = !1))
            }),
            (Dn.prototype.disableRotation = function () {
              this._rotationDisabled = !0
            }),
            (Dn.prototype.enableRotation = function () {
              this._rotationDisabled = !1
            }),
            (Dn.prototype.isActive = function () {
              return this.isEnabled() && !!this._gestureIntent
            }),
            (Dn.prototype.onStart = function (e) {
              if (this.isEnabled() && 2 === e.touches.length) {
                var n = r.mousePos(this._el, e.touches[0]),
                  i = r.mousePos(this._el, e.touches[1]),
                  o = n.add(i).div(2)
                ;(this._startVec = n.sub(i)),
                  (this._startAround = this._map.transform.pointLocation(o)),
                  (this._gestureIntent = void 0),
                  (this._inertia = []),
                  r.addEventListener(
                    t.window.document,
                    'touchmove',
                    this._onMove,
                    { passive: !1 }
                  ),
                  r.addEventListener(t.window.document, 'touchend', this._onEnd)
              }
            }),
            (Dn.prototype._getTouchEventData = function (t) {
              var e = r.mousePos(this._el, t.touches[0]),
                n = r.mousePos(this._el, t.touches[1]),
                i = e.sub(n)
              return {
                vec: i,
                center: e.add(n).div(2),
                scale: i.mag() / this._startVec.mag(),
                bearing: this._rotationDisabled
                  ? 0
                  : (180 * i.angleWith(this._startVec)) / Math.PI,
              }
            }),
            (Dn.prototype._onMove = function (e) {
              if (2 === e.touches.length) {
                var r = this._getTouchEventData(e),
                  n = r.vec,
                  i = r.scale,
                  o = r.bearing
                if (!this._gestureIntent) {
                  var a =
                    (this._rotationDisabled && 1 !== i) ||
                    Math.abs(1 - i) > 0.15
                  Math.abs(o) > 10
                    ? (this._gestureIntent = 'rotate')
                    : a && (this._gestureIntent = 'zoom'),
                    this._gestureIntent &&
                      (this._map.fire(
                        new t.Event(this._gestureIntent + 'start', {
                          originalEvent: e,
                        })
                      ),
                      this._map.fire(
                        new t.Event('movestart', { originalEvent: e })
                      ),
                      (this._startVec = n))
                }
                ;(this._lastTouchEvent = e),
                  this._frameId ||
                    (this._frameId = this._map._requestRenderFrame(
                      this._onTouchFrame
                    )),
                  e.preventDefault()
              }
            }),
            (Dn.prototype._onTouchFrame = function () {
              this._frameId = null
              var e = this._gestureIntent
              if (e) {
                var r = this._map.transform
                this._startScale ||
                  ((this._startScale = r.scale),
                  (this._startBearing = r.bearing))
                var n = this._getTouchEventData(this._lastTouchEvent),
                  i = n.center,
                  o = n.bearing,
                  a = n.scale,
                  s = r.pointLocation(i),
                  l = r.locationPoint(s)
                'rotate' === e && (r.bearing = this._startBearing + o),
                  (r.zoom = r.scaleZoom(this._startScale * a)),
                  r.setLocationAtPoint(this._startAround, l),
                  this._map.fire(
                    new t.Event(e, { originalEvent: this._lastTouchEvent })
                  ),
                  this._map.fire(
                    new t.Event('move', { originalEvent: this._lastTouchEvent })
                  ),
                  this._drainInertiaBuffer(),
                  this._inertia.push([t.browser.now(), a, i])
              }
            }),
            (Dn.prototype._onEnd = function (e) {
              r.removeEventListener(
                t.window.document,
                'touchmove',
                this._onMove,
                { passive: !1 }
              ),
                r.removeEventListener(
                  t.window.document,
                  'touchend',
                  this._onEnd
                )
              var n = this._gestureIntent,
                i = this._startScale
              if (
                (this._frameId &&
                  (this._map._cancelRenderFrame(this._frameId),
                  (this._frameId = null)),
                delete this._gestureIntent,
                delete this._startScale,
                delete this._startBearing,
                delete this._lastTouchEvent,
                n)
              ) {
                this._map.fire(new t.Event(n + 'end', { originalEvent: e })),
                  this._drainInertiaBuffer()
                var o = this._inertia,
                  a = this._map
                if (o.length < 2) a.snapToNorth({}, { originalEvent: e })
                else {
                  var s = o[o.length - 1],
                    l = o[0],
                    u = a.transform.scaleZoom(i * s[1]),
                    c = a.transform.scaleZoom(i * l[1]),
                    p = (s[0] - l[0]) / 1e3,
                    h = s[2]
                  if (0 !== p && u !== c) {
                    var f = (0.15 * (u - c)) / p
                    Math.abs(f) > 2.5 && (f = f > 0 ? 2.5 : -2.5)
                    var d = 1e3 * Math.abs(f / (12 * 0.15))
                    a.easeTo(
                      {
                        zoom: u + (f * d) / 2e3,
                        duration: d,
                        easing: On,
                        around: this._aroundCenter
                          ? a.getCenter()
                          : a.unproject(h),
                        noMoveStart: !0,
                      },
                      { originalEvent: e }
                    )
                  } else a.snapToNorth({}, { originalEvent: e })
                }
              }
            }),
            (Dn.prototype._drainInertiaBuffer = function () {
              for (
                var e = this._inertia, r = t.browser.now();
                e.length > 2 && r - e[0][0] > 160;

              )
                e.shift()
            })
          var Rn = {
              scrollZoom: Tn,
              boxZoom: In,
              dragRotate: An,
              dragPan: Pn,
              keyboard: Mn,
              doubleClickZoom: zn,
              touchZoomRotate: Dn,
            },
            Fn = (function (e) {
              function r(r, n) {
                e.call(this),
                  (this._moving = !1),
                  (this._zooming = !1),
                  (this.transform = r),
                  (this._bearingSnap = n.bearingSnap),
                  t.bindAll(['_renderFrameCallback'], this)
              }
              return (
                e && (r.__proto__ = e),
                ((r.prototype = Object.create(
                  e && e.prototype
                )).constructor = r),
                (r.prototype.getCenter = function () {
                  return new t.LngLat(
                    this.transform.center.lng,
                    this.transform.center.lat
                  )
                }),
                (r.prototype.setCenter = function (t, e) {
                  return this.jumpTo({ center: t }, e)
                }),
                (r.prototype.panBy = function (e, r, n) {
                  return (
                    (e = t.Point.convert(e).mult(-1)),
                    this.panTo(
                      this.transform.center,
                      t.extend({ offset: e }, r),
                      n
                    )
                  )
                }),
                (r.prototype.panTo = function (e, r, n) {
                  return this.easeTo(t.extend({ center: e }, r), n)
                }),
                (r.prototype.getZoom = function () {
                  return this.transform.zoom
                }),
                (r.prototype.setZoom = function (t, e) {
                  return this.jumpTo({ zoom: t }, e), this
                }),
                (r.prototype.zoomTo = function (e, r, n) {
                  return this.easeTo(t.extend({ zoom: e }, r), n)
                }),
                (r.prototype.zoomIn = function (t, e) {
                  return this.zoomTo(this.getZoom() + 1, t, e), this
                }),
                (r.prototype.zoomOut = function (t, e) {
                  return this.zoomTo(this.getZoom() - 1, t, e), this
                }),
                (r.prototype.getBearing = function () {
                  return this.transform.bearing
                }),
                (r.prototype.setBearing = function (t, e) {
                  return this.jumpTo({ bearing: t }, e), this
                }),
                (r.prototype.getPadding = function () {
                  return this.transform.padding
                }),
                (r.prototype.setPadding = function (t, e) {
                  return this.jumpTo({ padding: t }, e), this
                }),
                (r.prototype.rotateTo = function (e, r, n) {
                  return this.easeTo(t.extend({ bearing: e }, r), n)
                }),
                (r.prototype.resetNorth = function (e, r) {
                  return (
                    this.rotateTo(0, t.extend({ duration: 1e3 }, e), r), this
                  )
                }),
                (r.prototype.resetNorthPitch = function (e, r) {
                  return (
                    this.easeTo(
                      t.extend({ bearing: 0, pitch: 0, duration: 1e3 }, e),
                      r
                    ),
                    this
                  )
                }),
                (r.prototype.snapToNorth = function (t, e) {
                  return Math.abs(this.getBearing()) < this._bearingSnap
                    ? this.resetNorth(t, e)
                    : this
                }),
                (r.prototype.getPitch = function () {
                  return this.transform.pitch
                }),
                (r.prototype.setPitch = function (t, e) {
                  return this.jumpTo({ pitch: t }, e), this
                }),
                (r.prototype.cameraForBounds = function (e, r) {
                  return (
                    (e = t.LngLatBounds.convert(e)),
                    this._cameraForBoxAndBearing(
                      e.getNorthWest(),
                      e.getSouthEast(),
                      0,
                      r
                    )
                  )
                }),
                (r.prototype._cameraForBoxAndBearing = function (e, r, n, i) {
                  var o = { top: 0, bottom: 0, right: 0, left: 0 }
                  if (
                    'number' ==
                    typeof (i = t.extend(
                      {
                        padding: o,
                        offset: [0, 0],
                        maxZoom: this.transform.maxZoom,
                      },
                      i
                    )).padding
                  ) {
                    var a = i.padding
                    i.padding = { top: a, bottom: a, right: a, left: a }
                  }
                  i.padding = t.extend(o, i.padding)
                  var s = this.transform,
                    l = s.padding,
                    u = s.project(t.LngLat.convert(e)),
                    c = s.project(t.LngLat.convert(r)),
                    p = u.rotate((-n * Math.PI) / 180),
                    h = c.rotate((-n * Math.PI) / 180),
                    f = new t.Point(Math.max(p.x, h.x), Math.max(p.y, h.y)),
                    d = new t.Point(Math.min(p.x, h.x), Math.min(p.y, h.y)),
                    m = f.sub(d),
                    y =
                      (s.width -
                        (l.left + l.right + i.padding.left + i.padding.right)) /
                      m.x,
                    v =
                      (s.height -
                        (l.top + l.bottom + i.padding.top + i.padding.bottom)) /
                      m.y
                  if (!(v < 0 || y < 0)) {
                    var g = Math.min(
                        s.scaleZoom(s.scale * Math.min(y, v)),
                        i.maxZoom
                      ),
                      _ = t.Point.convert(i.offset),
                      x = new t.Point(
                        _.x + (i.padding.left - i.padding.right) / 2,
                        _.y + (i.padding.top - i.padding.bottom) / 2
                      ).mult(s.scale / s.zoomScale(g))
                    return {
                      center: s.unproject(u.add(c).div(2).sub(x)),
                      zoom: g,
                      bearing: n,
                    }
                  }
                  t.warnOnce(
                    'Map cannot fit within canvas with the given bounds, padding, and/or offset.'
                  )
                }),
                (r.prototype.fitBounds = function (t, e, r) {
                  return this._fitInternal(this.cameraForBounds(t, e), e, r)
                }),
                (r.prototype.fitScreenCoordinates = function (e, r, n, i, o) {
                  return this._fitInternal(
                    this._cameraForBoxAndBearing(
                      this.transform.pointLocation(t.Point.convert(e)),
                      this.transform.pointLocation(t.Point.convert(r)),
                      n,
                      i
                    ),
                    i,
                    o
                  )
                }),
                (r.prototype._fitInternal = function (e, r, n) {
                  return e
                    ? (delete (r = t.extend(e, r)).padding,
                      r.linear ? this.easeTo(r, n) : this.flyTo(r, n))
                    : this
                }),
                (r.prototype.jumpTo = function (e, r) {
                  this.stop()
                  var n = this.transform,
                    i = !1,
                    o = !1,
                    a = !1
                  return (
                    'zoom' in e &&
                      n.zoom !== +e.zoom &&
                      ((i = !0), (n.zoom = +e.zoom)),
                    void 0 !== e.center &&
                      (n.center = t.LngLat.convert(e.center)),
                    'bearing' in e &&
                      n.bearing !== +e.bearing &&
                      ((o = !0), (n.bearing = +e.bearing)),
                    'pitch' in e &&
                      n.pitch !== +e.pitch &&
                      ((a = !0), (n.pitch = +e.pitch)),
                    null == e.padding ||
                      n.isPaddingEqual(e.padding) ||
                      (n.padding = e.padding),
                    this.fire(new t.Event('movestart', r)).fire(
                      new t.Event('move', r)
                    ),
                    i &&
                      this.fire(new t.Event('zoomstart', r))
                        .fire(new t.Event('zoom', r))
                        .fire(new t.Event('zoomend', r)),
                    o &&
                      this.fire(new t.Event('rotatestart', r))
                        .fire(new t.Event('rotate', r))
                        .fire(new t.Event('rotateend', r)),
                    a &&
                      this.fire(new t.Event('pitchstart', r))
                        .fire(new t.Event('pitch', r))
                        .fire(new t.Event('pitchend', r)),
                    this.fire(new t.Event('moveend', r))
                  )
                }),
                (r.prototype.easeTo = function (e, r) {
                  var n = this
                  this.stop(),
                    (!1 ===
                      (e = t.extend(
                        { offset: [0, 0], duration: 500, easing: t.ease },
                        e
                      )).animate ||
                      (!e.essential && t.browser.prefersReducedMotion)) &&
                      (e.duration = 0)
                  var i = this.transform,
                    o = this.getZoom(),
                    a = this.getBearing(),
                    s = this.getPitch(),
                    l = this.getPadding(),
                    u = 'zoom' in e ? +e.zoom : o,
                    c =
                      'bearing' in e ? this._normalizeBearing(e.bearing, a) : a,
                    p = 'pitch' in e ? +e.pitch : s,
                    h = 'padding' in e ? e.padding : i.padding,
                    f = t.Point.convert(e.offset),
                    d = i.centerPoint.add(f),
                    m = i.pointLocation(d),
                    y = t.LngLat.convert(e.center || m)
                  this._normalizeCenter(y)
                  var v,
                    g,
                    _ = i.project(m),
                    x = i.project(y).sub(_),
                    b = i.zoomScale(u - o)
                  return (
                    e.around &&
                      ((v = t.LngLat.convert(e.around)),
                      (g = i.locationPoint(v))),
                    (this._zooming = u !== o),
                    (this._rotating = a !== c),
                    (this._pitching = p !== s),
                    (this._padding = !i.isPaddingEqual(h)),
                    this._prepareEase(r, e.noMoveStart),
                    clearTimeout(this._easeEndTimeoutID),
                    this._ease(
                      function (e) {
                        if (
                          (n._zooming && (i.zoom = t.number(o, u, e)),
                          n._rotating && (i.bearing = t.number(a, c, e)),
                          n._pitching && (i.pitch = t.number(s, p, e)),
                          n._padding &&
                            (i.interpolatePadding(l, h, e),
                            (d = i.centerPoint.add(f))),
                          v)
                        )
                          i.setLocationAtPoint(v, g)
                        else {
                          var m = i.zoomScale(i.zoom - o),
                            y = u > o ? Math.min(2, b) : Math.max(0.5, b),
                            w = Math.pow(y, 1 - e),
                            E = i.unproject(_.add(x.mult(e * w)).mult(m))
                          i.setLocationAtPoint(
                            i.renderWorldCopies ? E.wrap() : E,
                            d
                          )
                        }
                        n._fireMoveEvents(r)
                      },
                      function () {
                        e.delayEndEvents
                          ? (n._easeEndTimeoutID = setTimeout(function () {
                              return n._afterEase(r)
                            }, e.delayEndEvents))
                          : n._afterEase(r)
                      },
                      e
                    ),
                    this
                  )
                }),
                (r.prototype._prepareEase = function (e, r) {
                  ;(this._moving = !0),
                    r || this.fire(new t.Event('movestart', e)),
                    this._zooming && this.fire(new t.Event('zoomstart', e)),
                    this._rotating && this.fire(new t.Event('rotatestart', e)),
                    this._pitching && this.fire(new t.Event('pitchstart', e))
                }),
                (r.prototype._fireMoveEvents = function (e) {
                  this.fire(new t.Event('move', e)),
                    this._zooming && this.fire(new t.Event('zoom', e)),
                    this._rotating && this.fire(new t.Event('rotate', e)),
                    this._pitching && this.fire(new t.Event('pitch', e))
                }),
                (r.prototype._afterEase = function (e) {
                  var r = this._zooming,
                    n = this._rotating,
                    i = this._pitching
                  ;(this._moving = !1),
                    (this._zooming = !1),
                    (this._rotating = !1),
                    (this._pitching = !1),
                    (this._padding = !1),
                    r && this.fire(new t.Event('zoomend', e)),
                    n && this.fire(new t.Event('rotateend', e)),
                    i && this.fire(new t.Event('pitchend', e)),
                    this.fire(new t.Event('moveend', e))
                }),
                (r.prototype.flyTo = function (e, r) {
                  var n = this
                  if (!e.essential && t.browser.prefersReducedMotion) {
                    var i = t.pick(e, [
                      'center',
                      'zoom',
                      'bearing',
                      'pitch',
                      'around',
                    ])
                    return this.jumpTo(i, r)
                  }
                  this.stop(),
                    (e = t.extend(
                      {
                        offset: [0, 0],
                        speed: 1.2,
                        curve: 1.42,
                        easing: t.ease,
                      },
                      e
                    ))
                  var o = this.transform,
                    a = this.getZoom(),
                    s = this.getBearing(),
                    l = this.getPitch(),
                    u = this.getPadding(),
                    c =
                      'zoom' in e ? t.clamp(+e.zoom, o.minZoom, o.maxZoom) : a,
                    p =
                      'bearing' in e ? this._normalizeBearing(e.bearing, s) : s,
                    h = 'pitch' in e ? +e.pitch : l,
                    f = 'padding' in e ? e.padding : o.padding,
                    d = o.zoomScale(c - a),
                    m = t.Point.convert(e.offset),
                    y = o.centerPoint.add(m),
                    v = o.pointLocation(y),
                    g = t.LngLat.convert(e.center || v)
                  this._normalizeCenter(g)
                  var _ = o.project(v),
                    x = o.project(g).sub(_),
                    b = e.curve,
                    w = Math.max(o.width, o.height),
                    E = w / d,
                    S = x.mag()
                  if ('minZoom' in e) {
                    var T = t.clamp(
                        Math.min(e.minZoom, a, c),
                        o.minZoom,
                        o.maxZoom
                      ),
                      I = w / o.zoomScale(T - a)
                    b = Math.sqrt((I / S) * 2)
                  }
                  var C = b * b
                  function A(t) {
                    var e =
                      (E * E - w * w + (t ? -1 : 1) * C * C * S * S) /
                      (2 * (t ? E : w) * C * S)
                    return Math.log(Math.sqrt(e * e + 1) - e)
                  }
                  function k(t) {
                    return (Math.exp(t) - Math.exp(-t)) / 2
                  }
                  function P(t) {
                    return (Math.exp(t) + Math.exp(-t)) / 2
                  }
                  var M = A(0),
                    L = function (t) {
                      return P(M) / P(M + b * t)
                    },
                    z = function (t) {
                      return (
                        (w *
                          ((P(M) * (k((e = M + b * t)) / P(e)) - k(M)) / C)) /
                        S
                      )
                      var e
                    },
                    O = (A(1) - M) / b
                  if (Math.abs(S) < 1e-6 || !isFinite(O)) {
                    if (Math.abs(w - E) < 1e-6) return this.easeTo(e, r)
                    var D = E < w ? -1 : 1
                    ;(O = Math.abs(Math.log(E / w)) / b),
                      (z = function () {
                        return 0
                      }),
                      (L = function (t) {
                        return Math.exp(D * b * t)
                      })
                  }
                  return (
                    (e.duration =
                      'duration' in e
                        ? +e.duration
                        : (1e3 * O) /
                          ('screenSpeed' in e ? +e.screenSpeed / b : +e.speed)),
                    e.maxDuration &&
                      e.duration > e.maxDuration &&
                      (e.duration = 0),
                    (this._zooming = !0),
                    (this._rotating = s !== p),
                    (this._pitching = h !== l),
                    (this._padding = !o.isPaddingEqual(f)),
                    this._prepareEase(r, !1),
                    this._ease(
                      function (e) {
                        var i = e * O,
                          d = 1 / L(i)
                        ;(o.zoom = 1 === e ? c : a + o.scaleZoom(d)),
                          n._rotating && (o.bearing = t.number(s, p, e)),
                          n._pitching && (o.pitch = t.number(l, h, e)),
                          n._padding &&
                            (o.interpolatePadding(u, f, e),
                            (y = o.centerPoint.add(m)))
                        var v =
                          1 === e ? g : o.unproject(_.add(x.mult(z(i))).mult(d))
                        o.setLocationAtPoint(
                          o.renderWorldCopies ? v.wrap() : v,
                          y
                        ),
                          n._fireMoveEvents(r)
                      },
                      function () {
                        return n._afterEase(r)
                      },
                      e
                    ),
                    this
                  )
                }),
                (r.prototype.isEasing = function () {
                  return !!this._easeFrameId
                }),
                (r.prototype.stop = function () {
                  if (
                    (this._easeFrameId &&
                      (this._cancelRenderFrame(this._easeFrameId),
                      delete this._easeFrameId,
                      delete this._onEaseFrame),
                    this._onEaseEnd)
                  ) {
                    var t = this._onEaseEnd
                    delete this._onEaseEnd, t.call(this)
                  }
                  return this
                }),
                (r.prototype._ease = function (e, r, n) {
                  !1 === n.animate || 0 === n.duration
                    ? (e(1), r())
                    : ((this._easeStart = t.browser.now()),
                      (this._easeOptions = n),
                      (this._onEaseFrame = e),
                      (this._onEaseEnd = r),
                      (this._easeFrameId = this._requestRenderFrame(
                        this._renderFrameCallback
                      )))
                }),
                (r.prototype._renderFrameCallback = function () {
                  var e = Math.min(
                    (t.browser.now() - this._easeStart) /
                      this._easeOptions.duration,
                    1
                  )
                  this._onEaseFrame(this._easeOptions.easing(e)),
                    e < 1
                      ? (this._easeFrameId = this._requestRenderFrame(
                          this._renderFrameCallback
                        ))
                      : this.stop()
                }),
                (r.prototype._normalizeBearing = function (e, r) {
                  e = t.wrap(e, -180, 180)
                  var n = Math.abs(e - r)
                  return (
                    Math.abs(e - 360 - r) < n && (e -= 360),
                    Math.abs(e + 360 - r) < n && (e += 360),
                    e
                  )
                }),
                (r.prototype._normalizeCenter = function (t) {
                  var e = this.transform
                  if (e.renderWorldCopies && !e.lngRange) {
                    var r = t.lng - e.center.lng
                    t.lng += r > 180 ? -360 : r < -180 ? 360 : 0
                  }
                }),
                r
              )
            })(t.Evented),
            Bn = function (e) {
              void 0 === e && (e = {}),
                (this.options = e),
                t.bindAll(
                  ['_updateEditLink', '_updateData', '_updateCompact'],
                  this
                )
            }
          ;(Bn.prototype.getDefaultPosition = function () {
            return 'bottom-right'
          }),
            (Bn.prototype.onAdd = function (t) {
              var e = this.options && this.options.compact
              return (
                (this._map = t),
                (this._container = r.create(
                  'div',
                  'mapboxgl-ctrl mapboxgl-ctrl-attrib'
                )),
                (this._innerContainer = r.create(
                  'div',
                  'mapboxgl-ctrl-attrib-inner',
                  this._container
                )),
                e && this._container.classList.add('mapboxgl-compact'),
                this._updateAttributions(),
                this._updateEditLink(),
                this._map.on('styledata', this._updateData),
                this._map.on('sourcedata', this._updateData),
                this._map.on('moveend', this._updateEditLink),
                void 0 === e &&
                  (this._map.on('resize', this._updateCompact),
                  this._updateCompact()),
                this._container
              )
            }),
            (Bn.prototype.onRemove = function () {
              r.remove(this._container),
                this._map.off('styledata', this._updateData),
                this._map.off('sourcedata', this._updateData),
                this._map.off('moveend', this._updateEditLink),
                this._map.off('resize', this._updateCompact),
                (this._map = void 0),
                (this._attribHTML = void 0)
            }),
            (Bn.prototype._updateEditLink = function () {
              var e = this._editLink
              e ||
                (e = this._editLink = this._container.querySelector(
                  '.mapbox-improve-map'
                ))
              var r = [
                { key: 'owner', value: this.styleOwner },
                { key: 'id', value: this.styleId },
                {
                  key: 'access_token',
                  value:
                    this._map._requestManager._customAccessToken ||
                    t.config.ACCESS_TOKEN,
                },
              ]
              if (e) {
                var n = r.reduce(function (t, e, n) {
                  return (
                    e.value &&
                      (t +=
                        e.key + '=' + e.value + (n < r.length - 1 ? '&' : '')),
                    t
                  )
                }, '?')
                ;(e.href =
                  t.config.FEEDBACK_URL +
                  '/' +
                  n +
                  (this._map._hash ? this._map._hash.getHashString(!0) : '')),
                  (e.rel = 'noopener nofollow')
              }
            }),
            (Bn.prototype._updateData = function (t) {
              !t ||
                ('metadata' !== t.sourceDataType && 'style' !== t.dataType) ||
                (this._updateAttributions(), this._updateEditLink())
            }),
            (Bn.prototype._updateAttributions = function () {
              if (this._map.style) {
                var t = []
                if (
                  (this.options.customAttribution &&
                    (Array.isArray(this.options.customAttribution)
                      ? (t = t.concat(
                          this.options.customAttribution.map(function (t) {
                            return 'string' != typeof t ? '' : t
                          })
                        ))
                      : 'string' == typeof this.options.customAttribution &&
                        t.push(this.options.customAttribution)),
                  this._map.style.stylesheet)
                ) {
                  var e = this._map.style.stylesheet
                  ;(this.styleOwner = e.owner), (this.styleId = e.id)
                }
                var r = this._map.style.sourceCaches
                for (var n in r) {
                  var i = r[n]
                  if (i.used) {
                    var o = i.getSource()
                    o.attribution &&
                      t.indexOf(o.attribution) < 0 &&
                      t.push(o.attribution)
                  }
                }
                t.sort(function (t, e) {
                  return t.length - e.length
                })
                var a = (t = t.filter(function (e, r) {
                  for (var n = r + 1; n < t.length; n++)
                    if (t[n].indexOf(e) >= 0) return !1
                  return !0
                })).join(' | ')
                a !== this._attribHTML &&
                  ((this._attribHTML = a),
                  t.length
                    ? ((this._innerContainer.innerHTML = a),
                      this._container.classList.remove('mapboxgl-attrib-empty'))
                    : this._container.classList.add('mapboxgl-attrib-empty'),
                  (this._editLink = null))
              }
            }),
            (Bn.prototype._updateCompact = function () {
              this._map.getCanvasContainer().offsetWidth <= 640
                ? this._container.classList.add('mapboxgl-compact')
                : this._container.classList.remove('mapboxgl-compact')
            })
          var Nn = function () {
            t.bindAll(['_updateLogo'], this),
              t.bindAll(['_updateCompact'], this)
          }
          ;(Nn.prototype.onAdd = function (t) {
            ;(this._map = t),
              (this._container = r.create('div', 'mapboxgl-ctrl'))
            var e = r.create('a', 'mapboxgl-ctrl-logo')
            return (
              (e.target = '_blank'),
              (e.rel = 'noopener nofollow'),
              (e.href = 'https://www.mapbox.com/'),
              e.setAttribute(
                'aria-label',
                this._map._getUIString('LogoControl.Title')
              ),
              e.setAttribute('rel', 'noopener nofollow'),
              this._container.appendChild(e),
              (this._container.style.display = 'none'),
              this._map.on('sourcedata', this._updateLogo),
              this._updateLogo(),
              this._map.on('resize', this._updateCompact),
              this._updateCompact(),
              this._container
            )
          }),
            (Nn.prototype.onRemove = function () {
              r.remove(this._container),
                this._map.off('sourcedata', this._updateLogo),
                this._map.off('resize', this._updateCompact)
            }),
            (Nn.prototype.getDefaultPosition = function () {
              return 'bottom-left'
            }),
            (Nn.prototype._updateLogo = function (t) {
              ;(t && 'metadata' !== t.sourceDataType) ||
                (this._container.style.display = this._logoRequired()
                  ? 'block'
                  : 'none')
            }),
            (Nn.prototype._logoRequired = function () {
              if (this._map.style) {
                var t = this._map.style.sourceCaches
                for (var e in t) if (t[e].getSource().mapbox_logo) return !0
                return !1
              }
            }),
            (Nn.prototype._updateCompact = function () {
              var t = this._container.children
              if (t.length) {
                var e = t[0]
                this._map.getCanvasContainer().offsetWidth < 250
                  ? e.classList.add('mapboxgl-compact')
                  : e.classList.remove('mapboxgl-compact')
              }
            })
          var Un = function () {
            ;(this._queue = []),
              (this._id = 0),
              (this._cleared = !1),
              (this._currentlyRunning = !1)
          }
          ;(Un.prototype.add = function (t) {
            var e = ++this._id
            return this._queue.push({ callback: t, id: e, cancelled: !1 }), e
          }),
            (Un.prototype.remove = function (t) {
              for (
                var e = this._currentlyRunning,
                  r = 0,
                  n = e ? this._queue.concat(e) : this._queue;
                r < n.length;
                r += 1
              ) {
                var i = n[r]
                if (i.id === t) return void (i.cancelled = !0)
              }
            }),
            (Un.prototype.run = function () {
              var t = (this._currentlyRunning = this._queue)
              this._queue = []
              for (var e = 0, r = t; e < r.length; e += 1) {
                var n = r[e]
                if (!n.cancelled && (n.callback(), this._cleared)) break
              }
              ;(this._cleared = !1), (this._currentlyRunning = !1)
            }),
            (Un.prototype.clear = function () {
              this._currentlyRunning && (this._cleared = !0), (this._queue = [])
            })
          var jn = {
              'FullscreenControl.Enter': 'Enter fullscreen',
              'FullscreenControl.Exit': 'Exit fullscreen',
              'GeolocateControl.FindMyLocation': 'Find my location',
              'GeolocateControl.LocationNotAvailable': 'Location not available',
              'LogoControl.Title': 'Mapbox logo',
              'NavigationControl.ResetBearing': 'Reset bearing to north',
              'NavigationControl.ZoomIn': 'Zoom in',
              'NavigationControl.ZoomOut': 'Zoom out',
              'ScaleControl.Feet': 'ft',
              'ScaleControl.Meters': 'm',
              'ScaleControl.Kilometers': 'km',
              'ScaleControl.Miles': 'mi',
              'ScaleControl.NauticalMiles': 'nm',
            },
            Vn = t.window.HTMLImageElement,
            qn = t.window.HTMLElement,
            Gn = t.window.ImageBitmap,
            $n = {
              center: [0, 0],
              zoom: 0,
              bearing: 0,
              pitch: 0,
              minZoom: -2,
              maxZoom: 22,
              minPitch: 0,
              maxPitch: 60,
              interactive: !0,
              scrollZoom: !0,
              boxZoom: !0,
              dragRotate: !0,
              dragPan: !0,
              keyboard: !0,
              doubleClickZoom: !0,
              touchZoomRotate: !0,
              bearingSnap: 7,
              clickTolerance: 3,
              hash: !1,
              attributionControl: !0,
              failIfMajorPerformanceCaveat: !1,
              preserveDrawingBuffer: !1,
              trackResize: !0,
              renderWorldCopies: !0,
              refreshExpiredTiles: !0,
              maxTileCacheSize: null,
              localIdeographFontFamily: 'sans-serif',
              transformRequest: null,
              accessToken: null,
              fadeDuration: 300,
              crossSourceCollisions: !0,
            },
            Zn = (function (n) {
              function i(e) {
                var i = this
                if (
                  null != (e = t.extend({}, $n, e)).minZoom &&
                  null != e.maxZoom &&
                  e.minZoom > e.maxZoom
                )
                  throw new Error(
                    'maxZoom must be greater than or equal to minZoom'
                  )
                if (
                  null != e.minPitch &&
                  null != e.maxPitch &&
                  e.minPitch > e.maxPitch
                )
                  throw new Error(
                    'maxPitch must be greater than or equal to minPitch'
                  )
                if (null != e.minPitch && e.minPitch < 0)
                  throw new Error('minPitch must be greater than or equal to 0')
                if (null != e.maxPitch && e.maxPitch > 60)
                  throw new Error('maxPitch must be less than or equal to 60')
                var o = new _n(
                  e.minZoom,
                  e.maxZoom,
                  e.minPitch,
                  e.maxPitch,
                  e.renderWorldCopies
                )
                if (
                  (n.call(this, o, e),
                  (this._interactive = e.interactive),
                  (this._maxTileCacheSize = e.maxTileCacheSize),
                  (this._failIfMajorPerformanceCaveat =
                    e.failIfMajorPerformanceCaveat),
                  (this._preserveDrawingBuffer = e.preserveDrawingBuffer),
                  (this._antialias = e.antialias),
                  (this._trackResize = e.trackResize),
                  (this._bearingSnap = e.bearingSnap),
                  (this._refreshExpiredTiles = e.refreshExpiredTiles),
                  (this._fadeDuration = e.fadeDuration),
                  (this._crossSourceCollisions = e.crossSourceCollisions),
                  (this._crossFadingFactor = 1),
                  (this._collectResourceTiming = e.collectResourceTiming),
                  (this._renderTaskQueue = new Un()),
                  (this._controls = []),
                  (this._mapId = t.uniqueId()),
                  (this._locale = t.extend({}, jn, e.locale)),
                  (this._requestManager = new t.RequestManager(
                    e.transformRequest,
                    e.accessToken
                  )),
                  'string' == typeof e.container)
                ) {
                  if (
                    ((this._container = t.window.document.getElementById(
                      e.container
                    )),
                    !this._container)
                  )
                    throw new Error(
                      "Container '" + e.container + "' not found."
                    )
                } else {
                  if (!(e.container instanceof qn))
                    throw new Error(
                      "Invalid type: 'container' must be a String or HTMLElement."
                    )
                  this._container = e.container
                }
                if (
                  (e.maxBounds && this.setMaxBounds(e.maxBounds),
                  t.bindAll(
                    [
                      '_onWindowOnline',
                      '_onWindowResize',
                      '_contextLost',
                      '_contextRestored',
                    ],
                    this
                  ),
                  this._setupContainer(),
                  this._setupPainter(),
                  void 0 === this.painter)
                )
                  throw new Error('Failed to initialize WebGL.')
                this.on('move', function () {
                  return i._update(!1)
                }),
                  this.on('moveend', function () {
                    return i._update(!1)
                  }),
                  this.on('zoom', function () {
                    return i._update(!0)
                  }),
                  void 0 !== t.window &&
                    (t.window.addEventListener(
                      'online',
                      this._onWindowOnline,
                      !1
                    ),
                    t.window.addEventListener(
                      'resize',
                      this._onWindowResize,
                      !1
                    )),
                  (function (t, e) {
                    var n = t.getCanvasContainer(),
                      i = null,
                      o = !1,
                      a = null
                    for (var s in Rn)
                      (t[s] = new Rn[s](t, e)),
                        e.interactive && e[s] && t[s].enable(e[s])
                    r.addEventListener(n, 'mouseout', function (e) {
                      t.fire(new wn('mouseout', t, e))
                    }),
                      r.addEventListener(n, 'mousedown', function (i) {
                        ;(o = !0), (a = r.mousePos(n, i))
                        var s = new wn('mousedown', t, i)
                        t.fire(s),
                          s.defaultPrevented ||
                            (e.interactive &&
                              !t.doubleClickZoom.isActive() &&
                              t.stop(),
                            t.boxZoom.onMouseDown(i),
                            t.boxZoom.isActive() ||
                              t.dragPan.isActive() ||
                              t.dragRotate.onMouseDown(i),
                            t.boxZoom.isActive() ||
                              t.dragRotate.isActive() ||
                              t.dragPan.onMouseDown(i))
                      }),
                      r.addEventListener(n, 'mouseup', function (e) {
                        var r = t.dragRotate.isActive()
                        i && !r && t.fire(new wn('contextmenu', t, i)),
                          (i = null),
                          (o = !1),
                          t.fire(new wn('mouseup', t, e))
                      }),
                      r.addEventListener(n, 'mousemove', function (e) {
                        if (!t.dragPan.isActive() && !t.dragRotate.isActive()) {
                          for (var r = e.target; r && r !== n; )
                            r = r.parentNode
                          r === n && t.fire(new wn('mousemove', t, e))
                        }
                      }),
                      r.addEventListener(n, 'mouseover', function (e) {
                        for (var r = e.target; r && r !== n; ) r = r.parentNode
                        r === n && t.fire(new wn('mouseover', t, e))
                      }),
                      r.addEventListener(
                        n,
                        'touchstart',
                        function (r) {
                          var n = new En('touchstart', t, r)
                          t.fire(n),
                            n.defaultPrevented ||
                              (e.interactive && t.stop(),
                              t.boxZoom.isActive() ||
                                t.dragRotate.isActive() ||
                                t.dragPan.onTouchStart(r),
                              t.touchZoomRotate.onStart(r),
                              t.doubleClickZoom.onTouchStart(n))
                        },
                        { passive: !1 }
                      ),
                      r.addEventListener(
                        n,
                        'touchmove',
                        function (e) {
                          t.fire(new En('touchmove', t, e))
                        },
                        { passive: !1 }
                      ),
                      r.addEventListener(n, 'touchend', function (e) {
                        t.fire(new En('touchend', t, e))
                      }),
                      r.addEventListener(n, 'touchcancel', function (e) {
                        t.fire(new En('touchcancel', t, e))
                      }),
                      r.addEventListener(n, 'click', function (i) {
                        var o = r.mousePos(n, i)
                        ;(!a || o.equals(a) || o.dist(a) < e.clickTolerance) &&
                          t.fire(new wn('click', t, i))
                      }),
                      r.addEventListener(n, 'dblclick', function (e) {
                        var r = new wn('dblclick', t, e)
                        t.fire(r),
                          r.defaultPrevented || t.doubleClickZoom.onDblClick(r)
                      }),
                      r.addEventListener(n, 'contextmenu', function (e) {
                        var r = t.dragRotate.isActive()
                        o || r
                          ? o && (i = e)
                          : t.fire(new wn('contextmenu', t, e)),
                          (t.dragRotate.isEnabled() ||
                            t.listens('contextmenu')) &&
                            e.preventDefault()
                      }),
                      r.addEventListener(
                        n,
                        'wheel',
                        function (r) {
                          e.interactive && t.stop()
                          var n = new Sn('wheel', t, r)
                          t.fire(n),
                            n.defaultPrevented || t.scrollZoom.onWheel(r)
                        },
                        { passive: !1 }
                      )
                  })(this, e),
                  (this._hash =
                    e.hash &&
                    new bn(
                      ('string' == typeof e.hash && e.hash) || void 0
                    ).addTo(this)),
                  (this._hash && this._hash._onHashChange()) ||
                    (this.jumpTo({
                      center: e.center,
                      zoom: e.zoom,
                      bearing: e.bearing,
                      pitch: e.pitch,
                    }),
                    e.bounds &&
                      (this.resize(),
                      this.fitBounds(
                        e.bounds,
                        t.extend({}, e.fitBoundsOptions, { duration: 0 })
                      ))),
                  this.resize(),
                  (this._localIdeographFontFamily = e.localIdeographFontFamily),
                  e.style &&
                    this.setStyle(e.style, {
                      localIdeographFontFamily: e.localIdeographFontFamily,
                    }),
                  e.attributionControl &&
                    this.addControl(
                      new Bn({ customAttribution: e.customAttribution })
                    ),
                  this.addControl(new Nn(), e.logoPosition),
                  this.on('style.load', function () {
                    i.transform.unmodified && i.jumpTo(i.style.stylesheet)
                  }),
                  this.on('data', function (e) {
                    i._update('style' === e.dataType),
                      i.fire(new t.Event(e.dataType + 'data', e))
                  }),
                  this.on('dataloading', function (e) {
                    i.fire(new t.Event(e.dataType + 'dataloading', e))
                  })
              }
              n && (i.__proto__ = n),
                ((i.prototype = Object.create(
                  n && n.prototype
                )).constructor = i)
              var o = {
                showTileBoundaries: { configurable: !0 },
                showPadding: { configurable: !0 },
                showCollisionBoxes: { configurable: !0 },
                showOverdrawInspector: { configurable: !0 },
                repaint: { configurable: !0 },
                vertices: { configurable: !0 },
                version: { configurable: !0 },
              }
              return (
                (i.prototype._getMapId = function () {
                  return this._mapId
                }),
                (i.prototype.addControl = function (e, r) {
                  if (
                    (void 0 === r &&
                      e.getDefaultPosition &&
                      (r = e.getDefaultPosition()),
                    void 0 === r && (r = 'top-right'),
                    !e || !e.onAdd)
                  )
                    return this.fire(
                      new t.ErrorEvent(
                        new Error(
                          'Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.'
                        )
                      )
                    )
                  var n = e.onAdd(this)
                  this._controls.push(e)
                  var i = this._controlPositions[r]
                  return (
                    -1 !== r.indexOf('bottom')
                      ? i.insertBefore(n, i.firstChild)
                      : i.appendChild(n),
                    this
                  )
                }),
                (i.prototype.removeControl = function (e) {
                  if (!e || !e.onRemove)
                    return this.fire(
                      new t.ErrorEvent(
                        new Error(
                          'Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.'
                        )
                      )
                    )
                  var r = this._controls.indexOf(e)
                  return (
                    r > -1 && this._controls.splice(r, 1),
                    e.onRemove(this),
                    this
                  )
                }),
                (i.prototype.resize = function (e) {
                  var r = this._containerDimensions(),
                    n = r[0],
                    i = r[1]
                  return (
                    this._resizeCanvas(n, i),
                    this.transform.resize(n, i),
                    this.painter.resize(n, i),
                    this.fire(new t.Event('movestart', e))
                      .fire(new t.Event('move', e))
                      .fire(new t.Event('resize', e))
                      .fire(new t.Event('moveend', e)),
                    this
                  )
                }),
                (i.prototype.getBounds = function () {
                  return this.transform.getBounds()
                }),
                (i.prototype.getMaxBounds = function () {
                  return this.transform.getMaxBounds()
                }),
                (i.prototype.setMaxBounds = function (e) {
                  return (
                    this.transform.setMaxBounds(t.LngLatBounds.convert(e)),
                    this._update()
                  )
                }),
                (i.prototype.setMinZoom = function (t) {
                  if (
                    (t = null == t ? -2 : t) >= -2 &&
                    t <= this.transform.maxZoom
                  )
                    return (
                      (this.transform.minZoom = t),
                      this._update(),
                      this.getZoom() < t && this.setZoom(t),
                      this
                    )
                  throw new Error(
                    'minZoom must be between -2 and the current maxZoom, inclusive'
                  )
                }),
                (i.prototype.getMinZoom = function () {
                  return this.transform.minZoom
                }),
                (i.prototype.setMaxZoom = function (t) {
                  if ((t = null == t ? 22 : t) >= this.transform.minZoom)
                    return (
                      (this.transform.maxZoom = t),
                      this._update(),
                      this.getZoom() > t && this.setZoom(t),
                      this
                    )
                  throw new Error(
                    'maxZoom must be greater than the current minZoom'
                  )
                }),
                (i.prototype.getMaxZoom = function () {
                  return this.transform.maxZoom
                }),
                (i.prototype.setMinPitch = function (t) {
                  if ((t = null == t ? 0 : t) < 0)
                    throw new Error(
                      'minPitch must be greater than or equal to 0'
                    )
                  if (t >= 0 && t <= this.transform.maxPitch)
                    return (
                      (this.transform.minPitch = t),
                      this._update(),
                      this.getPitch() < t && this.setPitch(t),
                      this
                    )
                  throw new Error(
                    'minPitch must be between 0 and the current maxPitch, inclusive'
                  )
                }),
                (i.prototype.getMinPitch = function () {
                  return this.transform.minPitch
                }),
                (i.prototype.setMaxPitch = function (t) {
                  if ((t = null == t ? 60 : t) > 60)
                    throw new Error('maxPitch must be less than or equal to 60')
                  if (t >= this.transform.minPitch)
                    return (
                      (this.transform.maxPitch = t),
                      this._update(),
                      this.getPitch() > t && this.setPitch(t),
                      this
                    )
                  throw new Error(
                    'maxPitch must be greater than the current minPitch'
                  )
                }),
                (i.prototype.getMaxPitch = function () {
                  return this.transform.maxPitch
                }),
                (i.prototype.getRenderWorldCopies = function () {
                  return this.transform.renderWorldCopies
                }),
                (i.prototype.setRenderWorldCopies = function (t) {
                  return (this.transform.renderWorldCopies = t), this._update()
                }),
                (i.prototype.project = function (e) {
                  return this.transform.locationPoint(t.LngLat.convert(e))
                }),
                (i.prototype.unproject = function (e) {
                  return this.transform.pointLocation(t.Point.convert(e))
                }),
                (i.prototype.isMoving = function () {
                  return (
                    this._moving ||
                    this.dragPan.isActive() ||
                    this.dragRotate.isActive() ||
                    this.scrollZoom.isActive()
                  )
                }),
                (i.prototype.isZooming = function () {
                  return this._zooming || this.scrollZoom.isZooming()
                }),
                (i.prototype.isRotating = function () {
                  return this._rotating || this.dragRotate.isActive()
                }),
                (i.prototype._createDelegatedListener = function (t, e, r) {
                  var n,
                    i = this
                  if ('mouseenter' === t || 'mouseover' === t) {
                    var o = !1
                    return {
                      layer: e,
                      listener: r,
                      delegates: {
                        mousemove: function (n) {
                          var a = i.getLayer(e)
                            ? i.queryRenderedFeatures(n.point, { layers: [e] })
                            : []
                          a.length
                            ? o ||
                              ((o = !0),
                              r.call(
                                i,
                                new wn(t, i, n.originalEvent, { features: a })
                              ))
                            : (o = !1)
                        },
                        mouseout: function () {
                          o = !1
                        },
                      },
                    }
                  }
                  if ('mouseleave' === t || 'mouseout' === t) {
                    var a = !1
                    return {
                      layer: e,
                      listener: r,
                      delegates: {
                        mousemove: function (n) {
                          ;(i.getLayer(e)
                            ? i.queryRenderedFeatures(n.point, { layers: [e] })
                            : []
                          ).length
                            ? (a = !0)
                            : a &&
                              ((a = !1),
                              r.call(i, new wn(t, i, n.originalEvent)))
                        },
                        mouseout: function (e) {
                          a &&
                            ((a = !1), r.call(i, new wn(t, i, e.originalEvent)))
                        },
                      },
                    }
                  }
                  return {
                    layer: e,
                    listener: r,
                    delegates:
                      ((n = {}),
                      (n[t] = function (t) {
                        var n = i.getLayer(e)
                          ? i.queryRenderedFeatures(t.point, { layers: [e] })
                          : []
                        n.length &&
                          ((t.features = n), r.call(i, t), delete t.features)
                      }),
                      n),
                  }
                }),
                (i.prototype.on = function (t, e, r) {
                  if (void 0 === r) return n.prototype.on.call(this, t, e)
                  var i = this._createDelegatedListener(t, e, r)
                  for (var o in ((this._delegatedListeners =
                    this._delegatedListeners || {}),
                  (this._delegatedListeners[t] =
                    this._delegatedListeners[t] || []),
                  this._delegatedListeners[t].push(i),
                  i.delegates))
                    this.on(o, i.delegates[o])
                  return this
                }),
                (i.prototype.once = function (t, e, r) {
                  if (void 0 === r) return n.prototype.once.call(this, t, e)
                  var i = this._createDelegatedListener(t, e, r)
                  for (var o in i.delegates) this.once(o, i.delegates[o])
                  return this
                }),
                (i.prototype.off = function (t, e, r) {
                  var i = this
                  return void 0 === r
                    ? n.prototype.off.call(this, t, e)
                    : (this._delegatedListeners &&
                        this._delegatedListeners[t] &&
                        (function (n) {
                          for (var o = n[t], a = 0; a < o.length; a++) {
                            var s = o[a]
                            if (s.layer === e && s.listener === r) {
                              for (var l in s.delegates)
                                i.off(l, s.delegates[l])
                              return o.splice(a, 1), i
                            }
                          }
                        })(this._delegatedListeners),
                      this)
                }),
                (i.prototype.queryRenderedFeatures = function (e, r) {
                  if (!this.style) return []
                  var n
                  if (
                    (void 0 !== r ||
                      void 0 === e ||
                      e instanceof t.Point ||
                      Array.isArray(e) ||
                      ((r = e), (e = void 0)),
                    (r = r || {}),
                    (e = e || [
                      [0, 0],
                      [this.transform.width, this.transform.height],
                    ]) instanceof t.Point || 'number' == typeof e[0])
                  )
                    n = [t.Point.convert(e)]
                  else {
                    var i = t.Point.convert(e[0]),
                      o = t.Point.convert(e[1])
                    n = [i, new t.Point(o.x, i.y), o, new t.Point(i.x, o.y), i]
                  }
                  return this.style.queryRenderedFeatures(n, r, this.transform)
                }),
                (i.prototype.querySourceFeatures = function (t, e) {
                  return this.style.querySourceFeatures(t, e)
                }),
                (i.prototype.setStyle = function (e, r) {
                  return !1 !==
                    (r = t.extend(
                      {},
                      {
                        localIdeographFontFamily: this
                          ._localIdeographFontFamily,
                      },
                      r
                    )).diff &&
                    r.localIdeographFontFamily ===
                      this._localIdeographFontFamily &&
                    this.style &&
                    e
                    ? (this._diffStyle(e, r), this)
                    : ((this._localIdeographFontFamily =
                        r.localIdeographFontFamily),
                      this._updateStyle(e, r))
                }),
                (i.prototype._getUIString = function (t) {
                  var e = this._locale[t]
                  if (null == e)
                    throw new Error("Missing UI string '" + t + "'")
                  return e
                }),
                (i.prototype._updateStyle = function (t, e) {
                  return (
                    this.style &&
                      (this.style.setEventedParent(null), this.style._remove()),
                    t
                      ? ((this.style = new Ne(this, e || {})),
                        this.style.setEventedParent(this, {
                          style: this.style,
                        }),
                        'string' == typeof t
                          ? this.style.loadURL(t)
                          : this.style.loadJSON(t),
                        this)
                      : (delete this.style, this)
                  )
                }),
                (i.prototype._lazyInitEmptyStyle = function () {
                  this.style ||
                    ((this.style = new Ne(this, {})),
                    this.style.setEventedParent(this, { style: this.style }),
                    this.style.loadEmpty())
                }),
                (i.prototype._diffStyle = function (e, r) {
                  var n = this
                  if ('string' == typeof e) {
                    var i = this._requestManager.normalizeStyleURL(e),
                      o = this._requestManager.transformRequest(
                        i,
                        t.ResourceType.Style
                      )
                    t.getJSON(o, function (e, i) {
                      e ? n.fire(new t.ErrorEvent(e)) : i && n._updateDiff(i, r)
                    })
                  } else 'object' == typeof e && this._updateDiff(e, r)
                }),
                (i.prototype._updateDiff = function (e, r) {
                  try {
                    this.style.setState(e) && this._update(!0)
                  } catch (n) {
                    t.warnOnce(
                      'Unable to perform style diff: ' +
                        (n.message || n.error || n) +
                        '.  Rebuilding the style from scratch.'
                    ),
                      this._updateStyle(e, r)
                  }
                }),
                (i.prototype.getStyle = function () {
                  if (this.style) return this.style.serialize()
                }),
                (i.prototype.isStyleLoaded = function () {
                  return this.style
                    ? this.style.loaded()
                    : t.warnOnce('There is no style added to the map.')
                }),
                (i.prototype.addSource = function (t, e) {
                  return (
                    this._lazyInitEmptyStyle(),
                    this.style.addSource(t, e),
                    this._update(!0)
                  )
                }),
                (i.prototype.isSourceLoaded = function (e) {
                  var r = this.style && this.style.sourceCaches[e]
                  if (void 0 !== r) return r.loaded()
                  this.fire(
                    new t.ErrorEvent(
                      new Error("There is no source with ID '" + e + "'")
                    )
                  )
                }),
                (i.prototype.areTilesLoaded = function () {
                  var t = this.style && this.style.sourceCaches
                  for (var e in t) {
                    var r = t[e]._tiles
                    for (var n in r) {
                      var i = r[n]
                      if ('loaded' !== i.state && 'errored' !== i.state)
                        return !1
                    }
                  }
                  return !0
                }),
                (i.prototype.addSourceType = function (t, e, r) {
                  return (
                    this._lazyInitEmptyStyle(),
                    this.style.addSourceType(t, e, r)
                  )
                }),
                (i.prototype.removeSource = function (t) {
                  return this.style.removeSource(t), this._update(!0)
                }),
                (i.prototype.getSource = function (t) {
                  return this.style.getSource(t)
                }),
                (i.prototype.addImage = function (e, r, n) {
                  void 0 === n && (n = {})
                  var i = n.pixelRatio
                  void 0 === i && (i = 1)
                  var o = n.sdf
                  void 0 === o && (o = !1)
                  var a = n.stretchX,
                    s = n.stretchY,
                    l = n.content
                  if (
                    (this._lazyInitEmptyStyle(),
                    r instanceof Vn || (Gn && r instanceof Gn))
                  ) {
                    var u = t.browser.getImageData(r)
                    this.style.addImage(e, {
                      data: new t.RGBAImage(
                        { width: u.width, height: u.height },
                        u.data
                      ),
                      pixelRatio: i,
                      stretchX: a,
                      stretchY: s,
                      content: l,
                      sdf: o,
                      version: 0,
                    })
                  } else {
                    if (void 0 === r.width || void 0 === r.height)
                      return this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`'
                          )
                        )
                      )
                    var c = r
                    this.style.addImage(e, {
                      data: new t.RGBAImage(
                        { width: r.width, height: r.height },
                        new Uint8Array(r.data)
                      ),
                      pixelRatio: i,
                      stretchX: a,
                      stretchY: s,
                      content: l,
                      sdf: o,
                      version: 0,
                      userImage: c,
                    }),
                      c.onAdd && c.onAdd(this, e)
                  }
                }),
                (i.prototype.updateImage = function (e, r) {
                  var n = this.style.getImage(e)
                  if (!n)
                    return this.fire(
                      new t.ErrorEvent(
                        new Error(
                          'The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.'
                        )
                      )
                    )
                  var i =
                      r instanceof Vn || (Gn && r instanceof Gn)
                        ? t.browser.getImageData(r)
                        : r,
                    o = i.width,
                    a = i.height,
                    s = i.data
                  return void 0 === o || void 0 === a
                    ? this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`'
                          )
                        )
                      )
                    : o !== n.data.width || a !== n.data.height
                    ? this.fire(
                        new t.ErrorEvent(
                          new Error(
                            'The width and height of the updated image must be that same as the previous version of the image'
                          )
                        )
                      )
                    : (n.data.replace(
                        s,
                        !(r instanceof Vn || (Gn && r instanceof Gn))
                      ),
                      void this.style.updateImage(e, n))
                }),
                (i.prototype.hasImage = function (e) {
                  return e
                    ? !!this.style.getImage(e)
                    : (this.fire(
                        new t.ErrorEvent(new Error('Missing required image id'))
                      ),
                      !1)
                }),
                (i.prototype.removeImage = function (t) {
                  this.style.removeImage(t)
                }),
                (i.prototype.loadImage = function (e, r) {
                  t.getImage(
                    this._requestManager.transformRequest(
                      e,
                      t.ResourceType.Image
                    ),
                    r
                  )
                }),
                (i.prototype.listImages = function () {
                  return this.style.listImages()
                }),
                (i.prototype.addLayer = function (t, e) {
                  return (
                    this._lazyInitEmptyStyle(),
                    this.style.addLayer(t, e),
                    this._update(!0)
                  )
                }),
                (i.prototype.moveLayer = function (t, e) {
                  return this.style.moveLayer(t, e), this._update(!0)
                }),
                (i.prototype.removeLayer = function (t) {
                  return this.style.removeLayer(t), this._update(!0)
                }),
                (i.prototype.getLayer = function (t) {
                  return this.style.getLayer(t)
                }),
                (i.prototype.setLayerZoomRange = function (t, e, r) {
                  return this.style.setLayerZoomRange(t, e, r), this._update(!0)
                }),
                (i.prototype.setFilter = function (t, e, r) {
                  return (
                    void 0 === r && (r = {}),
                    this.style.setFilter(t, e, r),
                    this._update(!0)
                  )
                }),
                (i.prototype.getFilter = function (t) {
                  return this.style.getFilter(t)
                }),
                (i.prototype.setPaintProperty = function (t, e, r, n) {
                  return (
                    void 0 === n && (n = {}),
                    this.style.setPaintProperty(t, e, r, n),
                    this._update(!0)
                  )
                }),
                (i.prototype.getPaintProperty = function (t, e) {
                  return this.style.getPaintProperty(t, e)
                }),
                (i.prototype.setLayoutProperty = function (t, e, r, n) {
                  return (
                    void 0 === n && (n = {}),
                    this.style.setLayoutProperty(t, e, r, n),
                    this._update(!0)
                  )
                }),
                (i.prototype.getLayoutProperty = function (t, e) {
                  return this.style.getLayoutProperty(t, e)
                }),
                (i.prototype.setLight = function (t, e) {
                  return (
                    void 0 === e && (e = {}),
                    this._lazyInitEmptyStyle(),
                    this.style.setLight(t, e),
                    this._update(!0)
                  )
                }),
                (i.prototype.getLight = function () {
                  return this.style.getLight()
                }),
                (i.prototype.setFeatureState = function (t, e) {
                  return this.style.setFeatureState(t, e), this._update()
                }),
                (i.prototype.removeFeatureState = function (t, e) {
                  return this.style.removeFeatureState(t, e), this._update()
                }),
                (i.prototype.getFeatureState = function (t) {
                  return this.style.getFeatureState(t)
                }),
                (i.prototype.getContainer = function () {
                  return this._container
                }),
                (i.prototype.getCanvasContainer = function () {
                  return this._canvasContainer
                }),
                (i.prototype.getCanvas = function () {
                  return this._canvas
                }),
                (i.prototype._containerDimensions = function () {
                  var t = 0,
                    e = 0
                  return (
                    this._container &&
                      ((t = this._container.clientWidth || 400),
                      (e = this._container.clientHeight || 300)),
                    [t, e]
                  )
                }),
                (i.prototype._detectMissingCSS = function () {
                  'rgb(250, 128, 114)' !==
                    t.window
                      .getComputedStyle(this._missingCSSCanary)
                      .getPropertyValue('background-color') &&
                    t.warnOnce(
                      'This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.'
                    )
                }),
                (i.prototype._setupContainer = function () {
                  var t = this._container
                  t.classList.add('mapboxgl-map'),
                    ((this._missingCSSCanary = r.create(
                      'div',
                      'mapboxgl-canary',
                      t
                    )).style.visibility = 'hidden'),
                    this._detectMissingCSS()
                  var e = (this._canvasContainer = r.create(
                    'div',
                    'mapboxgl-canvas-container',
                    t
                  ))
                  this._interactive && e.classList.add('mapboxgl-interactive'),
                    (this._canvas = r.create('canvas', 'mapboxgl-canvas', e)),
                    this._canvas.addEventListener(
                      'webglcontextlost',
                      this._contextLost,
                      !1
                    ),
                    this._canvas.addEventListener(
                      'webglcontextrestored',
                      this._contextRestored,
                      !1
                    ),
                    this._canvas.setAttribute('tabindex', '0'),
                    this._canvas.setAttribute('aria-label', 'Map')
                  var n = this._containerDimensions()
                  this._resizeCanvas(n[0], n[1])
                  var i = (this._controlContainer = r.create(
                      'div',
                      'mapboxgl-control-container',
                      t
                    )),
                    o = (this._controlPositions = {})
                  ;[
                    'top-left',
                    'top-right',
                    'bottom-left',
                    'bottom-right',
                  ].forEach(function (t) {
                    o[t] = r.create('div', 'mapboxgl-ctrl-' + t, i)
                  })
                }),
                (i.prototype._resizeCanvas = function (e, r) {
                  var n = t.browser.devicePixelRatio || 1
                  ;(this._canvas.width = n * e),
                    (this._canvas.height = n * r),
                    (this._canvas.style.width = e + 'px'),
                    (this._canvas.style.height = r + 'px')
                }),
                (i.prototype._setupPainter = function () {
                  var r = t.extend({}, e.webGLContextAttributes, {
                      failIfMajorPerformanceCaveat: this
                        ._failIfMajorPerformanceCaveat,
                      preserveDrawingBuffer: this._preserveDrawingBuffer,
                      antialias: this._antialias || !1,
                    }),
                    n =
                      this._canvas.getContext('webgl', r) ||
                      this._canvas.getContext('experimental-webgl', r)
                  n
                    ? ((this.painter = new mn(n, this.transform)),
                      t.webpSupported.testSupport(n))
                    : this.fire(
                        new t.ErrorEvent(
                          new Error('Failed to initialize WebGL')
                        )
                      )
                }),
                (i.prototype._contextLost = function (e) {
                  e.preventDefault(),
                    this._frame && (this._frame.cancel(), (this._frame = null)),
                    this.fire(
                      new t.Event('webglcontextlost', { originalEvent: e })
                    )
                }),
                (i.prototype._contextRestored = function (e) {
                  this._setupPainter(),
                    this.resize(),
                    this._update(),
                    this.fire(
                      new t.Event('webglcontextrestored', { originalEvent: e })
                    )
                }),
                (i.prototype.loaded = function () {
                  return (
                    !this._styleDirty &&
                    !this._sourcesDirty &&
                    !!this.style &&
                    this.style.loaded()
                  )
                }),
                (i.prototype._update = function (t) {
                  return this.style
                    ? ((this._styleDirty = this._styleDirty || t),
                      (this._sourcesDirty = !0),
                      this.triggerRepaint(),
                      this)
                    : this
                }),
                (i.prototype._requestRenderFrame = function (t) {
                  return this._update(), this._renderTaskQueue.add(t)
                }),
                (i.prototype._cancelRenderFrame = function (t) {
                  this._renderTaskQueue.remove(t)
                }),
                (i.prototype._render = function () {
                  var e,
                    r = this,
                    n = 0,
                    i = this.painter.context.extTimerQuery
                  this.listens('gpu-timing-frame') &&
                    ((e = i.createQueryEXT()),
                    i.beginQueryEXT(i.TIME_ELAPSED_EXT, e),
                    (n = t.browser.now())),
                    this.painter.context.setDirty(),
                    this.painter.setBaseState(),
                    this._renderTaskQueue.run()
                  var o = !1
                  if (this.style && this._styleDirty) {
                    this._styleDirty = !1
                    var a = this.transform.zoom,
                      s = t.browser.now()
                    this.style.zoomHistory.update(a, s)
                    var l = new t.EvaluationParameters(a, {
                        now: s,
                        fadeDuration: this._fadeDuration,
                        zoomHistory: this.style.zoomHistory,
                        transition: this.style.getTransition(),
                      }),
                      u = l.crossFadingFactor()
                    ;(1 === u && u === this._crossFadingFactor) ||
                      ((o = !0), (this._crossFadingFactor = u)),
                      this.style.update(l)
                  }
                  if (
                    (this.style &&
                      this._sourcesDirty &&
                      ((this._sourcesDirty = !1),
                      this.style._updateSources(this.transform)),
                    (this._placementDirty =
                      this.style &&
                      this.style._updatePlacement(
                        this.painter.transform,
                        this.showCollisionBoxes,
                        this._fadeDuration,
                        this._crossSourceCollisions
                      )),
                    this.painter.render(this.style, {
                      showTileBoundaries: this.showTileBoundaries,
                      showOverdrawInspector: this._showOverdrawInspector,
                      rotating: this.isRotating(),
                      zooming: this.isZooming(),
                      moving: this.isMoving(),
                      fadeDuration: this._fadeDuration,
                      showPadding: this.showPadding,
                      gpuTiming: !!this.listens('gpu-timing-layer'),
                    }),
                    this.fire(new t.Event('render')),
                    this.loaded() &&
                      !this._loaded &&
                      ((this._loaded = !0), this.fire(new t.Event('load'))),
                    this.style &&
                      (this.style.hasTransitions() || o) &&
                      (this._styleDirty = !0),
                    this.style &&
                      !this._placementDirty &&
                      this.style._releaseSymbolFadeTiles(),
                    this.listens('gpu-timing-frame'))
                  ) {
                    var c = t.browser.now() - n
                    i.endQueryEXT(i.TIME_ELAPSED_EXT, e),
                      setTimeout(function () {
                        var n = i.getQueryObjectEXT(e, i.QUERY_RESULT_EXT) / 1e6
                        i.deleteQueryEXT(e),
                          r.fire(
                            new t.Event('gpu-timing-frame', {
                              cpuTime: c,
                              gpuTime: n,
                            })
                          )
                      }, 50)
                  }
                  if (this.listens('gpu-timing-layer')) {
                    var p = this.painter.collectGpuTimers()
                    setTimeout(function () {
                      var e = r.painter.queryGpuTimers(p)
                      r.fire(new t.Event('gpu-timing-layer', { layerTimes: e }))
                    }, 50)
                  }
                  return (
                    this._sourcesDirty ||
                    this._styleDirty ||
                    this._placementDirty ||
                    this._repaint
                      ? this.triggerRepaint()
                      : !this.isMoving() &&
                        this.loaded() &&
                        (this._fullyLoaded || (this._fullyLoaded = !0),
                        this.fire(new t.Event('idle'))),
                    this
                  )
                }),
                (i.prototype.remove = function () {
                  this._hash && this._hash.remove()
                  for (var e = 0, r = this._controls; e < r.length; e += 1)
                    r[e].onRemove(this)
                  ;(this._controls = []),
                    this._frame && (this._frame.cancel(), (this._frame = null)),
                    this._renderTaskQueue.clear(),
                    this.painter.destroy(),
                    this.setStyle(null),
                    void 0 !== t.window &&
                      (t.window.removeEventListener(
                        'resize',
                        this._onWindowResize,
                        !1
                      ),
                      t.window.removeEventListener(
                        'online',
                        this._onWindowOnline,
                        !1
                      ))
                  var n = this.painter.context.gl.getExtension(
                    'WEBGL_lose_context'
                  )
                  n && n.loseContext(),
                    Xn(this._canvasContainer),
                    Xn(this._controlContainer),
                    Xn(this._missingCSSCanary),
                    this._container.classList.remove('mapboxgl-map'),
                    this.fire(new t.Event('remove'))
                }),
                (i.prototype.triggerRepaint = function () {
                  var e = this
                  this.style &&
                    !this._frame &&
                    (this._frame = t.browser.frame(function (t) {
                      ;(e._frame = null), e._render()
                    }))
                }),
                (i.prototype._onWindowOnline = function () {
                  this._update()
                }),
                (i.prototype._onWindowResize = function (t) {
                  this._trackResize &&
                    this.resize({ originalEvent: t })._update()
                }),
                (o.showTileBoundaries.get = function () {
                  return !!this._showTileBoundaries
                }),
                (o.showTileBoundaries.set = function (t) {
                  this._showTileBoundaries !== t &&
                    ((this._showTileBoundaries = t), this._update())
                }),
                (o.showPadding.get = function () {
                  return !!this._showPadding
                }),
                (o.showPadding.set = function (t) {
                  this._showPadding !== t &&
                    ((this._showPadding = t), this._update())
                }),
                (o.showCollisionBoxes.get = function () {
                  return !!this._showCollisionBoxes
                }),
                (o.showCollisionBoxes.set = function (t) {
                  this._showCollisionBoxes !== t &&
                    ((this._showCollisionBoxes = t),
                    t ? this.style._generateCollisionBoxes() : this._update())
                }),
                (o.showOverdrawInspector.get = function () {
                  return !!this._showOverdrawInspector
                }),
                (o.showOverdrawInspector.set = function (t) {
                  this._showOverdrawInspector !== t &&
                    ((this._showOverdrawInspector = t), this._update())
                }),
                (o.repaint.get = function () {
                  return !!this._repaint
                }),
                (o.repaint.set = function (t) {
                  this._repaint !== t &&
                    ((this._repaint = t), this.triggerRepaint())
                }),
                (o.vertices.get = function () {
                  return !!this._vertices
                }),
                (o.vertices.set = function (t) {
                  ;(this._vertices = t), this._update()
                }),
                (i.prototype._setCacheLimits = function (e, r) {
                  t.setCacheLimits(e, r)
                }),
                (o.version.get = function () {
                  return t.version
                }),
                Object.defineProperties(i.prototype, o),
                i
              )
            })(Fn)
          function Xn(t) {
            t.parentNode && t.parentNode.removeChild(t)
          }
          var Kn = { showCompass: !0, showZoom: !0, visualizePitch: !1 },
            Wn = function (e) {
              var n = this
              ;(this.options = t.extend({}, Kn, e)),
                (this._container = r.create(
                  'div',
                  'mapboxgl-ctrl mapboxgl-ctrl-group'
                )),
                this._container.addEventListener('contextmenu', function (t) {
                  return t.preventDefault()
                }),
                this.options.showZoom &&
                  (t.bindAll(['_setButtonTitle', '_updateZoomButtons'], this),
                  (this._zoomInButton = this._createButton(
                    'mapboxgl-ctrl-zoom-in',
                    function (t) {
                      return n._map.zoomIn({}, { originalEvent: t })
                    }
                  )),
                  r
                    .create('span', 'mapboxgl-ctrl-icon', this._zoomInButton)
                    .setAttribute('aria-hidden', !0),
                  (this._zoomOutButton = this._createButton(
                    'mapboxgl-ctrl-zoom-out',
                    function (t) {
                      return n._map.zoomOut({}, { originalEvent: t })
                    }
                  )),
                  r
                    .create('span', 'mapboxgl-ctrl-icon', this._zoomOutButton)
                    .setAttribute('aria-hidden', !0)),
                this.options.showCompass &&
                  (t.bindAll(['_rotateCompassArrow'], this),
                  (this._compass = this._createButton(
                    'mapboxgl-ctrl-compass',
                    function (t) {
                      n.options.visualizePitch
                        ? n._map.resetNorthPitch({}, { originalEvent: t })
                        : n._map.resetNorth({}, { originalEvent: t })
                    }
                  )),
                  (this._compassIcon = r.create(
                    'span',
                    'mapboxgl-ctrl-icon',
                    this._compass
                  )),
                  this._compassIcon.setAttribute('aria-hidden', !0))
            }
          function Hn(e, r, n) {
            if (((e = new t.LngLat(e.lng, e.lat)), r)) {
              var i = new t.LngLat(e.lng - 360, e.lat),
                o = new t.LngLat(e.lng + 360, e.lat),
                a = n.locationPoint(e).distSqr(r)
              n.locationPoint(i).distSqr(r) < a
                ? (e = i)
                : n.locationPoint(o).distSqr(r) < a && (e = o)
            }
            for (; Math.abs(e.lng - n.center.lng) > 180; ) {
              var s = n.locationPoint(e)
              if (s.x >= 0 && s.y >= 0 && s.x <= n.width && s.y <= n.height)
                break
              e.lng > n.center.lng ? (e.lng -= 360) : (e.lng += 360)
            }
            return e
          }
          ;(Wn.prototype._updateZoomButtons = function () {
            var t = this._map.getZoom()
            ;(this._zoomInButton.disabled = t === this._map.getMaxZoom()),
              (this._zoomOutButton.disabled = t === this._map.getMinZoom())
          }),
            (Wn.prototype._rotateCompassArrow = function () {
              var t = this.options.visualizePitch
                ? 'scale(' +
                  1 /
                    Math.pow(
                      Math.cos(this._map.transform.pitch * (Math.PI / 180)),
                      0.5
                    ) +
                  ') rotateX(' +
                  this._map.transform.pitch +
                  'deg) rotateZ(' +
                  this._map.transform.angle * (180 / Math.PI) +
                  'deg)'
                : 'rotate(' +
                  this._map.transform.angle * (180 / Math.PI) +
                  'deg)'
              this._compassIcon.style.transform = t
            }),
            (Wn.prototype.onAdd = function (t) {
              return (
                (this._map = t),
                this.options.showZoom &&
                  (this._setButtonTitle(this._zoomInButton, 'ZoomIn'),
                  this._setButtonTitle(this._zoomOutButton, 'ZoomOut'),
                  this._map.on('zoom', this._updateZoomButtons),
                  this._updateZoomButtons()),
                this.options.showCompass &&
                  (this._setButtonTitle(this._compass, 'ResetBearing'),
                  this.options.visualizePitch &&
                    this._map.on('pitch', this._rotateCompassArrow),
                  this._map.on('rotate', this._rotateCompassArrow),
                  this._rotateCompassArrow(),
                  (this._handler = new An(t, {
                    button: 'left',
                    element: this._compass,
                    clickTolerance: t.dragRotate._clickTolerance,
                  })),
                  r.addEventListener(
                    this._compass,
                    'mousedown',
                    this._handler.onMouseDown
                  ),
                  r.addEventListener(
                    this._compass,
                    'touchstart',
                    this._handler.onMouseDown,
                    { passive: !1 }
                  ),
                  this._handler.enable()),
                this._container
              )
            }),
            (Wn.prototype.onRemove = function () {
              r.remove(this._container),
                this.options.showZoom &&
                  this._map.off('zoom', this._updateZoomButtons),
                this.options.showCompass &&
                  (this.options.visualizePitch &&
                    this._map.off('pitch', this._rotateCompassArrow),
                  this._map.off('rotate', this._rotateCompassArrow),
                  r.removeEventListener(
                    this._compass,
                    'mousedown',
                    this._handler.onMouseDown
                  ),
                  r.removeEventListener(
                    this._compass,
                    'touchstart',
                    this._handler.onMouseDown,
                    { passive: !1 }
                  ),
                  this._handler.disable(),
                  delete this._handler),
                delete this._map
            }),
            (Wn.prototype._createButton = function (t, e) {
              var n = r.create('button', t, this._container)
              return (n.type = 'button'), n.addEventListener('click', e), n
            }),
            (Wn.prototype._setButtonTitle = function (t, e) {
              var r = this._map._getUIString('NavigationControl.' + e)
              ;(t.title = r), t.setAttribute('aria-label', r)
            })
          var Jn = {
            center: 'translate(-50%,-50%)',
            top: 'translate(-50%,0)',
            'top-left': 'translate(0,0)',
            'top-right': 'translate(-100%,0)',
            bottom: 'translate(-50%,-100%)',
            'bottom-left': 'translate(0,-100%)',
            'bottom-right': 'translate(-100%,-100%)',
            left: 'translate(0,-50%)',
            right: 'translate(-100%,-50%)',
          }
          function Yn(t, e, r) {
            var n = t.classList
            for (var i in Jn) n.remove('mapboxgl-' + r + '-anchor-' + i)
            n.add('mapboxgl-' + r + '-anchor-' + e)
          }
          var Qn,
            ti = (function (e) {
              function n(n, i) {
                var o = this
                if (
                  (e.call(this),
                  (n instanceof t.window.HTMLElement || i) &&
                    (n = t.extend({ element: n }, i)),
                  t.bindAll(
                    [
                      '_update',
                      '_onMove',
                      '_onUp',
                      '_addDragHandler',
                      '_onMapClick',
                      '_onKeyPress',
                    ],
                    this
                  ),
                  (this._anchor = (n && n.anchor) || 'center'),
                  (this._color = (n && n.color) || '#3FB1CE'),
                  (this._draggable = (n && n.draggable) || !1),
                  (this._state = 'inactive'),
                  (this._rotation = (n && n.rotation) || 0),
                  (this._rotationAlignment =
                    (n && n.rotationAlignment) || 'auto'),
                  (this._pitchAlignment =
                    n && n.pitchAlignment && 'auto' !== n.pitchAlignment
                      ? n.pitchAlignment
                      : this._rotationAlignment),
                  n && n.element)
                )
                  (this._element = n.element),
                    (this._offset = t.Point.convert((n && n.offset) || [0, 0]))
                else {
                  ;(this._defaultMarker = !0),
                    (this._element = r.create('div')),
                    this._element.setAttribute('aria-label', 'Map marker')
                  var a = r.createNS('http://www.w3.org/2000/svg', 'svg')
                  a.setAttributeNS(null, 'display', 'block'),
                    a.setAttributeNS(null, 'height', '41px'),
                    a.setAttributeNS(null, 'width', '27px'),
                    a.setAttributeNS(null, 'viewBox', '0 0 27 41')
                  var s = r.createNS('http://www.w3.org/2000/svg', 'g')
                  s.setAttributeNS(null, 'stroke', 'none'),
                    s.setAttributeNS(null, 'stroke-width', '1'),
                    s.setAttributeNS(null, 'fill', 'none'),
                    s.setAttributeNS(null, 'fill-rule', 'evenodd')
                  var l = r.createNS('http://www.w3.org/2000/svg', 'g')
                  l.setAttributeNS(null, 'fill-rule', 'nonzero')
                  var u = r.createNS('http://www.w3.org/2000/svg', 'g')
                  u.setAttributeNS(null, 'transform', 'translate(3.0, 29.0)'),
                    u.setAttributeNS(null, 'fill', '#000000')
                  for (
                    var c = 0,
                      p = [
                        { rx: '10.5', ry: '5.25002273' },
                        { rx: '10.5', ry: '5.25002273' },
                        { rx: '9.5', ry: '4.77275007' },
                        { rx: '8.5', ry: '4.29549936' },
                        { rx: '7.5', ry: '3.81822308' },
                        { rx: '6.5', ry: '3.34094679' },
                        { rx: '5.5', ry: '2.86367051' },
                        { rx: '4.5', ry: '2.38636864' },
                      ];
                    c < p.length;
                    c += 1
                  ) {
                    var h = p[c],
                      f = r.createNS('http://www.w3.org/2000/svg', 'ellipse')
                    f.setAttributeNS(null, 'opacity', '0.04'),
                      f.setAttributeNS(null, 'cx', '10.5'),
                      f.setAttributeNS(null, 'cy', '5.80029008'),
                      f.setAttributeNS(null, 'rx', h.rx),
                      f.setAttributeNS(null, 'ry', h.ry),
                      u.appendChild(f)
                  }
                  var d = r.createNS('http://www.w3.org/2000/svg', 'g')
                  d.setAttributeNS(null, 'fill', this._color)
                  var m = r.createNS('http://www.w3.org/2000/svg', 'path')
                  m.setAttributeNS(
                    null,
                    'd',
                    'M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z'
                  ),
                    d.appendChild(m)
                  var y = r.createNS('http://www.w3.org/2000/svg', 'g')
                  y.setAttributeNS(null, 'opacity', '0.25'),
                    y.setAttributeNS(null, 'fill', '#000000')
                  var v = r.createNS('http://www.w3.org/2000/svg', 'path')
                  v.setAttributeNS(
                    null,
                    'd',
                    'M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z'
                  ),
                    y.appendChild(v)
                  var g = r.createNS('http://www.w3.org/2000/svg', 'g')
                  g.setAttributeNS(null, 'transform', 'translate(6.0, 7.0)'),
                    g.setAttributeNS(null, 'fill', '#FFFFFF')
                  var _ = r.createNS('http://www.w3.org/2000/svg', 'g')
                  _.setAttributeNS(null, 'transform', 'translate(8.0, 8.0)')
                  var x = r.createNS('http://www.w3.org/2000/svg', 'circle')
                  x.setAttributeNS(null, 'fill', '#000000'),
                    x.setAttributeNS(null, 'opacity', '0.25'),
                    x.setAttributeNS(null, 'cx', '5.5'),
                    x.setAttributeNS(null, 'cy', '5.5'),
                    x.setAttributeNS(null, 'r', '5.4999962')
                  var b = r.createNS('http://www.w3.org/2000/svg', 'circle')
                  b.setAttributeNS(null, 'fill', '#FFFFFF'),
                    b.setAttributeNS(null, 'cx', '5.5'),
                    b.setAttributeNS(null, 'cy', '5.5'),
                    b.setAttributeNS(null, 'r', '5.4999962'),
                    _.appendChild(x),
                    _.appendChild(b),
                    l.appendChild(u),
                    l.appendChild(d),
                    l.appendChild(y),
                    l.appendChild(g),
                    l.appendChild(_),
                    a.appendChild(l),
                    this._element.appendChild(a),
                    (this._offset = t.Point.convert(
                      (n && n.offset) || [0, -14]
                    ))
                }
                this._element.classList.add('mapboxgl-marker'),
                  this._element.addEventListener('dragstart', function (t) {
                    t.preventDefault()
                  }),
                  this._element.addEventListener('mousedown', function (t) {
                    t.preventDefault()
                  }),
                  this._element.addEventListener('focus', function () {
                    var t = o._map.getContainer()
                    ;(t.scrollTop = 0), (t.scrollLeft = 0)
                  }),
                  Yn(this._element, this._anchor, 'marker'),
                  (this._popup = null)
              }
              return (
                e && (n.__proto__ = e),
                ((n.prototype = Object.create(
                  e && e.prototype
                )).constructor = n),
                (n.prototype.addTo = function (t) {
                  return (
                    this.remove(),
                    (this._map = t),
                    t.getCanvasContainer().appendChild(this._element),
                    t.on('move', this._update),
                    t.on('moveend', this._update),
                    this.setDraggable(this._draggable),
                    this._update(),
                    this._map.on('click', this._onMapClick),
                    this
                  )
                }),
                (n.prototype.remove = function () {
                  return (
                    this._map &&
                      (this._map.off('click', this._onMapClick),
                      this._map.off('move', this._update),
                      this._map.off('moveend', this._update),
                      this._map.off('mousedown', this._addDragHandler),
                      this._map.off('touchstart', this._addDragHandler),
                      this._map.off('mouseup', this._onUp),
                      this._map.off('touchend', this._onUp),
                      this._map.off('mousemove', this._onMove),
                      this._map.off('touchmove', this._onMove),
                      delete this._map),
                    r.remove(this._element),
                    this._popup && this._popup.remove(),
                    this
                  )
                }),
                (n.prototype.getLngLat = function () {
                  return this._lngLat
                }),
                (n.prototype.setLngLat = function (e) {
                  return (
                    (this._lngLat = t.LngLat.convert(e)),
                    (this._pos = null),
                    this._popup && this._popup.setLngLat(this._lngLat),
                    this._update(),
                    this
                  )
                }),
                (n.prototype.getElement = function () {
                  return this._element
                }),
                (n.prototype.setPopup = function (t) {
                  if (
                    (this._popup &&
                      (this._popup.remove(),
                      (this._popup = null),
                      this._element.removeEventListener(
                        'keypress',
                        this._onKeyPress
                      ),
                      this._originalTabIndex ||
                        this._element.removeAttribute('tabindex')),
                    t)
                  ) {
                    if (!('offset' in t.options)) {
                      var e = Math.sqrt(Math.pow(13.5, 2) / 2)
                      t.options.offset = this._defaultMarker
                        ? {
                            top: [0, 0],
                            'top-left': [0, 0],
                            'top-right': [0, 0],
                            bottom: [0, -38.1],
                            'bottom-left': [e, -1 * (24.6 + e)],
                            'bottom-right': [-e, -1 * (24.6 + e)],
                            left: [13.5, -24.6],
                            right: [-13.5, -24.6],
                          }
                        : this._offset
                    }
                    ;(this._popup = t),
                      this._lngLat && this._popup.setLngLat(this._lngLat),
                      (this._originalTabIndex = this._element.getAttribute(
                        'tabindex'
                      )),
                      this._originalTabIndex ||
                        this._element.setAttribute('tabindex', '0'),
                      this._element.addEventListener(
                        'keypress',
                        this._onKeyPress
                      )
                  }
                  return this
                }),
                (n.prototype._onKeyPress = function (t) {
                  var e = t.code,
                    r = t.charCode || t.keyCode
                  ;('Space' !== e && 'Enter' !== e && 32 !== r && 13 !== r) ||
                    this.togglePopup()
                }),
                (n.prototype._onMapClick = function (t) {
                  var e = t.originalEvent.target,
                    r = this._element
                  this._popup &&
                    (e === r || r.contains(e)) &&
                    this.togglePopup()
                }),
                (n.prototype.getPopup = function () {
                  return this._popup
                }),
                (n.prototype.togglePopup = function () {
                  var t = this._popup
                  return t
                    ? (t.isOpen() ? t.remove() : t.addTo(this._map), this)
                    : this
                }),
                (n.prototype._update = function (t) {
                  if (this._map) {
                    this._map.transform.renderWorldCopies &&
                      (this._lngLat = Hn(
                        this._lngLat,
                        this._pos,
                        this._map.transform
                      )),
                      (this._pos = this._map
                        .project(this._lngLat)
                        ._add(this._offset))
                    var e = ''
                    'viewport' === this._rotationAlignment ||
                    'auto' === this._rotationAlignment
                      ? (e = 'rotateZ(' + this._rotation + 'deg)')
                      : 'map' === this._rotationAlignment &&
                        (e =
                          'rotateZ(' +
                          (this._rotation - this._map.getBearing()) +
                          'deg)')
                    var n = ''
                    'viewport' === this._pitchAlignment ||
                    'auto' === this._pitchAlignment
                      ? (n = 'rotateX(0deg)')
                      : 'map' === this._pitchAlignment &&
                        (n = 'rotateX(' + this._map.getPitch() + 'deg)'),
                      (t && 'moveend' !== t.type) ||
                        (this._pos = this._pos.round()),
                      r.setTransform(
                        this._element,
                        Jn[this._anchor] +
                          ' translate(' +
                          this._pos.x +
                          'px, ' +
                          this._pos.y +
                          'px) ' +
                          n +
                          ' ' +
                          e
                      )
                  }
                }),
                (n.prototype.getOffset = function () {
                  return this._offset
                }),
                (n.prototype.setOffset = function (e) {
                  return (
                    (this._offset = t.Point.convert(e)), this._update(), this
                  )
                }),
                (n.prototype._onMove = function (e) {
                  ;(this._pos = e.point.sub(this._positionDelta)),
                    (this._lngLat = this._map.unproject(this._pos)),
                    this.setLngLat(this._lngLat),
                    (this._element.style.pointerEvents = 'none'),
                    'pending' === this._state &&
                      ((this._state = 'active'),
                      this.fire(new t.Event('dragstart'))),
                    this.fire(new t.Event('drag'))
                }),
                (n.prototype._onUp = function () {
                  ;(this._element.style.pointerEvents = 'auto'),
                    (this._positionDelta = null),
                    this._map.off('mousemove', this._onMove),
                    this._map.off('touchmove', this._onMove),
                    'active' === this._state &&
                      this.fire(new t.Event('dragend')),
                    (this._state = 'inactive')
                }),
                (n.prototype._addDragHandler = function (t) {
                  this._element.contains(t.originalEvent.target) &&
                    (t.preventDefault(),
                    (this._positionDelta = t.point
                      .sub(this._pos)
                      .add(this._offset)),
                    (this._state = 'pending'),
                    this._map.on('mousemove', this._onMove),
                    this._map.on('touchmove', this._onMove),
                    this._map.once('mouseup', this._onUp),
                    this._map.once('touchend', this._onUp))
                }),
                (n.prototype.setDraggable = function (t) {
                  return (
                    (this._draggable = !!t),
                    this._map &&
                      (t
                        ? (this._map.on('mousedown', this._addDragHandler),
                          this._map.on('touchstart', this._addDragHandler))
                        : (this._map.off('mousedown', this._addDragHandler),
                          this._map.off('touchstart', this._addDragHandler))),
                    this
                  )
                }),
                (n.prototype.isDraggable = function () {
                  return this._draggable
                }),
                (n.prototype.setRotation = function (t) {
                  return (this._rotation = t || 0), this._update(), this
                }),
                (n.prototype.getRotation = function () {
                  return this._rotation
                }),
                (n.prototype.setRotationAlignment = function (t) {
                  return (
                    (this._rotationAlignment = t || 'auto'),
                    this._update(),
                    this
                  )
                }),
                (n.prototype.getRotationAlignment = function () {
                  return this._rotationAlignment
                }),
                (n.prototype.setPitchAlignment = function (t) {
                  return (
                    (this._pitchAlignment =
                      t && 'auto' !== t ? t : this._rotationAlignment),
                    this._update(),
                    this
                  )
                }),
                (n.prototype.getPitchAlignment = function () {
                  return this._pitchAlignment
                }),
                n
              )
            })(t.Evented),
            ei = {
              positionOptions: {
                enableHighAccuracy: !1,
                maximumAge: 0,
                timeout: 6e3,
              },
              fitBoundsOptions: { maxZoom: 15 },
              trackUserLocation: !1,
              showAccuracyCircle: !0,
              showUserLocation: !0,
            },
            ri = 0,
            ni = !1,
            ii = (function (e) {
              function n(r) {
                e.call(this),
                  (this.options = t.extend({}, ei, r)),
                  t.bindAll(
                    [
                      '_onSuccess',
                      '_onError',
                      '_onZoom',
                      '_finish',
                      '_setupUI',
                      '_updateCamera',
                      '_updateMarker',
                    ],
                    this
                  )
              }
              return (
                e && (n.__proto__ = e),
                ((n.prototype = Object.create(
                  e && e.prototype
                )).constructor = n),
                (n.prototype.onAdd = function (e) {
                  var n
                  return (
                    (this._map = e),
                    (this._container = r.create(
                      'div',
                      'mapboxgl-ctrl mapboxgl-ctrl-group'
                    )),
                    (n = this._setupUI),
                    void 0 !== Qn
                      ? n(Qn)
                      : void 0 !== t.window.navigator.permissions
                      ? t.window.navigator.permissions
                          .query({ name: 'geolocation' })
                          .then(function (t) {
                            n((Qn = 'denied' !== t.state))
                          })
                      : n((Qn = !!t.window.navigator.geolocation)),
                    this._container
                  )
                }),
                (n.prototype.onRemove = function () {
                  void 0 !== this._geolocationWatchID &&
                    (t.window.navigator.geolocation.clearWatch(
                      this._geolocationWatchID
                    ),
                    (this._geolocationWatchID = void 0)),
                    this.options.showUserLocation &&
                      this._userLocationDotMarker &&
                      this._userLocationDotMarker.remove(),
                    this.options.showAccuracyCircle &&
                      this._accuracyCircleMarker &&
                      this._accuracyCircleMarker.remove(),
                    r.remove(this._container),
                    this._map.off('zoom', this._onZoom),
                    (this._map = void 0),
                    (ri = 0),
                    (ni = !1)
                }),
                (n.prototype._isOutOfMapMaxBounds = function (t) {
                  var e = this._map.getMaxBounds(),
                    r = t.coords
                  return (
                    e &&
                    (r.longitude < e.getWest() ||
                      r.longitude > e.getEast() ||
                      r.latitude < e.getSouth() ||
                      r.latitude > e.getNorth())
                  )
                }),
                (n.prototype._setErrorState = function () {
                  switch (this._watchState) {
                    case 'WAITING_ACTIVE':
                      ;(this._watchState = 'ACTIVE_ERROR'),
                        this._geolocateButton.classList.remove(
                          'mapboxgl-ctrl-geolocate-active'
                        ),
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-active-error'
                        )
                      break
                    case 'ACTIVE_LOCK':
                      ;(this._watchState = 'ACTIVE_ERROR'),
                        this._geolocateButton.classList.remove(
                          'mapboxgl-ctrl-geolocate-active'
                        ),
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-active-error'
                        ),
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-waiting'
                        )
                      break
                    case 'BACKGROUND':
                      ;(this._watchState = 'BACKGROUND_ERROR'),
                        this._geolocateButton.classList.remove(
                          'mapboxgl-ctrl-geolocate-background'
                        ),
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-background-error'
                        ),
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-waiting'
                        )
                  }
                }),
                (n.prototype._onSuccess = function (e) {
                  if (this._map) {
                    if (this._isOutOfMapMaxBounds(e))
                      return (
                        this._setErrorState(),
                        this.fire(new t.Event('outofmaxbounds', e)),
                        this._updateMarker(),
                        void this._finish()
                      )
                    if (this.options.trackUserLocation)
                      switch (
                        ((this._lastKnownPosition = e), this._watchState)
                      ) {
                        case 'WAITING_ACTIVE':
                        case 'ACTIVE_LOCK':
                        case 'ACTIVE_ERROR':
                          ;(this._watchState = 'ACTIVE_LOCK'),
                            this._geolocateButton.classList.remove(
                              'mapboxgl-ctrl-geolocate-waiting'
                            ),
                            this._geolocateButton.classList.remove(
                              'mapboxgl-ctrl-geolocate-active-error'
                            ),
                            this._geolocateButton.classList.add(
                              'mapboxgl-ctrl-geolocate-active'
                            )
                          break
                        case 'BACKGROUND':
                        case 'BACKGROUND_ERROR':
                          ;(this._watchState = 'BACKGROUND'),
                            this._geolocateButton.classList.remove(
                              'mapboxgl-ctrl-geolocate-waiting'
                            ),
                            this._geolocateButton.classList.remove(
                              'mapboxgl-ctrl-geolocate-background-error'
                            ),
                            this._geolocateButton.classList.add(
                              'mapboxgl-ctrl-geolocate-background'
                            )
                      }
                    this.options.showUserLocation &&
                      'OFF' !== this._watchState &&
                      this._updateMarker(e),
                      (this.options.trackUserLocation &&
                        'ACTIVE_LOCK' !== this._watchState) ||
                        this._updateCamera(e),
                      this.options.showUserLocation &&
                        this._dotElement.classList.remove(
                          'mapboxgl-user-location-dot-stale'
                        ),
                      this.fire(new t.Event('geolocate', e)),
                      this._finish()
                  }
                }),
                (n.prototype._updateCamera = function (e) {
                  var r = new t.LngLat(e.coords.longitude, e.coords.latitude),
                    n = e.coords.accuracy,
                    i = this._map.getBearing(),
                    o = t.extend({ bearing: i }, this.options.fitBoundsOptions)
                  this._map.fitBounds(r.toBounds(n), o, { geolocateSource: !0 })
                }),
                (n.prototype._updateMarker = function (e) {
                  if (e) {
                    var r = new t.LngLat(e.coords.longitude, e.coords.latitude)
                    this._accuracyCircleMarker.setLngLat(r).addTo(this._map),
                      this._userLocationDotMarker.setLngLat(r).addTo(this._map),
                      (this._accuracy = e.coords.accuracy),
                      this.options.showUserLocation &&
                        this.options.showAccuracyCircle &&
                        this._updateCircleRadius()
                  } else
                    this._userLocationDotMarker.remove(),
                      this._accuracyCircleMarker.remove()
                }),
                (n.prototype._updateCircleRadius = function () {
                  var t = this._map._container.clientHeight / 2,
                    e = this._map.unproject([0, t]),
                    r = this._map.unproject([1, t]),
                    n = e.distanceTo(r),
                    i = Math.ceil((2 * this._accuracy) / n)
                  ;(this._circleElement.style.width = i + 'px'),
                    (this._circleElement.style.height = i + 'px')
                }),
                (n.prototype._onZoom = function () {
                  this.options.showUserLocation &&
                    this.options.showAccuracyCircle &&
                    this._updateCircleRadius()
                }),
                (n.prototype._onError = function (e) {
                  if (this._map) {
                    if (this.options.trackUserLocation)
                      if (1 === e.code) {
                        ;(this._watchState = 'OFF'),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-waiting'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-active'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-active-error'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-background'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-background-error'
                          ),
                          (this._geolocateButton.disabled = !0)
                        var r = this._map._getUIString(
                          'GeolocateControl.LocationNotAvailable'
                        )
                        ;(this._geolocateButton.title = r),
                          this._geolocateButton.setAttribute('aria-label', r),
                          void 0 !== this._geolocationWatchID &&
                            this._clearWatch()
                      } else {
                        if (3 === e.code && ni) return
                        this._setErrorState()
                      }
                    'OFF' !== this._watchState &&
                      this.options.showUserLocation &&
                      this._dotElement.classList.add(
                        'mapboxgl-user-location-dot-stale'
                      ),
                      this.fire(new t.Event('error', e)),
                      this._finish()
                  }
                }),
                (n.prototype._finish = function () {
                  this._timeoutId && clearTimeout(this._timeoutId),
                    (this._timeoutId = void 0)
                }),
                (n.prototype._setupUI = function (e) {
                  var n = this
                  if (
                    (this._container.addEventListener('contextmenu', function (
                      t
                    ) {
                      return t.preventDefault()
                    }),
                    (this._geolocateButton = r.create(
                      'button',
                      'mapboxgl-ctrl-geolocate',
                      this._container
                    )),
                    r
                      .create(
                        'span',
                        'mapboxgl-ctrl-icon',
                        this._geolocateButton
                      )
                      .setAttribute('aria-hidden', !0),
                    (this._geolocateButton.type = 'button'),
                    !1 === e)
                  ) {
                    t.warnOnce(
                      'Geolocation support is not available so the GeolocateControl will be disabled.'
                    )
                    var i = this._map._getUIString(
                      'GeolocateControl.LocationNotAvailable'
                    )
                    ;(this._geolocateButton.disabled = !0),
                      (this._geolocateButton.title = i),
                      this._geolocateButton.setAttribute('aria-label', i)
                  } else {
                    var o = this._map._getUIString(
                      'GeolocateControl.FindMyLocation'
                    )
                    ;(this._geolocateButton.title = o),
                      this._geolocateButton.setAttribute('aria-label', o)
                  }
                  this.options.trackUserLocation &&
                    (this._geolocateButton.setAttribute(
                      'aria-pressed',
                      'false'
                    ),
                    (this._watchState = 'OFF')),
                    this.options.showUserLocation &&
                      ((this._dotElement = r.create(
                        'div',
                        'mapboxgl-user-location-dot'
                      )),
                      (this._userLocationDotMarker = new ti(this._dotElement)),
                      (this._circleElement = r.create(
                        'div',
                        'mapboxgl-user-location-accuracy-circle'
                      )),
                      (this._accuracyCircleMarker = new ti({
                        element: this._circleElement,
                        pitchAlignment: 'map',
                      })),
                      this.options.trackUserLocation &&
                        (this._watchState = 'OFF'),
                      this._map.on('zoom', this._onZoom)),
                    this._geolocateButton.addEventListener(
                      'click',
                      this.trigger.bind(this)
                    ),
                    (this._setup = !0),
                    this.options.trackUserLocation &&
                      this._map.on('movestart', function (e) {
                        e.geolocateSource ||
                          'ACTIVE_LOCK' !== n._watchState ||
                          (e.originalEvent &&
                            'resize' === e.originalEvent.type) ||
                          ((n._watchState = 'BACKGROUND'),
                          n._geolocateButton.classList.add(
                            'mapboxgl-ctrl-geolocate-background'
                          ),
                          n._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-active'
                          ),
                          n.fire(new t.Event('trackuserlocationend')))
                      })
                }),
                (n.prototype.trigger = function () {
                  if (!this._setup)
                    return (
                      t.warnOnce(
                        'Geolocate control triggered before added to a map'
                      ),
                      !1
                    )
                  if (this.options.trackUserLocation) {
                    switch (this._watchState) {
                      case 'OFF':
                        ;(this._watchState = 'WAITING_ACTIVE'),
                          this.fire(new t.Event('trackuserlocationstart'))
                        break
                      case 'WAITING_ACTIVE':
                      case 'ACTIVE_LOCK':
                      case 'ACTIVE_ERROR':
                      case 'BACKGROUND_ERROR':
                        ri--,
                          (ni = !1),
                          (this._watchState = 'OFF'),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-waiting'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-active'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-active-error'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-background'
                          ),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-background-error'
                          ),
                          this.fire(new t.Event('trackuserlocationend'))
                        break
                      case 'BACKGROUND':
                        ;(this._watchState = 'ACTIVE_LOCK'),
                          this._geolocateButton.classList.remove(
                            'mapboxgl-ctrl-geolocate-background'
                          ),
                          this._lastKnownPosition &&
                            this._updateCamera(this._lastKnownPosition),
                          this.fire(new t.Event('trackuserlocationstart'))
                    }
                    switch (this._watchState) {
                      case 'WAITING_ACTIVE':
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-waiting'
                        ),
                          this._geolocateButton.classList.add(
                            'mapboxgl-ctrl-geolocate-active'
                          )
                        break
                      case 'ACTIVE_LOCK':
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-active'
                        )
                        break
                      case 'ACTIVE_ERROR':
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-waiting'
                        ),
                          this._geolocateButton.classList.add(
                            'mapboxgl-ctrl-geolocate-active-error'
                          )
                        break
                      case 'BACKGROUND':
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-background'
                        )
                        break
                      case 'BACKGROUND_ERROR':
                        this._geolocateButton.classList.add(
                          'mapboxgl-ctrl-geolocate-waiting'
                        ),
                          this._geolocateButton.classList.add(
                            'mapboxgl-ctrl-geolocate-background-error'
                          )
                    }
                    if (
                      'OFF' === this._watchState &&
                      void 0 !== this._geolocationWatchID
                    )
                      this._clearWatch()
                    else if (void 0 === this._geolocationWatchID) {
                      var e
                      this._geolocateButton.classList.add(
                        'mapboxgl-ctrl-geolocate-waiting'
                      ),
                        this._geolocateButton.setAttribute(
                          'aria-pressed',
                          'true'
                        ),
                        ++ri > 1
                          ? ((e = { maximumAge: 6e5, timeout: 0 }), (ni = !0))
                          : ((e = this.options.positionOptions), (ni = !1)),
                        (this._geolocationWatchID = t.window.navigator.geolocation.watchPosition(
                          this._onSuccess,
                          this._onError,
                          e
                        ))
                    }
                  } else
                    t.window.navigator.geolocation.getCurrentPosition(
                      this._onSuccess,
                      this._onError,
                      this.options.positionOptions
                    ),
                      (this._timeoutId = setTimeout(this._finish, 1e4))
                  return !0
                }),
                (n.prototype._clearWatch = function () {
                  t.window.navigator.geolocation.clearWatch(
                    this._geolocationWatchID
                  ),
                    (this._geolocationWatchID = void 0),
                    this._geolocateButton.classList.remove(
                      'mapboxgl-ctrl-geolocate-waiting'
                    ),
                    this._geolocateButton.setAttribute('aria-pressed', 'false'),
                    this.options.showUserLocation && this._updateMarker(null)
                }),
                n
              )
            })(t.Evented),
            oi = { maxWidth: 100, unit: 'metric' },
            ai = function (e) {
              ;(this.options = t.extend({}, oi, e)),
                t.bindAll(['_onMove', 'setUnit'], this)
            }
          function si(t, e, r) {
            var n = (r && r.maxWidth) || 100,
              i = t._container.clientHeight / 2,
              o = t.unproject([0, i]),
              a = t.unproject([n, i]),
              s = o.distanceTo(a)
            if (r && 'imperial' === r.unit) {
              var l = 3.2808 * s
              l > 5280
                ? li(e, n, l / 5280, t._getUIString('ScaleControl.Miles'))
                : li(e, n, l, t._getUIString('ScaleControl.Feet'))
            } else r && 'nautical' === r.unit ? li(e, n, s / 1852, t._getUIString('ScaleControl.NauticalMiles')) : s >= 1e3 ? li(e, n, s / 1e3, t._getUIString('ScaleControl.Kilometers')) : li(e, n, s, t._getUIString('ScaleControl.Meters'))
          }
          function li(t, e, r, n) {
            var i,
              o,
              a,
              s =
                ((i = r),
                (o = Math.pow(10, ('' + Math.floor(i)).length - 1)) *
                  (a =
                    (a = i / o) >= 10
                      ? 10
                      : a >= 5
                      ? 5
                      : a >= 3
                      ? 3
                      : a >= 2
                      ? 2
                      : a >= 1
                      ? 1
                      : (function (t) {
                          var e = Math.pow(
                            10,
                            Math.ceil(-Math.log(t) / Math.LN10)
                          )
                          return Math.round(t * e) / e
                        })(a)))
            ;(t.style.width = e * (s / r) + 'px'),
              (t.innerHTML = s + '&nbsp;' + n)
          }
          ;(ai.prototype.getDefaultPosition = function () {
            return 'bottom-left'
          }),
            (ai.prototype._onMove = function () {
              si(this._map, this._container, this.options)
            }),
            (ai.prototype.onAdd = function (t) {
              return (
                (this._map = t),
                (this._container = r.create(
                  'div',
                  'mapboxgl-ctrl mapboxgl-ctrl-scale',
                  t.getContainer()
                )),
                this._map.on('move', this._onMove),
                this._onMove(),
                this._container
              )
            }),
            (ai.prototype.onRemove = function () {
              r.remove(this._container),
                this._map.off('move', this._onMove),
                (this._map = void 0)
            }),
            (ai.prototype.setUnit = function (t) {
              ;(this.options.unit = t),
                si(this._map, this._container, this.options)
            })
          var ui = function (e) {
            ;(this._fullscreen = !1),
              e &&
                e.container &&
                (e.container instanceof t.window.HTMLElement
                  ? (this._container = e.container)
                  : t.warnOnce(
                      "Full screen control 'container' must be a DOM element."
                    )),
              t.bindAll(['_onClickFullscreen', '_changeIcon'], this),
              'onfullscreenchange' in t.window.document
                ? (this._fullscreenchange = 'fullscreenchange')
                : 'onmozfullscreenchange' in t.window.document
                ? (this._fullscreenchange = 'mozfullscreenchange')
                : 'onwebkitfullscreenchange' in t.window.document
                ? (this._fullscreenchange = 'webkitfullscreenchange')
                : 'onmsfullscreenchange' in t.window.document &&
                  (this._fullscreenchange = 'MSFullscreenChange')
          }
          ;(ui.prototype.onAdd = function (e) {
            return (
              (this._map = e),
              this._container || (this._container = this._map.getContainer()),
              (this._controlContainer = r.create(
                'div',
                'mapboxgl-ctrl mapboxgl-ctrl-group'
              )),
              this._checkFullscreenSupport()
                ? this._setupUI()
                : ((this._controlContainer.style.display = 'none'),
                  t.warnOnce('This device does not support fullscreen mode.')),
              this._controlContainer
            )
          }),
            (ui.prototype.onRemove = function () {
              r.remove(this._controlContainer),
                (this._map = null),
                t.window.document.removeEventListener(
                  this._fullscreenchange,
                  this._changeIcon
                )
            }),
            (ui.prototype._checkFullscreenSupport = function () {
              return !!(
                t.window.document.fullscreenEnabled ||
                t.window.document.mozFullScreenEnabled ||
                t.window.document.msFullscreenEnabled ||
                t.window.document.webkitFullscreenEnabled
              )
            }),
            (ui.prototype._setupUI = function () {
              var e = (this._fullscreenButton = r.create(
                'button',
                'mapboxgl-ctrl-fullscreen',
                this._controlContainer
              ))
              r
                .create('span', 'mapboxgl-ctrl-icon', e)
                .setAttribute('aria-hidden', !0),
                (e.type = 'button'),
                this._updateTitle(),
                this._fullscreenButton.addEventListener(
                  'click',
                  this._onClickFullscreen
                ),
                t.window.document.addEventListener(
                  this._fullscreenchange,
                  this._changeIcon
                )
            }),
            (ui.prototype._updateTitle = function () {
              var t = this._getTitle()
              this._fullscreenButton.setAttribute('aria-label', t),
                (this._fullscreenButton.title = t)
            }),
            (ui.prototype._getTitle = function () {
              return this._map._getUIString(
                this._isFullscreen()
                  ? 'FullscreenControl.Exit'
                  : 'FullscreenControl.Enter'
              )
            }),
            (ui.prototype._isFullscreen = function () {
              return this._fullscreen
            }),
            (ui.prototype._changeIcon = function () {
              ;((t.window.document.fullscreenElement ||
                t.window.document.mozFullScreenElement ||
                t.window.document.webkitFullscreenElement ||
                t.window.document.msFullscreenElement) ===
                this._container) !==
                this._fullscreen &&
                ((this._fullscreen = !this._fullscreen),
                this._fullscreenButton.classList.toggle('mapboxgl-ctrl-shrink'),
                this._fullscreenButton.classList.toggle(
                  'mapboxgl-ctrl-fullscreen'
                ),
                this._updateTitle())
            }),
            (ui.prototype._onClickFullscreen = function () {
              this._isFullscreen()
                ? t.window.document.exitFullscreen
                  ? t.window.document.exitFullscreen()
                  : t.window.document.mozCancelFullScreen
                  ? t.window.document.mozCancelFullScreen()
                  : t.window.document.msExitFullscreen
                  ? t.window.document.msExitFullscreen()
                  : t.window.document.webkitCancelFullScreen &&
                    t.window.document.webkitCancelFullScreen()
                : this._container.requestFullscreen
                ? this._container.requestFullscreen()
                : this._container.mozRequestFullScreen
                ? this._container.mozRequestFullScreen()
                : this._container.msRequestFullscreen
                ? this._container.msRequestFullscreen()
                : this._container.webkitRequestFullscreen &&
                  this._container.webkitRequestFullscreen()
            })
          var ci = {
              closeButton: !0,
              closeOnClick: !0,
              className: '',
              maxWidth: '240px',
            },
            pi = (function (e) {
              function n(r) {
                e.call(this),
                  (this.options = t.extend(Object.create(ci), r)),
                  t.bindAll(['_update', '_onClose', 'remove'], this)
              }
              return (
                e && (n.__proto__ = e),
                ((n.prototype = Object.create(
                  e && e.prototype
                )).constructor = n),
                (n.prototype.addTo = function (e) {
                  var r = this
                  return (
                    (this._map = e),
                    this.options.closeOnClick &&
                      this._map.on('click', this._onClose),
                    this.options.closeOnMove &&
                      this._map.on('move', this._onClose),
                    this._map.on('remove', this.remove),
                    this._update(),
                    this._trackPointer
                      ? (this._map.on('mousemove', function (t) {
                          r._update(t.point)
                        }),
                        this._map.on('mouseup', function (t) {
                          r._update(t.point)
                        }),
                        this._container &&
                          this._container.classList.add(
                            'mapboxgl-popup-track-pointer'
                          ),
                        this._map._canvasContainer.classList.add(
                          'mapboxgl-track-pointer'
                        ))
                      : this._map.on('move', this._update),
                    this.fire(new t.Event('open')),
                    this
                  )
                }),
                (n.prototype.isOpen = function () {
                  return !!this._map
                }),
                (n.prototype.remove = function () {
                  return (
                    this._content && r.remove(this._content),
                    this._container &&
                      (r.remove(this._container), delete this._container),
                    this._map &&
                      (this._map.off('move', this._update),
                      this._map.off('move', this._onClose),
                      this._map.off('click', this._onClose),
                      this._map.off('remove', this.remove),
                      this._map.off('mousemove'),
                      delete this._map),
                    this.fire(new t.Event('close')),
                    this
                  )
                }),
                (n.prototype.getLngLat = function () {
                  return this._lngLat
                }),
                (n.prototype.setLngLat = function (e) {
                  return (
                    (this._lngLat = t.LngLat.convert(e)),
                    (this._pos = null),
                    (this._trackPointer = !1),
                    this._update(),
                    this._map &&
                      (this._map.on('move', this._update),
                      this._map.off('mousemove'),
                      this._container &&
                        this._container.classList.remove(
                          'mapboxgl-popup-track-pointer'
                        ),
                      this._map._canvasContainer.classList.remove(
                        'mapboxgl-track-pointer'
                      )),
                    this
                  )
                }),
                (n.prototype.trackPointer = function () {
                  var t = this
                  return (
                    (this._trackPointer = !0),
                    (this._pos = null),
                    this._update(),
                    this._map &&
                      (this._map.off('move', this._update),
                      this._map.on('mousemove', function (e) {
                        t._update(e.point)
                      }),
                      this._map.on('drag', function (e) {
                        t._update(e.point)
                      }),
                      this._container &&
                        this._container.classList.add(
                          'mapboxgl-popup-track-pointer'
                        ),
                      this._map._canvasContainer.classList.add(
                        'mapboxgl-track-pointer'
                      )),
                    this
                  )
                }),
                (n.prototype.getElement = function () {
                  return this._container
                }),
                (n.prototype.setText = function (e) {
                  return this.setDOMContent(t.window.document.createTextNode(e))
                }),
                (n.prototype.setHTML = function (e) {
                  var r,
                    n = t.window.document.createDocumentFragment(),
                    i = t.window.document.createElement('body')
                  for (i.innerHTML = e; (r = i.firstChild); ) n.appendChild(r)
                  return this.setDOMContent(n)
                }),
                (n.prototype.getMaxWidth = function () {
                  return this._container && this._container.style.maxWidth
                }),
                (n.prototype.setMaxWidth = function (t) {
                  return (this.options.maxWidth = t), this._update(), this
                }),
                (n.prototype.setDOMContent = function (t) {
                  return (
                    this._createContent(),
                    this._content.appendChild(t),
                    this._update(),
                    this
                  )
                }),
                (n.prototype.addClassName = function (t) {
                  this._container && this._container.classList.add(t)
                }),
                (n.prototype.removeClassName = function (t) {
                  this._container && this._container.classList.remove(t)
                }),
                (n.prototype.toggleClassName = function (t) {
                  if (this._container)
                    return this._container.classList.toggle(t)
                }),
                (n.prototype._createContent = function () {
                  this._content && r.remove(this._content),
                    (this._content = r.create(
                      'div',
                      'mapboxgl-popup-content',
                      this._container
                    )),
                    this.options.closeButton &&
                      ((this._closeButton = r.create(
                        'button',
                        'mapboxgl-popup-close-button',
                        this._content
                      )),
                      (this._closeButton.type = 'button'),
                      this._closeButton.setAttribute(
                        'aria-label',
                        'Close popup'
                      ),
                      (this._closeButton.innerHTML = '&#215;'),
                      this._closeButton.addEventListener(
                        'click',
                        this._onClose
                      ))
                }),
                (n.prototype._update = function (e) {
                  var n = this
                  if (
                    this._map &&
                    (this._lngLat || this._trackPointer) &&
                    this._content &&
                    (this._container ||
                      ((this._container = r.create(
                        'div',
                        'mapboxgl-popup',
                        this._map.getContainer()
                      )),
                      (this._tip = r.create(
                        'div',
                        'mapboxgl-popup-tip',
                        this._container
                      )),
                      this._container.appendChild(this._content),
                      this.options.className &&
                        this.options.className.split(' ').forEach(function (t) {
                          return n._container.classList.add(t)
                        }),
                      this._trackPointer &&
                        this._container.classList.add(
                          'mapboxgl-popup-track-pointer'
                        )),
                    this.options.maxWidth &&
                      this._container.style.maxWidth !==
                        this.options.maxWidth &&
                      (this._container.style.maxWidth = this.options.maxWidth),
                    this._map.transform.renderWorldCopies &&
                      !this._trackPointer &&
                      (this._lngLat = Hn(
                        this._lngLat,
                        this._pos,
                        this._map.transform
                      )),
                    !this._trackPointer || e)
                  ) {
                    var i = (this._pos =
                        this._trackPointer && e
                          ? e
                          : this._map.project(this._lngLat)),
                      o = this.options.anchor,
                      a = (function e(r) {
                        if (r) {
                          if ('number' == typeof r) {
                            var n = Math.round(Math.sqrt(0.5 * Math.pow(r, 2)))
                            return {
                              center: new t.Point(0, 0),
                              top: new t.Point(0, r),
                              'top-left': new t.Point(n, n),
                              'top-right': new t.Point(-n, n),
                              bottom: new t.Point(0, -r),
                              'bottom-left': new t.Point(n, -n),
                              'bottom-right': new t.Point(-n, -n),
                              left: new t.Point(r, 0),
                              right: new t.Point(-r, 0),
                            }
                          }
                          if (r instanceof t.Point || Array.isArray(r)) {
                            var i = t.Point.convert(r)
                            return {
                              center: i,
                              top: i,
                              'top-left': i,
                              'top-right': i,
                              bottom: i,
                              'bottom-left': i,
                              'bottom-right': i,
                              left: i,
                              right: i,
                            }
                          }
                          return {
                            center: t.Point.convert(r.center || [0, 0]),
                            top: t.Point.convert(r.top || [0, 0]),
                            'top-left': t.Point.convert(
                              r['top-left'] || [0, 0]
                            ),
                            'top-right': t.Point.convert(
                              r['top-right'] || [0, 0]
                            ),
                            bottom: t.Point.convert(r.bottom || [0, 0]),
                            'bottom-left': t.Point.convert(
                              r['bottom-left'] || [0, 0]
                            ),
                            'bottom-right': t.Point.convert(
                              r['bottom-right'] || [0, 0]
                            ),
                            left: t.Point.convert(r.left || [0, 0]),
                            right: t.Point.convert(r.right || [0, 0]),
                          }
                        }
                        return e(new t.Point(0, 0))
                      })(this.options.offset)
                    if (!o) {
                      var s,
                        l = this._container.offsetWidth,
                        u = this._container.offsetHeight
                      ;(s =
                        i.y + a.bottom.y < u
                          ? ['top']
                          : i.y > this._map.transform.height - u
                          ? ['bottom']
                          : []),
                        i.x < l / 2
                          ? s.push('left')
                          : i.x > this._map.transform.width - l / 2 &&
                            s.push('right'),
                        (o = 0 === s.length ? 'bottom' : s.join('-'))
                    }
                    var c = i.add(a[o]).round()
                    r.setTransform(
                      this._container,
                      Jn[o] + ' translate(' + c.x + 'px,' + c.y + 'px)'
                    ),
                      Yn(this._container, o, 'popup')
                  }
                }),
                (n.prototype._onClose = function () {
                  this.remove()
                }),
                n
              )
            })(t.Evented),
            hi = {
              version: t.version,
              supported: e,
              setRTLTextPlugin: t.setRTLTextPlugin,
              getRTLTextPluginStatus: t.getRTLTextPluginStatus,
              Map: Zn,
              NavigationControl: Wn,
              GeolocateControl: ii,
              AttributionControl: Bn,
              ScaleControl: ai,
              FullscreenControl: ui,
              Popup: pi,
              Marker: ti,
              Style: Ne,
              LngLat: t.LngLat,
              LngLatBounds: t.LngLatBounds,
              Point: t.Point,
              MercatorCoordinate: t.MercatorCoordinate,
              Evented: t.Evented,
              config: t.config,
              get accessToken() {
                return t.config.ACCESS_TOKEN
              },
              set accessToken(e) {
                t.config.ACCESS_TOKEN = e
              },
              get baseApiUrl() {
                return t.config.API_URL
              },
              set baseApiUrl(e) {
                t.config.API_URL = e
              },
              get workerCount() {
                return Ot.workerCount
              },
              set workerCount(t) {
                Ot.workerCount = t
              },
              get maxParallelImageRequests() {
                return t.config.MAX_PARALLEL_IMAGE_REQUESTS
              },
              set maxParallelImageRequests(e) {
                t.config.MAX_PARALLEL_IMAGE_REQUESTS = e
              },
              clearStorage: function (e) {
                t.clearTileCache(e)
              },
              workerUrl: '',
            }
          return hi
        }),
        r
      )
    })()
  },
  function (t, e, r) {
    ;(function (e) {
      t.exports = (function t(e, r, n) {
        function i(a, s) {
          if (!r[a]) {
            if (!e[a]) {
              if (o) return o(a, !0)
              var l = new Error("Cannot find module '" + a + "'")
              throw ((l.code = 'MODULE_NOT_FOUND'), l)
            }
            var u = (r[a] = { exports: {} })
            e[a][0].call(
              u.exports,
              function (t) {
                return i(e[a][1][t] || t)
              },
              u,
              u.exports,
              t,
              e,
              r,
              n
            )
          }
          return r[a].exports
        }
        for (var o = !1, a = 0; a < n.length; a++) i(n[a])
        return i
      })(
        {
          1: [
            function (t, e, r) {
              'use strict'
              var n = t('./src/setup'),
                i = t('./src/options'),
                o = t('./src/api'),
                a = t('./src/constants')
              ;(e.exports = function (t) {
                !(function (t, e) {
                  var r = { options: (t = i(t)) }
                  ;(e = o(r, e)), (r.api = e)
                  var s = n(r)
                  ;(e.onAdd = s.onAdd),
                    (e.onRemove = s.onRemove),
                    (e.types = a.types),
                    (e.options = t)
                })(t, this)
              }),
                (e.exports.modes = t('./src/modes'))
            },
            {
              './src/api': 22,
              './src/constants': 23,
              './src/modes': 56,
              './src/options': 61,
              './src/setup': 63,
            },
          ],
          2: [
            function (t, e, r) {
              function n(t) {
                if (!(this instanceof n)) return new n(t)
                ;(this._bbox = t || [1 / 0, 1 / 0, -1 / 0, -1 / 0]),
                  (this._valid = !!t)
              }
              ;(e.exports = n),
                (n.prototype.include = function (t) {
                  return (
                    (this._valid = !0),
                    (this._bbox[0] = Math.min(this._bbox[0], t[0])),
                    (this._bbox[1] = Math.min(this._bbox[1], t[1])),
                    (this._bbox[2] = Math.max(this._bbox[2], t[0])),
                    (this._bbox[3] = Math.max(this._bbox[3], t[1])),
                    this
                  )
                }),
                (n.prototype.equals = function (t) {
                  var e
                  return (
                    (e = t instanceof n ? t.bbox() : t),
                    this._bbox[0] == e[0] &&
                      this._bbox[1] == e[1] &&
                      this._bbox[2] == e[2] &&
                      this._bbox[3] == e[3]
                  )
                }),
                (n.prototype.center = function (t) {
                  return this._valid
                    ? [
                        (this._bbox[0] + this._bbox[2]) / 2,
                        (this._bbox[1] + this._bbox[3]) / 2,
                      ]
                    : null
                }),
                (n.prototype.union = function (t) {
                  var e
                  return (
                    (this._valid = !0),
                    (e = t instanceof n ? t.bbox() : t),
                    (this._bbox[0] = Math.min(this._bbox[0], e[0])),
                    (this._bbox[1] = Math.min(this._bbox[1], e[1])),
                    (this._bbox[2] = Math.max(this._bbox[2], e[2])),
                    (this._bbox[3] = Math.max(this._bbox[3], e[3])),
                    this
                  )
                }),
                (n.prototype.bbox = function () {
                  return this._valid ? this._bbox : null
                }),
                (n.prototype.contains = function (t) {
                  if (!t) return this._fastContains()
                  if (!this._valid) return null
                  var e = t[0],
                    r = t[1]
                  return (
                    this._bbox[0] <= e &&
                    this._bbox[1] <= r &&
                    this._bbox[2] >= e &&
                    this._bbox[3] >= r
                  )
                }),
                (n.prototype.intersect = function (t) {
                  return this._valid
                    ? ((e = t instanceof n ? t.bbox() : t),
                      !(
                        this._bbox[0] > e[2] ||
                        this._bbox[2] < e[0] ||
                        this._bbox[3] < e[1] ||
                        this._bbox[1] > e[3]
                      ))
                    : null
                  var e
                }),
                (n.prototype._fastContains = function () {
                  if (!this._valid) return new Function('return null;')
                  var t =
                    'return ' +
                    this._bbox[0] +
                    '<= ll[0] &&' +
                    this._bbox[1] +
                    '<= ll[1] &&' +
                    this._bbox[2] +
                    '>= ll[0] &&' +
                    this._bbox[3] +
                    '>= ll[1]'
                  return new Function('ll', t)
                }),
                (n.prototype.polygon = function () {
                  return this._valid
                    ? {
                        type: 'Polygon',
                        coordinates: [
                          [
                            [this._bbox[0], this._bbox[1]],
                            [this._bbox[2], this._bbox[1]],
                            [this._bbox[2], this._bbox[3]],
                            [this._bbox[0], this._bbox[3]],
                            [this._bbox[0], this._bbox[1]],
                          ],
                        ],
                      }
                    : null
                })
            },
            {},
          ],
          3: [
            function (t, e, r) {
              function n(t) {
                var e = 0
                if (t && t.length > 0) {
                  e += Math.abs(i(t[0]))
                  for (var r = 1; r < t.length; r++) e -= Math.abs(i(t[r]))
                }
                return e
              }
              function i(t) {
                var e,
                  r,
                  n,
                  i,
                  s,
                  l,
                  u = 0,
                  c = t.length
                if (c > 2) {
                  for (l = 0; l < c; l++)
                    l === c - 2
                      ? ((n = c - 2), (i = c - 1), (s = 0))
                      : l === c - 1
                      ? ((n = c - 1), (i = 0), (s = 1))
                      : ((n = l), (i = l + 1), (s = l + 2)),
                      (e = t[n]),
                      (r = t[i]),
                      (u += (o(t[s][0]) - o(e[0])) * Math.sin(o(r[1])))
                  u = (u * a.RADIUS * a.RADIUS) / 2
                }
                return u
              }
              function o(t) {
                return (t * Math.PI) / 180
              }
              var a = t('wgs84')
              ;(e.exports.geometry = function t(e) {
                var r,
                  i = 0
                switch (e.type) {
                  case 'Polygon':
                    return n(e.coordinates)
                  case 'MultiPolygon':
                    for (r = 0; r < e.coordinates.length; r++)
                      i += n(e.coordinates[r])
                    return i
                  case 'Point':
                  case 'MultiPoint':
                  case 'LineString':
                  case 'MultiLineString':
                    return 0
                  case 'GeometryCollection':
                    for (r = 0; r < e.geometries.length; r++)
                      i += t(e.geometries[r])
                    return i
                }
              }),
                (e.exports.ring = i)
            },
            { wgs84: 20 },
          ],
          4: [
            function (t, e, r) {
              e.exports = function (t) {
                return (function t(e) {
                  return Array.isArray(e) && e.length && 'number' == typeof e[0]
                    ? [e]
                    : e.reduce(function (e, r) {
                        return Array.isArray(r) && Array.isArray(r[0])
                          ? e.concat(t(r))
                          : (e.push(r), e)
                      }, [])
                })(t)
              }
            },
            {},
          ],
          5: [
            function (t, e, r) {
              var n = t('@mapbox/geojson-normalize'),
                i = t('geojson-flatten'),
                o = t('./flatten')
              e.exports = function (t) {
                if (!t) return []
                var e = []
                return (
                  i(n(t)).features.forEach(function (t) {
                    t.geometry && (e = e.concat(o(t.geometry.coordinates)))
                  }),
                  e
                )
              }
            },
            {
              './flatten': 4,
              '@mapbox/geojson-normalize': 7,
              'geojson-flatten': 13,
            },
          ],
          6: [
            function (t, e, r) {
              function n(t) {
                for (var e = a(), r = i(t), n = 0; n < r.length; n++)
                  e.include(r[n])
                return e
              }
              var i = t('@mapbox/geojson-coords'),
                o = t('traverse'),
                a = t('@mapbox/extent'),
                s = {
                  features: ['FeatureCollection'],
                  coordinates: [
                    'Point',
                    'MultiPoint',
                    'LineString',
                    'MultiLineString',
                    'Polygon',
                    'MultiPolygon',
                  ],
                  geometry: ['Feature'],
                  geometries: ['GeometryCollection'],
                },
                l = Object.keys(s)
              ;(e.exports = function (t) {
                return n(t).bbox()
              }),
                (e.exports.polygon = function (t) {
                  return n(t).polygon()
                }),
                (e.exports.bboxify = function (t) {
                  return o(t).map(function (t) {
                    t &&
                      l.some(function (e) {
                        return !!t[e] && -1 !== s[e].indexOf(t.type)
                      }) &&
                      ((t.bbox = n(t).bbox()), this.update(t))
                  })
                })
            },
            { '@mapbox/extent': 2, '@mapbox/geojson-coords': 5, traverse: 19 },
          ],
          7: [
            function (t, e, r) {
              e.exports = function (t) {
                if (!t || !t.type) return null
                var e = n[t.type]
                return e
                  ? 'geometry' === e
                    ? {
                        type: 'FeatureCollection',
                        features: [
                          { type: 'Feature', properties: {}, geometry: t },
                        ],
                      }
                    : 'feature' === e
                    ? { type: 'FeatureCollection', features: [t] }
                    : 'featurecollection' === e
                    ? t
                    : void 0
                  : null
              }
              var n = {
                Point: 'geometry',
                MultiPoint: 'geometry',
                LineString: 'geometry',
                MultiLineString: 'geometry',
                Polygon: 'geometry',
                MultiPolygon: 'geometry',
                GeometryCollection: 'geometry',
                Feature: 'feature',
                FeatureCollection: 'featurecollection',
              }
            },
            {},
          ],
          8: [
            function (t, e, r) {
              var n = t('jsonlint-lines'),
                i = t('./object')
              e.exports.hint = function (t, e) {
                var r,
                  o = []
                if ('object' == typeof t) r = t
                else {
                  if ('string' != typeof t)
                    return [
                      {
                        message: 'Expected string or object as input',
                        line: 0,
                      },
                    ]
                  try {
                    r = n.parse(t)
                  } catch (t) {
                    var a = t.message.match(/line (\d+)/)
                    return [
                      {
                        line: parseInt(a[1], 10) - 1,
                        message: t.message,
                        error: t,
                      },
                    ]
                  }
                }
                return o.concat(i.hint(r, e))
              }
            },
            { './object': 9, 'jsonlint-lines': 15 },
          ],
          9: [
            function (t, e, r) {
              var n = t('./rhr')
              e.exports.hint = function (t, e) {
                function r(t) {
                  if (
                    ((e && !1 === e.noDuplicateMembers) ||
                      !t.__duplicateProperties__ ||
                      p.push({
                        message:
                          'An object contained duplicate members, making parsing ambigous: ' +
                          t.__duplicateProperties__.join(', '),
                        line: t.__line__,
                      }),
                    !o(t, 'type', 'string'))
                  )
                    if (m[t.type]) t && m[t.type](t)
                    else {
                      var r = y[t.type.toLowerCase()]
                      void 0 !== r
                        ? p.push({
                            message:
                              'Expected ' +
                              r +
                              ' but got ' +
                              t.type +
                              ' (case sensitive)',
                            line: t.__line__,
                          })
                        : p.push({
                            message: 'The type ' + t.type + ' is unknown',
                            line: t.__line__,
                          })
                    }
                }
                function i(t, e) {
                  return t.every(function (t) {
                    return null !== t && typeof t === e
                  })
                }
                function o(t, e, r) {
                  if (void 0 === t[e])
                    return p.push({
                      message: '"' + e + '" member required',
                      line: t.__line__,
                    })
                  if ('array' === r) {
                    if (!Array.isArray(t[e]))
                      return p.push({
                        message:
                          '"' +
                          e +
                          '" member should be an array, but is an ' +
                          typeof t[e] +
                          ' instead',
                        line: t.__line__,
                      })
                  } else {
                    if (
                      'object' === r &&
                      t[e] &&
                      'Object' !== t[e].constructor.name
                    )
                      return p.push({
                        message:
                          '"' +
                          e +
                          '" member should be ' +
                          r +
                          ', but is an ' +
                          t[e].constructor.name +
                          ' instead',
                        line: t.__line__,
                      })
                    if (r && typeof t[e] !== r)
                      return p.push({
                        message:
                          '"' +
                          e +
                          '" member should be ' +
                          r +
                          ', but is an ' +
                          typeof t[e] +
                          ' instead',
                        line: t.__line__,
                      })
                  }
                }
                function a(t, r) {
                  if (!Array.isArray(t))
                    return p.push({
                      message:
                        'position should be an array, is a ' +
                        typeof t +
                        ' instead',
                      line: t.__line__ || r,
                    })
                  if (t.length < 2)
                    return p.push({
                      message: 'position must have 2 or more elements',
                      line: t.__line__ || r,
                    })
                  if (t.length > 3)
                    return p.push({
                      message: 'position should not have more than 3 elements',
                      level: 'message',
                      line: t.__line__ || r,
                    })
                  if (!i(t, 'number'))
                    return p.push({
                      message: 'each element in a position must be a number',
                      line: t.__line__ || r,
                    })
                  if (e && e.precisionWarning) {
                    if (h === f)
                      return (
                        (h += 1),
                        p.push({
                          message:
                            "truncated warnings: we've encountered coordinate precision warning " +
                            f +
                            ' times, no more warnings will be reported',
                          level: 'message',
                          line: t.__line__ || r,
                        })
                      )
                    h < f &&
                      t.forEach(function (e) {
                        var n = 0,
                          i = String(e).split('.')[1]
                        if ((void 0 !== i && (n = i.length), n > d))
                          return (
                            (h += 1),
                            p.push({
                              message:
                                'precision of coordinates should be reduced',
                              level: 'message',
                              line: t.__line__ || r,
                            })
                          )
                      })
                  }
                }
                function s(t, e, r, n) {
                  if (
                    (void 0 === n && void 0 !== t.__line__ && (n = t.__line__),
                    0 === r)
                  )
                    return a(t, n)
                  if (1 === r && e)
                    if ('LinearRing' === e) {
                      if (!Array.isArray(t[t.length - 1]))
                        return (
                          p.push({
                            message:
                              'a number was found where a coordinate array should have been found: this needs to be nested more deeply',
                            line: n,
                          }),
                          !0
                        )
                      if (
                        (t.length < 4 &&
                          p.push({
                            message:
                              'a LinearRing of coordinates needs to have four or more positions',
                            line: n,
                          }),
                        t.length &&
                          (t[t.length - 1].length !== t[0].length ||
                            !t[t.length - 1].every(function (e, r) {
                              return t[0][r] === e
                            })))
                      )
                        return (
                          p.push({
                            message:
                              'the first and last positions in a LinearRing of coordinates must be the same',
                            line: n,
                          }),
                          !0
                        )
                    } else if ('Line' === e && t.length < 2)
                      return p.push({
                        message:
                          'a line needs to have two or more coordinates to be valid',
                        line: n,
                      })
                  if (Array.isArray(t))
                    return t
                      .map(function (t) {
                        return s(t, e, r - 1, t.__line__ || n)
                      })
                      .some(function (t) {
                        return t
                      })
                  p.push({
                    message:
                      'a number was found where a coordinate array should have been found: this needs to be nested more deeply',
                    line: n,
                  })
                }
                function l(t) {
                  t.crs &&
                    ('object' == typeof t.crs &&
                    t.crs.properties &&
                    'urn:ogc:def:crs:OGC:1.3:CRS84' === t.crs.properties.name
                      ? p.push({
                          message:
                            'old-style crs member is not recommended, this object is equivalent to the default and should be removed',
                          line: t.__line__,
                        })
                      : p.push({
                          message: 'old-style crs member is not recommended',
                          line: t.__line__,
                        }))
                }
                function u(t) {
                  if (t.bbox)
                    return Array.isArray(t.bbox)
                      ? (i(t.bbox, 'number') ||
                          p.push({
                            message:
                              'each element in a bbox member must be a number',
                            line: t.bbox.__line__,
                          }),
                        4 !== t.bbox.length &&
                          6 !== t.bbox.length &&
                          p.push({
                            message:
                              'bbox must contain 4 elements (for 2D) or 6 elements (for 3D)',
                            line: t.bbox.__line__,
                          }),
                        p.length)
                      : void p.push({
                          message:
                            'bbox member must be an array of numbers, but is a ' +
                            typeof t.bbox,
                          line: t.__line__,
                        })
                }
                function c(t) {
                  l(t),
                    u(t),
                    void 0 !== t.id &&
                      'string' != typeof t.id &&
                      'number' != typeof t.id &&
                      p.push({
                        message:
                          'Feature "id" member must have a string or number value',
                        line: t.__line__,
                      }),
                    void 0 !== t.features &&
                      p.push({
                        message:
                          'Feature object cannot contain a "features" member',
                        line: t.__line__,
                      }),
                    void 0 !== t.coordinates &&
                      p.push({
                        message:
                          'Feature object cannot contain a "coordinates" member',
                        line: t.__line__,
                      }),
                    'Feature' !== t.type &&
                      p.push({
                        message:
                          'GeoJSON features must have a type=feature member',
                        line: t.__line__,
                      }),
                    o(t, 'properties', 'object'),
                    o(t, 'geometry', 'object') || (t.geometry && r(t.geometry))
                }
                var p = [],
                  h = 0,
                  f = 10,
                  d = 6,
                  m = {
                    Point: function (t) {
                      l(t),
                        u(t),
                        (function (t) {
                          void 0 !== t.properties &&
                            p.push({
                              message:
                                'geometry object cannot contain a "properties" member',
                              line: t.__line__,
                            }),
                            void 0 !== t.geometry &&
                              p.push({
                                message:
                                  'geometry object cannot contain a "geometry" member',
                                line: t.__line__,
                              }),
                            void 0 !== t.features &&
                              p.push({
                                message:
                                  'geometry object cannot contain a "features" member',
                                line: t.__line__,
                              })
                        })(t),
                        o(t, 'coordinates', 'array') || a(t.coordinates)
                    },
                    Feature: c,
                    MultiPoint: function (t) {
                      l(t),
                        u(t),
                        o(t, 'coordinates', 'array') || s(t.coordinates, '', 1)
                    },
                    LineString: function (t) {
                      l(t),
                        u(t),
                        o(t, 'coordinates', 'array') ||
                          s(t.coordinates, 'Line', 1)
                    },
                    MultiLineString: function (t) {
                      l(t),
                        u(t),
                        o(t, 'coordinates', 'array') ||
                          s(t.coordinates, 'Line', 2)
                    },
                    FeatureCollection: function (t) {
                      if (
                        (l(t),
                        u(t),
                        void 0 !== t.properties &&
                          p.push({
                            message:
                              'FeatureCollection object cannot contain a "properties" member',
                            line: t.__line__,
                          }),
                        void 0 !== t.coordinates &&
                          p.push({
                            message:
                              'FeatureCollection object cannot contain a "coordinates" member',
                            line: t.__line__,
                          }),
                        !o(t, 'features', 'array'))
                      ) {
                        if (!i(t.features, 'object'))
                          return p.push({
                            message: 'Every feature must be an object',
                            line: t.__line__,
                          })
                        t.features.forEach(c)
                      }
                    },
                    GeometryCollection: function (t) {
                      l(t),
                        u(t),
                        o(t, 'geometries', 'array') ||
                          (i(t.geometries, 'object') ||
                            p.push({
                              message:
                                'The geometries array in a GeometryCollection must contain only geometry objects',
                              line: t.__line__,
                            }),
                          1 === t.geometries.length &&
                            p.push({
                              message:
                                'GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type',
                              line: t.geometries.__line__,
                            }),
                          t.geometries.forEach(function (e) {
                            e &&
                              ('GeometryCollection' === e.type &&
                                p.push({
                                  message:
                                    'GeometryCollection should avoid nested geometry collections',
                                  line: t.geometries.__line__,
                                }),
                              r(e))
                          }))
                    },
                    Polygon: function (t) {
                      l(t),
                        u(t),
                        o(t, 'coordinates', 'array') ||
                          s(t.coordinates, 'LinearRing', 2) ||
                          n(t, p)
                    },
                    MultiPolygon: function (t) {
                      l(t),
                        u(t),
                        o(t, 'coordinates', 'array') ||
                          s(t.coordinates, 'LinearRing', 3) ||
                          n(t, p)
                    },
                  },
                  y = Object.keys(m).reduce(function (t, e) {
                    return (t[e.toLowerCase()] = e), t
                  }, {})
                return 'object' != typeof t || null == t
                  ? (p.push({
                      message:
                        'The root of a GeoJSON object must be an object.',
                      line: 0,
                    }),
                    p)
                  : (r(t),
                    p.forEach(function (t) {
                      ;({}.hasOwnProperty.call(t, 'line') &&
                        void 0 === t.line &&
                        delete t.line)
                    }),
                    p)
              }
            },
            { './rhr': 10 },
          ],
          10: [
            function (t, e, r) {
              function n(t) {
                return (t * Math.PI) / 180
              }
              function i(t) {
                var e = 0
                if (t.length > 2)
                  for (var r, i, o = 0; o < t.length - 1; o++)
                    (r = t[o]),
                      (e +=
                        n((i = t[o + 1])[0] - r[0]) *
                        (2 + Math.sin(n(r[1])) + Math.sin(n(i[1]))))
                return e >= 0
              }
              function o(t) {
                if (t && t.length > 0) {
                  if (i(t[0])) return !1
                  if (!t.slice(1, t.length).every(i)) return !1
                }
                return !0
              }
              e.exports = function (t, e) {
                ;(function (t) {
                  return 'Polygon' === t.type
                    ? o(t.coordinates)
                    : 'MultiPolygon' === t.type
                    ? t.coordinates.every(o)
                    : void 0
                })(t) ||
                  e.push({
                    message:
                      'Polygons and MultiPolygons should follow the right-hand rule',
                    level: 'message',
                    line: t.__line__,
                  })
              }
            },
            {},
          ],
          11: [
            function (t, e, r) {
              'use strict'
              function n(t, e) {
                ;(this.x = t), (this.y = e)
              }
              ;(e.exports = n),
                (n.prototype = {
                  clone: function () {
                    return new n(this.x, this.y)
                  },
                  add: function (t) {
                    return this.clone()._add(t)
                  },
                  sub: function (t) {
                    return this.clone()._sub(t)
                  },
                  multByPoint: function (t) {
                    return this.clone()._multByPoint(t)
                  },
                  divByPoint: function (t) {
                    return this.clone()._divByPoint(t)
                  },
                  mult: function (t) {
                    return this.clone()._mult(t)
                  },
                  div: function (t) {
                    return this.clone()._div(t)
                  },
                  rotate: function (t) {
                    return this.clone()._rotate(t)
                  },
                  rotateAround: function (t, e) {
                    return this.clone()._rotateAround(t, e)
                  },
                  matMult: function (t) {
                    return this.clone()._matMult(t)
                  },
                  unit: function () {
                    return this.clone()._unit()
                  },
                  perp: function () {
                    return this.clone()._perp()
                  },
                  round: function () {
                    return this.clone()._round()
                  },
                  mag: function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                  },
                  equals: function (t) {
                    return this.x === t.x && this.y === t.y
                  },
                  dist: function (t) {
                    return Math.sqrt(this.distSqr(t))
                  },
                  distSqr: function (t) {
                    var e = t.x - this.x,
                      r = t.y - this.y
                    return e * e + r * r
                  },
                  angle: function () {
                    return Math.atan2(this.y, this.x)
                  },
                  angleTo: function (t) {
                    return Math.atan2(this.y - t.y, this.x - t.x)
                  },
                  angleWith: function (t) {
                    return this.angleWithSep(t.x, t.y)
                  },
                  angleWithSep: function (t, e) {
                    return Math.atan2(
                      this.x * e - this.y * t,
                      this.x * t + this.y * e
                    )
                  },
                  _matMult: function (t) {
                    var e = t[0] * this.x + t[1] * this.y,
                      r = t[2] * this.x + t[3] * this.y
                    return (this.x = e), (this.y = r), this
                  },
                  _add: function (t) {
                    return (this.x += t.x), (this.y += t.y), this
                  },
                  _sub: function (t) {
                    return (this.x -= t.x), (this.y -= t.y), this
                  },
                  _mult: function (t) {
                    return (this.x *= t), (this.y *= t), this
                  },
                  _div: function (t) {
                    return (this.x /= t), (this.y /= t), this
                  },
                  _multByPoint: function (t) {
                    return (this.x *= t.x), (this.y *= t.y), this
                  },
                  _divByPoint: function (t) {
                    return (this.x /= t.x), (this.y /= t.y), this
                  },
                  _unit: function () {
                    return this._div(this.mag()), this
                  },
                  _perp: function () {
                    var t = this.y
                    return (this.y = this.x), (this.x = -t), this
                  },
                  _rotate: function (t) {
                    var e = Math.cos(t),
                      r = Math.sin(t),
                      n = e * this.x - r * this.y,
                      i = r * this.x + e * this.y
                    return (this.x = n), (this.y = i), this
                  },
                  _rotateAround: function (t, e) {
                    var r = Math.cos(t),
                      n = Math.sin(t),
                      i = e.x + r * (this.x - e.x) - n * (this.y - e.y),
                      o = e.y + n * (this.x - e.x) + r * (this.y - e.y)
                    return (this.x = i), (this.y = o), this
                  },
                  _round: function () {
                    return (
                      (this.x = Math.round(this.x)),
                      (this.y = Math.round(this.y)),
                      this
                    )
                  },
                }),
                (n.convert = function (t) {
                  return t instanceof n
                    ? t
                    : Array.isArray(t)
                    ? new n(t[0], t[1])
                    : t
                })
            },
            {},
          ],
          12: [function (t, e, r) {}, {}],
          13: [
            function (t, e, r) {
              e.exports = function t(e) {
                switch ((e && e.type) || null) {
                  case 'FeatureCollection':
                    return (
                      (e.features = e.features.reduce(function (e, r) {
                        return e.concat(t(r))
                      }, [])),
                      e
                    )
                  case 'Feature':
                    return e.geometry
                      ? t(e.geometry).map(function (t) {
                          return {
                            type: 'Feature',
                            properties: JSON.parse(
                              JSON.stringify(e.properties)
                            ),
                            geometry: t,
                          }
                        })
                      : e
                  case 'MultiPoint':
                    return e.coordinates.map(function (t) {
                      return { type: 'Point', coordinates: t }
                    })
                  case 'MultiPolygon':
                    return e.coordinates.map(function (t) {
                      return { type: 'Polygon', coordinates: t }
                    })
                  case 'MultiLineString':
                    return e.coordinates.map(function (t) {
                      return { type: 'LineString', coordinates: t }
                    })
                  case 'GeometryCollection':
                    return e.geometries.map(t).reduce(function (t, e) {
                      return t.concat(e)
                    }, [])
                  case 'Point':
                  case 'Polygon':
                  case 'LineString':
                    return [e]
                }
              }
            },
            {},
          ],
          14: [
            function (t, e, r) {
              var n = (e.exports = function (t, e) {
                if ((e || (e = 16), void 0 === t && (t = 128), t <= 0))
                  return '0'
                for (
                  var r = Math.log(Math.pow(2, t)) / Math.log(e), i = 2;
                  r === 1 / 0;
                  i *= 2
                )
                  r = (Math.log(Math.pow(2, t / i)) / Math.log(e)) * i
                var o = r - Math.floor(r),
                  a = ''
                for (i = 0; i < Math.floor(r); i++)
                  a = (l = Math.floor(Math.random() * e).toString(e)) + a
                if (o) {
                  var s = Math.pow(e, o),
                    l = Math.floor(Math.random() * s).toString(e)
                  a = l + a
                }
                var u = parseInt(a, e)
                return u !== 1 / 0 && u >= Math.pow(2, t) ? n(t, e) : a
              })
              n.rack = function (t, e, r) {
                var i = function (i) {
                    var a = 0
                    do {
                      if (a++ > 10) {
                        if (!r)
                          throw new Error(
                            'too many ID collisions, use more bits'
                          )
                        t += r
                      }
                      var s = n(t, e)
                    } while (Object.hasOwnProperty.call(o, s))
                    return (o[s] = i), s
                  },
                  o = (i.hats = {})
                return (
                  (i.get = function (t) {
                    return i.hats[t]
                  }),
                  (i.set = function (t, e) {
                    return (i.hats[t] = e), i
                  }),
                  (i.bits = t || 128),
                  (i.base = e || 16),
                  i
                )
              }
            },
            {},
          ],
          15: [
            function (t, e, r) {
              ;(function (n) {
                var i = (function () {
                  function t() {
                    this.yy = {}
                  }
                  var e = function (t, e, r, n) {
                      for (r = r || {}, n = t.length; n--; r[t[n]] = e);
                      return r
                    },
                    r = [1, 12],
                    n = [1, 13],
                    i = [1, 9],
                    o = [1, 10],
                    a = [1, 11],
                    s = [1, 14],
                    l = [1, 15],
                    u = [14, 18, 22, 24],
                    c = [18, 22],
                    p = [22, 24],
                    h = {
                      trace: function () {},
                      yy: {},
                      symbols_: {
                        error: 2,
                        JSONString: 3,
                        STRING: 4,
                        JSONNumber: 5,
                        NUMBER: 6,
                        JSONNullLiteral: 7,
                        NULL: 8,
                        JSONBooleanLiteral: 9,
                        TRUE: 10,
                        FALSE: 11,
                        JSONText: 12,
                        JSONValue: 13,
                        EOF: 14,
                        JSONObject: 15,
                        JSONArray: 16,
                        '{': 17,
                        '}': 18,
                        JSONMemberList: 19,
                        JSONMember: 20,
                        ':': 21,
                        ',': 22,
                        '[': 23,
                        ']': 24,
                        JSONElementList: 25,
                        $accept: 0,
                        $end: 1,
                      },
                      terminals_: {
                        2: 'error',
                        4: 'STRING',
                        6: 'NUMBER',
                        8: 'NULL',
                        10: 'TRUE',
                        11: 'FALSE',
                        14: 'EOF',
                        17: '{',
                        18: '}',
                        21: ':',
                        22: ',',
                        23: '[',
                        24: ']',
                      },
                      productions_: [
                        0,
                        [3, 1],
                        [5, 1],
                        [7, 1],
                        [9, 1],
                        [9, 1],
                        [12, 2],
                        [13, 1],
                        [13, 1],
                        [13, 1],
                        [13, 1],
                        [13, 1],
                        [13, 1],
                        [15, 2],
                        [15, 3],
                        [20, 3],
                        [19, 1],
                        [19, 3],
                        [16, 2],
                        [16, 3],
                        [25, 1],
                        [25, 3],
                      ],
                      performAction: function (t, e, r, n, i, o, a) {
                        var s = o.length - 1
                        switch (i) {
                          case 1:
                            this.$ = t
                              .replace(/\\(\\|")/g, '$1')
                              .replace(/\\n/g, '\n')
                              .replace(/\\r/g, '\r')
                              .replace(/\\t/g, '\t')
                              .replace(/\\v/g, '\v')
                              .replace(/\\f/g, '\f')
                              .replace(/\\b/g, '\b')
                            break
                          case 2:
                            this.$ = Number(t)
                            break
                          case 3:
                            this.$ = null
                            break
                          case 4:
                            this.$ = !0
                            break
                          case 5:
                            this.$ = !1
                            break
                          case 6:
                            return (this.$ = o[s - 1])
                          case 13:
                            ;(this.$ = {}),
                              Object.defineProperty(this.$, '__line__', {
                                value: this._$.first_line,
                                enumerable: !1,
                              })
                            break
                          case 14:
                          case 19:
                            ;(this.$ = o[s - 1]),
                              Object.defineProperty(this.$, '__line__', {
                                value: this._$.first_line,
                                enumerable: !1,
                              })
                            break
                          case 15:
                            this.$ = [o[s - 2], o[s]]
                            break
                          case 16:
                            ;(this.$ = {}), (this.$[o[s][0]] = o[s][1])
                            break
                          case 17:
                            ;(this.$ = o[s - 2]),
                              void 0 !== o[s - 2][o[s][0]] &&
                                (this.$.__duplicateProperties__ ||
                                  Object.defineProperty(
                                    this.$,
                                    '__duplicateProperties__',
                                    { value: [], enumerable: !1 }
                                  ),
                                this.$.__duplicateProperties__.push(o[s][0])),
                              (o[s - 2][o[s][0]] = o[s][1])
                            break
                          case 18:
                            ;(this.$ = []),
                              Object.defineProperty(this.$, '__line__', {
                                value: this._$.first_line,
                                enumerable: !1,
                              })
                            break
                          case 20:
                            this.$ = [o[s]]
                            break
                          case 21:
                            ;(this.$ = o[s - 2]), o[s - 2].push(o[s])
                        }
                      },
                      table: [
                        {
                          3: 5,
                          4: r,
                          5: 6,
                          6: n,
                          7: 3,
                          8: i,
                          9: 4,
                          10: o,
                          11: a,
                          12: 1,
                          13: 2,
                          15: 7,
                          16: 8,
                          17: s,
                          23: l,
                        },
                        { 1: [3] },
                        { 14: [1, 16] },
                        e(u, [2, 7]),
                        e(u, [2, 8]),
                        e(u, [2, 9]),
                        e(u, [2, 10]),
                        e(u, [2, 11]),
                        e(u, [2, 12]),
                        e(u, [2, 3]),
                        e(u, [2, 4]),
                        e(u, [2, 5]),
                        e([14, 18, 21, 22, 24], [2, 1]),
                        e(u, [2, 2]),
                        { 3: 20, 4: r, 18: [1, 17], 19: 18, 20: 19 },
                        {
                          3: 5,
                          4: r,
                          5: 6,
                          6: n,
                          7: 3,
                          8: i,
                          9: 4,
                          10: o,
                          11: a,
                          13: 23,
                          15: 7,
                          16: 8,
                          17: s,
                          23: l,
                          24: [1, 21],
                          25: 22,
                        },
                        { 1: [2, 6] },
                        e(u, [2, 13]),
                        { 18: [1, 24], 22: [1, 25] },
                        e(c, [2, 16]),
                        { 21: [1, 26] },
                        e(u, [2, 18]),
                        { 22: [1, 28], 24: [1, 27] },
                        e(p, [2, 20]),
                        e(u, [2, 14]),
                        { 3: 20, 4: r, 20: 29 },
                        {
                          3: 5,
                          4: r,
                          5: 6,
                          6: n,
                          7: 3,
                          8: i,
                          9: 4,
                          10: o,
                          11: a,
                          13: 30,
                          15: 7,
                          16: 8,
                          17: s,
                          23: l,
                        },
                        e(u, [2, 19]),
                        {
                          3: 5,
                          4: r,
                          5: 6,
                          6: n,
                          7: 3,
                          8: i,
                          9: 4,
                          10: o,
                          11: a,
                          13: 31,
                          15: 7,
                          16: 8,
                          17: s,
                          23: l,
                        },
                        e(c, [2, 17]),
                        e(c, [2, 15]),
                        e(p, [2, 21]),
                      ],
                      defaultActions: { 16: [2, 6] },
                      parseError: function (t, e) {
                        function r(t, e) {
                          ;(this.message = t), (this.hash = e)
                        }
                        if (!e.recoverable)
                          throw ((r.prototype = Error), new r(t, e))
                        this.trace(t)
                      },
                      parse: function (t) {
                        var e = this,
                          r = [0],
                          n = [null],
                          i = [],
                          o = this.table,
                          a = '',
                          s = 0,
                          l = 0,
                          u = 0,
                          c = i.slice.call(arguments, 1),
                          p = Object.create(this.lexer),
                          h = { yy: {} }
                        for (var f in this.yy)
                          Object.prototype.hasOwnProperty.call(this.yy, f) &&
                            (h.yy[f] = this.yy[f])
                        p.setInput(t, h.yy),
                          (h.yy.lexer = p),
                          (h.yy.parser = this),
                          void 0 === p.yylloc && (p.yylloc = {})
                        var d = p.yylloc
                        i.push(d)
                        var m = p.options && p.options.ranges
                        'function' == typeof h.yy.parseError
                          ? (this.parseError = h.yy.parseError)
                          : (this.parseError = Object.getPrototypeOf(
                              this
                            ).parseError)
                        for (
                          var y,
                            v,
                            g,
                            _,
                            x,
                            b,
                            w,
                            E,
                            S,
                            T = function () {
                              var t
                              return (
                                'number' != typeof (t = p.lex() || 1) &&
                                  (t = e.symbols_[t] || t),
                                t
                              )
                            },
                            I = {};
                          ;

                        ) {
                          if (
                            ((g = r[r.length - 1]),
                            this.defaultActions[g]
                              ? (_ = this.defaultActions[g])
                              : (null != y || (y = T()), (_ = o[g] && o[g][y])),
                            void 0 === _ || !_.length || !_[0])
                          ) {
                            var C = ''
                            for (b in ((S = []), o[g]))
                              this.terminals_[b] &&
                                b > 2 &&
                                S.push("'" + this.terminals_[b] + "'")
                            ;(C = p.showPosition
                              ? 'Parse error on line ' +
                                (s + 1) +
                                ':\n' +
                                p.showPosition() +
                                '\nExpecting ' +
                                S.join(', ') +
                                ", got '" +
                                (this.terminals_[y] || y) +
                                "'"
                              : 'Parse error on line ' +
                                (s + 1) +
                                ': Unexpected ' +
                                (1 == y
                                  ? 'end of input'
                                  : "'" + (this.terminals_[y] || y) + "'")),
                              this.parseError(C, {
                                text: p.match,
                                token: this.terminals_[y] || y,
                                line: p.yylineno,
                                loc: d,
                                expected: S,
                              })
                          }
                          if (_[0] instanceof Array && _.length > 1)
                            throw new Error(
                              'Parse Error: multiple actions possible at state: ' +
                                g +
                                ', token: ' +
                                y
                            )
                          switch (_[0]) {
                            case 1:
                              r.push(y),
                                n.push(p.yytext),
                                i.push(p.yylloc),
                                r.push(_[1]),
                                (y = null),
                                v
                                  ? ((y = v), (v = null))
                                  : ((l = p.yyleng),
                                    (a = p.yytext),
                                    (s = p.yylineno),
                                    (d = p.yylloc),
                                    u > 0 && u--)
                              break
                            case 2:
                              if (
                                ((w = this.productions_[_[1]][1]),
                                (I.$ = n[n.length - w]),
                                (I._$ = {
                                  first_line: i[i.length - (w || 1)].first_line,
                                  last_line: i[i.length - 1].last_line,
                                  first_column:
                                    i[i.length - (w || 1)].first_column,
                                  last_column: i[i.length - 1].last_column,
                                }),
                                m &&
                                  (I._$.range = [
                                    i[i.length - (w || 1)].range[0],
                                    i[i.length - 1].range[1],
                                  ]),
                                void 0 !==
                                  (x = this.performAction.apply(
                                    I,
                                    [a, l, s, h.yy, _[1], n, i].concat(c)
                                  )))
                              )
                                return x
                              w &&
                                ((r = r.slice(0, -1 * w * 2)),
                                (n = n.slice(0, -1 * w)),
                                (i = i.slice(0, -1 * w))),
                                r.push(this.productions_[_[1]][0]),
                                n.push(I.$),
                                i.push(I._$),
                                (E = o[r[r.length - 2]][r[r.length - 1]]),
                                r.push(E)
                              break
                            case 3:
                              return !0
                          }
                        }
                        return !0
                      },
                    },
                    f = {
                      EOF: 1,
                      parseError: function (t, e) {
                        if (!this.yy.parser) throw new Error(t)
                        this.yy.parser.parseError(t, e)
                      },
                      setInput: function (t, e) {
                        return (
                          (this.yy = e || this.yy || {}),
                          (this._input = t),
                          (this._more = this._backtrack = this.done = !1),
                          (this.yylineno = this.yyleng = 0),
                          (this.yytext = this.matched = this.match = ''),
                          (this.conditionStack = ['INITIAL']),
                          (this.yylloc = {
                            first_line: 1,
                            first_column: 0,
                            last_line: 1,
                            last_column: 0,
                          }),
                          this.options.ranges && (this.yylloc.range = [0, 0]),
                          (this.offset = 0),
                          this
                        )
                      },
                      input: function () {
                        var t = this._input[0]
                        return (
                          (this.yytext += t),
                          this.yyleng++,
                          this.offset++,
                          (this.match += t),
                          (this.matched += t),
                          t.match(/(?:\r\n?|\n).*/g)
                            ? (this.yylineno++, this.yylloc.last_line++)
                            : this.yylloc.last_column++,
                          this.options.ranges && this.yylloc.range[1]++,
                          (this._input = this._input.slice(1)),
                          t
                        )
                      },
                      unput: function (t) {
                        var e = t.length,
                          r = t.split(/(?:\r\n?|\n)/g)
                        ;(this._input = t + this._input),
                          (this.yytext = this.yytext.substr(
                            0,
                            this.yytext.length - e
                          )),
                          (this.offset -= e)
                        var n = this.match.split(/(?:\r\n?|\n)/g)
                        ;(this.match = this.match.substr(
                          0,
                          this.match.length - 1
                        )),
                          (this.matched = this.matched.substr(
                            0,
                            this.matched.length - 1
                          )),
                          r.length - 1 && (this.yylineno -= r.length - 1)
                        var i = this.yylloc.range
                        return (
                          (this.yylloc = {
                            first_line: this.yylloc.first_line,
                            last_line: this.yylineno + 1,
                            first_column: this.yylloc.first_column,
                            last_column: r
                              ? (r.length === n.length
                                  ? this.yylloc.first_column
                                  : 0) +
                                n[n.length - r.length].length -
                                r[0].length
                              : this.yylloc.first_column - e,
                          }),
                          this.options.ranges &&
                            (this.yylloc.range = [
                              i[0],
                              i[0] + this.yyleng - e,
                            ]),
                          (this.yyleng = this.yytext.length),
                          this
                        )
                      },
                      more: function () {
                        return (this._more = !0), this
                      },
                      reject: function () {
                        return this.options.backtrack_lexer
                          ? ((this._backtrack = !0), this)
                          : this.parseError(
                              'Lexical error on line ' +
                                (this.yylineno + 1) +
                                '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n' +
                                this.showPosition(),
                              { text: '', token: null, line: this.yylineno }
                            )
                      },
                      less: function (t) {
                        this.unput(this.match.slice(t))
                      },
                      pastInput: function () {
                        var t = this.matched.substr(
                          0,
                          this.matched.length - this.match.length
                        )
                        return (
                          (t.length > 20 ? '...' : '') +
                          t.substr(-20).replace(/\n/g, '')
                        )
                      },
                      upcomingInput: function () {
                        var t = this.match
                        return (
                          t.length < 20 &&
                            (t += this._input.substr(0, 20 - t.length)),
                          (
                            t.substr(0, 20) + (t.length > 20 ? '...' : '')
                          ).replace(/\n/g, '')
                        )
                      },
                      showPosition: function () {
                        var t = this.pastInput(),
                          e = new Array(t.length + 1).join('-')
                        return t + this.upcomingInput() + '\n' + e + '^'
                      },
                      test_match: function (t, e) {
                        var r, n, i
                        if (
                          (this.options.backtrack_lexer &&
                            ((i = {
                              yylineno: this.yylineno,
                              yylloc: {
                                first_line: this.yylloc.first_line,
                                last_line: this.last_line,
                                first_column: this.yylloc.first_column,
                                last_column: this.yylloc.last_column,
                              },
                              yytext: this.yytext,
                              match: this.match,
                              matches: this.matches,
                              matched: this.matched,
                              yyleng: this.yyleng,
                              offset: this.offset,
                              _more: this._more,
                              _input: this._input,
                              yy: this.yy,
                              conditionStack: this.conditionStack.slice(0),
                              done: this.done,
                            }),
                            this.options.ranges &&
                              (i.yylloc.range = this.yylloc.range.slice(0))),
                          (n = t[0].match(/(?:\r\n?|\n).*/g)) &&
                            (this.yylineno += n.length),
                          (this.yylloc = {
                            first_line: this.yylloc.last_line,
                            last_line: this.yylineno + 1,
                            first_column: this.yylloc.last_column,
                            last_column: n
                              ? n[n.length - 1].length -
                                n[n.length - 1].match(/\r?\n?/)[0].length
                              : this.yylloc.last_column + t[0].length,
                          }),
                          (this.yytext += t[0]),
                          (this.match += t[0]),
                          (this.matches = t),
                          (this.yyleng = this.yytext.length),
                          this.options.ranges &&
                            (this.yylloc.range = [
                              this.offset,
                              (this.offset += this.yyleng),
                            ]),
                          (this._more = !1),
                          (this._backtrack = !1),
                          (this._input = this._input.slice(t[0].length)),
                          (this.matched += t[0]),
                          (r = this.performAction.call(
                            this,
                            this.yy,
                            this,
                            e,
                            this.conditionStack[this.conditionStack.length - 1]
                          )),
                          this.done && this._input && (this.done = !1),
                          r)
                        )
                          return r
                        if (this._backtrack) {
                          for (var o in i) this[o] = i[o]
                          return !1
                        }
                        return !1
                      },
                      next: function () {
                        if (this.done) return this.EOF
                        var t, e, r, n
                        this._input || (this.done = !0),
                          this._more || ((this.yytext = ''), (this.match = ''))
                        for (
                          var i = this._currentRules(), o = 0;
                          o < i.length;
                          o++
                        )
                          if (
                            (r = this._input.match(this.rules[i[o]])) &&
                            (!e || r[0].length > e[0].length)
                          ) {
                            if (
                              ((e = r), (n = o), this.options.backtrack_lexer)
                            ) {
                              if (!1 !== (t = this.test_match(r, i[o])))
                                return t
                              if (this._backtrack) {
                                e = !1
                                continue
                              }
                              return !1
                            }
                            if (!this.options.flex) break
                          }
                        return e
                          ? !1 !== (t = this.test_match(e, i[n])) && t
                          : '' === this._input
                          ? this.EOF
                          : this.parseError(
                              'Lexical error on line ' +
                                (this.yylineno + 1) +
                                '. Unrecognized text.\n' +
                                this.showPosition(),
                              { text: '', token: null, line: this.yylineno }
                            )
                      },
                      lex: function () {
                        return this.next() || this.lex()
                      },
                      begin: function (t) {
                        this.conditionStack.push(t)
                      },
                      popState: function () {
                        return this.conditionStack.length - 1 > 0
                          ? this.conditionStack.pop()
                          : this.conditionStack[0]
                      },
                      _currentRules: function () {
                        return this.conditionStack.length &&
                          this.conditionStack[this.conditionStack.length - 1]
                          ? this.conditions[
                              this.conditionStack[
                                this.conditionStack.length - 1
                              ]
                            ].rules
                          : this.conditions.INITIAL.rules
                      },
                      topState: function (t) {
                        return (t =
                          this.conditionStack.length - 1 - Math.abs(t || 0)) >=
                          0
                          ? this.conditionStack[t]
                          : 'INITIAL'
                      },
                      pushState: function (t) {
                        this.begin(t)
                      },
                      stateStackSize: function () {
                        return this.conditionStack.length
                      },
                      options: {},
                      performAction: function (t, e, r, n) {
                        switch (r) {
                          case 0:
                            break
                          case 1:
                            return 6
                          case 2:
                            return (
                              (e.yytext = e.yytext.substr(1, e.yyleng - 2)), 4
                            )
                          case 3:
                            return 17
                          case 4:
                            return 18
                          case 5:
                            return 23
                          case 6:
                            return 24
                          case 7:
                            return 22
                          case 8:
                            return 21
                          case 9:
                            return 10
                          case 10:
                            return 11
                          case 11:
                            return 8
                          case 12:
                            return 14
                          case 13:
                            return 'INVALID'
                        }
                      },
                      rules: [
                        /^(?:\s+)/,
                        /^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,
                        /^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,
                        /^(?:\{)/,
                        /^(?:\})/,
                        /^(?:\[)/,
                        /^(?:\])/,
                        /^(?:,)/,
                        /^(?::)/,
                        /^(?:true\b)/,
                        /^(?:false\b)/,
                        /^(?:null\b)/,
                        /^(?:$)/,
                        /^(?:.)/,
                      ],
                      conditions: {
                        INITIAL: {
                          rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
                          inclusive: !0,
                        },
                      },
                    }
                  return (
                    (h.lexer = f), (t.prototype = h), (h.Parser = t), new t()
                  )
                })()
                void 0 !== t &&
                  void 0 !== r &&
                  ((r.parser = i),
                  (r.Parser = i.Parser),
                  (r.parse = function () {
                    return i.parse.apply(i, arguments)
                  }),
                  (r.main = function (e) {
                    e[1] || (console.log('Usage: ' + e[0] + ' FILE'), n.exit(1))
                    var i = t('fs').readFileSync(
                      t('path').normalize(e[1]),
                      'utf8'
                    )
                    return r.parser.parse(i)
                  }),
                  void 0 !== e && t.main === e && r.main(n.argv.slice(1)))
              }.call(this, t('_process')))
            },
            { _process: 18, fs: 12, path: 17 },
          ],
          16: [
            function (t, r, n) {
              ;(function (t) {
                function e(t, e) {
                  for (var r = -1, n = null == t ? 0 : t.length; ++r < n; )
                    if (e(t[r], r, t)) return !0
                  return !1
                }
                function i(t, e) {
                  return t.has(e)
                }
                function o(t) {
                  var e = -1,
                    r = Array(t.size)
                  return (
                    t.forEach(function (t, n) {
                      r[++e] = [n, t]
                    }),
                    r
                  )
                }
                function a(t) {
                  var e = -1,
                    r = Array(t.size)
                  return (
                    t.forEach(function (t) {
                      r[++e] = t
                    }),
                    r
                  )
                }
                function s(t) {
                  var e = -1,
                    r = null == t ? 0 : t.length
                  for (this.clear(); ++e < r; ) {
                    var n = t[e]
                    this.set(n[0], n[1])
                  }
                }
                function l(t) {
                  var e = -1,
                    r = null == t ? 0 : t.length
                  for (this.clear(); ++e < r; ) {
                    var n = t[e]
                    this.set(n[0], n[1])
                  }
                }
                function u(t) {
                  var e = -1,
                    r = null == t ? 0 : t.length
                  for (this.clear(); ++e < r; ) {
                    var n = t[e]
                    this.set(n[0], n[1])
                  }
                }
                function c(t) {
                  var e = -1,
                    r = null == t ? 0 : t.length
                  for (this.__data__ = new u(); ++e < r; ) this.add(t[e])
                }
                function p(t) {
                  var e = (this.__data__ = new l(t))
                  this.size = e.size
                }
                function h(t, e) {
                  var r = Kt(t),
                    n = !r && Xt(t),
                    i = !r && !n && Wt(t),
                    o = !r && !n && !i && Ht(t),
                    a = r || n || i || o,
                    s = a
                      ? (function (t, e) {
                          for (var r = -1, n = Array(t); ++r < t; ) n[r] = e(r)
                          return n
                        })(t.length, String)
                      : [],
                    l = s.length
                  for (var u in t)
                    (!e && !_t.call(t, u)) ||
                      (a &&
                        ('length' == u ||
                          (i && ('offset' == u || 'parent' == u)) ||
                          (o &&
                            ('buffer' == u ||
                              'byteLength' == u ||
                              'byteOffset' == u)) ||
                          S(u, l))) ||
                      s.push(u)
                  return s
                }
                function f(t, e) {
                  for (var r = t.length; r--; ) if (I(t[r][0], e)) return r
                  return -1
                }
                function d(t) {
                  return null == t
                    ? void 0 === t
                      ? Q
                      : Z
                    : At && At in Object(t)
                    ? (function (t) {
                        var e = _t.call(t, At),
                          r = t[At]
                        try {
                          t[At] = void 0
                          var n = !0
                        } catch (t) {}
                        var i = bt.call(t)
                        return n && (e ? (t[At] = r) : delete t[At]), i
                      })(t)
                    : (function (t) {
                        return bt.call(t)
                      })(t)
                }
                function m(t) {
                  return P(t) && d(t) == R
                }
                function y(t, e, r, n, i) {
                  return (
                    t === e ||
                    (null == t || null == e || (!P(t) && !P(e))
                      ? t != t && e != e
                      : (function (t, e, r, n, i, o) {
                          var a = Kt(t),
                            s = Kt(e),
                            l = a ? F : Zt(t),
                            u = s ? F : Zt(e),
                            c = (l = l == R ? X : l) == X,
                            h = (u = u == R ? X : u) == X,
                            f = l == u
                          if (f && Wt(t)) {
                            if (!Wt(e)) return !1
                            ;(a = !0), (c = !1)
                          }
                          if (f && !c)
                            return (
                              o || (o = new p()),
                              a || Ht(t)
                                ? _(t, e, r, n, i, o)
                                : x(t, e, l, r, n, i, o)
                            )
                          if (!(r & z)) {
                            var d = c && _t.call(t, '__wrapped__'),
                              m = h && _t.call(e, '__wrapped__')
                            if (d || m) {
                              var y = d ? t.value() : t,
                                v = m ? e.value() : e
                              return o || (o = new p()), i(y, v, r, n, o)
                            }
                          }
                          return (
                            !!f &&
                            (o || (o = new p()),
                            (function (t, e, r, n, i, o) {
                              var a = r & z,
                                s = b(t),
                                l = s.length
                              if (l != b(e).length && !a) return !1
                              for (var u = l; u--; ) {
                                var c = s[u]
                                if (!(a ? c in e : _t.call(e, c))) return !1
                              }
                              var p = o.get(t)
                              if (p && o.get(e)) return p == e
                              var h = !0
                              o.set(t, e), o.set(e, t)
                              for (var f = a; ++u < l; ) {
                                var d = t[(c = s[u])],
                                  m = e[c]
                                if (n)
                                  var y = a
                                    ? n(m, d, c, e, t, o)
                                    : n(d, m, c, t, e, o)
                                if (
                                  !(void 0 === y
                                    ? d === m || i(d, m, r, n, o)
                                    : y)
                                ) {
                                  h = !1
                                  break
                                }
                                f || (f = 'constructor' == c)
                              }
                              if (h && !f) {
                                var v = t.constructor,
                                  g = e.constructor
                                v != g &&
                                  'constructor' in t &&
                                  'constructor' in e &&
                                  !(
                                    'function' == typeof v &&
                                    v instanceof v &&
                                    'function' == typeof g &&
                                    g instanceof g
                                  ) &&
                                  (h = !1)
                              }
                              return o.delete(t), o.delete(e), h
                            })(t, e, r, n, i, o))
                          )
                        })(t, e, r, n, y, i))
                  )
                }
                function v(t) {
                  return (
                    !(
                      !k(t) ||
                      (function (t) {
                        return !!xt && xt in t
                      })(t)
                    ) && (C(t) ? wt : rt).test(T(t))
                  )
                }
                function g(t) {
                  if (
                    !(function (t) {
                      var e = t && t.constructor
                      return (
                        t === (('function' == typeof e && e.prototype) || yt)
                      )
                    })(t)
                  )
                    return Mt(t)
                  var e = []
                  for (var r in Object(t))
                    _t.call(t, r) && 'constructor' != r && e.push(r)
                  return e
                }
                function _(t, r, n, o, a, s) {
                  var l = n & z,
                    u = t.length,
                    p = r.length
                  if (u != p && !(l && p > u)) return !1
                  var h = s.get(t)
                  if (h && s.get(r)) return h == r
                  var f = -1,
                    d = !0,
                    m = n & O ? new c() : void 0
                  for (s.set(t, r), s.set(r, t); ++f < u; ) {
                    var y = t[f],
                      v = r[f]
                    if (o) var g = l ? o(v, y, f, r, t, s) : o(y, v, f, t, r, s)
                    if (void 0 !== g) {
                      if (g) continue
                      d = !1
                      break
                    }
                    if (m) {
                      if (
                        !e(r, function (t, e) {
                          if (!i(m, e) && (y === t || a(y, t, n, o, s)))
                            return m.push(e)
                        })
                      ) {
                        d = !1
                        break
                      }
                    } else if (y !== v && !a(y, v, n, o, s)) {
                      d = !1
                      break
                    }
                  }
                  return s.delete(t), s.delete(r), d
                }
                function x(t, e, r, n, i, s, l) {
                  switch (r) {
                    case et:
                      if (
                        t.byteLength != e.byteLength ||
                        t.byteOffset != e.byteOffset
                      )
                        return !1
                      ;(t = t.buffer), (e = e.buffer)
                    case tt:
                      return !(
                        t.byteLength != e.byteLength || !s(new Tt(t), new Tt(e))
                      )
                    case N:
                    case U:
                    case $:
                      return I(+t, +e)
                    case j:
                      return t.name == e.name && t.message == e.message
                    case W:
                    case J:
                      return t == e + ''
                    case G:
                      var u = o
                    case H:
                      var c = n & z
                      if ((u || (u = a), t.size != e.size && !c)) return !1
                      var p = l.get(t)
                      if (p) return p == e
                      ;(n |= O), l.set(t, e)
                      var h = _(u(t), u(e), n, i, s, l)
                      return l.delete(t), h
                    case Y:
                      if (Gt) return Gt.call(t) == Gt.call(e)
                  }
                  return !1
                }
                function b(t) {
                  return (function (t, e, r) {
                    var n = e(t)
                    return Kt(t)
                      ? n
                      : (function (t, e) {
                          for (
                            var r = -1, n = e.length, i = t.length;
                            ++r < n;

                          )
                            t[i + r] = e[r]
                          return t
                        })(n, r(t))
                  })(t, M, $t)
                }
                function w(t, e) {
                  var r = t.__data__
                  return (function (t) {
                    var e = typeof t
                    return 'string' == e ||
                      'number' == e ||
                      'symbol' == e ||
                      'boolean' == e
                      ? '__proto__' !== t
                      : null === t
                  })(e)
                    ? r['string' == typeof e ? 'string' : 'hash']
                    : r.map
                }
                function E(t, e) {
                  var r = (function (t, e) {
                    return null == t ? void 0 : t[e]
                  })(t, e)
                  return v(r) ? r : void 0
                }
                function S(t, e) {
                  return (
                    !!(e = null == e ? D : e) &&
                    ('number' == typeof t || nt.test(t)) &&
                    t > -1 &&
                    t % 1 == 0 &&
                    t < e
                  )
                }
                function T(t) {
                  if (null != t) {
                    try {
                      return gt.call(t)
                    } catch (t) {}
                    try {
                      return t + ''
                    } catch (t) {}
                  }
                  return ''
                }
                function I(t, e) {
                  return t === e || (t != t && e != e)
                }
                function C(t) {
                  if (!k(t)) return !1
                  var e = d(t)
                  return e == V || e == q || e == B || e == K
                }
                function A(t) {
                  return 'number' == typeof t && t > -1 && t % 1 == 0 && t <= D
                }
                function k(t) {
                  var e = typeof t
                  return null != t && ('object' == e || 'function' == e)
                }
                function P(t) {
                  return null != t && 'object' == typeof t
                }
                function M(t) {
                  return (function (t) {
                    return null != t && A(t.length) && !C(t)
                  })(t)
                    ? h(t)
                    : g(t)
                }
                var L = '__lodash_hash_undefined__',
                  z = 1,
                  O = 2,
                  D = 9007199254740991,
                  R = '[object Arguments]',
                  F = '[object Array]',
                  B = '[object AsyncFunction]',
                  N = '[object Boolean]',
                  U = '[object Date]',
                  j = '[object Error]',
                  V = '[object Function]',
                  q = '[object GeneratorFunction]',
                  G = '[object Map]',
                  $ = '[object Number]',
                  Z = '[object Null]',
                  X = '[object Object]',
                  K = '[object Proxy]',
                  W = '[object RegExp]',
                  H = '[object Set]',
                  J = '[object String]',
                  Y = '[object Symbol]',
                  Q = '[object Undefined]',
                  tt = '[object ArrayBuffer]',
                  et = '[object DataView]',
                  rt = /^\[object .+?Constructor\]$/,
                  nt = /^(?:0|[1-9]\d*)$/,
                  it = {}
                ;(it['[object Float32Array]'] = it[
                  '[object Float64Array]'
                ] = it['[object Int8Array]'] = it['[object Int16Array]'] = it[
                  '[object Int32Array]'
                ] = it['[object Uint8Array]'] = it[
                  '[object Uint8ClampedArray]'
                ] = it['[object Uint16Array]'] = it[
                  '[object Uint32Array]'
                ] = !0),
                  (it[R] = it[F] = it[tt] = it[N] = it[et] = it[U] = it[j] = it[
                    V
                  ] = it[G] = it[$] = it[X] = it[W] = it[H] = it[J] = it[
                    '[object WeakMap]'
                  ] = !1)
                var ot = 'object' == typeof t && t && t.Object === Object && t,
                  at =
                    'object' == typeof self &&
                    self &&
                    self.Object === Object &&
                    self,
                  st = ot || at || Function('return this')(),
                  lt = 'object' == typeof n && n && !n.nodeType && n,
                  ut = lt && 'object' == typeof r && r && !r.nodeType && r,
                  ct = ut && ut.exports === lt,
                  pt = ct && ot.process,
                  ht = (function () {
                    try {
                      return pt && pt.binding && pt.binding('util')
                    } catch (t) {}
                  })(),
                  ft = ht && ht.isTypedArray,
                  dt = Array.prototype,
                  mt = Function.prototype,
                  yt = Object.prototype,
                  vt = st['__core-js_shared__'],
                  gt = mt.toString,
                  _t = yt.hasOwnProperty,
                  xt = (function () {
                    var t = /[^.]+$/.exec(
                      (vt && vt.keys && vt.keys.IE_PROTO) || ''
                    )
                    return t ? 'Symbol(src)_1.' + t : ''
                  })(),
                  bt = yt.toString,
                  wt = RegExp(
                    '^' +
                      gt
                        .call(_t)
                        .replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
                        .replace(
                          /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                          '$1.*?'
                        ) +
                      '$'
                  ),
                  Et = ct ? st.Buffer : void 0,
                  St = st.Symbol,
                  Tt = st.Uint8Array,
                  It = yt.propertyIsEnumerable,
                  Ct = dt.splice,
                  At = St ? St.toStringTag : void 0,
                  kt = Object.getOwnPropertySymbols,
                  Pt = Et ? Et.isBuffer : void 0,
                  Mt = (function (t, e) {
                    return function (r) {
                      return t(e(r))
                    }
                  })(Object.keys, Object),
                  Lt = E(st, 'DataView'),
                  zt = E(st, 'Map'),
                  Ot = E(st, 'Promise'),
                  Dt = E(st, 'Set'),
                  Rt = E(st, 'WeakMap'),
                  Ft = E(Object, 'create'),
                  Bt = T(Lt),
                  Nt = T(zt),
                  Ut = T(Ot),
                  jt = T(Dt),
                  Vt = T(Rt),
                  qt = St ? St.prototype : void 0,
                  Gt = qt ? qt.valueOf : void 0
                ;(s.prototype.clear = function () {
                  ;(this.__data__ = Ft ? Ft(null) : {}), (this.size = 0)
                }),
                  (s.prototype.delete = function (t) {
                    var e = this.has(t) && delete this.__data__[t]
                    return (this.size -= e ? 1 : 0), e
                  }),
                  (s.prototype.get = function (t) {
                    var e = this.__data__
                    if (Ft) {
                      var r = e[t]
                      return r === L ? void 0 : r
                    }
                    return _t.call(e, t) ? e[t] : void 0
                  }),
                  (s.prototype.has = function (t) {
                    var e = this.__data__
                    return Ft ? void 0 !== e[t] : _t.call(e, t)
                  }),
                  (s.prototype.set = function (t, e) {
                    var r = this.__data__
                    return (
                      (this.size += this.has(t) ? 0 : 1),
                      (r[t] = Ft && void 0 === e ? L : e),
                      this
                    )
                  }),
                  (l.prototype.clear = function () {
                    ;(this.__data__ = []), (this.size = 0)
                  }),
                  (l.prototype.delete = function (t) {
                    var e = this.__data__,
                      r = f(e, t)
                    return !(
                      r < 0 ||
                      (r == e.length - 1 ? e.pop() : Ct.call(e, r, 1),
                      --this.size,
                      0)
                    )
                  }),
                  (l.prototype.get = function (t) {
                    var e = this.__data__,
                      r = f(e, t)
                    return r < 0 ? void 0 : e[r][1]
                  }),
                  (l.prototype.has = function (t) {
                    return f(this.__data__, t) > -1
                  }),
                  (l.prototype.set = function (t, e) {
                    var r = this.__data__,
                      n = f(r, t)
                    return (
                      n < 0 ? (++this.size, r.push([t, e])) : (r[n][1] = e),
                      this
                    )
                  }),
                  (u.prototype.clear = function () {
                    ;(this.size = 0),
                      (this.__data__ = {
                        hash: new s(),
                        map: new (zt || l)(),
                        string: new s(),
                      })
                  }),
                  (u.prototype.delete = function (t) {
                    var e = w(this, t).delete(t)
                    return (this.size -= e ? 1 : 0), e
                  }),
                  (u.prototype.get = function (t) {
                    return w(this, t).get(t)
                  }),
                  (u.prototype.has = function (t) {
                    return w(this, t).has(t)
                  }),
                  (u.prototype.set = function (t, e) {
                    var r = w(this, t),
                      n = r.size
                    return r.set(t, e), (this.size += r.size == n ? 0 : 1), this
                  }),
                  (c.prototype.add = c.prototype.push = function (t) {
                    return this.__data__.set(t, L), this
                  }),
                  (c.prototype.has = function (t) {
                    return this.__data__.has(t)
                  }),
                  (p.prototype.clear = function () {
                    ;(this.__data__ = new l()), (this.size = 0)
                  }),
                  (p.prototype.delete = function (t) {
                    var e = this.__data__,
                      r = e.delete(t)
                    return (this.size = e.size), r
                  }),
                  (p.prototype.get = function (t) {
                    return this.__data__.get(t)
                  }),
                  (p.prototype.has = function (t) {
                    return this.__data__.has(t)
                  }),
                  (p.prototype.set = function (t, e) {
                    var r = this.__data__
                    if (r instanceof l) {
                      var n = r.__data__
                      if (!zt || n.length < 199)
                        return n.push([t, e]), (this.size = ++r.size), this
                      r = this.__data__ = new u(n)
                    }
                    return r.set(t, e), (this.size = r.size), this
                  })
                var $t = kt
                    ? function (t) {
                        return null == t
                          ? []
                          : ((t = Object(t)),
                            (function (t, e) {
                              for (
                                var r = -1,
                                  n = null == t ? 0 : t.length,
                                  i = 0,
                                  o = [];
                                ++r < n;

                              ) {
                                var a = t[r]
                                e(a, r, t) && (o[i++] = a)
                              }
                              return o
                            })(kt(t), function (e) {
                              return It.call(t, e)
                            }))
                      }
                    : function () {
                        return []
                      },
                  Zt = d
                ;((Lt && Zt(new Lt(new ArrayBuffer(1))) != et) ||
                  (zt && Zt(new zt()) != G) ||
                  (Ot && '[object Promise]' != Zt(Ot.resolve())) ||
                  (Dt && Zt(new Dt()) != H) ||
                  (Rt && '[object WeakMap]' != Zt(new Rt()))) &&
                  (Zt = function (t) {
                    var e = d(t),
                      r = e == X ? t.constructor : void 0,
                      n = r ? T(r) : ''
                    if (n)
                      switch (n) {
                        case Bt:
                          return et
                        case Nt:
                          return G
                        case Ut:
                          return '[object Promise]'
                        case jt:
                          return H
                        case Vt:
                          return '[object WeakMap]'
                      }
                    return e
                  })
                var Xt = m(
                    (function () {
                      return arguments
                    })()
                  )
                    ? m
                    : function (t) {
                        return (
                          P(t) && _t.call(t, 'callee') && !It.call(t, 'callee')
                        )
                      },
                  Kt = Array.isArray,
                  Wt =
                    Pt ||
                    function () {
                      return !1
                    },
                  Ht = ft
                    ? (function (t) {
                        return function (e) {
                          return t(e)
                        }
                      })(ft)
                    : function (t) {
                        return P(t) && A(t.length) && !!it[d(t)]
                      }
                r.exports = function (t, e) {
                  return y(t, e)
                }
              }.call(
                this,
                void 0 !== e
                  ? e
                  : 'undefined' != typeof self
                  ? self
                  : 'undefined' != typeof window
                  ? window
                  : {}
              ))
            },
            {},
          ],
          17: [
            function (t, e, r) {
              ;(function (t) {
                function e(t, e) {
                  for (var r = 0, n = t.length - 1; n >= 0; n--) {
                    var i = t[n]
                    '.' === i
                      ? t.splice(n, 1)
                      : '..' === i
                      ? (t.splice(n, 1), r++)
                      : r && (t.splice(n, 1), r--)
                  }
                  if (e) for (; r--; r) t.unshift('..')
                  return t
                }
                function n(t, e) {
                  if (t.filter) return t.filter(e)
                  for (var r = [], n = 0; n < t.length; n++)
                    e(t[n], n, t) && r.push(t[n])
                  return r
                }
                var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,
                  o = function (t) {
                    return i.exec(t).slice(1)
                  }
                ;(r.resolve = function () {
                  for (
                    var r = '', i = !1, o = arguments.length - 1;
                    o >= -1 && !i;
                    o--
                  ) {
                    var a = o >= 0 ? arguments[o] : t.cwd()
                    if ('string' != typeof a)
                      throw new TypeError(
                        'Arguments to path.resolve must be strings'
                      )
                    a && ((r = a + '/' + r), (i = '/' === a.charAt(0)))
                  }
                  return (
                    (i ? '/' : '') +
                      (r = e(
                        n(r.split('/'), function (t) {
                          return !!t
                        }),
                        !i
                      ).join('/')) || '.'
                  )
                }),
                  (r.normalize = function (t) {
                    var i = r.isAbsolute(t),
                      o = '/' === a(t, -1)
                    return (
                      (t = e(
                        n(t.split('/'), function (t) {
                          return !!t
                        }),
                        !i
                      ).join('/')) ||
                        i ||
                        (t = '.'),
                      t && o && (t += '/'),
                      (i ? '/' : '') + t
                    )
                  }),
                  (r.isAbsolute = function (t) {
                    return '/' === t.charAt(0)
                  }),
                  (r.join = function () {
                    var t = Array.prototype.slice.call(arguments, 0)
                    return r.normalize(
                      n(t, function (t, e) {
                        if ('string' != typeof t)
                          throw new TypeError(
                            'Arguments to path.join must be strings'
                          )
                        return t
                      }).join('/')
                    )
                  }),
                  (r.relative = function (t, e) {
                    function n(t) {
                      for (var e = 0; e < t.length && '' === t[e]; e++);
                      for (var r = t.length - 1; r >= 0 && '' === t[r]; r--);
                      return e > r ? [] : t.slice(e, r - e + 1)
                    }
                    ;(t = r.resolve(t).substr(1)), (e = r.resolve(e).substr(1))
                    for (
                      var i = n(t.split('/')),
                        o = n(e.split('/')),
                        a = Math.min(i.length, o.length),
                        s = a,
                        l = 0;
                      l < a;
                      l++
                    )
                      if (i[l] !== o[l]) {
                        s = l
                        break
                      }
                    var u = []
                    for (l = s; l < i.length; l++) u.push('..')
                    return (u = u.concat(o.slice(s))).join('/')
                  }),
                  (r.sep = '/'),
                  (r.delimiter = ':'),
                  (r.dirname = function (t) {
                    var e = o(t),
                      r = e[0],
                      n = e[1]
                    return r || n
                      ? (n && (n = n.substr(0, n.length - 1)), r + n)
                      : '.'
                  }),
                  (r.basename = function (t, e) {
                    var r = o(t)[2]
                    return (
                      e &&
                        r.substr(-1 * e.length) === e &&
                        (r = r.substr(0, r.length - e.length)),
                      r
                    )
                  }),
                  (r.extname = function (t) {
                    return o(t)[3]
                  })
                var a =
                  'b' === 'ab'.substr(-1)
                    ? function (t, e, r) {
                        return t.substr(e, r)
                      }
                    : function (t, e, r) {
                        return e < 0 && (e = t.length + e), t.substr(e, r)
                      }
              }.call(this, t('_process')))
            },
            { _process: 18 },
          ],
          18: [
            function (t, e, r) {
              function n() {
                throw new Error('setTimeout has not been defined')
              }
              function i() {
                throw new Error('clearTimeout has not been defined')
              }
              function o(t) {
                if (c === setTimeout) return setTimeout(t, 0)
                if ((c === n || !c) && setTimeout)
                  return (c = setTimeout), setTimeout(t, 0)
                try {
                  return c(t, 0)
                } catch (e) {
                  try {
                    return c.call(null, t, 0)
                  } catch (e) {
                    return c.call(this, t, 0)
                  }
                }
              }
              function a() {
                m &&
                  f &&
                  ((m = !1),
                  f.length ? (d = f.concat(d)) : (y = -1),
                  d.length && s())
              }
              function s() {
                if (!m) {
                  var t = o(a)
                  m = !0
                  for (var e = d.length; e; ) {
                    for (f = d, d = []; ++y < e; ) f && f[y].run()
                    ;(y = -1), (e = d.length)
                  }
                  ;(f = null),
                    (m = !1),
                    (function (t) {
                      if (p === clearTimeout) return clearTimeout(t)
                      if ((p === i || !p) && clearTimeout)
                        return (p = clearTimeout), clearTimeout(t)
                      try {
                        p(t)
                      } catch (e) {
                        try {
                          return p.call(null, t)
                        } catch (e) {
                          return p.call(this, t)
                        }
                      }
                    })(t)
                }
              }
              function l(t, e) {
                ;(this.fun = t), (this.array = e)
              }
              function u() {}
              var c,
                p,
                h = (e.exports = {})
              !(function () {
                try {
                  c = 'function' == typeof setTimeout ? setTimeout : n
                } catch (t) {
                  c = n
                }
                try {
                  p = 'function' == typeof clearTimeout ? clearTimeout : i
                } catch (t) {
                  p = i
                }
              })()
              var f,
                d = [],
                m = !1,
                y = -1
              ;(h.nextTick = function (t) {
                var e = new Array(arguments.length - 1)
                if (arguments.length > 1)
                  for (var r = 1; r < arguments.length; r++)
                    e[r - 1] = arguments[r]
                d.push(new l(t, e)), 1 !== d.length || m || o(s)
              }),
                (l.prototype.run = function () {
                  this.fun.apply(null, this.array)
                }),
                (h.title = 'browser'),
                (h.browser = !0),
                (h.env = {}),
                (h.argv = []),
                (h.version = ''),
                (h.versions = {}),
                (h.on = u),
                (h.addListener = u),
                (h.once = u),
                (h.off = u),
                (h.removeListener = u),
                (h.removeAllListeners = u),
                (h.emit = u),
                (h.prependListener = u),
                (h.prependOnceListener = u),
                (h.listeners = function (t) {
                  return []
                }),
                (h.binding = function (t) {
                  throw new Error('process.binding is not supported')
                }),
                (h.cwd = function () {
                  return '/'
                }),
                (h.chdir = function (t) {
                  throw new Error('process.chdir is not supported')
                }),
                (h.umask = function () {
                  return 0
                })
            },
            {},
          ],
          19: [
            function (t, e, r) {
              function n(t) {
                this.value = t
              }
              function i(t, e, r) {
                var n = [],
                  i = [],
                  a = !0
                return (function t(s) {
                  function h() {
                    if ('object' == typeof m.node && null !== m.node) {
                      ;(m.keys && m.node_ === m.node) || (m.keys = l(m.node)),
                        (m.isLeaf = 0 == m.keys.length)
                      for (var t = 0; t < i.length; t++)
                        if (i[t].node_ === s) {
                          m.circular = i[t]
                          break
                        }
                    } else (m.isLeaf = !0), (m.keys = null)
                    ;(m.notLeaf = !m.isLeaf), (m.notRoot = !m.isRoot)
                  }
                  var f = {},
                    d = !0,
                    m = {
                      node: r ? o(s) : s,
                      node_: s,
                      path: [].concat(n),
                      parent: i[i.length - 1],
                      parents: i,
                      key: n.slice(-1)[0],
                      isRoot: 0 === n.length,
                      level: n.length,
                      circular: null,
                      update: function (t, e) {
                        m.isRoot || (m.parent.node[m.key] = t),
                          (m.node = t),
                          e && (d = !1)
                      },
                      delete: function (t) {
                        delete m.parent.node[m.key], t && (d = !1)
                      },
                      remove: function (t) {
                        u(m.parent.node)
                          ? m.parent.node.splice(m.key, 1)
                          : delete m.parent.node[m.key],
                          t && (d = !1)
                      },
                      keys: null,
                      before: function (t) {
                        f.before = t
                      },
                      after: function (t) {
                        f.after = t
                      },
                      pre: function (t) {
                        f.pre = t
                      },
                      post: function (t) {
                        f.post = t
                      },
                      stop: function () {
                        a = !1
                      },
                      block: function () {
                        d = !1
                      },
                    }
                  if (!a) return m
                  h()
                  var y = e.call(m, m.node)
                  return (
                    void 0 !== y && m.update && m.update(y),
                    f.before && f.before.call(m, m.node),
                    d
                      ? ('object' != typeof m.node ||
                          null === m.node ||
                          m.circular ||
                          (i.push(m),
                          h(),
                          c(m.keys, function (e, i) {
                            n.push(e), f.pre && f.pre.call(m, m.node[e], e)
                            var o = t(m.node[e])
                            r && p.call(m.node, e) && (m.node[e] = o.node),
                              (o.isLast = i == m.keys.length - 1),
                              (o.isFirst = 0 == i),
                              f.post && f.post.call(m, o),
                              n.pop()
                          }),
                          i.pop()),
                        f.after && f.after.call(m, m.node),
                        m)
                      : m
                  )
                })(t).node
              }
              function o(t) {
                if ('object' == typeof t && null !== t) {
                  var e
                  if (u(t)) e = []
                  else if (
                    (function (t) {
                      return '[object Date]' === a(t)
                    })(t)
                  )
                    e = new Date(t.getTime ? t.getTime() : t)
                  else if (
                    (function (t) {
                      return '[object RegExp]' === a(t)
                    })(t)
                  )
                    e = new RegExp(t)
                  else if (
                    (function (t) {
                      return '[object Error]' === a(t)
                    })(t)
                  )
                    e = { message: t.message }
                  else if (
                    (function (t) {
                      return '[object Boolean]' === a(t)
                    })(t)
                  )
                    e = new Boolean(t)
                  else if (
                    (function (t) {
                      return '[object Number]' === a(t)
                    })(t)
                  )
                    e = new Number(t)
                  else if (
                    (function (t) {
                      return '[object String]' === a(t)
                    })(t)
                  )
                    e = new String(t)
                  else if (Object.create && Object.getPrototypeOf)
                    e = Object.create(Object.getPrototypeOf(t))
                  else if (t.constructor === Object) e = {}
                  else {
                    var r =
                        (t.constructor && t.constructor.prototype) ||
                        t.__proto__ ||
                        {},
                      n = function () {}
                    ;(n.prototype = r), (e = new n())
                  }
                  return (
                    c(l(t), function (r) {
                      e[r] = t[r]
                    }),
                    e
                  )
                }
                return t
              }
              function a(t) {
                return Object.prototype.toString.call(t)
              }
              var s = (e.exports = function (t) {
                return new n(t)
              })
              ;(n.prototype.get = function (t) {
                for (var e = this.value, r = 0; r < t.length; r++) {
                  var n = t[r]
                  if (!e || !p.call(e, n)) {
                    e = void 0
                    break
                  }
                  e = e[n]
                }
                return e
              }),
                (n.prototype.has = function (t) {
                  for (var e = this.value, r = 0; r < t.length; r++) {
                    var n = t[r]
                    if (!e || !p.call(e, n)) return !1
                    e = e[n]
                  }
                  return !0
                }),
                (n.prototype.set = function (t, e) {
                  for (var r = this.value, n = 0; n < t.length - 1; n++) {
                    var i = t[n]
                    p.call(r, i) || (r[i] = {}), (r = r[i])
                  }
                  return (r[t[n]] = e), e
                }),
                (n.prototype.map = function (t) {
                  return i(this.value, t, !0)
                }),
                (n.prototype.forEach = function (t) {
                  return (this.value = i(this.value, t, !1)), this.value
                }),
                (n.prototype.reduce = function (t, e) {
                  var r = 1 === arguments.length,
                    n = r ? this.value : e
                  return (
                    this.forEach(function (e) {
                      ;(this.isRoot && r) || (n = t.call(this, n, e))
                    }),
                    n
                  )
                }),
                (n.prototype.paths = function () {
                  var t = []
                  return (
                    this.forEach(function (e) {
                      t.push(this.path)
                    }),
                    t
                  )
                }),
                (n.prototype.nodes = function () {
                  var t = []
                  return (
                    this.forEach(function (e) {
                      t.push(this.node)
                    }),
                    t
                  )
                }),
                (n.prototype.clone = function () {
                  var t = [],
                    e = []
                  return (function r(n) {
                    for (var i = 0; i < t.length; i++)
                      if (t[i] === n) return e[i]
                    if ('object' == typeof n && null !== n) {
                      var a = o(n)
                      return (
                        t.push(n),
                        e.push(a),
                        c(l(n), function (t) {
                          a[t] = r(n[t])
                        }),
                        t.pop(),
                        e.pop(),
                        a
                      )
                    }
                    return n
                  })(this.value)
                })
              var l =
                  Object.keys ||
                  function (t) {
                    var e = []
                    for (var r in t) e.push(r)
                    return e
                  },
                u =
                  Array.isArray ||
                  function (t) {
                    return (
                      '[object Array]' === Object.prototype.toString.call(t)
                    )
                  },
                c = function (t, e) {
                  if (t.forEach) return t.forEach(e)
                  for (var r = 0; r < t.length; r++) e(t[r], r, t)
                }
              c(l(n.prototype), function (t) {
                s[t] = function (e) {
                  var r = [].slice.call(arguments, 1),
                    i = new n(e)
                  return i[t].apply(i, r)
                }
              })
              var p =
                Object.hasOwnProperty ||
                function (t, e) {
                  return e in t
                }
            },
            {},
          ],
          20: [
            function (t, e, r) {
              ;(e.exports.RADIUS = 6378137),
                (e.exports.FLATTENING = 1 / 298.257223563),
                (e.exports.POLAR_RADIUS = 6356752.3142)
            },
            {},
          ],
          21: [
            function (t, e, r) {
              e.exports = function () {
                for (var t = {}, e = 0; e < arguments.length; e++) {
                  var r = arguments[e]
                  for (var i in r) n.call(r, i) && (t[i] = r[i])
                }
                return t
              }
              var n = Object.prototype.hasOwnProperty
            },
            {},
          ],
          22: [
            function (t, e, r) {
              'use strict'
              var n = t('lodash.isequal'),
                i = t('@mapbox/geojson-normalize'),
                o = t('hat'),
                a = t('./lib/features_at'),
                s = t('./lib/string_sets_are_equal'),
                l = t('@mapbox/geojsonhint'),
                u = t('./constants'),
                c = t('./lib/string_set'),
                p = {
                  Polygon: t('./feature_types/polygon'),
                  LineString: t('./feature_types/line_string'),
                  Point: t('./feature_types/point'),
                  MultiPolygon: t('./feature_types/multi_feature'),
                  MultiLineString: t('./feature_types/multi_feature'),
                  MultiPoint: t('./feature_types/multi_feature'),
                }
              e.exports = function (t, e) {
                return (
                  (e.modes = u.modes),
                  (e.getFeatureIdsAt = function (e) {
                    return a.click({ point: e }, null, t).map(function (t) {
                      return t.properties.id
                    })
                  }),
                  (e.getSelectedIds = function () {
                    return t.store.getSelectedIds()
                  }),
                  (e.getSelected = function () {
                    return {
                      type: u.geojsonTypes.FEATURE_COLLECTION,
                      features: t.store
                        .getSelectedIds()
                        .map(function (e) {
                          return t.store.get(e)
                        })
                        .map(function (t) {
                          return t.toGeoJSON()
                        }),
                    }
                  }),
                  (e.getSelectedPoints = function () {
                    return {
                      type: u.geojsonTypes.FEATURE_COLLECTION,
                      features: t.store
                        .getSelectedCoordinates()
                        .map(function (t) {
                          return {
                            type: u.geojsonTypes.FEATURE,
                            properties: {},
                            geometry: {
                              type: u.geojsonTypes.POINT,
                              coordinates: t.coordinates,
                            },
                          }
                        }),
                    }
                  }),
                  (e.set = function (r) {
                    if (
                      void 0 === r.type ||
                      r.type !== u.geojsonTypes.FEATURE_COLLECTION ||
                      !Array.isArray(r.features)
                    )
                      throw new Error('Invalid FeatureCollection')
                    var n = t.store.createRenderBatch(),
                      i = t.store.getAllIds().slice(),
                      o = e.add(r),
                      a = new c(o)
                    return (
                      (i = i.filter(function (t) {
                        return !a.has(t)
                      })).length && e.delete(i),
                      n(),
                      o
                    )
                  }),
                  (e.add = function (e) {
                    var r = l
                      .hint(e, { precisionWarning: !1 })
                      .filter(function (t) {
                        return 'message' !== t.level
                      })
                    if (r.length) throw new Error(r[0].message)
                    var a = JSON.parse(JSON.stringify(i(e))).features.map(
                      function (e) {
                        if (((e.id = e.id || o()), null === e.geometry))
                          throw new Error('Invalid geometry: null')
                        if (
                          void 0 === t.store.get(e.id) ||
                          t.store.get(e.id).type !== e.geometry.type
                        ) {
                          var r = p[e.geometry.type]
                          if (void 0 === r)
                            throw new Error(
                              'Invalid geometry type: '.concat(
                                e.geometry.type,
                                '.'
                              )
                            )
                          var i = new r(t, e)
                          t.store.add(i)
                        } else {
                          var a = t.store.get(e.id)
                          ;(a.properties = e.properties),
                            n(a.getCoordinates(), e.geometry.coordinates) ||
                              a.incomingCoords(e.geometry.coordinates)
                        }
                        return e.id
                      }
                    )
                    return t.store.render(), a
                  }),
                  (e.get = function (e) {
                    var r = t.store.get(e)
                    if (r) return r.toGeoJSON()
                  }),
                  (e.getAll = function () {
                    return {
                      type: u.geojsonTypes.FEATURE_COLLECTION,
                      features: t.store.getAll().map(function (t) {
                        return t.toGeoJSON()
                      }),
                    }
                  }),
                  (e.delete = function (r) {
                    return (
                      t.store.delete(r, { silent: !0 }),
                      e.getMode() !== u.modes.DIRECT_SELECT ||
                      t.store.getSelectedIds().length
                        ? t.store.render()
                        : t.events.changeMode(u.modes.SIMPLE_SELECT, void 0, {
                            silent: !0,
                          }),
                      e
                    )
                  }),
                  (e.deleteAll = function () {
                    return (
                      t.store.delete(t.store.getAllIds(), { silent: !0 }),
                      e.getMode() === u.modes.DIRECT_SELECT
                        ? t.events.changeMode(u.modes.SIMPLE_SELECT, void 0, {
                            silent: !0,
                          })
                        : t.store.render(),
                      e
                    )
                  }),
                  (e.changeMode = function (r) {
                    var n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {}
                    return r === u.modes.SIMPLE_SELECT &&
                      e.getMode() === u.modes.SIMPLE_SELECT
                      ? (s(n.featureIds || [], t.store.getSelectedIds()) ||
                          (t.store.setSelected(n.featureIds, { silent: !0 }),
                          t.store.render()),
                        e)
                      : ((r === u.modes.DIRECT_SELECT &&
                          e.getMode() === u.modes.DIRECT_SELECT &&
                          n.featureId === t.store.getSelectedIds()[0]) ||
                          t.events.changeMode(r, n, { silent: !0 }),
                        e)
                  }),
                  (e.getMode = function () {
                    return t.events.getMode()
                  }),
                  (e.trash = function () {
                    return t.events.trash({ silent: !0 }), e
                  }),
                  (e.combineFeatures = function () {
                    return t.events.combineFeatures({ silent: !0 }), e
                  }),
                  (e.uncombineFeatures = function () {
                    return t.events.uncombineFeatures({ silent: !0 }), e
                  }),
                  (e.setFeatureProperty = function (r, n, i) {
                    return t.store.setFeatureProperty(r, n, i), e
                  }),
                  e
                )
              }
            },
            {
              './constants': 23,
              './feature_types/line_string': 26,
              './feature_types/multi_feature': 27,
              './feature_types/point': 28,
              './feature_types/polygon': 29,
              './lib/features_at': 37,
              './lib/string_set': 47,
              './lib/string_sets_are_equal': 48,
              '@mapbox/geojson-normalize': 7,
              '@mapbox/geojsonhint': 8,
              hat: 14,
              'lodash.isequal': 16,
            },
          ],
          23: [
            function (t, e, r) {
              'use strict'
              e.exports = {
                classes: {
                  CONTROL_BASE: 'mapboxgl-ctrl',
                  CONTROL_PREFIX: 'mapboxgl-ctrl-',
                  CONTROL_BUTTON: 'mapbox-gl-draw_ctrl-draw-btn',
                  CONTROL_BUTTON_LINE: 'mapbox-gl-draw_line',
                  CONTROL_BUTTON_POLYGON: 'mapbox-gl-draw_polygon',
                  CONTROL_BUTTON_POINT: 'mapbox-gl-draw_point',
                  CONTROL_BUTTON_TRASH: 'mapbox-gl-draw_trash',
                  CONTROL_BUTTON_COMBINE_FEATURES: 'mapbox-gl-draw_combine',
                  CONTROL_BUTTON_UNCOMBINE_FEATURES: 'mapbox-gl-draw_uncombine',
                  CONTROL_GROUP: 'mapboxgl-ctrl-group',
                  ATTRIBUTION: 'mapboxgl-ctrl-attrib',
                  ACTIVE_BUTTON: 'active',
                  BOX_SELECT: 'mapbox-gl-draw_boxselect',
                },
                sources: {
                  HOT: 'mapbox-gl-draw-hot',
                  COLD: 'mapbox-gl-draw-cold',
                },
                cursors: {
                  ADD: 'add',
                  MOVE: 'move',
                  DRAG: 'drag',
                  POINTER: 'pointer',
                  NONE: 'none',
                },
                types: {
                  POLYGON: 'polygon',
                  LINE: 'line_string',
                  POINT: 'point',
                },
                geojsonTypes: {
                  FEATURE: 'Feature',
                  POLYGON: 'Polygon',
                  LINE_STRING: 'LineString',
                  POINT: 'Point',
                  FEATURE_COLLECTION: 'FeatureCollection',
                  MULTI_PREFIX: 'Multi',
                  MULTI_POINT: 'MultiPoint',
                  MULTI_LINE_STRING: 'MultiLineString',
                  MULTI_POLYGON: 'MultiPolygon',
                },
                modes: {
                  DRAW_LINE_STRING: 'draw_line_string',
                  DRAW_POLYGON: 'draw_polygon',
                  DRAW_POINT: 'draw_point',
                  SIMPLE_SELECT: 'simple_select',
                  DIRECT_SELECT: 'direct_select',
                  STATIC: 'static',
                },
                events: {
                  CREATE: 'draw.create',
                  DELETE: 'draw.delete',
                  UPDATE: 'draw.update',
                  SELECTION_CHANGE: 'draw.selectionchange',
                  MODE_CHANGE: 'draw.modechange',
                  ACTIONABLE: 'draw.actionable',
                  RENDER: 'draw.render',
                  COMBINE_FEATURES: 'draw.combine',
                  UNCOMBINE_FEATURES: 'draw.uncombine',
                },
                updateActions: {
                  MOVE: 'move',
                  CHANGE_COORDINATES: 'change_coordinates',
                },
                meta: {
                  FEATURE: 'feature',
                  MIDPOINT: 'midpoint',
                  VERTEX: 'vertex',
                },
                activeStates: { ACTIVE: 'true', INACTIVE: 'false' },
                interactions: [
                  'scrollZoom',
                  'boxZoom',
                  'dragRotate',
                  'dragPan',
                  'keyboard',
                  'doubleClickZoom',
                  'touchZoomRotate',
                ],
                LAT_MIN: -90,
                LAT_RENDERED_MIN: -85,
                LAT_MAX: 90,
                LAT_RENDERED_MAX: 85,
                LNG_MIN: -270,
                LNG_MAX: 270,
              }
            },
            {},
          ],
          24: [
            function (t, e, r) {
              'use strict'
              var n = t('./lib/mode_handler'),
                i = t('./lib/get_features_and_set_cursor'),
                o = t('./lib/features_at'),
                a = t('./lib/is_click'),
                s = t('./lib/is_tap'),
                l = t('./constants'),
                u = t('./modes/object_to_mode')
              e.exports = function (t) {
                function e(e, i) {
                  var o =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : {}
                  d.stop()
                  var a = r[e]
                  if (void 0 === a)
                    throw new Error(''.concat(e, ' is not valid'))
                  f = e
                  var s = a(t, i)
                  ;(d = n(s, t)),
                    o.silent || t.map.fire(l.events.MODE_CHANGE, { mode: e }),
                    t.store.setDirty(),
                    t.store.render()
                }
                var r = Object.keys(t.options.modes).reduce(function (e, r) {
                    return (e[r] = u(t.options.modes[r])), e
                  }, {}),
                  c = {},
                  p = {},
                  h = {},
                  f = null,
                  d = null
                ;(h.drag = function (e, r) {
                  r({ point: e.point, time: new Date().getTime() })
                    ? (t.ui.queueMapClasses({ mouse: l.cursors.DRAG }),
                      d.drag(e))
                    : e.originalEvent.stopPropagation()
                }),
                  (h.mousedrag = function (t) {
                    h.drag(t, function (t) {
                      return !a(c, t)
                    })
                  }),
                  (h.touchdrag = function (t) {
                    h.drag(t, function (t) {
                      return !s(p, t)
                    })
                  }),
                  (h.mousemove = function (e) {
                    if (
                      1 ===
                      (void 0 !== e.originalEvent.buttons
                        ? e.originalEvent.buttons
                        : e.originalEvent.which)
                    )
                      return h.mousedrag(e)
                    var r = i(e, t)
                    ;(e.featureTarget = r), d.mousemove(e)
                  }),
                  (h.mousedown = function (e) {
                    c = { time: new Date().getTime(), point: e.point }
                    var r = i(e, t)
                    ;(e.featureTarget = r), d.mousedown(e)
                  }),
                  (h.mouseup = function (e) {
                    var r = i(e, t)
                    ;(e.featureTarget = r),
                      a(c, { point: e.point, time: new Date().getTime() })
                        ? d.click(e)
                        : d.mouseup(e)
                  }),
                  (h.mouseout = function (t) {
                    d.mouseout(t)
                  }),
                  (h.touchstart = function (e) {
                    if (
                      (e.originalEvent.preventDefault(), t.options.touchEnabled)
                    ) {
                      p = { time: new Date().getTime(), point: e.point }
                      var r = o.touch(e, null, t)[0]
                      ;(e.featureTarget = r), d.touchstart(e)
                    }
                  }),
                  (h.touchmove = function (e) {
                    if (
                      (e.originalEvent.preventDefault(), t.options.touchEnabled)
                    )
                      return d.touchmove(e), h.touchdrag(e)
                  }),
                  (h.touchend = function (e) {
                    if (
                      (e.originalEvent.preventDefault(), t.options.touchEnabled)
                    ) {
                      var r = o.touch(e, null, t)[0]
                      ;(e.featureTarget = r),
                        s(p, { time: new Date().getTime(), point: e.point })
                          ? d.tap(e)
                          : d.touchend(e)
                    }
                  })
                var m = function (t) {
                  return !(8 === t || 46 === t || (t >= 48 && t <= 57))
                }
                ;(h.keydown = function (r) {
                  'mapboxgl-canvas' ===
                    (r.srcElement || r.target).classList[0] &&
                    ((8 !== r.keyCode && 46 !== r.keyCode) ||
                    !t.options.controls.trash
                      ? m(r.keyCode)
                        ? d.keydown(r)
                        : 49 === r.keyCode && t.options.controls.point
                        ? e(l.modes.DRAW_POINT)
                        : 50 === r.keyCode && t.options.controls.line_string
                        ? e(l.modes.DRAW_LINE_STRING)
                        : 51 === r.keyCode &&
                          t.options.controls.polygon &&
                          e(l.modes.DRAW_POLYGON)
                      : (r.preventDefault(), d.trash()))
                }),
                  (h.keyup = function (t) {
                    m(t.keyCode) && d.keyup(t)
                  }),
                  (h.zoomend = function () {
                    t.store.changeZoom()
                  }),
                  (h.data = function (e) {
                    if ('style' === e.dataType) {
                      var r = t.setup,
                        n = t.map,
                        i = t.options,
                        o = t.store
                      i.styles.some(function (t) {
                        return n.getLayer(t.id)
                      }) || (r.addLayers(), o.setDirty(), o.render())
                    }
                  })
                var y = {
                  trash: !1,
                  combineFeatures: !1,
                  uncombineFeatures: !1,
                }
                return {
                  start: function () {
                    ;(f = t.options.defaultMode), (d = n(r[f](t), t))
                  },
                  changeMode: e,
                  actionable: function (e) {
                    var r = !1
                    Object.keys(e).forEach(function (t) {
                      if (void 0 === y[t])
                        throw new Error('Invalid action type')
                      y[t] !== e[t] && (r = !0), (y[t] = e[t])
                    }),
                      r && t.map.fire(l.events.ACTIONABLE, { actions: y })
                  },
                  currentModeName: function () {
                    return f
                  },
                  currentModeRender: function (t, e) {
                    return d.render(t, e)
                  },
                  fire: function (t, e) {
                    h[t] && h[t](e)
                  },
                  addEventListeners: function () {
                    t.map.on('mousemove', h.mousemove),
                      t.map.on('mousedown', h.mousedown),
                      t.map.on('mouseup', h.mouseup),
                      t.map.on('data', h.data),
                      t.map.on('touchmove', h.touchmove),
                      t.map.on('touchstart', h.touchstart),
                      t.map.on('touchend', h.touchend),
                      t.container.addEventListener('mouseout', h.mouseout),
                      t.options.keybindings &&
                        (t.container.addEventListener('keydown', h.keydown),
                        t.container.addEventListener('keyup', h.keyup))
                  },
                  removeEventListeners: function () {
                    t.map.off('mousemove', h.mousemove),
                      t.map.off('mousedown', h.mousedown),
                      t.map.off('mouseup', h.mouseup),
                      t.map.off('data', h.data),
                      t.map.off('touchmove', h.touchmove),
                      t.map.off('touchstart', h.touchstart),
                      t.map.off('touchend', h.touchend),
                      t.container.removeEventListener('mouseout', h.mouseout),
                      t.options.keybindings &&
                        (t.container.removeEventListener('keydown', h.keydown),
                        t.container.removeEventListener('keyup', h.keyup))
                  },
                  trash: function (t) {
                    d.trash(t)
                  },
                  combineFeatures: function () {
                    d.combineFeatures()
                  },
                  uncombineFeatures: function () {
                    d.uncombineFeatures()
                  },
                  getMode: function () {
                    return f
                  },
                }
              }
            },
            {
              './constants': 23,
              './lib/features_at': 37,
              './lib/get_features_and_set_cursor': 38,
              './lib/is_click': 39,
              './lib/is_tap': 41,
              './lib/mode_handler': 43,
              './modes/object_to_mode': 59,
            },
          ],
          25: [
            function (t, e, r) {
              'use strict'
              var n = t('hat'),
                i = t('../constants'),
                o = function (t, e) {
                  ;(this.ctx = t),
                    (this.properties = e.properties || {}),
                    (this.coordinates = e.geometry.coordinates),
                    (this.id = e.id || n()),
                    (this.type = e.geometry.type)
                }
              ;(o.prototype.changed = function () {
                this.ctx.store.featureChanged(this.id)
              }),
                (o.prototype.incomingCoords = function (t) {
                  this.setCoordinates(t)
                }),
                (o.prototype.setCoordinates = function (t) {
                  ;(this.coordinates = t), this.changed()
                }),
                (o.prototype.getCoordinates = function () {
                  return JSON.parse(JSON.stringify(this.coordinates))
                }),
                (o.prototype.setProperty = function (t, e) {
                  this.properties[t] = e
                }),
                (o.prototype.toGeoJSON = function () {
                  return JSON.parse(
                    JSON.stringify({
                      id: this.id,
                      type: i.geojsonTypes.FEATURE,
                      properties: this.properties,
                      geometry: {
                        coordinates: this.getCoordinates(),
                        type: this.type,
                      },
                    })
                  )
                }),
                (o.prototype.internal = function (t) {
                  var e = {
                    id: this.id,
                    meta: i.meta.FEATURE,
                    'meta:type': this.type,
                    active: i.activeStates.INACTIVE,
                    mode: t,
                  }
                  if (this.ctx.options.userProperties)
                    for (var r in this.properties)
                      e['user_'.concat(r)] = this.properties[r]
                  return {
                    type: i.geojsonTypes.FEATURE,
                    properties: e,
                    geometry: {
                      coordinates: this.getCoordinates(),
                      type: this.type,
                    },
                  }
                }),
                (e.exports = o)
            },
            { '../constants': 23, hat: 14 },
          ],
          26: [
            function (t, e, r) {
              'use strict'
              var n = t('./feature'),
                i = function (t, e) {
                  n.call(this, t, e)
                }
              ;((i.prototype = Object.create(
                n.prototype
              )).isValid = function () {
                return this.coordinates.length > 1
              }),
                (i.prototype.addCoordinate = function (t, e, r) {
                  this.changed()
                  var n = parseInt(t, 10)
                  this.coordinates.splice(n, 0, [e, r])
                }),
                (i.prototype.getCoordinate = function (t) {
                  var e = parseInt(t, 10)
                  return JSON.parse(JSON.stringify(this.coordinates[e]))
                }),
                (i.prototype.removeCoordinate = function (t) {
                  this.changed(), this.coordinates.splice(parseInt(t, 10), 1)
                }),
                (i.prototype.updateCoordinate = function (t, e, r) {
                  var n = parseInt(t, 10)
                  ;(this.coordinates[n] = [e, r]), this.changed()
                }),
                (e.exports = i)
            },
            { './feature': 25 },
          ],
          27: [
            function (t, e, r) {
              'use strict'
              var n = t('./feature'),
                i = t('../constants'),
                o = t('hat'),
                a = {
                  MultiPoint: t('./point'),
                  MultiLineString: t('./line_string'),
                  MultiPolygon: t('./polygon'),
                },
                s = function (t, e, r, n, i) {
                  var o = r.split('.'),
                    a = parseInt(o[0], 10),
                    s = o[1] ? o.slice(1).join('.') : null
                  return t[a][e](s, n, i)
                },
                l = function (t, e) {
                  if (
                    (n.call(this, t, e),
                    delete this.coordinates,
                    (this.model = a[e.geometry.type]),
                    void 0 === this.model)
                  )
                    throw new TypeError(
                      ''.concat(e.geometry.type, ' is not a valid type')
                    )
                  this.features = this._coordinatesToFeatures(
                    e.geometry.coordinates
                  )
                }
              ;((l.prototype = Object.create(
                n.prototype
              ))._coordinatesToFeatures = function (t) {
                var e = this,
                  r = this.model.bind(this)
                return t.map(function (t) {
                  return new r(e.ctx, {
                    id: o(),
                    type: i.geojsonTypes.FEATURE,
                    properties: {},
                    geometry: {
                      coordinates: t,
                      type: e.type.replace('Multi', ''),
                    },
                  })
                })
              }),
                (l.prototype.isValid = function () {
                  return this.features.every(function (t) {
                    return t.isValid()
                  })
                }),
                (l.prototype.setCoordinates = function (t) {
                  ;(this.features = this._coordinatesToFeatures(t)),
                    this.changed()
                }),
                (l.prototype.getCoordinate = function (t) {
                  return s(this.features, 'getCoordinate', t)
                }),
                (l.prototype.getCoordinates = function () {
                  return JSON.parse(
                    JSON.stringify(
                      this.features.map(function (t) {
                        return t.type === i.geojsonTypes.POLYGON
                          ? t.getCoordinates()
                          : t.coordinates
                      })
                    )
                  )
                }),
                (l.prototype.updateCoordinate = function (t, e, r) {
                  s(this.features, 'updateCoordinate', t, e, r), this.changed()
                }),
                (l.prototype.addCoordinate = function (t, e, r) {
                  s(this.features, 'addCoordinate', t, e, r), this.changed()
                }),
                (l.prototype.removeCoordinate = function (t) {
                  s(this.features, 'removeCoordinate', t), this.changed()
                }),
                (l.prototype.getFeatures = function () {
                  return this.features
                }),
                (e.exports = l)
            },
            {
              '../constants': 23,
              './feature': 25,
              './line_string': 26,
              './point': 28,
              './polygon': 29,
              hat: 14,
            },
          ],
          28: [
            function (t, e, r) {
              'use strict'
              var n = t('./feature'),
                i = function (t, e) {
                  n.call(this, t, e)
                }
              ;((i.prototype = Object.create(
                n.prototype
              )).isValid = function () {
                return (
                  'number' == typeof this.coordinates[0] &&
                  'number' == typeof this.coordinates[1]
                )
              }),
                (i.prototype.updateCoordinate = function (t, e, r) {
                  3 === arguments.length
                    ? (this.coordinates = [e, r])
                    : (this.coordinates = [t, e]),
                    this.changed()
                }),
                (i.prototype.getCoordinate = function () {
                  return this.getCoordinates()
                }),
                (e.exports = i)
            },
            { './feature': 25 },
          ],
          29: [
            function (t, e, r) {
              'use strict'
              var n = t('./feature'),
                i = function (t, e) {
                  n.call(this, t, e),
                    (this.coordinates = this.coordinates.map(function (t) {
                      return t.slice(0, -1)
                    }))
                }
              ;((i.prototype = Object.create(
                n.prototype
              )).isValid = function () {
                return (
                  0 !== this.coordinates.length &&
                  this.coordinates.every(function (t) {
                    return t.length > 2
                  })
                )
              }),
                (i.prototype.incomingCoords = function (t) {
                  ;(this.coordinates = t.map(function (t) {
                    return t.slice(0, -1)
                  })),
                    this.changed()
                }),
                (i.prototype.setCoordinates = function (t) {
                  ;(this.coordinates = t), this.changed()
                }),
                (i.prototype.addCoordinate = function (t, e, r) {
                  this.changed()
                  var n = t.split('.').map(function (t) {
                    return parseInt(t, 10)
                  })
                  this.coordinates[n[0]].splice(n[1], 0, [e, r])
                }),
                (i.prototype.removeCoordinate = function (t) {
                  this.changed()
                  var e = t.split('.').map(function (t) {
                      return parseInt(t, 10)
                    }),
                    r = this.coordinates[e[0]]
                  r &&
                    (r.splice(e[1], 1),
                    r.length < 3 && this.coordinates.splice(e[0], 1))
                }),
                (i.prototype.getCoordinate = function (t) {
                  var e = t.split('.').map(function (t) {
                      return parseInt(t, 10)
                    }),
                    r = this.coordinates[e[0]]
                  return JSON.parse(JSON.stringify(r[e[1]]))
                }),
                (i.prototype.getCoordinates = function () {
                  return this.coordinates.map(function (t) {
                    return t.concat([t[0]])
                  })
                }),
                (i.prototype.updateCoordinate = function (t, e, r) {
                  this.changed()
                  var n = t.split('.'),
                    i = parseInt(n[0], 10),
                    o = parseInt(n[1], 10)
                  void 0 === this.coordinates[i] && (this.coordinates[i] = []),
                    (this.coordinates[i][o] = [e, r])
                }),
                (e.exports = i)
            },
            { './feature': 25 },
          ],
          30: [
            function (t, e, r) {
              'use strict'
              var n = t('../constants')
              e.exports = {
                isOfMetaType: function (t) {
                  return function (e) {
                    var r = e.featureTarget
                    return !!r && !!r.properties && r.properties.meta === t
                  }
                },
                isShiftMousedown: function (t) {
                  return (
                    !!t.originalEvent &&
                    !!t.originalEvent.shiftKey &&
                    0 === t.originalEvent.button
                  )
                },
                isActiveFeature: function (t) {
                  return (
                    !!t.featureTarget &&
                    !!t.featureTarget.properties &&
                    t.featureTarget.properties.active ===
                      n.activeStates.ACTIVE &&
                    t.featureTarget.properties.meta === n.meta.FEATURE
                  )
                },
                isInactiveFeature: function (t) {
                  return (
                    !!t.featureTarget &&
                    !!t.featureTarget.properties &&
                    t.featureTarget.properties.active ===
                      n.activeStates.INACTIVE &&
                    t.featureTarget.properties.meta === n.meta.FEATURE
                  )
                },
                noTarget: function (t) {
                  return void 0 === t.featureTarget
                },
                isFeature: function (t) {
                  return (
                    !!t.featureTarget &&
                    !!t.featureTarget.properties &&
                    t.featureTarget.properties.meta === n.meta.FEATURE
                  )
                },
                isVertex: function (t) {
                  var e = t.featureTarget
                  return (
                    !!e && !!e.properties && e.properties.meta === n.meta.VERTEX
                  )
                },
                isShiftDown: function (t) {
                  return !!t.originalEvent && !0 === t.originalEvent.shiftKey
                },
                isEscapeKey: function (t) {
                  return 27 === t.keyCode
                },
                isEnterKey: function (t) {
                  return 13 === t.keyCode
                },
                true: function () {
                  return !0
                },
              }
            },
            { '../constants': 23 },
          ],
          31: [
            function (t, e, r) {
              'use strict'
              var n = t('@mapbox/geojson-extent'),
                i = t('../constants'),
                o = i.LAT_MIN,
                a = i.LAT_MAX,
                s = i.LAT_RENDERED_MIN,
                l = i.LAT_RENDERED_MAX,
                u = i.LNG_MIN,
                c = i.LNG_MAX
              e.exports = function (t, e) {
                var r = o,
                  i = a,
                  p = o,
                  h = a,
                  f = c,
                  d = u
                t.forEach(function (t) {
                  var e = n(t),
                    o = e[1],
                    a = e[3],
                    s = e[0],
                    l = e[2]
                  o > r && (r = o),
                    a < i && (i = a),
                    a > p && (p = a),
                    o < h && (h = o),
                    s < f && (f = s),
                    l > d && (d = l)
                })
                var m = e
                return (
                  r + m.lat > l && (m.lat = l - r),
                  p + m.lat > a && (m.lat = a - p),
                  i + m.lat < s && (m.lat = s - i),
                  h + m.lat < o && (m.lat = o - h),
                  f + m.lng <= u &&
                    (m.lng += 360 * Math.ceil(Math.abs(m.lng) / 360)),
                  d + m.lng >= c &&
                    (m.lng -= 360 * Math.ceil(Math.abs(m.lng) / 360)),
                  m
                )
              }
            },
            { '../constants': 23, '@mapbox/geojson-extent': 6 },
          ],
          32: [
            function (t, e, r) {
              'use strict'
              var n = t('../constants')
              e.exports = function (t, e, r, i) {
                var o = e.geometry.coordinates,
                  a = r.geometry.coordinates
                if (
                  o[1] > n.LAT_RENDERED_MAX ||
                  o[1] < n.LAT_RENDERED_MIN ||
                  a[1] > n.LAT_RENDERED_MAX ||
                  a[1] < n.LAT_RENDERED_MIN
                )
                  return null
                var s = i.project([o[0], o[1]]),
                  l = i.project([a[0], a[1]]),
                  u = i.unproject([(s.x + l.x) / 2, (s.y + l.y) / 2])
                return {
                  type: n.geojsonTypes.FEATURE,
                  properties: {
                    meta: n.meta.MIDPOINT,
                    parent: t,
                    lng: u.lng,
                    lat: u.lat,
                    coord_path: r.properties.coord_path,
                  },
                  geometry: {
                    type: n.geojsonTypes.POINT,
                    coordinates: [u.lng, u.lat],
                  },
                }
              }
            },
            { '../constants': 23 },
          ],
          33: [
            function (t, e, r) {
              'use strict'
              var n = t('./create_vertex'),
                i = t('./create_midpoint'),
                o = t('../constants')
              e.exports = function t(e) {
                function r(t, e) {
                  var r = '',
                    o = null
                  t.forEach(function (t, l) {
                    var u = null != e ? ''.concat(e, '.').concat(l) : String(l),
                      c = n(h, t, u, a(u))
                    if (s.midpoints && o) {
                      var p = i(h, o, c, s.map)
                      p && f.push(p)
                    }
                    o = c
                    var d = JSON.stringify(t)
                    r !== d && f.push(c), 0 === l && (r = d)
                  })
                }
                function a(t) {
                  return !!s.selectedPaths && -1 !== s.selectedPaths.indexOf(t)
                }
                var s =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {},
                  l =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : null,
                  u = e.geometry,
                  c = u.type,
                  p = u.coordinates,
                  h = e.properties && e.properties.id,
                  f = []
                return (
                  c === o.geojsonTypes.POINT
                    ? f.push(n(h, p, l, a(l)))
                    : c === o.geojsonTypes.POLYGON
                    ? p.forEach(function (t, e) {
                        r(
                          t,
                          null !== l ? ''.concat(l, '.').concat(e) : String(e)
                        )
                      })
                    : c === o.geojsonTypes.LINE_STRING
                    ? r(p, l)
                    : 0 === c.indexOf(o.geojsonTypes.MULTI_PREFIX) &&
                      (function () {
                        var r = c.replace(o.geojsonTypes.MULTI_PREFIX, '')
                        p.forEach(function (n, i) {
                          var a = {
                            type: o.geojsonTypes.FEATURE,
                            properties: e.properties,
                            geometry: { type: r, coordinates: n },
                          }
                          f = f.concat(t(a, s, i))
                        })
                      })(),
                  f
                )
              }
            },
            {
              '../constants': 23,
              './create_midpoint': 32,
              './create_vertex': 34,
            },
          ],
          34: [
            function (t, e, r) {
              'use strict'
              var n = t('../constants')
              e.exports = function (t, e, r, i) {
                return {
                  type: n.geojsonTypes.FEATURE,
                  properties: {
                    meta: n.meta.VERTEX,
                    parent: t,
                    coord_path: r,
                    active: i ? n.activeStates.ACTIVE : n.activeStates.INACTIVE,
                  },
                  geometry: { type: n.geojsonTypes.POINT, coordinates: e },
                }
              }
            },
            { '../constants': 23 },
          ],
          35: [
            function (t, e, r) {
              'use strict'
              e.exports = {
                enable: function (t) {
                  setTimeout(function () {
                    t.map &&
                      t.map.doubleClickZoom &&
                      t._ctx &&
                      t._ctx.store &&
                      t._ctx.store.getInitialConfigValue &&
                      t._ctx.store.getInitialConfigValue('doubleClickZoom') &&
                      t.map.doubleClickZoom.enable()
                  }, 0)
                },
                disable: function (t) {
                  setTimeout(function () {
                    t.map &&
                      t.map.doubleClickZoom &&
                      t.map.doubleClickZoom.disable()
                  }, 0)
                },
              }
            },
            {},
          ],
          36: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t, e) {
                var r = t.x - e.x,
                  n = t.y - e.y
                return Math.sqrt(r * r + n * n)
              }
            },
            {},
          ],
          37: [
            function (t, e, r) {
              'use strict'
              function n(t, e, r, n) {
                if (null === r.map) return []
                var a = t ? o(t, n) : e,
                  u = {}
                r.options.styles &&
                  (u.layers = r.options.styles.map(function (t) {
                    return t.id
                  }))
                var c = r.map.queryRenderedFeatures(a, u).filter(function (t) {
                    return -1 !== l.indexOf(t.properties.meta)
                  }),
                  p = new s(),
                  h = []
                return (
                  c.forEach(function (t) {
                    var e = t.properties.id
                    p.has(e) || (p.add(e), h.push(t))
                  }),
                  i(h)
                )
              }
              var i = t('./sort_features'),
                o = t('./map_event_to_bounding_box'),
                a = t('../constants'),
                s = t('./string_set'),
                l = [a.meta.FEATURE, a.meta.MIDPOINT, a.meta.VERTEX]
              e.exports = {
                click: function (t, e, r) {
                  return n(t, e, r, r.options.clickBuffer)
                },
                touch: function (t, e, r) {
                  return n(t, e, r, r.options.touchBuffer)
                },
              }
            },
            {
              '../constants': 23,
              './map_event_to_bounding_box': 42,
              './sort_features': 46,
              './string_set': 47,
            },
          ],
          38: [
            function (t, e, r) {
              'use strict'
              var n = t('./features_at'),
                i = t('../constants')
              e.exports = function (t, e) {
                var r = n.click(t, null, e),
                  o = { mouse: i.cursors.NONE }
                return (
                  r[0] &&
                    ((o.mouse =
                      r[0].properties.active === i.activeStates.ACTIVE
                        ? i.cursors.MOVE
                        : i.cursors.POINTER),
                    (o.feature = r[0].properties.meta)),
                  -1 !== e.events.currentModeName().indexOf('draw') &&
                    (o.mouse = i.cursors.ADD),
                  e.ui.queueMapClasses(o),
                  e.ui.updateMapClasses(),
                  r[0]
                )
              }
            },
            { '../constants': 23, './features_at': 37 },
          ],
          39: [
            function (t, e, r) {
              'use strict'
              var n = t('./euclidean_distance')
              e.exports = function (t, e) {
                var r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : {},
                  i = null != r.fineTolerance ? r.fineTolerance : 4,
                  o = null != r.grossTolerance ? r.grossTolerance : 12,
                  a = null != r.interval ? r.interval : 500
                ;(t.point = t.point || e.point), (t.time = t.time || e.time)
                var s = n(t.point, e.point)
                return s < i || (s < o && e.time - t.time < a)
              }
            },
            { './euclidean_distance': 36 },
          ],
          40: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t, e) {
                return (
                  !!t.lngLat && t.lngLat.lng === e[0] && t.lngLat.lat === e[1]
                )
              }
            },
            {},
          ],
          41: [
            function (t, e, r) {
              'use strict'
              var n = t('./euclidean_distance')
              e.exports = function (t, e) {
                var r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : {},
                  i = null != r.tolerance ? r.tolerance : 25,
                  o = null != r.interval ? r.interval : 250
                return (
                  (t.point = t.point || e.point),
                  (t.time = t.time || e.time),
                  n(t.point, e.point) < i && e.time - t.time < o
                )
              }
            },
            { './euclidean_distance': 36 },
          ],
          42: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t) {
                var e =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0
                return [
                  [t.point.x - e, t.point.y - e],
                  [t.point.x + e, t.point.y + e],
                ]
              }
            },
            {},
          ],
          43: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t, e) {
                var r = {
                    drag: [],
                    click: [],
                    mousemove: [],
                    mousedown: [],
                    mouseup: [],
                    mouseout: [],
                    keydown: [],
                    keyup: [],
                    touchstart: [],
                    touchmove: [],
                    touchend: [],
                    tap: [],
                  },
                  n = {
                    on: function (t, e, n) {
                      if (void 0 === r[t])
                        throw new Error('Invalid event type: '.concat(t))
                      r[t].push({ selector: e, fn: n })
                    },
                    render: function (t) {
                      e.store.featureChanged(t)
                    },
                  },
                  i = function (t, i) {
                    for (var o = r[t], a = o.length; a--; ) {
                      var s = o[a]
                      if (s.selector(i)) {
                        s.fn.call(n, i),
                          e.store.render(),
                          e.ui.updateMapClasses()
                        break
                      }
                    }
                  }
                return (
                  t.start.call(n),
                  {
                    render: t.render,
                    stop: function () {
                      t.stop && t.stop()
                    },
                    trash: function () {
                      t.trash && (t.trash(), e.store.render())
                    },
                    combineFeatures: function () {
                      t.combineFeatures && t.combineFeatures()
                    },
                    uncombineFeatures: function () {
                      t.uncombineFeatures && t.uncombineFeatures()
                    },
                    drag: function (t) {
                      i('drag', t)
                    },
                    click: function (t) {
                      i('click', t)
                    },
                    mousemove: function (t) {
                      i('mousemove', t)
                    },
                    mousedown: function (t) {
                      i('mousedown', t)
                    },
                    mouseup: function (t) {
                      i('mouseup', t)
                    },
                    mouseout: function (t) {
                      i('mouseout', t)
                    },
                    keydown: function (t) {
                      i('keydown', t)
                    },
                    keyup: function (t) {
                      i('keyup', t)
                    },
                    touchstart: function (t) {
                      i('touchstart', t)
                    },
                    touchmove: function (t) {
                      i('touchmove', t)
                    },
                    touchend: function (t) {
                      i('touchend', t)
                    },
                    tap: function (t) {
                      i('tap', t)
                    },
                  }
                )
              }
            },
            {},
          ],
          44: [
            function (t, e, r) {
              'use strict'
              var n = t('@mapbox/point-geometry')
              e.exports = function (t, e) {
                var r = e.getBoundingClientRect()
                return new n(
                  t.clientX - r.left - (e.clientLeft || 0),
                  t.clientY - r.top - (e.clientTop || 0)
                )
              }
            },
            { '@mapbox/point-geometry': 11 },
          ],
          45: [
            function (t, e, r) {
              'use strict'
              var n = t('./constrain_feature_movement'),
                i = t('../constants')
              e.exports = function (t, e) {
                var r = n(
                  t.map(function (t) {
                    return t.toGeoJSON()
                  }),
                  e
                )
                t.forEach(function (t) {
                  var e,
                    n = t.getCoordinates(),
                    o = function (t) {
                      var e = { lng: t[0] + r.lng, lat: t[1] + r.lat }
                      return [e.lng, e.lat]
                    },
                    a = function (t) {
                      return t.map(function (t) {
                        return o(t)
                      })
                    }
                  t.type === i.geojsonTypes.POINT
                    ? (e = o(n))
                    : t.type === i.geojsonTypes.LINE_STRING ||
                      t.type === i.geojsonTypes.MULTI_POINT
                    ? (e = n.map(o))
                    : t.type === i.geojsonTypes.POLYGON ||
                      t.type === i.geojsonTypes.MULTI_LINE_STRING
                    ? (e = n.map(a))
                    : t.type === i.geojsonTypes.MULTI_POLYGON &&
                      (e = n.map(function (t) {
                        return t.map(function (t) {
                          return a(t)
                        })
                      })),
                    t.incomingCoords(e)
                })
              }
            },
            { '../constants': 23, './constrain_feature_movement': 31 },
          ],
          46: [
            function (t, e, r) {
              'use strict'
              function n(t, e) {
                var r = a[t.geometry.type] - a[e.geometry.type]
                return 0 === r && t.geometry.type === o.geojsonTypes.POLYGON
                  ? t.area - e.area
                  : r
              }
              var i = t('@mapbox/geojson-area'),
                o = t('../constants'),
                a = { Point: 0, LineString: 1, Polygon: 2 }
              e.exports = function (t) {
                return t
                  .map(function (t) {
                    return (
                      t.geometry.type === o.geojsonTypes.POLYGON &&
                        (t.area = i.geometry({
                          type: o.geojsonTypes.FEATURE,
                          property: {},
                          geometry: t.geometry,
                        })),
                      t
                    )
                  })
                  .sort(n)
                  .map(function (t) {
                    return delete t.area, t
                  })
              }
            },
            { '../constants': 23, '@mapbox/geojson-area': 3 },
          ],
          47: [
            function (t, e, r) {
              'use strict'
              function n(t) {
                if (
                  ((this._items = {}),
                  (this._nums = {}),
                  (this._length = t ? t.length : 0),
                  t)
                )
                  for (var e = 0, r = t.length; e < r; e++)
                    this.add(t[e]),
                      void 0 !== t[e] &&
                        ('string' == typeof t[e]
                          ? (this._items[t[e]] = e)
                          : (this._nums[t[e]] = e))
              }
              ;(n.prototype.add = function (t) {
                return (
                  this.has(t) ||
                    (this._length++,
                    'string' == typeof t
                      ? (this._items[t] = this._length)
                      : (this._nums[t] = this._length)),
                  this
                )
              }),
                (n.prototype.delete = function (t) {
                  return (
                    !1 === this.has(t) ||
                      (this._length--,
                      delete this._items[t],
                      delete this._nums[t]),
                    this
                  )
                }),
                (n.prototype.has = function (t) {
                  return !(
                    ('string' != typeof t && 'number' != typeof t) ||
                    (void 0 === this._items[t] && void 0 === this._nums[t])
                  )
                }),
                (n.prototype.values = function () {
                  var t = this,
                    e = []
                  return (
                    Object.keys(this._items).forEach(function (r) {
                      e.push({ k: r, v: t._items[r] })
                    }),
                    Object.keys(this._nums).forEach(function (r) {
                      e.push({ k: JSON.parse(r), v: t._nums[r] })
                    }),
                    e
                      .sort(function (t, e) {
                        return t.v - e.v
                      })
                      .map(function (t) {
                        return t.k
                      })
                  )
                }),
                (n.prototype.clear = function () {
                  return (
                    (this._length = 0),
                    (this._items = {}),
                    (this._nums = {}),
                    this
                  )
                }),
                (e.exports = n)
            },
            {},
          ],
          48: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t, e) {
                return (
                  t.length === e.length &&
                  JSON.stringify(
                    t
                      .map(function (t) {
                        return t
                      })
                      .sort()
                  ) ===
                    JSON.stringify(
                      e
                        .map(function (t) {
                          return t
                        })
                        .sort()
                    )
                )
              }
            },
            {},
          ],
          49: [
            function (t, e, r) {
              'use strict'
              e.exports = [
                {
                  id: 'gl-draw-polygon-fill-inactive',
                  type: 'fill',
                  filter: [
                    'all',
                    ['==', 'active', 'false'],
                    ['==', '$type', 'Polygon'],
                    ['!=', 'mode', 'static'],
                  ],
                  paint: {
                    'fill-color': '#3bb2d0',
                    'fill-outline-color': '#3bb2d0',
                    'fill-opacity': 0.1,
                  },
                },
                {
                  id: 'gl-draw-polygon-fill-active',
                  type: 'fill',
                  filter: [
                    'all',
                    ['==', 'active', 'true'],
                    ['==', '$type', 'Polygon'],
                  ],
                  paint: {
                    'fill-color': '#fbb03b',
                    'fill-outline-color': '#fbb03b',
                    'fill-opacity': 0.1,
                  },
                },
                {
                  id: 'gl-draw-polygon-midpoint',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', '$type', 'Point'],
                    ['==', 'meta', 'midpoint'],
                  ],
                  paint: { 'circle-radius': 3, 'circle-color': '#fbb03b' },
                },
                {
                  id: 'gl-draw-polygon-stroke-inactive',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', 'active', 'false'],
                    ['==', '$type', 'Polygon'],
                    ['!=', 'mode', 'static'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: { 'line-color': '#3bb2d0', 'line-width': 2 },
                },
                {
                  id: 'gl-draw-polygon-stroke-active',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', 'active', 'true'],
                    ['==', '$type', 'Polygon'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: {
                    'line-color': '#fbb03b',
                    'line-dasharray': [0.2, 2],
                    'line-width': 2,
                  },
                },
                {
                  id: 'gl-draw-line-inactive',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', 'active', 'false'],
                    ['==', '$type', 'LineString'],
                    ['!=', 'mode', 'static'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: { 'line-color': '#3bb2d0', 'line-width': 2 },
                },
                {
                  id: 'gl-draw-line-active',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', '$type', 'LineString'],
                    ['==', 'active', 'true'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: {
                    'line-color': '#fbb03b',
                    'line-dasharray': [0.2, 2],
                    'line-width': 2,
                  },
                },
                {
                  id: 'gl-draw-polygon-and-line-vertex-stroke-inactive',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', 'meta', 'vertex'],
                    ['==', '$type', 'Point'],
                    ['!=', 'mode', 'static'],
                  ],
                  paint: { 'circle-radius': 5, 'circle-color': '#fff' },
                },
                {
                  id: 'gl-draw-polygon-and-line-vertex-inactive',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', 'meta', 'vertex'],
                    ['==', '$type', 'Point'],
                    ['!=', 'mode', 'static'],
                  ],
                  paint: { 'circle-radius': 3, 'circle-color': '#fbb03b' },
                },
                {
                  id: 'gl-draw-point-point-stroke-inactive',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', 'active', 'false'],
                    ['==', '$type', 'Point'],
                    ['==', 'meta', 'feature'],
                    ['!=', 'mode', 'static'],
                  ],
                  paint: {
                    'circle-radius': 5,
                    'circle-opacity': 1,
                    'circle-color': '#fff',
                  },
                },
                {
                  id: 'gl-draw-point-inactive',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', 'active', 'false'],
                    ['==', '$type', 'Point'],
                    ['==', 'meta', 'feature'],
                    ['!=', 'mode', 'static'],
                  ],
                  paint: { 'circle-radius': 3, 'circle-color': '#3bb2d0' },
                },
                {
                  id: 'gl-draw-point-stroke-active',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', '$type', 'Point'],
                    ['==', 'active', 'true'],
                    ['!=', 'meta', 'midpoint'],
                  ],
                  paint: { 'circle-radius': 7, 'circle-color': '#fff' },
                },
                {
                  id: 'gl-draw-point-active',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', '$type', 'Point'],
                    ['!=', 'meta', 'midpoint'],
                    ['==', 'active', 'true'],
                  ],
                  paint: { 'circle-radius': 5, 'circle-color': '#fbb03b' },
                },
                {
                  id: 'gl-draw-polygon-fill-static',
                  type: 'fill',
                  filter: [
                    'all',
                    ['==', 'mode', 'static'],
                    ['==', '$type', 'Polygon'],
                  ],
                  paint: {
                    'fill-color': '#404040',
                    'fill-outline-color': '#404040',
                    'fill-opacity': 0.1,
                  },
                },
                {
                  id: 'gl-draw-polygon-stroke-static',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', 'mode', 'static'],
                    ['==', '$type', 'Polygon'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: { 'line-color': '#404040', 'line-width': 2 },
                },
                {
                  id: 'gl-draw-line-static',
                  type: 'line',
                  filter: [
                    'all',
                    ['==', 'mode', 'static'],
                    ['==', '$type', 'LineString'],
                  ],
                  layout: { 'line-cap': 'round', 'line-join': 'round' },
                  paint: { 'line-color': '#404040', 'line-width': 2 },
                },
                {
                  id: 'gl-draw-point-static',
                  type: 'circle',
                  filter: [
                    'all',
                    ['==', 'mode', 'static'],
                    ['==', '$type', 'Point'],
                  ],
                  paint: { 'circle-radius': 5, 'circle-color': '#404040' },
                },
              ]
            },
            {},
          ],
          50: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t, e, r) {
                function n() {
                  ;(o = !1), a && (i.apply(r, a), (a = !1))
                }
                function i() {
                  o
                    ? (a = arguments)
                    : ((o = !0), t.apply(r, arguments), setTimeout(n, e))
                }
                var o, a
                return i
              }
            },
            {},
          ],
          51: [
            function (t, e, r) {
              'use strict'
              e.exports = function (t) {
                return [].concat(t).filter(function (t) {
                  return void 0 !== t
                })
              }
            },
            {},
          ],
          52: [
            function (t, e, r) {
              'use strict'
              var n = t('../lib/common_selectors'),
                i = n.noTarget,
                o = n.isOfMetaType,
                a = n.isInactiveFeature,
                s = n.isShiftDown,
                l = t('../lib/create_supplementary_points'),
                u = t('../lib/constrain_feature_movement'),
                c = t('../lib/double_click_zoom'),
                p = t('../constants'),
                h = t('../lib/common_selectors'),
                f = t('../lib/move_features'),
                d = o(p.meta.VERTEX),
                m = o(p.meta.MIDPOINT),
                y = {
                  fireUpdate: function () {
                    this.map.fire(p.events.UPDATE, {
                      action: p.updateActions.CHANGE_COORDINATES,
                      features: this.getSelected().map(function (t) {
                        return t.toGeoJSON()
                      }),
                    })
                  },
                  fireActionable: function (t) {
                    this.setActionableState({
                      combineFeatures: !1,
                      uncombineFeatures: !1,
                      trash: t.selectedCoordPaths.length > 0,
                    })
                  },
                  startDragging: function (t, e) {
                    this.map.dragPan.disable(),
                      (t.canDragMove = !0),
                      (t.dragMoveLocation = e.lngLat)
                  },
                  stopDragging: function (t) {
                    this.map.dragPan.enable(),
                      (t.dragMoving = !1),
                      (t.canDragMove = !1),
                      (t.dragMoveLocation = null)
                  },
                  onVertex: function (t, e) {
                    this.startDragging(t, e)
                    var r = e.featureTarget.properties,
                      n = t.selectedCoordPaths.indexOf(r.coord_path)
                    s(e) || -1 !== n
                      ? s(e) &&
                        -1 === n &&
                        t.selectedCoordPaths.push(r.coord_path)
                      : (t.selectedCoordPaths = [r.coord_path])
                    var i = this.pathsToCoordinates(
                      t.featureId,
                      t.selectedCoordPaths
                    )
                    this.setSelectedCoordinates(i)
                  },
                  onMidpoint: function (t, e) {
                    this.startDragging(t, e)
                    var r = e.featureTarget.properties
                    t.feature.addCoordinate(r.coord_path, r.lng, r.lat),
                      this.fireUpdate(),
                      (t.selectedCoordPaths = [r.coord_path])
                  },
                  pathsToCoordinates: function (t, e) {
                    return e.map(function (e) {
                      return { feature_id: t, coord_path: e }
                    })
                  },
                  onFeature: function (t, e) {
                    0 === t.selectedCoordPaths.length
                      ? this.startDragging(t, e)
                      : this.stopDragging(t)
                  },
                  dragFeature: function (t, e, r) {
                    f(this.getSelected(), r), (t.dragMoveLocation = e.lngLat)
                  },
                  dragVertex: function (t, e, r) {
                    for (
                      var n = t.selectedCoordPaths.map(function (e) {
                          return t.feature.getCoordinate(e)
                        }),
                        i = n.map(function (t) {
                          return {
                            type: p.geojsonTypes.FEATURE,
                            properties: {},
                            geometry: {
                              type: p.geojsonTypes.POINT,
                              coordinates: t,
                            },
                          }
                        }),
                        o = u(i, r),
                        a = 0;
                      a < n.length;
                      a++
                    ) {
                      var s = n[a]
                      t.feature.updateCoordinate(
                        t.selectedCoordPaths[a],
                        s[0] + o.lng,
                        s[1] + o.lat
                      )
                    }
                  },
                  clickNoTarget: function () {
                    this.changeMode(p.modes.SIMPLE_SELECT)
                  },
                  clickInactive: function () {
                    this.changeMode(p.modes.SIMPLE_SELECT)
                  },
                  clickActiveFeature: function (t) {
                    ;(t.selectedCoordPaths = []),
                      this.clearSelectedCoordinates(),
                      t.feature.changed()
                  },
                  onSetup: function (t) {
                    var e = t.featureId,
                      r = this.getFeature(e)
                    if (!r)
                      throw new Error(
                        'You must provide a featureId to enter direct_select mode'
                      )
                    if (r.type === p.geojsonTypes.POINT)
                      throw new TypeError(
                        "direct_select mode doesn't handle point features"
                      )
                    var n = {
                      featureId: e,
                      feature: r,
                      dragMoveLocation: t.startPos || null,
                      dragMoving: !1,
                      canDragMove: !1,
                      selectedCoordPaths: t.coordPath ? [t.coordPath] : [],
                    }
                    return (
                      this.setSelectedCoordinates(
                        this.pathsToCoordinates(e, n.selectedCoordPaths)
                      ),
                      this.setSelected(e),
                      c.disable(this),
                      this.setActionableState({ trash: !0 }),
                      n
                    )
                  },
                  onStop: function () {
                    c.enable(this), this.clearSelectedCoordinates()
                  },
                  toDisplayFeatures: function (t, e, r) {
                    t.featureId === e.properties.id
                      ? ((e.properties.active = p.activeStates.ACTIVE),
                        r(e),
                        l(e, {
                          map: this.map,
                          midpoints: !0,
                          selectedPaths: t.selectedCoordPaths,
                        }).forEach(r))
                      : ((e.properties.active = p.activeStates.INACTIVE), r(e)),
                      this.fireActionable(t)
                  },
                  onTrash: function (t) {
                    t.selectedCoordPaths
                      .sort()
                      .reverse()
                      .forEach(function (e) {
                        return t.feature.removeCoordinate(e)
                      }),
                      this.fireUpdate(),
                      (t.selectedCoordPaths = []),
                      this.clearSelectedCoordinates(),
                      this.fireActionable(t),
                      !1 === t.feature.isValid() &&
                        (this.deleteFeature([t.featureId]),
                        this.changeMode(p.modes.SIMPLE_SELECT, {}))
                  },
                  onMouseMove: function (t, e) {
                    var r = h.isActiveFeature(e),
                      n = d(e),
                      i = 0 === t.selectedCoordPaths.length
                    ;(r && i) || (n && !i)
                      ? this.updateUIClasses({ mouse: p.cursors.MOVE })
                      : this.updateUIClasses({ mouse: p.cursors.NONE }),
                      this.stopDragging(t)
                  },
                  onMouseOut: function (t) {
                    t.dragMoving && this.fireUpdate()
                  },
                }
              ;(y.onTouchStart = y.onMouseDown = function (t, e) {
                return d(e)
                  ? this.onVertex(t, e)
                  : h.isActiveFeature(e)
                  ? this.onFeature(t, e)
                  : m(e)
                  ? this.onMidpoint(t, e)
                  : void 0
              }),
                (y.onDrag = function (t, e) {
                  if (!0 === t.canDragMove) {
                    ;(t.dragMoving = !0), e.originalEvent.stopPropagation()
                    var r = {
                      lng: e.lngLat.lng - t.dragMoveLocation.lng,
                      lat: e.lngLat.lat - t.dragMoveLocation.lat,
                    }
                    t.selectedCoordPaths.length > 0
                      ? this.dragVertex(t, e, r)
                      : this.dragFeature(t, e, r),
                      (t.dragMoveLocation = e.lngLat)
                  }
                }),
                (y.onClick = function (t, e) {
                  return i(e)
                    ? this.clickNoTarget(t, e)
                    : h.isActiveFeature(e)
                    ? this.clickActiveFeature(t, e)
                    : a(e)
                    ? this.clickInactive(t, e)
                    : void this.stopDragging(t)
                }),
                (y.onTap = function (t, e) {
                  return i(e)
                    ? this.clickNoTarget(t, e)
                    : h.isActiveFeature(e)
                    ? this.clickActiveFeature(t, e)
                    : a(e)
                    ? this.clickInactive(t, e)
                    : void 0
                }),
                (y.onTouchEnd = y.onMouseUp = function (t) {
                  t.dragMoving && this.fireUpdate(), this.stopDragging(t)
                }),
                (e.exports = y)
            },
            {
              '../constants': 23,
              '../lib/common_selectors': 30,
              '../lib/constrain_feature_movement': 31,
              '../lib/create_supplementary_points': 33,
              '../lib/double_click_zoom': 35,
              '../lib/move_features': 45,
            },
          ],
          53: [
            function (t, e, r) {
              'use strict'
              function n(t) {
                return (
                  (function (t) {
                    if (Array.isArray(t)) {
                      for (
                        var e = 0, r = new Array(t.length);
                        e < t.length;
                        e++
                      )
                        r[e] = t[e]
                      return r
                    }
                  })(t) ||
                  (function (t) {
                    if (
                      Symbol.iterator in Object(t) ||
                      '[object Arguments]' === Object.prototype.toString.call(t)
                    )
                      return Array.from(t)
                  })(t) ||
                  (function () {
                    throw new TypeError(
                      'Invalid attempt to spread non-iterable instance'
                    )
                  })()
                )
              }
              var i = t('../lib/common_selectors'),
                o = t('../lib/is_event_at_coordinates'),
                a = t('../lib/double_click_zoom'),
                s = t('../constants'),
                l = t('../lib/create_vertex'),
                u = {
                  onSetup: function (t) {
                    var e,
                      r,
                      i = (t = t || {}).featureId,
                      o = 'forward'
                    if (i) {
                      if (!(e = this.getFeature(i)))
                        throw new Error(
                          'Could not find a feature with the provided featureId'
                        )
                      var l = t.from
                      if (
                        (l &&
                          'Feature' === l.type &&
                          l.geometry &&
                          'Point' === l.geometry.type &&
                          (l = l.geometry),
                        l &&
                          'Point' === l.type &&
                          l.coordinates &&
                          2 === l.coordinates.length &&
                          (l = l.coordinates),
                        !l || !Array.isArray(l))
                      )
                        throw new Error(
                          'Please use the `from` property to indicate which point to continue the line from'
                        )
                      var u = e.coordinates.length - 1
                      if (
                        e.coordinates[u][0] === l[0] &&
                        e.coordinates[u][1] === l[1]
                      ) {
                        var c
                        ;(r = u + 1),
                          (c = e).addCoordinate.apply(
                            c,
                            [r].concat(n(e.coordinates[u]))
                          )
                      } else {
                        if (
                          e.coordinates[0][0] !== l[0] ||
                          e.coordinates[0][1] !== l[1]
                        )
                          throw new Error(
                            '`from` should match the point at either the start or the end of the provided LineString'
                          )
                        var p
                        ;(o = 'backwards'),
                          (r = 0),
                          (p = e).addCoordinate.apply(
                            p,
                            [r].concat(n(e.coordinates[0]))
                          )
                      }
                    } else
                      (e = this.newFeature({
                        type: s.geojsonTypes.FEATURE,
                        properties: {},
                        geometry: {
                          type: s.geojsonTypes.LINE_STRING,
                          coordinates: [],
                        },
                      })),
                        (r = 0),
                        this.addFeature(e)
                    return (
                      this.clearSelectedFeatures(),
                      a.disable(this),
                      this.updateUIClasses({ mouse: s.cursors.ADD }),
                      this.activateUIButton(s.types.LINE),
                      this.setActionableState({ trash: !0 }),
                      { line: e, currentVertexPosition: r, direction: o }
                    )
                  },
                  clickAnywhere: function (t, e) {
                    if (
                      (t.currentVertexPosition > 0 &&
                        o(
                          e,
                          t.line.coordinates[t.currentVertexPosition - 1]
                        )) ||
                      ('backwards' === t.direction &&
                        o(e, t.line.coordinates[t.currentVertexPosition + 1]))
                    )
                      return this.changeMode(s.modes.SIMPLE_SELECT, {
                        featureIds: [t.line.id],
                      })
                    this.updateUIClasses({ mouse: s.cursors.ADD }),
                      t.line.updateCoordinate(
                        t.currentVertexPosition,
                        e.lngLat.lng,
                        e.lngLat.lat
                      ),
                      'forward' === t.direction
                        ? (t.currentVertexPosition++,
                          t.line.updateCoordinate(
                            t.currentVertexPosition,
                            e.lngLat.lng,
                            e.lngLat.lat
                          ))
                        : t.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat)
                  },
                  clickOnVertex: function (t) {
                    return this.changeMode(s.modes.SIMPLE_SELECT, {
                      featureIds: [t.line.id],
                    })
                  },
                  onMouseMove: function (t, e) {
                    t.line.updateCoordinate(
                      t.currentVertexPosition,
                      e.lngLat.lng,
                      e.lngLat.lat
                    ),
                      i.isVertex(e) &&
                        this.updateUIClasses({ mouse: s.cursors.POINTER })
                  },
                }
              ;(u.onTap = u.onClick = function (t, e) {
                if (i.isVertex(e)) return this.clickOnVertex(t, e)
                this.clickAnywhere(t, e)
              }),
                (u.onKeyUp = function (t, e) {
                  i.isEnterKey(e)
                    ? this.changeMode(s.modes.SIMPLE_SELECT, {
                        featureIds: [t.line.id],
                      })
                    : i.isEscapeKey(e) &&
                      (this.deleteFeature([t.line.id], { silent: !0 }),
                      this.changeMode(s.modes.SIMPLE_SELECT))
                }),
                (u.onStop = function (t) {
                  a.enable(this),
                    this.activateUIButton(),
                    void 0 !== this.getFeature(t.line.id) &&
                      (t.line.removeCoordinate(
                        ''.concat(t.currentVertexPosition)
                      ),
                      t.line.isValid()
                        ? this.map.fire(s.events.CREATE, {
                            features: [t.line.toGeoJSON()],
                          })
                        : (this.deleteFeature([t.line.id], { silent: !0 }),
                          this.changeMode(
                            s.modes.SIMPLE_SELECT,
                            {},
                            { silent: !0 }
                          )))
                }),
                (u.onTrash = function (t) {
                  this.deleteFeature([t.line.id], { silent: !0 }),
                    this.changeMode(s.modes.SIMPLE_SELECT)
                }),
                (u.toDisplayFeatures = function (t, e, r) {
                  var n = e.properties.id === t.line.id
                  if (
                    ((e.properties.active = n
                      ? s.activeStates.ACTIVE
                      : s.activeStates.INACTIVE),
                    !n)
                  )
                    return r(e)
                  e.geometry.coordinates.length < 2 ||
                    ((e.properties.meta = s.meta.FEATURE),
                    r(
                      l(
                        t.line.id,
                        e.geometry.coordinates[
                          'forward' === t.direction
                            ? e.geometry.coordinates.length - 2
                            : 1
                        ],
                        ''.concat(
                          'forward' === t.direction
                            ? e.geometry.coordinates.length - 2
                            : 1
                        ),
                        !1
                      )
                    ),
                    r(e))
                }),
                (e.exports = u)
            },
            {
              '../constants': 23,
              '../lib/common_selectors': 30,
              '../lib/create_vertex': 34,
              '../lib/double_click_zoom': 35,
              '../lib/is_event_at_coordinates': 40,
            },
          ],
          54: [
            function (t, e, r) {
              'use strict'
              var n = t('../lib/common_selectors'),
                i = t('../constants'),
                o = {
                  onSetup: function () {
                    var t = this.newFeature({
                      type: i.geojsonTypes.FEATURE,
                      properties: {},
                      geometry: { type: i.geojsonTypes.POINT, coordinates: [] },
                    })
                    return (
                      this.addFeature(t),
                      this.clearSelectedFeatures(),
                      this.updateUIClasses({ mouse: i.cursors.ADD }),
                      this.activateUIButton(i.types.POINT),
                      this.setActionableState({ trash: !0 }),
                      { point: t }
                    )
                  },
                  stopDrawingAndRemove: function (t) {
                    this.deleteFeature([t.point.id], { silent: !0 }),
                      this.changeMode(i.modes.SIMPLE_SELECT)
                  },
                }
              ;(o.onTap = o.onClick = function (t, e) {
                this.updateUIClasses({ mouse: i.cursors.MOVE }),
                  t.point.updateCoordinate('', e.lngLat.lng, e.lngLat.lat),
                  this.map.fire(i.events.CREATE, {
                    features: [t.point.toGeoJSON()],
                  }),
                  this.changeMode(i.modes.SIMPLE_SELECT, {
                    featureIds: [t.point.id],
                  })
              }),
                (o.onStop = function (t) {
                  this.activateUIButton(),
                    t.point.getCoordinate().length ||
                      this.deleteFeature([t.point.id], { silent: !0 })
                }),
                (o.toDisplayFeatures = function (t, e, r) {
                  var n = e.properties.id === t.point.id
                  if (
                    ((e.properties.active = n
                      ? i.activeStates.ACTIVE
                      : i.activeStates.INACTIVE),
                    !n)
                  )
                    return r(e)
                }),
                (o.onTrash = o.stopDrawingAndRemove),
                (o.onKeyUp = function (t, e) {
                  if (n.isEscapeKey(e) || n.isEnterKey(e))
                    return this.stopDrawingAndRemove(t, e)
                }),
                (e.exports = o)
            },
            { '../constants': 23, '../lib/common_selectors': 30 },
          ],
          55: [
            function (t, e, r) {
              'use strict'
              var n = t('../lib/common_selectors'),
                i = t('../lib/double_click_zoom'),
                o = t('../constants'),
                a = t('../lib/is_event_at_coordinates'),
                s = t('../lib/create_vertex'),
                l = {
                  onSetup: function () {
                    var t = this.newFeature({
                      type: o.geojsonTypes.FEATURE,
                      properties: {},
                      geometry: {
                        type: o.geojsonTypes.POLYGON,
                        coordinates: [[]],
                      },
                    })
                    return (
                      this.addFeature(t),
                      this.clearSelectedFeatures(),
                      i.disable(this),
                      this.updateUIClasses({ mouse: o.cursors.ADD }),
                      this.activateUIButton(o.types.POLYGON),
                      this.setActionableState({ trash: !0 }),
                      { polygon: t, currentVertexPosition: 0 }
                    )
                  },
                  clickAnywhere: function (t, e) {
                    if (
                      t.currentVertexPosition > 0 &&
                      a(
                        e,
                        t.polygon.coordinates[0][t.currentVertexPosition - 1]
                      )
                    )
                      return this.changeMode(o.modes.SIMPLE_SELECT, {
                        featureIds: [t.polygon.id],
                      })
                    this.updateUIClasses({ mouse: o.cursors.ADD }),
                      t.polygon.updateCoordinate(
                        '0.'.concat(t.currentVertexPosition),
                        e.lngLat.lng,
                        e.lngLat.lat
                      ),
                      t.currentVertexPosition++,
                      t.polygon.updateCoordinate(
                        '0.'.concat(t.currentVertexPosition),
                        e.lngLat.lng,
                        e.lngLat.lat
                      )
                  },
                  clickOnVertex: function (t) {
                    return this.changeMode(o.modes.SIMPLE_SELECT, {
                      featureIds: [t.polygon.id],
                    })
                  },
                  onMouseMove: function (t, e) {
                    t.polygon.updateCoordinate(
                      '0.'.concat(t.currentVertexPosition),
                      e.lngLat.lng,
                      e.lngLat.lat
                    ),
                      n.isVertex(e) &&
                        this.updateUIClasses({ mouse: o.cursors.POINTER })
                  },
                }
              ;(l.onTap = l.onClick = function (t, e) {
                return n.isVertex(e)
                  ? this.clickOnVertex(t, e)
                  : this.clickAnywhere(t, e)
              }),
                (l.onKeyUp = function (t, e) {
                  n.isEscapeKey(e)
                    ? (this.deleteFeature([t.polygon.id], { silent: !0 }),
                      this.changeMode(o.modes.SIMPLE_SELECT))
                    : n.isEnterKey(e) &&
                      this.changeMode(o.modes.SIMPLE_SELECT, {
                        featureIds: [t.polygon.id],
                      })
                }),
                (l.onStop = function (t) {
                  this.updateUIClasses({ mouse: o.cursors.NONE }),
                    i.enable(this),
                    this.activateUIButton(),
                    void 0 !== this.getFeature(t.polygon.id) &&
                      (t.polygon.removeCoordinate(
                        '0.'.concat(t.currentVertexPosition)
                      ),
                      t.polygon.isValid()
                        ? this.map.fire(o.events.CREATE, {
                            features: [t.polygon.toGeoJSON()],
                          })
                        : (this.deleteFeature([t.polygon.id], { silent: !0 }),
                          this.changeMode(
                            o.modes.SIMPLE_SELECT,
                            {},
                            { silent: !0 }
                          )))
                }),
                (l.toDisplayFeatures = function (t, e, r) {
                  var n = e.properties.id === t.polygon.id
                  if (
                    ((e.properties.active = n
                      ? o.activeStates.ACTIVE
                      : o.activeStates.INACTIVE),
                    !n)
                  )
                    return r(e)
                  if (0 !== e.geometry.coordinates.length) {
                    var i = e.geometry.coordinates[0].length
                    if (!(i < 3)) {
                      if (
                        ((e.properties.meta = o.meta.FEATURE),
                        r(
                          s(
                            t.polygon.id,
                            e.geometry.coordinates[0][0],
                            '0.0',
                            !1
                          )
                        ),
                        i > 3)
                      ) {
                        var a = e.geometry.coordinates[0].length - 3
                        r(
                          s(
                            t.polygon.id,
                            e.geometry.coordinates[0][a],
                            '0.'.concat(a),
                            !1
                          )
                        )
                      }
                      if (i <= 4) {
                        var l = [
                          [
                            e.geometry.coordinates[0][0][0],
                            e.geometry.coordinates[0][0][1],
                          ],
                          [
                            e.geometry.coordinates[0][1][0],
                            e.geometry.coordinates[0][1][1],
                          ],
                        ]
                        if (
                          (r({
                            type: o.geojsonTypes.FEATURE,
                            properties: e.properties,
                            geometry: {
                              coordinates: l,
                              type: o.geojsonTypes.LINE_STRING,
                            },
                          }),
                          3 === i)
                        )
                          return
                      }
                      return r(e)
                    }
                  }
                }),
                (l.onTrash = function (t) {
                  this.deleteFeature([t.polygon.id], { silent: !0 }),
                    this.changeMode(o.modes.SIMPLE_SELECT)
                }),
                (e.exports = l)
            },
            {
              '../constants': 23,
              '../lib/common_selectors': 30,
              '../lib/create_vertex': 34,
              '../lib/double_click_zoom': 35,
              '../lib/is_event_at_coordinates': 40,
            },
          ],
          56: [
            function (t, e, r) {
              'use strict'
              e.exports = {
                simple_select: t('./simple_select'),
                direct_select: t('./direct_select'),
                draw_point: t('./draw_point'),
                draw_polygon: t('./draw_polygon'),
                draw_line_string: t('./draw_line_string'),
              }
            },
            {
              './direct_select': 52,
              './draw_line_string': 53,
              './draw_point': 54,
              './draw_polygon': 55,
              './simple_select': 60,
            },
          ],
          57: [
            function (t, e, r) {
              'use strict'
              var n = (e.exports = t('./mode_interface_accessors'))
              ;(n.prototype.onSetup = function () {}),
                (n.prototype.onDrag = function () {}),
                (n.prototype.onClick = function () {}),
                (n.prototype.onMouseMove = function () {}),
                (n.prototype.onMouseDown = function () {}),
                (n.prototype.onMouseUp = function () {}),
                (n.prototype.onMouseOut = function () {}),
                (n.prototype.onKeyUp = function () {}),
                (n.prototype.onKeyDown = function () {}),
                (n.prototype.onTouchStart = function () {}),
                (n.prototype.onTouchMove = function () {}),
                (n.prototype.onTouchEnd = function () {}),
                (n.prototype.onTap = function () {}),
                (n.prototype.onStop = function () {}),
                (n.prototype.onTrash = function () {}),
                (n.prototype.onCombineFeature = function () {}),
                (n.prototype.onUncombineFeature = function () {}),
                (n.prototype.toDisplayFeatures = function () {
                  throw new Error('You must overwrite toDisplayFeatures')
                })
            },
            { './mode_interface_accessors': 58 },
          ],
          58: [
            function (t, e, r) {
              'use strict'
              var n = t('../constants'),
                i = t('../lib/features_at'),
                o = t('../feature_types/point'),
                a = t('../feature_types/line_string'),
                s = t('../feature_types/polygon'),
                l = t('../feature_types/multi_feature'),
                u = (e.exports = function (t) {
                  ;(this.map = t.map),
                    (this.drawConfig = JSON.parse(
                      JSON.stringify(t.options || {})
                    )),
                    (this._ctx = t)
                })
              ;(u.prototype.setSelected = function (t) {
                return this._ctx.store.setSelected(t)
              }),
                (u.prototype.setSelectedCoordinates = function (t) {
                  var e = this
                  this._ctx.store.setSelectedCoordinates(t),
                    t.reduce(function (t, r) {
                      return (
                        void 0 === t[r.feature_id] &&
                          ((t[r.feature_id] = !0),
                          e._ctx.store.get(r.feature_id).changed()),
                        t
                      )
                    }, {})
                }),
                (u.prototype.getSelected = function () {
                  return this._ctx.store.getSelected()
                }),
                (u.prototype.getSelectedIds = function () {
                  return this._ctx.store.getSelectedIds()
                }),
                (u.prototype.isSelected = function (t) {
                  return this._ctx.store.isSelected(t)
                }),
                (u.prototype.getFeature = function (t) {
                  return this._ctx.store.get(t)
                }),
                (u.prototype.select = function (t) {
                  return this._ctx.store.select(t)
                }),
                (u.prototype.deselect = function (t) {
                  return this._ctx.store.deselect(t)
                }),
                (u.prototype.deleteFeature = function (t) {
                  var e =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {}
                  return this._ctx.store.delete(t, e)
                }),
                (u.prototype.addFeature = function (t) {
                  return this._ctx.store.add(t)
                }),
                (u.prototype.clearSelectedFeatures = function () {
                  return this._ctx.store.clearSelected()
                }),
                (u.prototype.clearSelectedCoordinates = function () {
                  return this._ctx.store.clearSelectedCoordinates()
                }),
                (u.prototype.setActionableState = function () {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : {},
                    e = {
                      trash: t.trash || !1,
                      combineFeatures: t.combineFeatures || !1,
                      uncombineFeatures: t.uncombineFeatures || !1,
                    }
                  return this._ctx.events.actionable(e)
                }),
                (u.prototype.changeMode = function (t) {
                  var e =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {},
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : {}
                  return this._ctx.events.changeMode(t, e, r)
                }),
                (u.prototype.updateUIClasses = function (t) {
                  return this._ctx.ui.queueMapClasses(t)
                }),
                (u.prototype.activateUIButton = function (t) {
                  return this._ctx.ui.setActiveButton(t)
                }),
                (u.prototype.featuresAt = function (t, e) {
                  var r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 'click'
                  if ('click' !== r && 'touch' !== r)
                    throw new Error('invalid buffer type')
                  return i[r](t, e, this._ctx)
                }),
                (u.prototype.newFeature = function (t) {
                  var e = t.geometry.type
                  return e === n.geojsonTypes.POINT
                    ? new o(this._ctx, t)
                    : e === n.geojsonTypes.LINE_STRING
                    ? new a(this._ctx, t)
                    : e === n.geojsonTypes.POLYGON
                    ? new s(this._ctx, t)
                    : new l(this._ctx, t)
                }),
                (u.prototype.isInstanceOf = function (t, e) {
                  if (t === n.geojsonTypes.POINT) return e instanceof o
                  if (t === n.geojsonTypes.LINE_STRING) return e instanceof a
                  if (t === n.geojsonTypes.POLYGON) return e instanceof s
                  if ('MultiFeature' === t) return e instanceof l
                  throw new Error('Unknown feature class: '.concat(t))
                }),
                (u.prototype.doRender = function (t) {
                  return this._ctx.store.featureChanged(t)
                })
            },
            {
              '../constants': 23,
              '../feature_types/line_string': 26,
              '../feature_types/multi_feature': 27,
              '../feature_types/point': 28,
              '../feature_types/polygon': 29,
              '../lib/features_at': 37,
            },
          ],
          59: [
            function (t, e, r) {
              'use strict'
              var n = t('./mode_interface'),
                i = {
                  drag: 'onDrag',
                  click: 'onClick',
                  mousemove: 'onMouseMove',
                  mousedown: 'onMouseDown',
                  mouseup: 'onMouseUp',
                  mouseout: 'onMouseOut',
                  keyup: 'onKeyUp',
                  keydown: 'onKeyDown',
                  touchstart: 'onTouchStart',
                  touchmove: 'onTouchMove',
                  touchend: 'onTouchEnd',
                  tap: 'onTap',
                },
                o = Object.keys(i)
              e.exports = function (t) {
                var e = Object.keys(t)
                return function (r) {
                  function a(t) {
                    return function (e) {
                      u[t](l, e)
                    }
                  }
                  var s =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {},
                    l = {},
                    u = e.reduce(function (e, r) {
                      return (e[r] = t[r]), e
                    }, new n(r))
                  return {
                    start: function () {
                      var e = this
                      ;(l = u.onSetup(s)),
                        o.forEach(function (r) {
                          var n = i[r],
                            o = function () {
                              return !1
                            }
                          t[n] &&
                            (o = function () {
                              return !0
                            }),
                            e.on(r, o, a(n))
                        })
                    },
                    stop: function () {
                      u.onStop(l)
                    },
                    trash: function () {
                      u.onTrash(l)
                    },
                    combineFeatures: function () {
                      u.onCombineFeatures(l)
                    },
                    uncombineFeatures: function () {
                      u.onUncombineFeatures(l)
                    },
                    render: function (t, e) {
                      u.toDisplayFeatures(l, t, e)
                    },
                  }
                }
              }
            },
            { './mode_interface': 57 },
          ],
          60: [
            function (t, e, r) {
              'use strict'
              var n = t('../lib/common_selectors'),
                i = t('../lib/mouse_event_point'),
                o = t('../lib/create_supplementary_points'),
                a = t('../lib/string_set'),
                s = t('../lib/double_click_zoom'),
                l = t('../lib/move_features'),
                u = t('../constants'),
                c = {
                  onSetup: function (t) {
                    var e = this,
                      r = {
                        dragMoveLocation: null,
                        boxSelectStartLocation: null,
                        boxSelectElement: void 0,
                        boxSelecting: !1,
                        canBoxSelect: !1,
                        dragMoveing: !1,
                        canDragMove: !1,
                        initiallySelectedFeatureIds: t.featureIds || [],
                      }
                    return (
                      this.setSelected(
                        r.initiallySelectedFeatureIds.filter(function (t) {
                          return void 0 !== e.getFeature(t)
                        })
                      ),
                      this.fireActionable(),
                      this.setActionableState({
                        combineFeatures: !0,
                        uncombineFeatures: !0,
                        trash: !0,
                      }),
                      r
                    )
                  },
                  fireUpdate: function () {
                    this.map.fire(u.events.UPDATE, {
                      action: u.updateActions.MOVE,
                      features: this.getSelected().map(function (t) {
                        return t.toGeoJSON()
                      }),
                    })
                  },
                  fireActionable: function () {
                    var t = this,
                      e = this.getSelected(),
                      r = e.filter(function (e) {
                        return t.isInstanceOf('MultiFeature', e)
                      }),
                      n = !1
                    if (e.length > 1) {
                      n = !0
                      var i = e[0].type.replace('Multi', '')
                      e.forEach(function (t) {
                        t.type.replace('Multi', '') !== i && (n = !1)
                      })
                    }
                    var o = r.length > 0,
                      a = e.length > 0
                    this.setActionableState({
                      combineFeatures: n,
                      uncombineFeatures: o,
                      trash: a,
                    })
                  },
                  getUniqueIds: function (t) {
                    return t.length
                      ? t
                          .map(function (t) {
                            return t.properties.id
                          })
                          .filter(function (t) {
                            return void 0 !== t
                          })
                          .reduce(function (t, e) {
                            return t.add(e), t
                          }, new a())
                          .values()
                      : []
                  },
                  stopExtendedInteractions: function (t) {
                    t.boxSelectElement &&
                      (t.boxSelectElement.parentNode &&
                        t.boxSelectElement.parentNode.removeChild(
                          t.boxSelectElement
                        ),
                      (t.boxSelectElement = null)),
                      this.map.dragPan.enable(),
                      (t.boxSelecting = !1),
                      (t.canBoxSelect = !1),
                      (t.dragMoving = !1),
                      (t.canDragMove = !1)
                  },
                  onStop: function () {
                    s.enable(this)
                  },
                  onMouseMove: function (t) {
                    return this.stopExtendedInteractions(t)
                  },
                  onMouseOut: function (t) {
                    if (t.dragMoving) return this.fireUpdate()
                  },
                }
              ;(c.onTap = c.onClick = function (t, e) {
                return n.noTarget(e)
                  ? this.clickAnywhere(t, e)
                  : n.isOfMetaType(u.meta.VERTEX)(e)
                  ? this.clickOnVertex(t, e)
                  : n.isFeature(e)
                  ? this.clickOnFeature(t, e)
                  : void 0
              }),
                (c.clickAnywhere = function (t) {
                  var e = this,
                    r = this.getSelectedIds()
                  r.length &&
                    (this.clearSelectedFeatures(),
                    r.forEach(function (t) {
                      return e.doRender(t)
                    })),
                    s.enable(this),
                    this.stopExtendedInteractions(t)
                }),
                (c.clickOnVertex = function (t, e) {
                  this.changeMode(u.modes.DIRECT_SELECT, {
                    featureId: e.featureTarget.properties.parent,
                    coordPath: e.featureTarget.properties.coord_path,
                    startPos: e.lngLat,
                  }),
                    this.updateUIClasses({ mouse: u.cursors.MOVE })
                }),
                (c.startOnActiveFeature = function (t, e) {
                  this.stopExtendedInteractions(t),
                    this.map.dragPan.disable(),
                    this.doRender(e.featureTarget.properties.id),
                    (t.canDragMove = !0),
                    (t.dragMoveLocation = e.lngLat)
                }),
                (c.clickOnFeature = function (t, e) {
                  var r = this
                  s.disable(this), this.stopExtendedInteractions(t)
                  var i = n.isShiftDown(e),
                    o = this.getSelectedIds(),
                    a = e.featureTarget.properties.id,
                    l = this.isSelected(a)
                  if (
                    !i &&
                    l &&
                    this.getFeature(a).type !== u.geojsonTypes.POINT
                  )
                    return this.changeMode(u.modes.DIRECT_SELECT, {
                      featureId: a,
                    })
                  l && i
                    ? (this.deselect(a),
                      this.updateUIClasses({ mouse: u.cursors.POINTER }),
                      1 === o.length && s.enable(this))
                    : !l && i
                    ? (this.select(a),
                      this.updateUIClasses({ mouse: u.cursors.MOVE }))
                    : l ||
                      i ||
                      (o.forEach(function (t) {
                        return r.doRender(t)
                      }),
                      this.setSelected(a),
                      this.updateUIClasses({ mouse: u.cursors.MOVE })),
                    this.doRender(a)
                }),
                (c.onMouseDown = function (t, e) {
                  return n.isActiveFeature(e)
                    ? this.startOnActiveFeature(t, e)
                    : this.drawConfig.boxSelect && n.isShiftMousedown(e)
                    ? this.startBoxSelect(t, e)
                    : void 0
                }),
                (c.startBoxSelect = function (t, e) {
                  this.stopExtendedInteractions(t),
                    this.map.dragPan.disable(),
                    (t.boxSelectStartLocation = i(
                      e.originalEvent,
                      this.map.getContainer()
                    )),
                    (t.canBoxSelect = !0)
                }),
                (c.onTouchStart = function (t, e) {
                  if (n.isActiveFeature(e))
                    return this.startOnActiveFeature(t, e)
                }),
                (c.onDrag = function (t, e) {
                  return t.canDragMove
                    ? this.dragMove(t, e)
                    : this.drawConfig.boxSelect && t.canBoxSelect
                    ? this.whileBoxSelect(t, e)
                    : void 0
                }),
                (c.whileBoxSelect = function (t, e) {
                  ;(t.boxSelecting = !0),
                    this.updateUIClasses({ mouse: u.cursors.ADD }),
                    t.boxSelectElement ||
                      ((t.boxSelectElement = document.createElement('div')),
                      t.boxSelectElement.classList.add(u.classes.BOX_SELECT),
                      this.map.getContainer().appendChild(t.boxSelectElement))
                  var r = i(e.originalEvent, this.map.getContainer()),
                    n = Math.min(t.boxSelectStartLocation.x, r.x),
                    o = Math.max(t.boxSelectStartLocation.x, r.x),
                    a = Math.min(t.boxSelectStartLocation.y, r.y),
                    s = Math.max(t.boxSelectStartLocation.y, r.y),
                    l = 'translate('.concat(n, 'px, ').concat(a, 'px)')
                  ;(t.boxSelectElement.style.transform = l),
                    (t.boxSelectElement.style.WebkitTransform = l),
                    (t.boxSelectElement.style.width = ''.concat(o - n, 'px')),
                    (t.boxSelectElement.style.height = ''.concat(s - a, 'px'))
                }),
                (c.dragMove = function (t, e) {
                  ;(t.dragMoving = !0), e.originalEvent.stopPropagation()
                  var r = {
                    lng: e.lngLat.lng - t.dragMoveLocation.lng,
                    lat: e.lngLat.lat - t.dragMoveLocation.lat,
                  }
                  l(this.getSelected(), r), (t.dragMoveLocation = e.lngLat)
                }),
                (c.onMouseUp = function (t, e) {
                  var r = this
                  if (t.dragMoving) this.fireUpdate()
                  else if (t.boxSelecting) {
                    var n = [
                        t.boxSelectStartLocation,
                        i(e.originalEvent, this.map.getContainer()),
                      ],
                      o = this.featuresAt(null, n, 'click'),
                      a = this.getUniqueIds(o).filter(function (t) {
                        return !r.isSelected(t)
                      })
                    a.length &&
                      (this.select(a),
                      a.forEach(function (t) {
                        return r.doRender(t)
                      }),
                      this.updateUIClasses({ mouse: u.cursors.MOVE }))
                  }
                  this.stopExtendedInteractions(t)
                }),
                (c.toDisplayFeatures = function (t, e, r) {
                  ;(e.properties.active = this.isSelected(e.properties.id)
                    ? u.activeStates.ACTIVE
                    : u.activeStates.INACTIVE),
                    r(e),
                    this.fireActionable(),
                    e.properties.active === u.activeStates.ACTIVE &&
                      e.geometry.type !== u.geojsonTypes.POINT &&
                      o(e).forEach(r)
                }),
                (c.onTrash = function () {
                  this.deleteFeature(this.getSelectedIds()),
                    this.fireActionable()
                }),
                (c.onCombineFeatures = function () {
                  var t = this.getSelected()
                  if (!(0 === t.length || t.length < 2)) {
                    for (
                      var e = [],
                        r = [],
                        n = t[0].type.replace('Multi', ''),
                        i = 0;
                      i < t.length;
                      i++
                    ) {
                      var o = t[i]
                      if (o.type.replace('Multi', '') !== n) return
                      o.type.includes('Multi')
                        ? o.getCoordinates().forEach(function (t) {
                            e.push(t)
                          })
                        : e.push(o.getCoordinates()),
                        r.push(o.toGeoJSON())
                    }
                    if (r.length > 1) {
                      var a = this.newFeature({
                        type: u.geojsonTypes.FEATURE,
                        properties: r[0].properties,
                        geometry: { type: 'Multi'.concat(n), coordinates: e },
                      })
                      this.addFeature(a),
                        this.deleteFeature(this.getSelectedIds(), {
                          silent: !0,
                        }),
                        this.setSelected([a.id]),
                        this.map.fire(u.events.COMBINE_FEATURES, {
                          createdFeatures: [a.toGeoJSON()],
                          deletedFeatures: r,
                        })
                    }
                    this.fireActionable()
                  }
                }),
                (c.onUncombineFeatures = function () {
                  var t = this,
                    e = this.getSelected()
                  if (0 !== e.length) {
                    for (var r = [], n = [], i = 0; i < e.length; i++)
                      !(function (i) {
                        var o = e[i]
                        t.isInstanceOf('MultiFeature', o) &&
                          (o.getFeatures().forEach(function (e) {
                            t.addFeature(e),
                              (e.properties = o.properties),
                              r.push(e.toGeoJSON()),
                              t.select([e.id])
                          }),
                          t.deleteFeature(o.id, { silent: !0 }),
                          n.push(o.toGeoJSON()))
                      })(i)
                    r.length > 1 &&
                      this.map.fire(u.events.UNCOMBINE_FEATURES, {
                        createdFeatures: r,
                        deletedFeatures: n,
                      }),
                      this.fireActionable()
                  }
                }),
                (e.exports = c)
            },
            {
              '../constants': 23,
              '../lib/common_selectors': 30,
              '../lib/create_supplementary_points': 33,
              '../lib/double_click_zoom': 35,
              '../lib/mouse_event_point': 44,
              '../lib/move_features': 45,
              '../lib/string_set': 47,
            },
          ],
          61: [
            function (t, e, r) {
              'use strict'
              function n(t, e) {
                return t.map(function (t) {
                  return t.source
                    ? t
                    : i(t, {
                        id: ''.concat(t.id, '.').concat(e),
                        source: 'hot' === e ? o.sources.HOT : o.sources.COLD,
                      })
                })
              }
              var i = t('xtend'),
                o = t('./constants'),
                a = {
                  defaultMode: o.modes.SIMPLE_SELECT,
                  keybindings: !0,
                  touchEnabled: !0,
                  clickBuffer: 2,
                  touchBuffer: 25,
                  boxSelect: !0,
                  displayControlsDefault: !0,
                  styles: t('./lib/theme'),
                  modes: t('./modes'),
                  controls: {},
                  userProperties: !1,
                },
                s = {
                  point: !0,
                  line_string: !0,
                  polygon: !0,
                  trash: !0,
                  combine_features: !0,
                  uncombine_features: !0,
                },
                l = {
                  point: !1,
                  line_string: !1,
                  polygon: !1,
                  trash: !1,
                  combine_features: !1,
                  uncombine_features: !1,
                }
              e.exports = function () {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : {},
                  e = i(t)
                return (
                  t.controls || (e.controls = {}),
                  !1 === t.displayControlsDefault
                    ? (e.controls = i(l, t.controls))
                    : (e.controls = i(s, t.controls)),
                  ((e = i(a, e)).styles = n(e.styles, 'cold').concat(
                    n(e.styles, 'hot')
                  )),
                  e
                )
              }
            },
            { './constants': 23, './lib/theme': 49, './modes': 56, xtend: 21 },
          ],
          62: [
            function (t, e, r) {
              'use strict'
              var n = t('./constants')
              e.exports = function () {
                function t(t, e) {
                  var n = r.get(t).internal(i)
                  r.ctx.events.currentModeRender(n, function (t) {
                    r.sources[e].push(t)
                  })
                }
                function e() {
                  ;(r.isDirty = !1), r.clearChangedIds()
                }
                var r = this
                if (!r.ctx.map || void 0 === r.ctx.map.getSource(n.sources.HOT))
                  return e()
                var i = r.ctx.events.currentModeName()
                r.ctx.ui.queueMapClasses({ mode: i })
                var o = [],
                  a = []
                r.isDirty
                  ? (a = r.getAllIds())
                  : ((o = r.getChangedIds().filter(function (t) {
                      return void 0 !== r.get(t)
                    })),
                    (a = r.sources.hot
                      .filter(function (t) {
                        return (
                          t.properties.id &&
                          -1 === o.indexOf(t.properties.id) &&
                          void 0 !== r.get(t.properties.id)
                        )
                      })
                      .map(function (t) {
                        return t.properties.id
                      }))),
                  (r.sources.hot = [])
                var s = r.sources.cold.length
                r.sources.cold = r.isDirty
                  ? []
                  : r.sources.cold.filter(function (t) {
                      var e = t.properties.id || t.properties.parent
                      return -1 === o.indexOf(e)
                    })
                var l = s !== r.sources.cold.length || a.length > 0
                if (
                  (o.forEach(function (e) {
                    return t(e, 'hot')
                  }),
                  a.forEach(function (e) {
                    return t(e, 'cold')
                  }),
                  l &&
                    r.ctx.map
                      .getSource(n.sources.COLD)
                      .setData({
                        type: n.geojsonTypes.FEATURE_COLLECTION,
                        features: r.sources.cold,
                      }),
                  r.ctx.map
                    .getSource(n.sources.HOT)
                    .setData({
                      type: n.geojsonTypes.FEATURE_COLLECTION,
                      features: r.sources.hot,
                    }),
                  r._emitSelectionChange &&
                    (r.ctx.map.fire(n.events.SELECTION_CHANGE, {
                      features: r.getSelected().map(function (t) {
                        return t.toGeoJSON()
                      }),
                      points: r.getSelectedCoordinates().map(function (t) {
                        return {
                          type: n.geojsonTypes.FEATURE,
                          properties: {},
                          geometry: {
                            type: n.geojsonTypes.POINT,
                            coordinates: t.coordinates,
                          },
                        }
                      }),
                    }),
                    (r._emitSelectionChange = !1)),
                  r._deletedFeaturesToEmit.length)
                ) {
                  var u = r._deletedFeaturesToEmit.map(function (t) {
                    return t.toGeoJSON()
                  })
                  ;(r._deletedFeaturesToEmit = []),
                    r.ctx.map.fire(n.events.DELETE, { features: u })
                }
                e(), r.ctx.map.fire(n.events.RENDER, {})
              }
            },
            { './constants': 23 },
          ],
          63: [
            function (t, e, r) {
              'use strict'
              var n = t('./events'),
                i = t('./store'),
                o = t('./ui'),
                a = t('./constants'),
                s = t('xtend')
              e.exports = function (t) {
                var e = null,
                  r = null,
                  l = {
                    onRemove: function () {
                      return (
                        t.map.off('load', l.connect),
                        clearInterval(r),
                        l.removeLayers(),
                        t.store.restoreMapConfig(),
                        t.ui.removeButtons(),
                        t.events.removeEventListeners(),
                        t.ui.clearMapClasses(),
                        (t.map = null),
                        (t.container = null),
                        (t.store = null),
                        e && e.parentNode && e.parentNode.removeChild(e),
                        (e = null),
                        this
                      )
                    },
                    connect: function () {
                      t.map.off('load', l.connect),
                        clearInterval(r),
                        l.addLayers(),
                        t.store.storeMapConfig(),
                        t.events.addEventListeners()
                    },
                    onAdd: function (a) {
                      var u = a.fire
                      return (
                        (a.fire = function (t, e) {
                          var r = arguments
                          return (
                            1 === u.length &&
                              1 !== arguments.length &&
                              (r = [s({}, { type: t }, e)]),
                            u.apply(a, r)
                          )
                        }),
                        (t.map = a),
                        (t.events = n(t)),
                        (t.ui = o(t)),
                        (t.container = a.getContainer()),
                        (t.store = new i(t)),
                        (e = t.ui.addButtons()),
                        t.options.boxSelect &&
                          (a.boxZoom.disable(),
                          a.dragPan.disable(),
                          a.dragPan.enable()),
                        a.loaded()
                          ? l.connect()
                          : (a.on('load', l.connect),
                            (r = setInterval(function () {
                              a.loaded() && l.connect()
                            }, 16))),
                        t.events.start(),
                        e
                      )
                    },
                    addLayers: function () {
                      t.map.addSource(a.sources.COLD, {
                        data: {
                          type: a.geojsonTypes.FEATURE_COLLECTION,
                          features: [],
                        },
                        type: 'geojson',
                      }),
                        t.map.addSource(a.sources.HOT, {
                          data: {
                            type: a.geojsonTypes.FEATURE_COLLECTION,
                            features: [],
                          },
                          type: 'geojson',
                        }),
                        t.options.styles.forEach(function (e) {
                          t.map.addLayer(e)
                        }),
                        t.store.setDirty(!0),
                        t.store.render()
                    },
                    removeLayers: function () {
                      t.options.styles.forEach(function (e) {
                        t.map.getLayer(e.id) && t.map.removeLayer(e.id)
                      }),
                        t.map.getSource(a.sources.COLD) &&
                          t.map.removeSource(a.sources.COLD),
                        t.map.getSource(a.sources.HOT) &&
                          t.map.removeSource(a.sources.HOT)
                    },
                  }
                return (t.setup = l), l
              }
            },
            {
              './constants': 23,
              './events': 24,
              './store': 64,
              './ui': 65,
              xtend: 21,
            },
          ],
          64: [
            function (t, e, r) {
              'use strict'
              function n(t) {
                var e = this,
                  r = this._selectedCoordinates.filter(function (t) {
                    return e._selectedFeatureIds.has(t.feature_id)
                  })
                this._selectedCoordinates.length === r.length ||
                  t.silent ||
                  (this._emitSelectionChange = !0),
                  (this._selectedCoordinates = r)
              }
              var i = t('./lib/throttle'),
                o = t('./lib/to_dense_array'),
                a = t('./lib/string_set'),
                s = t('./render'),
                l = t('./constants').interactions,
                u = (e.exports = function (t) {
                  ;(this._features = {}),
                    (this._featureIds = new a()),
                    (this._selectedFeatureIds = new a()),
                    (this._selectedCoordinates = []),
                    (this._changedFeatureIds = new a()),
                    (this._deletedFeaturesToEmit = []),
                    (this._emitSelectionChange = !1),
                    (this._mapInitialConfig = {}),
                    (this.ctx = t),
                    (this.sources = { hot: [], cold: [] }),
                    (this.render = i(s, 16, this)),
                    (this.isDirty = !1)
                })
              ;(u.prototype.createRenderBatch = function () {
                var t = this,
                  e = this.render,
                  r = 0
                return (
                  (this.render = function () {
                    r++
                  }),
                  function () {
                    ;(t.render = e), r > 0 && t.render()
                  }
                )
              }),
                (u.prototype.setDirty = function () {
                  return (this.isDirty = !0), this
                }),
                (u.prototype.featureChanged = function (t) {
                  return this._changedFeatureIds.add(t), this
                }),
                (u.prototype.getChangedIds = function () {
                  return this._changedFeatureIds.values()
                }),
                (u.prototype.clearChangedIds = function () {
                  return this._changedFeatureIds.clear(), this
                }),
                (u.prototype.getAllIds = function () {
                  return this._featureIds.values()
                }),
                (u.prototype.add = function (t) {
                  return (
                    this.featureChanged(t.id),
                    (this._features[t.id] = t),
                    this._featureIds.add(t.id),
                    this
                  )
                }),
                (u.prototype.delete = function (t) {
                  var e = this,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {}
                  return (
                    o(t).forEach(function (t) {
                      e._featureIds.has(t) &&
                        (e._featureIds.delete(t),
                        e._selectedFeatureIds.delete(t),
                        r.silent ||
                          (-1 ===
                            e._deletedFeaturesToEmit.indexOf(e._features[t]) &&
                            e._deletedFeaturesToEmit.push(e._features[t])),
                        delete e._features[t],
                        (e.isDirty = !0))
                    }),
                    n.call(this, r),
                    this
                  )
                }),
                (u.prototype.get = function (t) {
                  return this._features[t]
                }),
                (u.prototype.getAll = function () {
                  var t = this
                  return Object.keys(this._features).map(function (e) {
                    return t._features[e]
                  })
                }),
                (u.prototype.select = function (t) {
                  var e = this,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {}
                  return (
                    o(t).forEach(function (t) {
                      e._selectedFeatureIds.has(t) ||
                        (e._selectedFeatureIds.add(t),
                        e._changedFeatureIds.add(t),
                        r.silent || (e._emitSelectionChange = !0))
                    }),
                    this
                  )
                }),
                (u.prototype.deselect = function (t) {
                  var e = this,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {}
                  return (
                    o(t).forEach(function (t) {
                      e._selectedFeatureIds.has(t) &&
                        (e._selectedFeatureIds.delete(t),
                        e._changedFeatureIds.add(t),
                        r.silent || (e._emitSelectionChange = !0))
                    }),
                    n.call(this, r),
                    this
                  )
                }),
                (u.prototype.clearSelected = function () {
                  var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : {}
                  return (
                    this.deselect(this._selectedFeatureIds.values(), {
                      silent: t.silent,
                    }),
                    this
                  )
                }),
                (u.prototype.setSelected = function (t) {
                  var e = this,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {}
                  return (
                    (t = o(t)),
                    this.deselect(
                      this._selectedFeatureIds.values().filter(function (e) {
                        return -1 === t.indexOf(e)
                      }),
                      { silent: r.silent }
                    ),
                    this.select(
                      t.filter(function (t) {
                        return !e._selectedFeatureIds.has(t)
                      }),
                      { silent: r.silent }
                    ),
                    this
                  )
                }),
                (u.prototype.setSelectedCoordinates = function (t) {
                  return (
                    (this._selectedCoordinates = t),
                    (this._emitSelectionChange = !0),
                    this
                  )
                }),
                (u.prototype.clearSelectedCoordinates = function () {
                  return (
                    (this._selectedCoordinates = []),
                    (this._emitSelectionChange = !0),
                    this
                  )
                }),
                (u.prototype.getSelectedIds = function () {
                  return this._selectedFeatureIds.values()
                }),
                (u.prototype.getSelected = function () {
                  var t = this
                  return this._selectedFeatureIds.values().map(function (e) {
                    return t.get(e)
                  })
                }),
                (u.prototype.getSelectedCoordinates = function () {
                  var t = this
                  return this._selectedCoordinates.map(function (e) {
                    return {
                      coordinates: t
                        .get(e.feature_id)
                        .getCoordinate(e.coord_path),
                    }
                  })
                }),
                (u.prototype.isSelected = function (t) {
                  return this._selectedFeatureIds.has(t)
                }),
                (u.prototype.setFeatureProperty = function (t, e, r) {
                  this.get(t).setProperty(e, r), this.featureChanged(t)
                }),
                (u.prototype.storeMapConfig = function () {
                  var t = this
                  l.forEach(function (e) {
                    t.ctx.map[e] &&
                      (t._mapInitialConfig[e] = t.ctx.map[e].isEnabled())
                  })
                }),
                (u.prototype.restoreMapConfig = function () {
                  var t = this
                  Object.keys(this._mapInitialConfig).forEach(function (e) {
                    t._mapInitialConfig[e]
                      ? t.ctx.map[e].enable()
                      : t.ctx.map[e].disable()
                  })
                }),
                (u.prototype.getInitialConfigValue = function (t) {
                  return (
                    void 0 === this._mapInitialConfig[t] ||
                    this._mapInitialConfig[t]
                  )
                })
            },
            {
              './constants': 23,
              './lib/string_set': 47,
              './lib/throttle': 50,
              './lib/to_dense_array': 51,
              './render': 62,
            },
          ],
          65: [
            function (t, e, r) {
              'use strict'
              var n = t('xtend'),
                i = t('./constants'),
                o = ['mode', 'feature', 'mouse']
              e.exports = function (t) {
                function e(t) {
                  h = n(h, t)
                }
                function r() {
                  if (t.container) {
                    var e = [],
                      r = []
                    o.forEach(function (t) {
                      h[t] !== p[t] &&
                        (e.push(''.concat(t, '-').concat(p[t])),
                        null !== h[t] && r.push(''.concat(t, '-').concat(h[t])))
                    }),
                      e.length > 0 &&
                        t.container.classList.remove.apply(
                          t.container.classList,
                          e
                        ),
                      r.length > 0 &&
                        t.container.classList.add.apply(
                          t.container.classList,
                          r
                        ),
                      (p = n(p, h))
                  }
                }
                function a(t) {
                  var e =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {},
                    r = document.createElement('button')
                  return (
                    (r.className = ''
                      .concat(i.classes.CONTROL_BUTTON, ' ')
                      .concat(e.className)),
                    r.setAttribute('title', e.title),
                    e.container.appendChild(r),
                    r.addEventListener(
                      'click',
                      function (r) {
                        r.preventDefault(),
                          r.stopPropagation(),
                          r.target !== c ? (l(t), e.onActivate()) : s()
                      },
                      !0
                    ),
                    r
                  )
                }
                function s() {
                  c && (c.classList.remove(i.classes.ACTIVE_BUTTON), (c = null))
                }
                function l(t) {
                  s()
                  var e = u[t]
                  e &&
                    e &&
                    'trash' !== t &&
                    (e.classList.add(i.classes.ACTIVE_BUTTON), (c = e))
                }
                var u = {},
                  c = null,
                  p = { mode: null, feature: null, mouse: null },
                  h = { mode: null, feature: null, mouse: null }
                return {
                  setActiveButton: l,
                  queueMapClasses: e,
                  updateMapClasses: r,
                  clearMapClasses: function () {
                    e({ mode: null, feature: null, mouse: null }), r()
                  },
                  addButtons: function () {
                    var e = t.options.controls,
                      r = document.createElement('div')
                    return (
                      (r.className = ''
                        .concat(i.classes.CONTROL_GROUP, ' ')
                        .concat(i.classes.CONTROL_BASE)),
                      e
                        ? (e[i.types.LINE] &&
                            (u[i.types.LINE] = a(i.types.LINE, {
                              container: r,
                              className: i.classes.CONTROL_BUTTON_LINE,
                              title: 'LineString tool '.concat(
                                t.options.keybindings ? '(l)' : ''
                              ),
                              onActivate: function () {
                                return t.events.changeMode(
                                  i.modes.DRAW_LINE_STRING
                                )
                              },
                            })),
                          e[i.types.POLYGON] &&
                            (u[i.types.POLYGON] = a(i.types.POLYGON, {
                              container: r,
                              className: i.classes.CONTROL_BUTTON_POLYGON,
                              title: 'Polygon tool '.concat(
                                t.options.keybindings ? '(p)' : ''
                              ),
                              onActivate: function () {
                                return t.events.changeMode(i.modes.DRAW_POLYGON)
                              },
                            })),
                          e[i.types.POINT] &&
                            (u[i.types.POINT] = a(i.types.POINT, {
                              container: r,
                              className: i.classes.CONTROL_BUTTON_POINT,
                              title: 'Marker tool '.concat(
                                t.options.keybindings ? '(m)' : ''
                              ),
                              onActivate: function () {
                                return t.events.changeMode(i.modes.DRAW_POINT)
                              },
                            })),
                          e.trash &&
                            (u.trash = a('trash', {
                              container: r,
                              className: i.classes.CONTROL_BUTTON_TRASH,
                              title: 'Delete',
                              onActivate: function () {
                                t.events.trash()
                              },
                            })),
                          e.combine_features &&
                            (u.combine_features = a('combineFeatures', {
                              container: r,
                              className:
                                i.classes.CONTROL_BUTTON_COMBINE_FEATURES,
                              title: 'Combine',
                              onActivate: function () {
                                t.events.combineFeatures()
                              },
                            })),
                          e.uncombine_features &&
                            (u.uncombine_features = a('uncombineFeatures', {
                              container: r,
                              className:
                                i.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,
                              title: 'Uncombine',
                              onActivate: function () {
                                t.events.uncombineFeatures()
                              },
                            })),
                          r)
                        : r
                    )
                  },
                  removeButtons: function () {
                    Object.keys(u).forEach(function (t) {
                      var e = u[t]
                      e.parentNode && e.parentNode.removeChild(e), delete u[t]
                    })
                  },
                }
              }
            },
            { './constants': 23, xtend: 21 },
          ],
        },
        {},
        [1]
      )(1)
    }.call(this, r(3)))
  },
  function (t, e, r) {
    ;(function (t) {
      var n =
          (void 0 !== t && t) || ('undefined' != typeof self && self) || window,
        i = Function.prototype.apply
      function o(t, e) {
        ;(this._id = t), (this._clearFn = e)
      }
      ;(e.setTimeout = function () {
        return new o(i.call(setTimeout, n, arguments), clearTimeout)
      }),
        (e.setInterval = function () {
          return new o(i.call(setInterval, n, arguments), clearInterval)
        }),
        (e.clearTimeout = e.clearInterval = function (t) {
          t && t.close()
        }),
        (o.prototype.unref = o.prototype.ref = function () {}),
        (o.prototype.close = function () {
          this._clearFn.call(n, this._id)
        }),
        (e.enroll = function (t, e) {
          clearTimeout(t._idleTimeoutId), (t._idleTimeout = e)
        }),
        (e.unenroll = function (t) {
          clearTimeout(t._idleTimeoutId), (t._idleTimeout = -1)
        }),
        (e._unrefActive = e.active = function (t) {
          clearTimeout(t._idleTimeoutId)
          var e = t._idleTimeout
          e >= 0 &&
            (t._idleTimeoutId = setTimeout(function () {
              t._onTimeout && t._onTimeout()
            }, e))
        }),
        r(9),
        (e.setImmediate =
          ('undefined' != typeof self && self.setImmediate) ||
          (void 0 !== t && t.setImmediate) ||
          (this && this.setImmediate)),
        (e.clearImmediate =
          ('undefined' != typeof self && self.clearImmediate) ||
          (void 0 !== t && t.clearImmediate) ||
          (this && this.clearImmediate))
    }.call(this, r(3)))
  },
  function (t, e, r) {
    ;(function (t, e) {
      !(function (t, r) {
        'use strict'
        if (!t.setImmediate) {
          var n,
            i,
            o,
            a,
            s,
            l = 1,
            u = {},
            c = !1,
            p = t.document,
            h = Object.getPrototypeOf && Object.getPrototypeOf(t)
          ;(h = h && h.setTimeout ? h : t),
            '[object process]' === {}.toString.call(t.process)
              ? (n = function (t) {
                  e.nextTick(function () {
                    d(t)
                  })
                })
              : !(function () {
                  if (t.postMessage && !t.importScripts) {
                    var e = !0,
                      r = t.onmessage
                    return (
                      (t.onmessage = function () {
                        e = !1
                      }),
                      t.postMessage('', '*'),
                      (t.onmessage = r),
                      e
                    )
                  }
                })()
              ? t.MessageChannel
                ? (((o = new MessageChannel()).port1.onmessage = function (t) {
                    d(t.data)
                  }),
                  (n = function (t) {
                    o.port2.postMessage(t)
                  }))
                : p && 'onreadystatechange' in p.createElement('script')
                ? ((i = p.documentElement),
                  (n = function (t) {
                    var e = p.createElement('script')
                    ;(e.onreadystatechange = function () {
                      d(t),
                        (e.onreadystatechange = null),
                        i.removeChild(e),
                        (e = null)
                    }),
                      i.appendChild(e)
                  }))
                : (n = function (t) {
                    setTimeout(d, 0, t)
                  })
              : ((a = 'setImmediate$' + Math.random() + '$'),
                (s = function (e) {
                  e.source === t &&
                    'string' == typeof e.data &&
                    0 === e.data.indexOf(a) &&
                    d(+e.data.slice(a.length))
                }),
                t.addEventListener
                  ? t.addEventListener('message', s, !1)
                  : t.attachEvent('onmessage', s),
                (n = function (e) {
                  t.postMessage(a + e, '*')
                })),
            (h.setImmediate = function (t) {
              'function' != typeof t && (t = new Function('' + t))
              for (
                var e = new Array(arguments.length - 1), r = 0;
                r < e.length;
                r++
              )
                e[r] = arguments[r + 1]
              var i = { callback: t, args: e }
              return (u[l] = i), n(l), l++
            }),
            (h.clearImmediate = f)
        }
        function f(t) {
          delete u[t]
        }
        function d(t) {
          if (c) setTimeout(d, 0, t)
          else {
            var e = u[t]
            if (e) {
              c = !0
              try {
                !(function (t) {
                  var e = t.callback,
                    r = t.args
                  switch (r.length) {
                    case 0:
                      e()
                      break
                    case 1:
                      e(r[0])
                      break
                    case 2:
                      e(r[0], r[1])
                      break
                    case 3:
                      e(r[0], r[1], r[2])
                      break
                    default:
                      e.apply(void 0, r)
                  }
                })(e)
              } finally {
                f(t), (c = !1)
              }
            }
          }
        }
      })('undefined' == typeof self ? (void 0 === t ? this : t) : self)
    }.call(this, r(3), r(10)))
  },
  function (t, e) {
    var r,
      n,
      i = (t.exports = {})
    function o() {
      throw new Error('setTimeout has not been defined')
    }
    function a() {
      throw new Error('clearTimeout has not been defined')
    }
    function s(t) {
      if (r === setTimeout) return setTimeout(t, 0)
      if ((r === o || !r) && setTimeout)
        return (r = setTimeout), setTimeout(t, 0)
      try {
        return r(t, 0)
      } catch (e) {
        try {
          return r.call(null, t, 0)
        } catch (e) {
          return r.call(this, t, 0)
        }
      }
    }
    !(function () {
      try {
        r = 'function' == typeof setTimeout ? setTimeout : o
      } catch (t) {
        r = o
      }
      try {
        n = 'function' == typeof clearTimeout ? clearTimeout : a
      } catch (t) {
        n = a
      }
    })()
    var l,
      u = [],
      c = !1,
      p = -1
    function h() {
      c &&
        l &&
        ((c = !1), l.length ? (u = l.concat(u)) : (p = -1), u.length && f())
    }
    function f() {
      if (!c) {
        var t = s(h)
        c = !0
        for (var e = u.length; e; ) {
          for (l = u, u = []; ++p < e; ) l && l[p].run()
          ;(p = -1), (e = u.length)
        }
        ;(l = null),
          (c = !1),
          (function (t) {
            if (n === clearTimeout) return clearTimeout(t)
            if ((n === a || !n) && clearTimeout)
              return (n = clearTimeout), clearTimeout(t)
            try {
              n(t)
            } catch (e) {
              try {
                return n.call(null, t)
              } catch (e) {
                return n.call(this, t)
              }
            }
          })(t)
      }
    }
    function d(t, e) {
      ;(this.fun = t), (this.array = e)
    }
    function m() {}
    ;(i.nextTick = function (t) {
      var e = new Array(arguments.length - 1)
      if (arguments.length > 1)
        for (var r = 1; r < arguments.length; r++) e[r - 1] = arguments[r]
      u.push(new d(t, e)), 1 !== u.length || c || s(f)
    }),
      (d.prototype.run = function () {
        this.fun.apply(null, this.array)
      }),
      (i.title = 'browser'),
      (i.browser = !0),
      (i.env = {}),
      (i.argv = []),
      (i.version = ''),
      (i.versions = {}),
      (i.on = m),
      (i.addListener = m),
      (i.once = m),
      (i.off = m),
      (i.removeListener = m),
      (i.removeAllListeners = m),
      (i.emit = m),
      (i.prependListener = m),
      (i.prependOnceListener = m),
      (i.listeners = function (t) {
        return []
      }),
      (i.binding = function (t) {
        throw new Error('process.binding is not supported')
      }),
      (i.cwd = function () {
        return '/'
      }),
      (i.chdir = function (t) {
        throw new Error('process.chdir is not supported')
      }),
      (i.umask = function () {
        return 0
      })
  },
  function (t, e, r) {
    'use strict'
    var n = r(5)
    r.n(n).a
  },
  function (t, e, r) {
    ;(e = r(13)(!1)).push([
      t.i,
      '\n#map[data-v-738ab9dc] {\n  width: 100%;\n  height: 500px;\n}\n',
      '',
    ]),
      (t.exports = e)
  },
  function (t, e, r) {
    'use strict'
    t.exports = function (t) {
      var e = []
      return (
        (e.toString = function () {
          return this.map(function (e) {
            var r = (function (t, e) {
              var r = t[1] || '',
                n = t[3]
              if (!n) return r
              if (e && 'function' == typeof btoa) {
                var i =
                    ((a = n),
                    (s = btoa(unescape(encodeURIComponent(JSON.stringify(a))))),
                    (l = 'sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(
                      s
                    )),
                    '/*# '.concat(l, ' */')),
                  o = n.sources.map(function (t) {
                    return '/*# sourceURL='
                      .concat(n.sourceRoot || '')
                      .concat(t, ' */')
                  })
                return [r].concat(o).concat([i]).join('\n')
              }
              var a, s, l
              return [r].join('\n')
            })(e, t)
            return e[2] ? '@media '.concat(e[2], ' {').concat(r, '}') : r
          }).join('')
        }),
        (e.i = function (t, r, n) {
          'string' == typeof t && (t = [[null, t, '']])
          var i = {}
          if (n)
            for (var o = 0; o < this.length; o++) {
              var a = this[o][0]
              null != a && (i[a] = !0)
            }
          for (var s = 0; s < t.length; s++) {
            var l = [].concat(t[s])
            ;(n && i[l[0]]) ||
              (r &&
                (l[2]
                  ? (l[2] = ''.concat(r, ' and ').concat(l[2]))
                  : (l[2] = r)),
              e.push(l))
          }
        }),
        e
      )
    }
  },
  function (t, e, r) {
    'use strict'
    r.r(e)
    var n = r(1),
      i = function () {
        var t = this,
          e = t.$createElement
        return (t._self._c || e)('mapbox', {
          attrs: {
            'access-token': t.accessToken,
            'map-options': {
              style: 'mapbox://styles/mapbox/light-v9',
              center: [-96, 37.8],
              zoom: 3,
            },
            'geolocate-control': { show: !0, position: 'top-left' },
            'scale-control': { show: !0, position: 'top-left' },
            'fullscreen-control': { show: !0, position: 'top-left' },
          },
          on: {
            'map-load': t.loaded,
            'map-init': t.initalized,
            'map-click:points': t.clicked,
            'map-mouseenter:points': t.mouseEntered,
            'map-mouseleave:points': t.mouseLeft,
            'geolocate-error': t.geolocateError,
            'geolocate-geolocate': t.geolocate,
          },
        })
      }
    i._withStripped = !0
    var o = r(6),
      a = r.n(o),
      s = function () {
        var t = this.$createElement
        return (this._self._c || t)('div', {
          attrs: {
            id: Object.prototype.hasOwnProperty.call(
              this.mapOptions,
              'container'
            )
              ? this.mapOptions.container
              : 'map',
          },
        })
      }
    function l(t, e, r, n, i, o, a, s) {
      var l,
        u = 'function' == typeof t ? t.options : t
      if (
        (e && ((u.render = e), (u.staticRenderFns = r), (u._compiled = !0)),
        n && (u.functional = !0),
        o && (u._scopeId = 'data-v-' + o),
        a
          ? ((l = function (t) {
              ;(t =
                t ||
                (this.$vnode && this.$vnode.ssrContext) ||
                (this.parent &&
                  this.parent.$vnode &&
                  this.parent.$vnode.ssrContext)) ||
                'undefined' == typeof __VUE_SSR_CONTEXT__ ||
                (t = __VUE_SSR_CONTEXT__),
                i && i.call(this, t),
                t && t._registeredComponents && t._registeredComponents.add(a)
            }),
            (u._ssrRegister = l))
          : i &&
            (l = s
              ? function () {
                  i.call(this, this.$root.$options.shadowRoot)
                }
              : i),
        l)
      )
        if (u.functional) {
          u._injectStyles = l
          var c = u.render
          u.render = function (t, e) {
            return l.call(e), c(t, e)
          }
        } else {
          var p = u.beforeCreate
          u.beforeCreate = p ? [].concat(p, l) : [l]
        }
      return { exports: t, options: u }
    }
    s._withStripped = !0
    var u = l(r(4).a, s, [], !1, null, null, null)
    u.options.__file = 'src/Mapbox.vue'
    var c = u.exports,
      p = r(0),
      h = r(2),
      f = function () {
        var t = this.$createElement,
          e = this._self._c || t
        return e('div', [
          e('h3', [this._v(this._s(this.feature.properties.title))]),
          this._v(' '),
          e('button', { on: { click: this.popupClicked } }, [
            this._v('Learn more'),
          ]),
        ])
      }
    f._withStripped = !0
    var d,
      m =
        ((d = function (t, e) {
          return (d =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e
              }) ||
            function (t, e) {
              for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r])
            })(t, e)
        }),
        function (t, e) {
          function r() {
            this.constructor = t
          }
          d(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((r.prototype = e.prototype), new r()))
        }),
      y = function (t, e, r, n) {
        var i,
          o = arguments.length,
          a =
            o < 3
              ? e
              : null === n
              ? (n = Object.getOwnPropertyDescriptor(e, r))
              : n
        if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
          a = Reflect.decorate(t, e, r, n)
        else
          for (var s = t.length - 1; s >= 0; s--)
            (i = t[s]) &&
              (a = (o < 3 ? i(a) : o > 3 ? i(e, r, a) : i(e, r)) || a)
        return o > 3 && a && Object.defineProperty(e, r, a), a
      },
      v = l(
        (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this
          }
          return (
            m(e, t),
            (e.prototype.popupClicked = function () {
              alert('Learn more clicked')
            }),
            y([Object(h.b)({ required: !0 })], e.prototype, 'feature', void 0),
            (e = y([p.b], e))
          )
        })(n.a),
        f,
        [],
        !1,
        null,
        null,
        null
      )
    v.options.__file = 'src/PopupContent.vue'
    var g = v.exports,
      _ = r(7),
      x = r.n(_),
      b = (function () {
        var t = function (e, r) {
          return (t =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e
              }) ||
            function (t, e) {
              for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r])
            })(e, r)
        }
        return function (e, r) {
          function n() {
            this.constructor = e
          }
          t(e, r),
            (e.prototype =
              null === r
                ? Object.create(r)
                : ((n.prototype = r.prototype), new n()))
        }
      })(),
      w = function (t, e, r, n) {
        var i,
          o = arguments.length,
          a =
            o < 3
              ? e
              : null === n
              ? (n = Object.getOwnPropertyDescriptor(e, r))
              : n
        if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
          a = Reflect.decorate(t, e, r, n)
        else
          for (var s = t.length - 1; s >= 0; s--)
            (i = t[s]) &&
              (a = (o < 3 ? i(a) : o > 3 ? i(e, r, a) : i(e, r)) || a)
        return o > 3 && a && Object.defineProperty(e, r, a), a
      },
      E = (function (t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this
        }
        return (
          b(e, t),
          (e.prototype.initalized = function (t) {
            console.log('Map Initalized')
            var e = new x.a()
            t.addControl(e, 'top-right')
          }),
          (e.prototype.loaded = function (t) {
            t.addLayer({
              id: 'points',
              type: 'symbol',
              source: {
                type: 'geojson',
                data: {
                  type: 'FeatureCollection',
                  features: [
                    {
                      type: 'Feature',
                      geometry: {
                        type: 'Point',
                        coordinates: [-77.03238901390978, 38.913188059745586],
                      },
                      properties: { title: 'Mapbox DC', icon: 'monument' },
                    },
                    {
                      type: 'Feature',
                      geometry: {
                        type: 'Point',
                        coordinates: [-122.414, 37.776],
                      },
                      properties: { title: 'Mapbox SF', icon: 'harbor' },
                    },
                  ],
                },
              },
              layout: {
                'icon-image': '{icon}-15',
                'text-field': '{title}',
                'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],
                'text-offset': [0, 0.6],
                'text-anchor': 'top',
              },
            })
          }),
          (e.prototype.clicked = function (t, e) {
            if (e.features) {
              for (
                var r = e.features[0].geometry.coordinates.slice();
                Math.abs(e.lngLat.lng - r[0]) > 180;

              )
                r[0] += e.lngLat.lng > r[0] ? 360 : -360
              new a.a.Popup()
                .setLngLat({ lng: r[0], lat: r[1] })
                .setHTML('<div id="vue-popup-content"></div>')
                .addTo(t),
                new g({ propsData: { feature: e.features[0] } }).$mount(
                  '#vue-popup-content'
                )
            }
          }),
          (e.prototype.mouseEntered = function (t) {
            t.getCanvas().style.cursor = 'pointer'
          }),
          (e.prototype.mouseLeft = function (t) {
            t.getCanvas().style.cursor = ''
          }),
          (e.prototype.geolocateError = function (t, e) {
            console.log(e)
          }),
          (e.prototype.geolocate = function (t, e) {
            console.log(
              'User position: ' + e.coords.latitude + ', ' + e.coords.longitude
            )
          }),
          w(
            [Object(h.b)({ required: !0 })],
            e.prototype,
            'accessToken',
            void 0
          ),
          (e = w([Object(p.b)({ components: { Mapbox: c } })], e))
        )
      })(n.a),
      S = (r(11), l(E, i, [], !1, null, '738ab9dc', null))
    S.options.__file = 'src/Demo.vue'
    var T = S.exports
    new n.a({
      render: function (t) {
        return t(T, { props: { accessToken: void 0 } })
      },
    }).$mount('#app')
  },
  function (t, e, r) {
    'use strict'
    function n(t, e) {
      for (var r = [], n = {}, i = 0; i < e.length; i++) {
        var o = e[i],
          a = o[0],
          s = { id: t + ':' + i, css: o[1], media: o[2], sourceMap: o[3] }
        n[a] ? n[a].parts.push(s) : r.push((n[a] = { id: a, parts: [s] }))
      }
      return r
    }
    r.r(e),
      r.d(e, 'default', function () {
        return f
      })
    var i = 'undefined' != typeof document
    if ('undefined' != typeof DEBUG && DEBUG && !i)
      throw new Error(
        "vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment."
      )
    var o = {},
      a = i && (document.head || document.getElementsByTagName('head')[0]),
      s = null,
      l = 0,
      u = !1,
      c = function () {},
      p = null,
      h =
        'undefined' != typeof navigator &&
        /msie [6-9]\b/.test(navigator.userAgent.toLowerCase())
    function f(t, e, r, i) {
      ;(u = r), (p = i || {})
      var a = n(t, e)
      return (
        d(a),
        function (e) {
          for (var r = [], i = 0; i < a.length; i++) {
            var s = a[i]
            ;(l = o[s.id]).refs--, r.push(l)
          }
          e ? d((a = n(t, e))) : (a = [])
          for (i = 0; i < r.length; i++) {
            var l
            if (0 === (l = r[i]).refs) {
              for (var u = 0; u < l.parts.length; u++) l.parts[u]()
              delete o[l.id]
            }
          }
        }
      )
    }
    function d(t) {
      for (var e = 0; e < t.length; e++) {
        var r = t[e],
          n = o[r.id]
        if (n) {
          n.refs++
          for (var i = 0; i < n.parts.length; i++) n.parts[i](r.parts[i])
          for (; i < r.parts.length; i++) n.parts.push(y(r.parts[i]))
          n.parts.length > r.parts.length && (n.parts.length = r.parts.length)
        } else {
          var a = []
          for (i = 0; i < r.parts.length; i++) a.push(y(r.parts[i]))
          o[r.id] = { id: r.id, refs: 1, parts: a }
        }
      }
    }
    function m() {
      var t = document.createElement('style')
      return (t.type = 'text/css'), a.appendChild(t), t
    }
    function y(t) {
      var e,
        r,
        n = document.querySelector('style[data-vue-ssr-id~="' + t.id + '"]')
      if (n) {
        if (u) return c
        n.parentNode.removeChild(n)
      }
      if (h) {
        var i = l++
        ;(n = s || (s = m())),
          (e = _.bind(null, n, i, !1)),
          (r = _.bind(null, n, i, !0))
      } else
        (n = m()),
          (e = x.bind(null, n)),
          (r = function () {
            n.parentNode.removeChild(n)
          })
      return (
        e(t),
        function (n) {
          if (n) {
            if (
              n.css === t.css &&
              n.media === t.media &&
              n.sourceMap === t.sourceMap
            )
              return
            e((t = n))
          } else r()
        }
      )
    }
    var v,
      g =
        ((v = []),
        function (t, e) {
          return (v[t] = e), v.filter(Boolean).join('\n')
        })
    function _(t, e, r, n) {
      var i = r ? '' : n.css
      if (t.styleSheet) t.styleSheet.cssText = g(e, i)
      else {
        var o = document.createTextNode(i),
          a = t.childNodes
        a[e] && t.removeChild(a[e]),
          a.length ? t.insertBefore(o, a[e]) : t.appendChild(o)
      }
    }
    function x(t, e) {
      var r = e.css,
        n = e.media,
        i = e.sourceMap
      if (
        (n && t.setAttribute('media', n),
        p.ssrId && t.setAttribute('data-vue-ssr-id', e.id),
        i &&
          ((r += '\n/*# sourceURL=' + i.sources[0] + ' */'),
          (r +=
            '\n/*# sourceMappingURL=data:application/json;base64,' +
            btoa(unescape(encodeURIComponent(JSON.stringify(i)))) +
            ' */')),
        t.styleSheet)
      )
        t.styleSheet.cssText = r
      else {
        for (; t.firstChild; ) t.removeChild(t.firstChild)
        t.appendChild(document.createTextNode(r))
      }
    }
  },
])
